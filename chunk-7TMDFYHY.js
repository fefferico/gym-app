import{a as Te}from"./chunk-766NS7C4.js";import{a as Ie}from"./chunk-6LLSNMWS.js";import{a as U}from"./chunk-UQAZVU5H.js";import{h as Pe}from"./chunk-5RQLNZIN.js";import{a as Ae}from"./chunk-6N5UHQ46.js";import{b as L,c as Be}from"./chunk-LXNBO5D2.js";import{a as Ce}from"./chunk-RJXQXHWR.js";import{A as $,Ab as ne,Ac as Fe,Bb as oe,Da as F,Db as O,Ea as f,Eb as M,Fa as v,G as H,M as g,Ma as T,O as k,Oa as te,P as _,Pb as ae,Q as y,Qa as n,Qb as V,R as C,Ra as w,Sa as b,V as E,Vb as le,Wb as se,Xb as h,Yb as me,Zb as de,_ as A,a as X,ac as pe,b as Z,bb as K,bc as ce,da as l,dc as ge,ec as ue,f as z,gb as I,gc as fe,hb as J,hc as xe,ib as re,ic as ve,jc as he,kb as q,kc as be,la as B,lc as ye,mb as P,nc as Se,pc as ke,q as Q,qa as x,qc as _e,rc as we,sc as Ee,tb as ie,tc as R,ub as D,va as ee,vb as N,w as W,wa as m,xa as t,ya as e,z as Y,za as c}from"./chunk-H67LMWAW.js";var De=(a,i)=>({"bg-primary hover:bg-primary-dark text-white border-primary dark:border-primary":a,"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700":i});function Re(a,i){if(a&1&&(t(0,"option",63),n(1),e()),a&2){let r=i.$implicit;m("value",r.value),l(),b("",r.label," ")}}function Le(a,i){a&1&&(t(0,"div",67),n(1," Must be 1-20s. "),e())}function Ue(a,i){if(a&1&&(t(0,"div",9)(1,"label",64),n(2,"Countdown From (seconds)"),e(),c(3,"input",65),x(4,Le,2,0,"div",66),e()),a&2){let r,o=v();l(4),m("ngIf",((r=o.appSettingsForm.get("countdownSoundSeconds"))==null?null:r.invalid)&&((r=o.appSettingsForm.get("countdownSoundSeconds"))==null?null:r.touched))}}function Ge(a,i){a&1&&(t(0,"div",67),n(1," Must be 3-60s. "),e())}function je(a,i){if(a&1&&(t(0,"div")(1,"label",68),n(2,"Pre-Set Timer Duration (seconds)"),e(),c(3,"input",69),x(4,Ge,2,0,"div",66),e()),a&2){let r,o=v();l(4),m("ngIf",((r=o.appSettingsForm.get("presetTimerDurationSeconds"))==null?null:r.invalid)&&((r=o.appSettingsForm.get("presetTimerDurationSeconds"))==null?null:r.touched))}}function We(a,i){if(a&1&&(t(0,"div")(1,"div")(2,"h3",34),n(3,"Pre-Set Timer after rest"),e(),t(4,"p",35),n(5,"Show the countdown after each rest ends."),e()(),t(6,"label",70)(7,"span",43),n(8,"Toggle Pre-Set Timer after rest"),e(),c(9,"input",71)(10,"div",38),t(11,"span",39),n(12),e()()()),a&2){let r,o=v();l(12),b(" ",(r=o.appSettingsForm.get("enablePresetTimerAfterRest"))!=null&&r.value?"On":"Off"," ")}}var G=class a{fb=g(Se);workoutService=g(Ee);trackingService=g(L);trainingProgramService=g(Ce);storageService=g(we);unitsService=g(U);alertService=g(_e);spinnerService=g(Fe);themeService=g(Be);userProfileService=g(Te);appSettingsService=g(Ie);platformId=g(A);toastService=g(R);profileForm;appSettingsForm;currentUnit=this.unitsService.currentUnit;genders=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"},{label:"Prefer not to say",value:"prefer_not_to_say"}];BACKUP_VERSION=2;constructor(){this.profileForm=this.fb.group({username:[""],gender:[null],measurements:this.fb.group({heightCm:[null,[h.min(0)]],weightKg:[null,[h.min(0)]],age:[null,[h.min(0),h.max(150)]],chestCm:[null,[h.min(0)]],waistCm:[null,[h.min(0)]],hipsCm:[null,[h.min(0)]],rightArmCm:[null,[h.min(0)]]})}),this.appSettingsForm=this.fb.group({enableTimerCountdownSound:[!0],countdownSoundSeconds:[5,[h.required,h.min(1),h.max(60)]],enablePresetTimer:[!1],enablePresetTimerAfterRest:[!1],presetTimerDurationSeconds:[10,[h.required,h.min(3),h.max(60)]]})}ngOnInit(){M(this.platformId)&&window.scrollTo(0,0),this.loadProfileData(),this.loadAppSettingsData(),this.profileForm.valueChanges.pipe(Y(700),W(()=>this.profileForm.valid&&this.profileForm.dirty),H(i=>{console.log("Auto-saving profile...",i),this.userProfileService.saveProfile(i),this.profileForm.markAsPristine({onlySelf:!1}),this.toastService.info("Profile auto-saved",1500)})).subscribe(),this.appSettingsForm.valueChanges.pipe(Y(700),W(()=>this.appSettingsForm.valid&&this.appSettingsForm.dirty),H(i=>{console.log("Auto-saving app settings...",i),this.appSettingsService.saveSettings(i),this.appSettingsForm.markAsPristine({onlySelf:!1}),this.toastService.info("App settings auto-saved",1500)})).subscribe()}loadProfileData(){let i=this.userProfileService.getProfile();i?this.profileForm.reset(i,{emitEvent:!1}):this.profileForm.reset({username:"",gender:null,measurements:{heightCm:null,weightKg:null,age:null,chestCm:null,waistCm:null,hipsCm:null,rightArmCm:null}},{emitEvent:!1})}loadAppSettingsData(){let i=this.appSettingsService.getSettings();this.appSettingsForm.reset(i,{emitEvent:!1})}saveProfileSettings(){if(this.profileForm.invalid){this.toastService.error("Please correct errors in the profile form.",3e3,"Validation Error"),this.profileForm.markAllAsTouched();return}this.userProfileService.saveProfile(this.profileForm.value),this.profileForm.markAsPristine(),this.toastService.success("Profile saved successfully!",2e3)}saveAppSettings(){if(this.appSettingsForm.invalid){this.toastService.error("Please correct errors in the app settings form.",3e3,"Validation Error"),this.appSettingsForm.markAllAsTouched();return}this.appSettingsService.saveSettings(this.appSettingsForm.value),this.appSettingsForm.markAsPristine(),this.toastService.success("App settings saved successfully!",2e3)}selectUnit(i){this.unitsService.setUnitPreference(i)}exportData(){this.spinnerService.show("Exporting data...");let i={version:this.BACKUP_VERSION,timestamp:new Date().toISOString(),profile:this.userProfileService.getDataForBackup(),appSettings:this.appSettingsService.getDataForBackup(),routines:this.workoutService.getDataForBackup(),workoutLogs:this.trackingService.getLogsForBackup(),personalBests:this.trackingService.getPBsForBackup()},r=JSON.stringify(i,null,2),o=new Blob([r],{type:"application/json"}),s=URL.createObjectURL(o),d=document.createElement("a"),u=Pe(new Date,"yyyyMMdd_HHmmss");d.download=`FitTrackPro_backup_v${this.BACKUP_VERSION}_${u}.json`,d.href=s,d.click(),URL.revokeObjectURL(s),this.spinnerService.hide(),this.toastService.success("Data export initiated.",3e3)}importData(i){let r=i.target,o=r.files?.[0];if(!o)return;if(o.type!=="application/json"){this.alertService.showAlert("Error","Invalid file type. Please select a JSON file."),r.value="";return}let s=new FileReader;s.onload=d=>{try{let u=d.target?.result,p=JSON.parse(u);if(typeof p!="object"||p===null){this.alertService.showAlert("Error","Invalid backup file format. Expected an object."),r.value="";return}if(p.version===2){if(!p.routines||!p.workoutLogs||!p.personalBests||p.profile===void 0||p.appSettings===void 0){this.alertService.showAlert("Error","Invalid V2 backup file content. Missing essential data sections."),r.value="";return}}else if(p.version===1){if(!p.routines||!p.workoutLogs||!p.personalBests){this.alertService.showAlert("Error","Invalid V1 backup file content. Missing essential data sections."),r.value="";return}}else{this.alertService.showAlert("Error",`Unsupported backup file version. Expected 1 or 2, got ${p.version}.`),r.value="";return}this.alertService.showConfirm("WARNING","Importing data will OVERWRITE your current data. Are you sure?").then(S=>{S&&S.data?(this.spinnerService.show("Importing data..."),this.workoutService.replaceData(p.routines),this.trackingService.replaceLogs(p.workoutLogs),this.trackingService.replacePBs(p.personalBests),p.version===2?(this.userProfileService.replaceData(p.profile),this.appSettingsService.replaceData(p.appSettings)):(this.userProfileService.replaceData(null),this.appSettingsService.replaceData(null)),this.loadProfileData(),this.loadAppSettingsData(),this.spinnerService.hide(),this.toastService.success("Data imported successfully!",5e3,"Import Complete")):this.toastService.info("Data import cancelled.",2e3)})}catch(u){console.error("Error processing imported file:",u),this.alertService.showAlert("Error","Error processing backup file. Ensure it is valid JSON.")}finally{r.value=""}},s.onerror=()=>{this.alertService.showAlert("Error","Error reading file."),r.value=""},s.readAsText(o)}clearAllAppData(){return z(this,null,function*(){let i=yield this.alertService.showConfirmationDialog("WARNING","This will delete ALL your workout data, profile, and settings. This cannot be undone. Are you sure?");i&&i.data&&(this.trackingService.clearAllWorkoutLogs_DEV_ONLY&&(yield this.trackingService.clearAllWorkoutLogs_DEV_ONLY()),this.trackingService.clearAllPersonalBests_DEV_ONLY&&(yield this.trackingService.clearAllPersonalBests_DEV_ONLY()),this.workoutService.clearAllRoutines_DEV_ONLY&&(yield this.workoutService.clearAllRoutines_DEV_ONLY()),this.userProfileService.clearUserProfile_DEV_ONLY&&this.userProfileService.clearUserProfile_DEV_ONLY(),this.appSettingsService.clearAppSettings_DEV_ONLY&&this.appSettingsService.clearAppSettings_DEV_ONLY(),this.trainingProgramService.deactivateAllPrograms&&this.trainingProgramService.deactivateAllPrograms(),this.loadProfileData(),this.loadAppSettingsData(),yield this.alertService.showAlert("Info","All application data has been cleared."))})}get measForm(){return this.profileForm.get("measurements")}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=B({type:a,selectors:[["app-profile-settings"]],decls:161,vars:21,consts:[[1,"container","mx-auto","p-1","sm:p-4"],[1,"flex","justify-between","items-center","mb-2","pb-2","border-b","border-gray-200","dark:border-gray-700"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-200"],[1,"space-y-6","sm:space-y-8"],[1,"bg-white","dark:bg-gray-700","p-4","sm:p-6","rounded-lg","shadow-md"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-300","mb-4"],[1,"space-y-4",3,"formGroup"],["for","username",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","username","formControlName","username","placeholder","Your display name",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600"],[1,"dark:text-gray-300"],["for","gender",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","gender","formControlName","gender",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","measurements",1,"space-y-4","pt-4","border-t","border-gray-200","dark:border-gray-700"],[1,"text-lg","font-medium","text-gray-700","dark:text-gray-300"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","gap-4"],["for","age",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","age","formControlName","age","placeholder","Years",1,"mt-1","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-600","rounded-md","dark:bg-gray-600"],["for","heightCm",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","heightCm","formControlName","heightCm","placeholder","cm",1,"mt-1","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-600","rounded-md","dark:bg-gray-600"],["for","weightKg",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","weightKg","formControlName","weightKg","placeholder","kg",1,"mt-1","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-600","rounded-md","dark:bg-gray-600"],["for","chestCm",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","chestCm","formControlName","chestCm","placeholder","cm",1,"mt-1","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-600","rounded-md","dark:bg-gray-600"],["for","waistCm",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","waistCm","formControlName","waistCm","placeholder","cm",1,"mt-1","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-600","rounded-md","dark:bg-gray-600"],["for","hipsCm",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","hipsCm","formControlName","hipsCm","placeholder","cm",1,"mt-1","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-600","rounded-md","dark:bg-gray-600"],["for","rightArmCm",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","rightArmCm","formControlName","rightArmCm","placeholder","cm",1,"mt-1","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-600","rounded-md","dark:bg-gray-600"],[1,"pt-3","text-right"],["type","button",1,"px-4","py-2","bg-green-500","hover:bg-green-600","text-white","font-semibold","rounded-md","shadow-sm","text-sm",3,"click"],[1,"flex","items-center","justify-between"],[1,"text-md","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-sm","text-gray-500","dark:text-gray-400","mr-1"],["for","countdown-sound-toggle",1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","id","countdown-sound-toggle","formControlName","enableTimerCountdownSound",1,"sr-only","peer"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-600","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-primary","dark:peer-checked:bg-primary-dark"],[1,"ms-3","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["class"," dark:text-gray-300",4,"ngIf"],[1,"pt-4","border-t","border-gray-200","dark:border-gray-700"],["for","preset-timer-toggle",1,"inline-flex","items-center","cursor-pointer"],[1,"sr-only"],["type","checkbox","id","preset-timer-toggle","formControlName","enablePresetTimer",1,"sr-only","peer"],[4,"ngIf"],[1,"space-y-4"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],[1,"px-4","py-2","bg-blue-500","hover:bg-blue-600","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","text-sm",3,"click"],["type","file","accept","application/json",1,"block","w-full","text-sm","text-gray-700","dark:text-gray-300","file:mr-4","file:py-2","file:px-4","file:rounded-md","file:border-0","file:text-sm","file:font-semibold","file:bg-gray-200","file:text-gray-700","hover:file:bg-gray-300","dark:file:bg-gray-600","dark:file:text-gray-200","dark:hover:file:bg-gray-700",3,"change"],[1,"text-lg","font-semibold","text-gray-700","dark:text-gray-300","mb-2"],[1,"text-sm","font-medium","text-red-600","dark:text-red-400","mb-2"],[1,"px-4","py-2","bg-red-500","hover:bg-red-600","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","text-sm",3,"click"],["routerLink","/profile/personal-bests",1,"px-4","py-2","bg-primary","hover:bg-primary-dark","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","inline-flex","items-center","text-sm"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-4","h-4","ml-2"],["fill-rule","evenodd","d","M8.22 5.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 010-1.06Z","clip-rule","evenodd"],[1,"flex","space-x-4"],[1,"px-4","py-2","border","rounded-md","transition-colors","text-sm",3,"click","ngClass"],["for","theme-toggle",1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","id","theme-toggle",1,"sr-only","peer",3,"change","checked"],[1,"flex","items-center","justify-between","mt-5"],["for","menu-mode-toggle",1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","id","menu-mode-toggle",1,"sr-only","peer",3,"change","checked"],[3,"value"],["for","countdownSeconds",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","countdownSeconds","formControlName","countdownSoundSeconds","min","1","max","20",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600"],["class","text-red-500 dark:text-red-400 text-xs mt-1",4,"ngIf"],[1,"text-red-500","dark:text-red-400","text-xs","mt-1"],["for","presetTimerDurationSeconds",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","presetTimerDurationSeconds","formControlName","presetTimerDurationSeconds","min","3","max","60",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600"],["for","preset-timer-toggle-after-rest",1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","id","preset-timer-toggle-after-rest","formControlName","enablePresetTimerAfterRest",1,"sr-only","peer"]],template:function(r,o){if(r&1&&(t(0,"div",0)(1,"header",1)(2,"h1",2),n(3,"Profile & Settings"),e()(),t(4,"div",3)(5,"section",4)(6,"h2",5),n(7,"User Profile"),e(),t(8,"form",6)(9,"div")(10,"label",7),n(11,"Username"),e(),c(12,"input",8),e(),t(13,"div",9)(14,"label",10),n(15,"Gender"),e(),t(16,"select",11)(17,"option",12),n(18,"Select Gender..."),e(),x(19,Re,2,2,"option",13),e()(),t(20,"div",14)(21,"h3",15),n(22,"Measurements"),e(),t(23,"div",16)(24,"div")(25,"label",17),n(26,"Age"),e(),c(27,"input",18),e(),t(28,"div")(29,"label",19),n(30,"Height (cm)"),e(),c(31,"input",20),e(),t(32,"div")(33,"label",21),n(34,"Weight (kg)"),e(),c(35,"input",22),e(),t(36,"div")(37,"label",23),n(38,"Chest (cm)"),e(),c(39,"input",24),e(),t(40,"div")(41,"label",25),n(42,"Waist (cm)"),e(),c(43,"input",26),e(),t(44,"div")(45,"label",27),n(46,"Hips (cm)"),e(),c(47,"input",28),e(),t(48,"div")(49,"label",29),n(50,"Right Arm (cm)"),e(),c(51,"input",30),e()()(),t(52,"div",31)(53,"button",32),f("click",function(){return o.saveProfileSettings()}),n(54," Save Profile "),e()()()(),t(55,"section",4)(56,"h2",5),n(57,"Workout Player Settings"),e(),t(58,"form",6)(59,"div",33)(60,"div")(61,"h3",34),n(62,"Timed Set Countdown Sound"),e(),t(63,"p",35),n(64,"Play sound X seconds before a timed set ends."),e()(),t(65,"label",36),c(66,"input",37)(67,"div",38),t(68,"span",39),n(69),e()()(),x(70,Ue,5,1,"div",40),c(71,"div",41),t(72,"div",33)(73,"div")(74,"h3",34),n(75,"Pre-Set Timer"),e(),t(76,"p",35),n(77,"Show a countdown before each set starts."),e()(),t(78,"label",42)(79,"span",43),n(80,"Toggle Pre-Set Timer"),e(),c(81,"input",44)(82,"div",38),t(83,"span",39),n(84),e()()(),x(85,je,5,1,"div",45)(86,We,13,1,"div",45),t(87,"div",31)(88,"button",32),f("click",function(){return o.saveAppSettings()}),n(89," Save Player Settings "),e()()()(),t(90,"section",4)(91,"h2",5),n(92,"Data Management"),e(),t(93,"div",46)(94,"div")(95,"p",47),n(96,"Backup your data to a JSON file."),e(),t(97,"button",48),f("click",function(){return o.exportData()}),n(98,"Export Data"),e()(),t(99,"div")(100,"p",47),n(101,"Restore your data from a JSON backup file."),e(),t(102,"input",49),f("change",function(d){return o.importData(d)}),e()(),t(103,"div",41)(104,"h3",50),n(105,"Reset / Clear Data"),e(),t(106,"p",51),n(107,"WARNING: This action will delete all your saved data."),e(),t(108,"button",52),f("click",function(){return o.clearAllAppData()}),n(109,"Clear All Data"),e()()()(),t(110,"section",4)(111,"h2",5),n(112,"Your Achievements"),e(),t(113,"div")(114,"p",47),n(115,"View all your tracked Personal Bests."),e(),t(116,"a",53),n(117,"View Personal Bests "),y(),t(118,"svg",54),c(119,"path",55),e()()()(),C(),t(120,"section",4)(121,"h2",5),n(122,"General Settings"),e(),t(123,"div",46)(124,"div")(125,"p",47),n(126,"Weight Units"),e(),t(127,"div",56)(128,"button",57),f("click",function(){return o.selectUnit("kg")}),n(129,"kg"),e(),t(130,"button",57),f("click",function(){return o.selectUnit("lbs")}),n(131,"lbs"),e()()()()(),t(132,"section",4)(133,"h2",5),n(134,"Appearance"),e(),t(135,"div",33)(136,"div")(137,"h3",34),n(138,"Dark Mode"),e(),t(139,"p",35),n(140,"Toggle between light and dark themes."),e()(),t(141,"label",58)(142,"span",43),n(143,"Toggle Dark Mode"),e(),t(144,"input",59),f("change",function(){return o.themeService.toggleTheme()}),e(),c(145,"div",38),t(146,"span",39),n(147),e()()(),t(148,"div",60)(149,"div")(150,"h3",34),n(151,"Compact menu mode"),e(),t(152,"p",35),n(153,"Toggle between window and compact mode."),e()(),t(154,"label",61)(155,"span",43),n(156,"Toggle Compact Mode"),e(),t(157,"input",62),f("change",function(){return o.themeService.toggleMenuMode()}),e(),c(158,"div",38),t(159,"span",39),n(160),e()()()()()()),r&2){let s,d,u,p,S;l(8),m("formGroup",o.profileForm),l(9),m("ngValue",null),l(2),m("ngForOf",o.genders),l(39),m("formGroup",o.appSettingsForm),l(11),b(" ",(s=o.appSettingsForm.get("enableTimerCountdownSound"))!=null&&s.value?"On":"Off"," "),l(),m("ngIf",(d=o.appSettingsForm.get("enableTimerCountdownSound"))==null?null:d.value),l(14),b(" ",(u=o.appSettingsForm.get("enablePresetTimer"))!=null&&u.value?"On":"Off"," "),l(),m("ngIf",(p=o.appSettingsForm.get("enablePresetTimer"))==null?null:p.value),l(),m("ngIf",(S=o.appSettingsForm.get("enablePresetTimer"))==null?null:S.value),l(42),m("ngClass",K(15,De,o.currentUnit()==="kg",o.currentUnit()!=="kg")),l(2),m("ngClass",K(18,De,o.currentUnit()==="lbs",o.currentUnit()!=="lbs")),l(14),m("checked",o.themeService.isDarkTheme()),l(3),w(o.themeService.isDarkTheme()?"On":"Off"),l(10),m("checked",o.themeService.isMenuModeCompact()),l(3),w(o.themeService.isMenuModeCompact()?"On":"Off")}},dependencies:[O,ie,D,N,V,ke,pe,ve,he,se,ce,le,xe,me,de,ye,be,ge,fe,ue],encapsulation:2})};var Ne=["bodyweight","dumbbells","kettlebells","barbells","machines","cables","bands","cardio","stretching","plyometrics","strongman","other"];function Ye(a,i){a&1&&(y(),t(0,"svg",18),c(1,"polyline",19),e())}function $e(a,i){a&1&&(y(),t(0,"svg",18),c(1,"polyline",20),e())}function He(a,i){if(a&1&&(t(0,"option",31),n(1),I(2,"titlecase"),e()),a&2){let r=i.$implicit;m("value",r),l(),b(" ",J(2,2,r)," ")}}function Ke(a,i){if(a&1){let r=F();t(0,"div",21)(1,"div",22)(2,"div")(3,"label",23),n(4," Filter by Exercise Name "),e(),t(5,"input",24,1),f("input",function(){k(r);let s=T(6),d=v();return _(d.exerciseNameFilter.set(s.value))}),e()(),t(7,"div")(8,"label",25),n(9," Filter by Category "),e(),t(10,"select",26,2),f("change",function(){k(r);let s=T(11),d=v();return _(d.exerciseCategoryFilter.set(s.value))}),t(12,"option",27),n(13,"All Categories"),e(),x(14,He,3,4,"option",28),e()()(),t(15,"div",29)(16,"button",30),f("click",function(){k(r);let s=v();return _(s.resetFilters())}),n(17," Reset Filters "),e()()()}if(a&2){let r=v();l(5),m("value",r.exerciseNameFilter()),l(5),m("value",r.exerciseCategoryFilter()),l(4),m("ngForOf",r.availableCategories())}}function Je(a,i){if(a&1&&(t(0,"div",38)(1,"span",39),n(2,"Notes:"),e(),t(3,"p",49),n(4),e()()),a&2){let r=v().$implicit;l(3),m("title",r.notes),l(),b(" ",r.notes," ")}}function qe(a,i){if(a&1){let r=F();t(0,"div",34)(1,"div",35)(2,"h2",36),n(3),e(),t(4,"p",37),n(5),I(6,"titlecase"),e(),t(7,"div",38)(8,"span",39),n(9,"Type:"),e(),t(10,"p",40),n(11),e()(),t(12,"div",38)(13,"span",39),n(14,"Best:"),e(),t(15,"p",41),n(16),e()(),t(17,"div",38)(18,"span",39),n(19,"Date:"),e(),t(20,"p",42),n(21),I(22,"date"),e()(),x(23,Je,5,2,"div",43),e(),t(24,"div",44)(25,"button",45),f("click",function(s){let d=k(r).$implicit,u=v(2);return _(u.navigateToLogDetail(d.workoutLogId,s))}),y(),t(26,"svg",46),c(27,"path",47)(28,"path",48),e(),n(29," View Log "),e()()()}if(a&2){let r=i.$implicit,o=v(2);l(2),m("title",r.exerciseName),l(),b(" ",r.exerciseName," "),l(2),b(" (",J(6,7,r.primaryMuscleGroup),") "),l(6),w(r.pbType),l(5),w(o.formatPbValue(r)),l(5),w(re(22,9,r.timestamp,"mediumDate")),l(2),m("ngIf",r.notes)}}function Xe(a,i){if(a&1&&(t(0,"div")(1,"div",32),x(2,qe,30,12,"div",33),e()()),a&2){let r=v();l(2),m("ngForOf",r.displayPersonalBests())}}function Ze(a,i){a&1&&(t(0,"span"),n(1,"No Personal Bests Match Your Filters"),e())}function ze(a,i){a&1&&n(0,"No Personal Bests Yet!")}function Qe(a,i){if(a&1){let r=F();t(0,"span"),n(1,"Try adjusting your filter criteria or "),t(2,"button",56),f("click",function(){k(r);let s=v(2);return _(s.resetFiltersAndShow())}),n(3,"reset all filters"),e(),n(4,"."),e()}}function et(a,i){a&1&&(t(0,"span"),n(1,"Keep logging your workouts to track your progress and achievements here."),e())}function tt(a,i){if(a&1&&(t(0,"div",50),y(),t(1,"svg",51),c(2,"path",52),e(),C(),t(3,"h2",53),x(4,Ze,2,0,"span",17)(5,ze,1,0,"ng-template",null,3,q),e(),t(7,"p",54),x(8,Qe,5,0,"span",55)(9,et,2,0,"span",55),e()()),a&2){let r=T(6),o=v();l(4),m("ngIf",o.hasActiveFilters())("ngIfElse",r),l(4),m("ngIf",o.hasActiveFilters()),l(),m("ngIf",!o.hasActiveFilters()&&o.allPersonalBestsSignalEmpty())}}var j=class a{trackingService=g(L);exerciseService=g(Ae);unitsService=g(U);router=g(ae);toastService=g(R);allPersonalBestsRaw=E({});allExercisesRaw=E([]);filtersVisible=E(!1);exerciseNameFilter=E("");exerciseCategoryFilter=E("");availableCategories=P(()=>[...Ne].sort());combinedPersonalBests=P(()=>{let i=this.allPersonalBestsRaw(),r=this.allExercisesRaw();if(Object.keys(i).length===0||r.length===0)return[];let o=new Map(r.map(d=>[d.id,d])),s=[];for(let d in i)if(i.hasOwnProperty(d)){let u=o.get(d),p=i[d];u&&p.forEach(S=>{s.push(Z(X({},S),{exerciseName:u.name,exerciseCategory:u.category,primaryMuscleGroup:u.primaryMuscleGroup}))})}return s});displayPersonalBests=P(()=>{let i=this.combinedPersonalBests(),r=this.exerciseNameFilter().toLowerCase().trim(),o=this.exerciseCategoryFilter();if(!r&&!o)return this.sortPBs(i);let s=i.filter(d=>{let u=r?d.exerciseName.toLowerCase().includes(r):!0,p=o?d.exerciseCategory===o:!0;return u&&p});return this.sortPBs(s)});hasActiveFilters=P(()=>this.exerciseNameFilter().trim()!==""||this.exerciseCategoryFilter()!=="");allPersonalBestsSignalEmpty=P(()=>Object.keys(this.allPersonalBestsRaw()).length===0);constructor(){}platformId=g(A);ngOnInit(){M(this.platformId)&&window.scrollTo(0,0),Q([this.trackingService.personalBests$.pipe($(1)),this.exerciseService.getExercises().pipe($(1))]).subscribe(([i,r])=>{this.allPersonalBestsRaw.set(i),this.allExercisesRaw.set(r)})}toggleFiltersVisibility(){this.filtersVisible.update(i=>!i)}resetFilters(){this.exerciseNameFilter.set(""),this.exerciseCategoryFilter.set("")}resetFiltersAndShow(){this.resetFilters(),this.filtersVisible.set(!0)}getPbTypeSortOrder(i){return i.includes("1RM (Actual)")?0:i.includes("1RM (Estimated)")?1:i.includes("3RM (Actual)")?2:i.includes("5RM (Actual)")?3:i.includes("Heaviest Lifted")?4:i.includes("Max Reps (Bodyweight)")?5:i.includes("Max Duration")?6:100}sortPBs(i){return[...i].sort((r,o)=>{let s=r.exerciseName.localeCompare(o.exerciseName);if(s!==0)return s;let d=this.getPbTypeSortOrder(r.pbType),u=this.getPbTypeSortOrder(o.pbType);return d!==u?d-u:r.weightUsed!==void 0&&o.weightUsed!==void 0?(o.weightUsed??0)-(r.weightUsed??0):r.repsAchieved!==void 0&&o.repsAchieved!==void 0&&r.pbType.includes("Max Reps")?(o.repsAchieved??0)-(r.repsAchieved??0):r.durationPerformed!==void 0&&o.durationPerformed!==void 0&&r.pbType.includes("Max Duration")?(o.durationPerformed??0)-(r.durationPerformed??0):r.pbType.localeCompare(o.pbType)})}formatPbValue(i){let r="";return i.weightUsed!==void 0&&i.weightUsed!==null?(r+=`${i.weightUsed}${this.unitsService.getUnitSuffix()}`,i.repsAchieved>0&&!(i.pbType.includes("RM (Actual)")&&i.repsAchieved===parseInt(i.pbType,10))&&(r+=` x ${i.repsAchieved}`)):i.repsAchieved>0&&i.pbType.includes("Max Reps")?r=`${i.repsAchieved} reps`:i.durationPerformed&&i.durationPerformed>0&&i.pbType.includes("Max Duration")&&(r=`${i.durationPerformed}s`),r||"N/A"}navigateToLogDetail(i,r){r?.stopPropagation(),i?this.router.navigate(["/workout/summary",i]):(this.toastService.error("Could not find the associated workout log for this PB.",0,"Navigation Error"),console.warn("Attempted to navigate to log detail, but workoutLogId is undefined for PB:",r))}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=B({type:a,selectors:[["app-personal-bests"]],decls:19,vars:8,consts:[["noPBsOrFilters",""],["nameFilterInput",""],["categoryFilterInput",""],["noPBsMessage",""],[1,"container","mx-auto","p-1","sm:p-4"],[1,"mb-6","flex","items-center"],["routerLink","/profile",1,"text-gray-600","dark:text-gray-300","hover:text-primary","dark:hover:text-primary-light","p-2","-ml-2","rounded-full","focus:outline-none","focus:ring-2","focus:ring-primary-focus"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-200","ml-2"],[1,"mb-8","bg-white","dark:bg-gray-700","rounded-lg","shadow-md"],["aria-controls","filters-content",1,"w-full","flex","justify-between","items-center","p-4","text-left","focus:outline-none","focus-visible:ring-2","focus-visible:ring-primary","focus-visible:ring-opacity-75","rounded-t-lg",3,"click"],[1,"text-lg","font-semibold","text-gray-700","dark:text-gray-300"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5","inline-block","mr-2","align-text-bottom"],["stroke-linecap","round","stroke-linejoin","round","d","M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.572a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round","class","text-gray-500 dark:text-gray-400 transform transition-transform duration-200",4,"ngIf"],["id","filters-content","class","p-4 border-t border-gray-200 dark:border-gray-700",4,"ngIf"],[4,"ngIf","ngIfElse"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round",1,"text-gray-500","dark:text-gray-400","transform","transition-transform","duration-200"],["points","18 15 12 9 6 15"],["points","6 9 12 15 18 9"],["id","filters-content",1,"p-4","border-t","border-gray-200","dark:border-gray-700"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],["for","exerciseNameFilter",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","exerciseNameFilter","placeholder","e.g., Bench Press",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm","text-gray-900","dark:text-gray-100","placeholder-gray-400","dark:placeholder-gray-500",3,"input","value"],["for","categoryFilter",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","categoryFilter",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm","text-gray-900","dark:text-gray-100",3,"change","value"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-end"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","hover:bg-gray-200","dark:hover:bg-gray-700","rounded-md","shadow-sm","border","border-gray-300","dark:border-gray-500","transition-colors",3,"click"],[3,"value"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6"],["class","bg-white dark:bg-gray-700 rounded-xl shadow-lg overflow-hidden flex flex-col transition-all hover:shadow-xl",4,"ngFor","ngForOf"],[1,"bg-white","dark:bg-gray-700","rounded-xl","shadow-lg","overflow-hidden","flex","flex-col","transition-all","hover:shadow-xl"],[1,"p-5","flex-grow"],[1,"text-xl","font-semibold","text-primary","dark:text-primary-light","mb-1","truncate",3,"title"],[1,"text-xs","text-gray-500","dark:text-gray-400","mb-3"],[1,"mb-4"],[1,"text-sm","font-medium","text-gray-600","dark:text-gray-300"],[1,"text-md","text-gray-800","dark:text-gray-100"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-700","dark:text-gray-200"],["class","mb-4",4,"ngIf"],[1,"px-5","py-4","bg-gray-50","dark:bg-gray-700","border-t","border-gray-200","dark:border-gray-600"],["title","View Workout Log",1,"w-full","flex","items-center","justify-center","px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","dark:bg-indigo-500","dark:hover:bg-indigo-600","dark:focus:ring-offset-gray-800","transition-colors","duration-150",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-5","h-5","mr-2"],["d","M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"],["fill-rule","evenodd","d","M.664 10.59a1.651 1.651 0 0 1 0-1.186A10.004 10.004 0 0 1 10 3c4.257 0 7.893 2.66 9.336 6.41.147.381.146.804 0 1.186A10.004 10.004 0 0 1 10 17c-4.257 0-7.893-2.66-9.336-6.41ZM14 10a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z","clip-rule","evenodd"],[1,"text-sm","text-gray-700","dark:text-gray-200","italic","max-h-24","overflow-y-auto","custom-scrollbar","pr-1",3,"title"],[1,"text-center","py-10","bg-white","dark:bg-gray-700","rounded-xl","shadow-lg"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-16","h-16","mx-auto","text-gray-400","dark:text-gray-500","mb-4"],["stroke-linecap","round","stroke-linejoin","round","d","M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM13.5 10.5h-6"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-300","mb-2"],[1,"text-gray-500","dark:text-gray-400","px-4"],[4,"ngIf"],[1,"text-primary","dark:text-primary-light","hover:underline",3,"click"]],template:function(r,o){if(r&1){let s=F();t(0,"div",4)(1,"div",5)(2,"button",6),y(),t(3,"svg",7),c(4,"path",8),e()(),C(),t(5,"h1",9),n(6,"Personal Bests"),e()(),t(7,"div",10)(8,"button",11),f("click",function(){return k(s),_(o.toggleFiltersVisibility())}),t(9,"h2",12),y(),t(10,"svg",13),c(11,"path",14),e(),n(12," Filters "),e(),x(13,Ye,2,0,"svg",15)(14,$e,2,0,"svg",15),e(),x(15,Ke,18,3,"div",16),e(),x(16,Xe,3,1,"div",17)(17,tt,10,4,"ng-template",null,0,q),e()}if(r&2){let s=T(18);l(8),te("rounded-b-lg",!o.filtersVisible()),ee("aria-expanded",o.filtersVisible()),l(5),m("ngIf",o.filtersVisible()),l(),m("ngIf",!o.filtersVisible()),l(),m("ngIf",o.filtersVisible()),l(),m("ngIf",o.displayPersonalBests().length>0)("ngIfElse",s)}},dependencies:[O,D,N,ne,oe,V],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#9ca3af;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}.dark[_ngcontent-%COMP%]   .custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4b5563}.dark[_ngcontent-%COMP%]   .custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}"]})};var Qt=[{path:"",component:G,title:"Profile & Settings"},{path:"personal-bests",component:j,title:"Personal Bests"}];export{Qt as PROFILE_SETTINGS_ROUTES};
