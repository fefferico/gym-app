import{Bb as V,Ca as o,Cb as L,Da as d,Db as $,Ea as p,Eb as K,Fa as _,Fb as F,Ga as u,Ha as C,Ja as S,Ka as y,La as a,N as v,Ob as z,S as M,Sc as Y,T as I,Tc as P,Va as h,Vc as j,Wa as k,Wb as R,Xa as O,Ya as N,_ as T,aa as D,ea as w,ec as f,fc as l,ha as B,ia as s,ic as r,kc as m,qa as H,va as c,wa as A}from"./chunk-DB6NAEID.js";import{g as E}from"./chunk-GAL4ENT6.js";function G(e,n){e&1&&_(0,"div",12)}function J(e,n){if(e&1&&(u(0),_(1,"app-icon",15),C()),e&2){let t=a(2).$implicit,i=a(3);s(),h(t.iconClass||"w-5 h-5 mr-3"),o("name",i.getIconNameForComponent(t))}}function Q(e,n){if(e&1&&_(0,"span",17),e&2){let t=n.ngIf,i=a(3).$implicit;o("innerHTML",t,w)("ngClass",i.iconClass||"w-5 h-5 mr-3")}}function U(e,n){if(e&1&&(u(0),c(1,Q,1,2,"span",16),C()),e&2){let t=a(2).$implicit,i=a(3);s(),o("ngIf",i.getIconHtml(t))}}function W(e,n){if(e&1){let t=S();d(0,"button",13),y("click",function(x){M(t);let g=a().$implicit,b=a(3);return I(b.onItemClicked(x,g))}),c(1,J,2,3,"ng-container",14)(2,U,2,1,"ng-container",14),k(3),p()}if(e&2){let t=a().$implicit,i=a(3);o("ngClass",i.defaultDropdownButtonClass+" "+t.buttonClass),s(),o("ngIf",i.isComplexIcon(t)),s(),o("ngIf",!i.isComplexIcon(t)),s(),N(" ",t.label," ")}}function X(e,n){if(e&1&&(u(0),c(1,G,1,0,"div",10)(2,W,4,4,"button",11),C()),e&2){let t=n.$implicit;s(),o("ngIf",t.isDivider),s(),o("ngIf",!t.isDivider)}}function Z(e,n){if(e&1&&(d(0,"div",7)(1,"div",8)(2,"div"),c(3,X,3,2,"ng-container",9),p()()()),e&2){let t=a(2);o("@dropdownMenu",void 0)("ngClass",t.dropdownMenuClass),s(2),h("flex flex-col gap-y-1 "+t.gridClass),s(),o("ngForOf",t.items)}}function tt(e,n){if(e&1&&(d(0,"div"),c(1,Z,4,5,"div",6),p()),e&2){let t=a();s(),o("ngIf",t.isVisible)}}function et(e,n){e&1&&_(0,"div")}function nt(e,n){if(e&1&&(u(0),_(1,"app-icon",15),C()),e&2){let t=a(2).$implicit,i=a(3);s(),h(t.iconClass||"w-6 h-6"),o("name",i.getIconNameForComponent(t))}}function it(e,n){if(e&1&&_(0,"span",17),e&2){let t=n.ngIf,i=a(3).$implicit;o("innerHTML",t,w)("ngClass",i.iconClass||"w-6 h-6")}}function ot(e,n){if(e&1&&(u(0),c(1,it,1,2,"span",16),C()),e&2){let t=a(2).$implicit,i=a(3);s(),o("ngIf",i.getIconHtml(t))}}function at(e,n){if(e&1&&(d(0,"span",23),k(1),p()),e&2){let t=a(2).$implicit;s(),O(t.label)}}function st(e,n){if(e&1){let t=S();d(0,"button",21),y("click",function(x){M(t);let g=a().$implicit,b=a(3);return I(b.onItemClicked(x,g))}),c(1,nt,2,3,"ng-container",14)(2,ot,2,1,"ng-container",14)(3,at,2,1,"span",22),p()}if(e&2){let t=a().$implicit,i=a(3);o("title",t.label)("ngClass",i.defaultCompactButtonClass+" "+t.buttonClass),s(),o("ngIf",i.isComplexIcon(t)),s(),o("ngIf",!i.isComplexIcon(t)),s(),o("ngIf",i.showLabelInCompact(t))}}function rt(e,n){if(e&1&&(u(0),c(1,st,4,5,"button",20),C()),e&2){let t=n.$implicit;s(),o("ngIf",!t.isDivider)}}function ct(e,n){if(e&1&&(d(0,"div",19),c(1,rt,2,1,"ng-container",9),p()),e&2){let t=a(2);o("@compactBar",void 0)("ngClass",t.compactBarClass+t.gridClass),s(),o("ngForOf",t.items)}}function lt(e,n){if(e&1&&(d(0,"div"),c(1,ct,2,3,"div",18),p()),e&2){let t=a();s(),o("ngIf",t.isVisible)}}var mt=f("modalOverlay",[m(":enter",[r({opacity:0}),l("200ms ease-out",r({opacity:1}))]),m(":leave",[l("150ms ease-in",r({opacity:0}))])]),dt=f("modalContent",[m(":enter",[r({transform:"translateY(100%)"}),l("200ms ease-out",r({transform:"translateY(0)"}))]),m(":leave",[l("150ms ease-in",r({transform:"translateY(100%)"}))])]),pt=f("dropdownMenu",[m(":enter",[r({opacity:0,transform:"scale(0.95) translateY(-10px)"}),l("100ms ease-out",r({opacity:1,transform:"scale(1) translateY(0)"}))]),m(":leave",[l("75ms ease-in",r({opacity:0,transform:"scale(0.95) translateY(-10px)"}))])]),_t=f("compactBar",[m(":enter",[r({opacity:0}),l("200ms ease-out",r({opacity:1}))]),m(":leave",[l("150ms ease-in",r({opacity:0}))])]),q=class e{sanitizer=v(R);elRef=v(D);iconRegistry=v(Y);alertService=v(j);items=[];isVisible=!1;displayMode="dropdown";modalTitle="Actions";dropdownMenuClass="origin-top-right absolute right-0 top-full mt-2 w-56 rounded-lg shadow-lg bg-gray-100 dark:bg-gray-800 ring-1 ring-black ring-opacity-5 p-1 z-[60] border border-gray-300 border-2";defaultDropdownButtonClass="flex items-center w-full rounded-md px-3 py-2 text-sm font-medium text-black dark:text-white hover:text-white";compactBarClass="flex gap-2 grid grid-cols-2 justify-center items-center z-20 rounded-b-lg p-2";defaultCompactButtonClass="flex items-center w-full rounded-md px-3 py-2 text-sm font-medium text-black dark:text-white hover:text-white";gridClass="";customButtonDivCssClass="grid grid-cols-2";itemClick=new A;closeMenu=new A;_boundOnEnterKey=this.handleEnterKey.bind(this);ngOnChanges(n){if(n.isVisible){let t=n.isVisible.currentValue;t&&this.displayMode==="modal"&&setTimeout(()=>this.presentAsAlert(),0),t&&this.displayMode!=="modal"?document.addEventListener("keydown",this._boundOnEnterKey):document.removeEventListener("keydown",this._boundOnEnterKey)}}ngOnDestroy(){document.removeEventListener("keydown",this._boundOnEnterKey)}presentAsAlert(){return E(this,null,function*(){let n=this.items.filter(i=>!i.isDivider).map(i=>({text:i.label||"",role:i.actionKey||"",icon:i.iconName,iconClass:i.iconClass,cssClass:`${i.buttonClass||""}`,overrideCssClass:i.overrideCssButtonClass?i.overrideCssButtonClass:"",data:i.data})),t=yield this.alertService.present({header:this.modalTitle,buttons:n,backdropDismiss:!0,customButtonDivCssClass:this.customButtonDivCssClass?this.customButtonDivCssClass:"grid grid-cols-2"});t&&t.role!=="backdrop"&&t.role!=="cancel"&&this.itemClick.emit({actionKey:t.role,data:t.data}),this.closeMenu.emit()})}onDocumentClick(n){this.displayMode==="dropdown"&&this.isVisible&&!this.elRef.nativeElement.contains(n.target)&&this.closeMenu.emit()}handleEnterKey(n){if(n.key==="Enter"){n.preventDefault();let t=this.items.find(i=>!i.isDivider);t&&this.onItemClicked({stopPropagation:()=>{}},t)}}onItemClicked(n,t){n.stopPropagation(),t.isDivider||(navigator.vibrate&&navigator.vibrate(50),this.itemClick.emit({actionKey:t.actionKey??"",data:t.data}),this.displayMode==="dropdown"&&this.closeMenu.emit())}getIconHtml(n){let t=null;return typeof n.iconName=="string"?t=this.iconRegistry.getIconString(n.iconName):n.iconSvg&&(t=n.iconSvg),t?this.sanitizer.bypassSecurityTrustHtml(t):null}showLabelInCompact(n){return!!n.label}isComplexIcon(n){return typeof n.iconName=="object"&&n.iconName!==null}getIconNameForComponent(n){return n.iconName}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=H({type:e,selectors:[["app-action-menu"]],hostBindings:function(t,i){t&1&&y("click",function(g){return i.onDocumentClick(g)},B)},inputs:{items:"items",isVisible:"isVisible",displayMode:"displayMode",modalTitle:"modalTitle",dropdownMenuClass:"dropdownMenuClass",compactBarClass:"compactBarClass",gridClass:"gridClass",customButtonDivCssClass:"customButtonDivCssClass"},outputs:{itemClick:"itemClick",closeMenu:"closeMenu"},features:[T],decls:8,vars:4,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"hidden","dark:hover:text-gray-100"],[1,"hidden","scale-120"],[1,"hidden","scale-125"],[1,"hidden","scale-110"],["class","flex flex-col max-h-[80vh] overflow-hidden",3,"ngClass",4,"ngIf"],[1,"flex","flex-col","max-h-[80vh]","overflow-hidden",3,"ngClass"],[1,"overflow-y-auto","p-1","custom-scrollbar"],[4,"ngFor","ngForOf"],["class","my-0.5 sm:my-1 border-t border-gray-200 dark:border-gray-600",4,"ngIf"],["type","button","class","transition-colors duration-150 ease-in-out",3,"ngClass","click",4,"ngIf"],[1,"my-0.5","sm:my-1","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"transition-colors","duration-150","ease-in-out",3,"click","ngClass"],[4,"ngIf"],[3,"name"],[3,"innerHTML","ngClass",4,"ngIf"],[3,"innerHTML","ngClass"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["type","button","class","transition-colors duration-150 ease-in-out",3,"title","ngClass","click",4,"ngIf"],["type","button",1,"transition-colors","duration-150","ease-in-out",3,"click","title","ngClass"],["class","truncate ml-2",4,"ngIf"],[1,"truncate","ml-2"]],template:function(t,i){t&1&&(u(0,0),c(1,tt,2,1,"div",1)(2,et,1,0,"div",1)(3,lt,2,1,"div",1),C(),_(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)),t&2&&(o("ngSwitch",i.displayMode),s(),o("ngSwitchCase","dropdown"),s(),o("ngSwitchCase","modal"),s(),o("ngSwitchCase","compact"))},dependencies:[z,V,L,$,K,F,P],encapsulation:2,data:{animation:[pt,_t,mt,dt]},changeDetection:0})};export{q as a};
