import{b as st}from"./chunk-PD6AU2DO.js";import{C as et,D as tt,H as it,J as rt,L as nt}from"./chunk-G43NHZIQ.js";import{a as Je}from"./chunk-MFWGUG5V.js";import{a as Ze}from"./chunk-YRRD4B6Y.js";import{a as We}from"./chunk-DQNZMBS2.js";import"./chunk-V3C6EHC4.js";import{a as Xe}from"./chunk-IKZAZGD4.js";import{P as Ye,Q as Ke,T as ne,U as se,V as Qe,W as ae,b as X}from"./chunk-3M3SSFEZ.js";import{c as ze}from"./chunk-LUJFSQJG.js";import{$a as ce,$c as Ge,A as O,Ab as me,Ba as x,Bc as W,Cc as F,Eb as we,Fb as Se,Fc as T,Gc as V,Hc as L,I as he,Ja as be,Ka as Ee,La as p,Ma as s,Na as a,Oa as _,Pb as Me,Pc as Be,Q as C,Qb as U,Qc as N,Rb as z,Rc as Ae,Sa as M,Sc as qe,Ta as v,Ua as u,Uc as Z,V as y,W as b,Wc as Ve,X as A,Xb as ke,Y as q,Yb as Ie,Zb as Te,_b as Fe,_c as Ne,aa as S,ab as de,bb as P,bc as Y,cd as De,db as m,dc as ue,dd as Oe,eb as g,ed as He,fa as ve,fb as E,fd as Pe,gb as $,i as ge,ia as _e,ja as ye,kd as $e,l as le,la as n,m as xe,mb as j,md as je,n as fe,nd as Re,pd as J,qb as pe,qd as Ue,sd as ee,tc as Le,td as te,ud as ie,vc as K,vd as re,wa as H,wb as l,wc as Q,xb as c,yb as R,zb as Ce}from"./chunk-MCOCDANC.js";import{a as k,b as I,g as B}from"./chunk-GAL4ENT6.js";var mt=r=>({count:r}),ut=r=>({"filter dark:invert":r}),gt=(r,e)=>e.name;function xt(r,e){if(r&1&&(s(0,"option",21),m(1),a()),r&2){let t=e.$implicit;p("value",t.id),n(),E(" ",t.name," ")}}function ft(r,e){if(r&1&&(s(0,"option",21),m(1),l(2,"titlecase"),a()),r&2){let t=e.$implicit;p("value",t.id),n(),E(" ",c(2,2,t.name)," ")}}function ht(r,e){if(r&1&&(s(0,"option",21),m(1),l(2,"titlecase"),a()),r&2){let t=e.$implicit;p("value",t.id),n(),g(c(2,2,t.name))}}function vt(r,e){if(r&1&&(s(0,"div",41),m(1),l(2,"translate"),a()),r&2){let t=u();n(),E(" ",R(2,1,"exerciseList.showingCount",pe(4,mt,t.filteredExercises().length))," ")}}function _t(r,e){if(r&1&&_(0,"img",65),r&2){let t=u().$implicit,i=u(3);p("src",i.getIconPath(t.iconName),_e)("alt",t.name+" icon")("ngClass",pe(3,ut,t.iconName!=="default-exercise"))}}function yt(r,e){r&1&&(s(0,"span",66),_(1,"app-icon",67),m(2),l(3,"translate"),a()),r&2&&(n(2),E(" ",c(3,1,"exerciseList.badges.hidden")," "))}function bt(r,e){r&1&&(s(0,"span",68),_(1,"app-icon",69),m(2),l(3,"translate"),a()),r&2&&(n(2),E(" ",c(3,1,"exerciseList.badges.custom")," "))}function Et(r,e){if(r&1&&(s(0,"p",53),_(1,"app-icon",70),s(2,"span"),m(3),l(4,"translate"),a(),s(5,"span"),m(6),l(7,"translate"),l(8,"titlecase"),a()()),r&2){let t=u().$implicit;n(3),E(" ",c(4,2,"exerciseList.card.equipment"),": "),n(3),E(" ",c(8,6,t.equipmentLabel||c(7,4,"exerciseList.card.none"))," ")}}function Ct(r,e){if(r&1&&(s(0,"div",71),_(1,"app-icon",72),s(2,"span"),m(3),l(4,"translate"),a(),s(5,"span",73),m(6),l(7,"titlecase"),a()()),r&2){let t=u().$implicit;n(3),E("",c(4,2,"exerciseList.card.muscles"),":"),n(3),E(" ",c(7,4,t.muscleGroupLabel)," ")}}function wt(r,e){if(r&1&&(s(0,"p",74),m(1),a()),r&2){let t=u().$implicit;p("title",t.description),n(),g(t.description)}}function St(r,e){if(r&1&&(s(0,"p",75),m(1),l(2,"translate"),l(3,"date"),a()),r&2){let t=u().$implicit;n(),$(" ",c(2,2,"exerciseList.card.lastUsed"),": ",Ce(3,4,t.lastUsedAt,"dd-MM-yyyy","UTC")," ")}}function Mt(r,e){if(r&1&&(s(0,"p",75),m(1),l(2,"translate"),l(3,"date"),a()),r&2){let t=u().$implicit;n(),$(" ",c(2,2,"exerciseList.card.lastUpdated"),": ",R(3,4,t.updatedAt,"short")," ")}}function kt(r,e){if(r&1&&(s(0,"p",75),m(1),l(2,"translate"),l(3,"date"),a()),r&2){let t=u().$implicit;n(),$(" ",c(2,2,"exerciseList.card.created"),": ",R(3,4,t.createdAt,"short")," ")}}function It(r,e){if(r&1){let t=M();s(0,"app-action-menu",76),v("itemClick",function(o){y(t);let d=u(4);return b(d.handleActionMenuItemClick(o))})("closeMenu",function(){y(t);let o=u(4);return b(o.onCloseActionMenu())}),a()}if(r&2){let t=u().$implicit,i=u(3);p("modalTitle","")("displayMode",i.menuModeDropdown?"dropdown":"modal")("gridClass"," grid grid-cols-2 ")("items",i.getExerciseDropdownActionItems(t.id,i.menuModeDropdown?"dropdown":"modal"))("isVisible",i.areActionsVisible(t.id))}}function Tt(r,e){if(r&1){let t=M();s(0,"app-action-menu",77),v("itemClick",function(o){y(t);let d=u(4);return b(d.handleActionMenuItemClick(o))})("closeMenu",function(){y(t);let o=u(4);return b(o.onCloseActionMenu())}),a()}if(r&2){let t=u().$implicit,i=u(3);p("items",i.getExerciseDropdownActionItems(t.id,"compact"))("isVisible",i.areActionsVisible(t.id))}}function Ft(r,e){if(r&1){let t=M();s(0,"div",45),v("click",function(o){let d=y(t).$implicit,f=u(3);return b(f.toggleActions(d.id,o))}),s(1,"div",46)(2,"div",47),x(3,_t,1,5,"img",48),s(4,"h2",49),m(5),a()(),s(6,"div",50),x(7,yt,4,3,"span",51)(8,bt,4,3,"span",52),a(),s(9,"p",53),_(10,"app-icon",54),s(11,"span"),m(12),l(13,"translate"),a(),m(14),l(15,"titlecase"),a(),x(16,Et,9,8,"p",55)(17,Ct,8,6,"div",56)(18,wt,2,2,"p",57)(19,St,4,8,"p",58)(20,Mt,4,7,"p",58)(21,kt,4,7,"p",58),a(),s(22,"div",59)(23,"div",60)(24,"button",61),v("click",function(o){let d=y(t).$implicit,f=u(3);return b(f.toggleActions(d.id,o))}),_(25,"app-icon",62),a(),x(26,It,1,5,"app-action-menu",63),a()(),x(27,Tt,1,2,"app-action-menu",64),a()}if(r&2){let t=e.$implicit,i=u(3);de("z-index",i.areActionsVisible(t.id)?50:"auto"),n(3),p("ngIf",t),n(),p("title",t.name),n(),g(t.name),n(2),p("ngIf",t.isHidden),n(),p("ngIf",t.isCustom),n(4),E("",c(13,17,"exerciseList.card.category"),": "),n(2),E(" ",c(15,19,t.categoriesLabel)," "),n(2),p("ngIf",t.equipmentNeeded),n(),p("ngIf",t.primaryMuscleGroup),n(),p("ngIf",t.description),n(),p("ngIf",t.lastUsedAt),n(),p("ngIf",t.updatedAt),n(),p("ngIf",t.createdAt),n(5),p("ngIf",i.areActionsVisible(t.id)&&(i.menuModeDropdown||i.menuModeModal)),n(),p("ngIf",i.areActionsVisible(t.id)&&i.menuModeCompact)}}function Lt(r,e){if(r&1&&(s(0,"div",43),x(1,Ft,28,21,"div",44),a()),r&2){let t=u(2);n(),p("ngForOf",t.filteredExercises())}}function Bt(r,e){r&1&&(s(0,"div",78)(1,"p",79),m(2),l(3,"translate"),a(),s(4,"p",80),m(5),l(6,"translate"),a()()),r&2&&(n(2),g(c(3,2,"exerciseList.noResults.title")),n(3),g(c(6,4,"exerciseList.noResults.message")))}function At(r,e){if(r&1&&(s(0,"div"),x(1,Lt,2,1,"div",42)(2,Bt,7,6,"ng-template",null,1,me),a()),r&2){let t=ce(3),i=u();n(),p("ngIf",i.filteredExercises().length>0)("ngIfElse",t)}}function qt(r,e){r&1&&(s(0,"div",78),_(1,"app-icon",83),s(2,"p",84),m(3),l(4,"translate"),a()()),r&2&&(n(3),g(c(4,1,"exerciseList.loading")))}function Vt(r,e){r&1&&(s(0,"div",85),_(1,"app-icon",86),s(2,"h3",87),m(3),l(4,"translate"),a(),s(5,"p",88),m(6),l(7,"translate"),a(),s(8,"button",89),m(9),l(10,"translate"),a()()),r&2&&(n(3),g(c(4,3,"exerciseList.empty.title")),n(3),g(c(7,5,"exerciseList.empty.message")),n(3),E(" ",c(10,7,"exerciseList.empty.addButton")," "))}function Nt(r,e){if(r&1&&(s(0,"div",78),x(1,qt,5,3,"div",81),l(2,"async"),x(3,Vt,11,9,"div",82),l(4,"async"),a()),r&2){let t=u(2);n(),p("ngIf",c(2,2,t.exerciseService.isLoadingExercises$)),n(2),p("ngIf",!c(4,4,t.exerciseService.isLoadingExercises$)&&(!t.allExercises()||t.allExercises().length===0))}}function Gt(r,e){if(r&1&&x(0,Nt,5,6,"div",81),r&2){let t=u();p("ngIf",!t.allExercises()||t.allExercises().length===0)}}function Dt(r,e){if(r&1){let t=M();s(0,"button",90),v("shortPress",function(){y(t);let o=u();return b(o.scrollToTop())}),A(),s(1,"svg",91),_(2,"path",92),a(),q(),s(3,"span",8),m(4),l(5,"translate"),a()()}r&2&&(n(4),g(c(5,1,"exerciseList.backToTop")))}function Ot(r,e){if(r&1){let t=M();s(0,"div",93)(1,"div",94)(2,"span",95),m(3),l(4,"translate"),l(5,"uppercase"),a(),s(6,"button",96),v("shortPress",function(){y(t);let o=u();return b(o.navigateToCreateExercise())}),A(),s(7,"svg",97),_(8,"path",98),a(),q(),s(9,"span",8),m(10),l(11,"translate"),l(12,"uppercase"),a()()()()}r&2&&(p("@fabSlideUp",void 0),n(3),E(" ",c(5,5,c(4,3,"exerciseList.fab.create"))," "),n(7),g(c(12,9,c(11,7,"exerciseList.fab.create"))))}var oe=class r{exerciseService=C(ae);router=C(K);alertService=C(re);toastService=C(Ue);spinnerService=C(Ze);themeService=C(Xe);platformId=C(ve);appSettingsService=C(ze);trackingService=C(Ye);translate=C(ee);exerciseCategoryService=C(Qe);muscleGroupService=C(se);equipmentService=C(ne);categories=this.exerciseCategoryService.getHydratedCategories();hydratedMuscles=this.muscleGroupService.getHydratedMuscles();hydratedEquipments=this.equipmentService.getTranslatedEquipment();staticExercises=[];langChangeSub;primaryMuscleGroups$;selectedCategory=S(null);selectedEquipment=S(null);selectedMuscleGroup=S(null);searchTerm=S("");allExercises=S([]);showHiddenExercises=S(!1);actionsVisibleId=S(null);menuModeDropdown=!1;menuModeCompact=!1;menuModeModal=!1;isFilterAccordionOpen=S(!1);hydratedExercises=X(fe([this.exerciseService.getHydratedExercises(),this.exerciseCategoryService.hydratedCategories$,this.muscleGroupService.hydratedMuscles$,this.equipmentService.hydratedEquipments$]).pipe(xe(([e,t,i,o])=>e.map(d=>{let f=i.find(w=>w.id===d.primaryMuscleGroup?.id),h=[...new Set(o.filter(w=>[d.equipmentNeeded.map(D=>D.id)].toString().includes(w.id)).map(w=>w.name))];return I(k({},d),{categories:d.categories,categoriesLabel:d.categoryLabels.join(", "),muscleGroupLabel:f?.name||d.primaryMuscleGroup,equipmentLabel:h.join(", ")})}))),{initialValue:[]});filteredExercises=we(()=>{let e=this.hydratedExercises(),t=this.showHiddenExercises();if(!e)return[];t||(e=e.filter(h=>!h.isHidden));let i=this.selectedCategory();i&&(e=e.filter(h=>h.categories.filter(w=>w.toString()===i).length>0));let o=this.selectedEquipment();o&&(e=e.filter(h=>Array.isArray(h.equipmentNeeded)?h.equipmentNeeded.some(w=>w.id===o):h.equipmentNeeded===o));let d=this.selectedMuscleGroup();d&&(e=e.filter(h=>h.primaryMuscleGroup?.id===d.id));let f=this.searchTerm();if(f=this.exerciseService.normalizeExerciseNameForSearch(f),f){let h=f.split(/\s+/).filter(Boolean);e=e.filter(w=>{let at=[[w._searchId,w._searchName,w.name].filter(Boolean).join(" "),w.name,w.categories,w.description||""].join(" ").toLowerCase();return h.every(ot=>at.includes(ot))})}return e.map(h=>{let w=this.muscleGroupService.getHydratedMuscles().find(D=>D.id===h.primaryMuscleGroup?.id);return I(k({},h),{iconName:this.exerciseService.determineExerciseIcon(this.exerciseService.mapHydratedExerciseToExercise(h),h?.name),categoryLabel:h.categories,muscleGroupLabel:w?.name||h.primaryMuscleGroup?.name})})});constructor(){this.categories=this.exerciseCategoryService.getHydratedCategories()}showBackToTopButton=S(!1);onWindowScroll(){let e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;this.showBackToTopButton.set(e>400)}isFabActionsOpen=S(!1);isTouchDevice=!1;ngOnInit(){ue(this.platformId)&&(window.scrollTo(0,0),this.isTouchDevice="ontouchstart"in window||navigator.maxTouchPoints>0),this.primaryMuscleGroups$=this.exerciseService.getUniquePrimaryMuscleGroups(),this.menuModeDropdown=this.appSettingsService.isMenuModeDropdown(),this.menuModeCompact=this.appSettingsService.isMenuModeCompact(),this.menuModeModal=this.appSettingsService.isMenuModeModal(),this.exerciseService.getExercises().subscribe(e=>{this.staticExercises=e,this.translateAllExercises()}),this.langChangeSub=this.translate.onLangChange.subscribe(()=>{this.translateAllExercises()})}onCategoryChange(e){let t=e.target;this.selectedCategory.set(t.value||null)}onEquipmentChange(e){let t=e.target;this.selectedEquipment.set(t.value||null)}onMuscleGroupChange(e){let t=e.target;if(!t.value||!this.primaryMuscleGroups$){this.selectedMuscleGroup.set(null);return}this.primaryMuscleGroups$?.subscribe(i=>{let o=i.find(d=>d.id===t.value)||null;this.selectedMuscleGroup.set(o)})}onSearchTermChange(e){let t=e.target;this.searchTerm.set(t.value.toLowerCase())}clearFilters(){this.selectedCategory.set(null),this.selectedMuscleGroup.set(null),this.searchTerm.set(""),this.showHiddenExercises.set(!1);let e=document.getElementById("category-filter");e&&(e.value="");let t=document.getElementById("muscle-group-filter");t&&(t.value="");let i=document.getElementById("search-term");i&&(i.value=""),this.selectedEquipment.set(null);let o=document.getElementById("equipment-filter");o&&(o.value="")}goToExerciseDetails(e){this.router.navigate(["/library",e]),this.actionsVisibleId.set(null)}getIconPath(e){return this.exerciseService.getIconPath(e)}editExercise(e){this.router.navigate(["/library/edit",e]),this.actionsVisibleId.set(null)}deleteExercise(e){return B(this,null,function*(){this.actionsVisibleId.set(null);let t=this.allExercises().find(o=>o.id===e);if(!t){this.toastService.error(this.translate.instant("exerciseList.delete.notFound"),0,"Error");return}let i=yield this.alertService.showConfirm(this.translate.instant("exerciseList.delete.confirmTitle"),this.translate.instant("exerciseList.delete.confirmMessage",{name:t.name}),this.translate.instant("common.delete"));if(i&&i.data)try{this.spinnerService.show(this.translate.instant("exerciseList.delete.deleting")),yield this.exerciseService.deleteExercise(e),this.toastService.success(this.translate.instant("exerciseList.delete.success",{name:t.name}),3e3,this.translate.instant("exerciseList.delete.successTitle"))}catch(o){console.error("Error deleting exercise:",o),this.toastService.error(this.translate.instant("exerciseList.delete.error"),0,"Error")}finally{this.spinnerService.hide()}})}hideExercise(e){this.exerciseService.hideExercise(e).subscribe(),this.activeExerciseIdActions.set(null)}unhideExercise(e){this.exerciseService.unhideExercise(e).subscribe(),this.activeExerciseIdActions.set(null)}toggleFilterAccordion(){this.isFilterAccordionOpen.update(e=>!e)}scrollToTop(){ue(this.platformId)&&window.scrollTo({top:0,behavior:"smooth"})}handleFabClick(){this.isFabActionsOpen.update(e=>!e)}handleFabMouseEnter(){this.isTouchDevice||this.isFabActionsOpen.set(!0)}handleFabMouseLeave(){this.isTouchDevice||this.isFabActionsOpen.set(!1)}navigateToCreateExercise(){this.router.navigate(["/library/new"])}getExerciseDropdownActionItems(e,t){let i="rounded text-left px-3 py-1.5 sm:px-4 sm:py-2 font-medium text-gray-600 dark:text-gray-300 hover:bg-primary flex items-center text-sm hover:text-white dark:hover:text-gray-100 dark:hover:text-white",o="rounded text-left px-3 py-1.5 sm:px-4 sm:py-2 font-medium text-gray-600 dark:text-gray-300 hover:bg-red-600 flex items-center text-sm hover:text-gray-100 hover:animate-pulse",d=this.allExercises().find(h=>h.id===e),f=[I(k({},it),{data:{exerciseId:e}}),I(k({},rt),{data:{exerciseId:e}})];return d?.isHidden?f.push(I(k({},tt),{data:{exerciseId:e}})):f.push(I(k({},et),{data:{exerciseId:e}})),f.push(I(k({},nt),{data:{exerciseId:e}})),f}handleActionMenuItemClick(e,t){let i=e.data?.exerciseId;if(i){switch(e.actionKey){case"view":this.goToExerciseDetails(i);break;case"edit":this.editExercise(i);break;case"delete":this.deleteExercise(i);break;case"hide":this.hideExercise(i);break;case"unhide":this.unhideExercise(i);break}this.activeExerciseIdActions.set(null)}}activeExerciseIdActions=S(null);toggleActions(e,t){t.stopPropagation(),this.activeExerciseIdActions.update(i=>i===e?null:e)}areActionsVisible(e){return this.activeExerciseIdActions()===e}onCloseActionMenu(){this.activeExerciseIdActions.set(null)}translateAllExercises(){this.translate.get("exercises").subscribe(e=>{let t=this.exerciseCategoryService.getHydratedCategories(),i=this.muscleGroupService.getHydratedMuscles(),o=this.staticExercises.map(d=>{let f=i.find(h=>h.id===d.primaryMuscleGroup);return I(k({},d),{name:e[d.id]?.name||d.name,description:e[d.id]?.description||d.description,categories:d.categories,muscleGroupLabels:f?.name||d.primaryMuscleGroup})});this.allExercises.set(o)})}ngOnDestroy(){this.langChangeSub?.unsubscribe()}get sortedCategories(){return[...Array.isArray(this.categories)?this.categories:[]].sort((t,i)=>this.translate.instant(t.name).localeCompare(this.translate.instant(i.name)))}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=H({type:r,selectors:[["app-exercise-list"]],hostBindings:function(t,i){t&1&&v("scroll",function(){return i.onWindowScroll()},ye)},decls:80,vars:68,consts:[["loadingOrInitial",""],["noExercisesAfterFilter",""],[1,"container","mx-auto","p-2","sm:p-4"],[1,"flex","justify-between","items-center","pb-2"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-200"],["type","button",1,"rounded-md","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-primary","dark:focus:ring-primary-light","transition-all","duration-300","ease-in-out",3,"click"],["stroke","currentColor","viewBox","0 0 24 24","stroke-width","0.02","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"w-10","h-10","transition-transform","duration-300"],["stroke-linecap","round","stroke-linejoin","round","d","M9 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2zM6.17 5a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 0 1 0-2h1.17zM15 11a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-1.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h7.17zM9 17a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h1.17z"],[1,"sr-only"],[1,"overflow-y-auto","transition-all","duration-500","ease-in-out","rounded-md"],[1,"p-4","bg-white","dark:bg-gray-700","rounded-md","shadow-md","border","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-300","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","items-end"],["for","category-filter",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","category-filter",1,"block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200",3,"change","value"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","equipment-filter",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","equipment-filter",1,"block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200",3,"change","value"],["for","muscle-group-filter",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","muscle-group-filter",1,"block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200",3,"change","value"],[3,"value"],["for","search-term",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","search-term",1,"block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200",3,"input","placeholder","value"],[1,"md:col-span-1","border-t","md:border-t-0","pt-4","md:pt-0"],["for","show-hidden-exercises",1,"inline-flex","items-center","cursor-pointer","mt-2"],["type","checkbox","id","show-hidden-exercises",1,"sr-only","peer",3,"change","checked"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-600","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-primary","dark:peer-checked:bg-primary-dark"],[1,"ms-3","text-sm","font-medium","text-gray-900","dark:text-gray-300"],[1,"mt-4","flex","justify-between","items-center"],["appPress","",1,"flex","px-4","py-2","bg-yellow-200","dark:bg-yellow-700","text-gray-700","dark:text-gray-200","rounded-md","hover:bg-yellow-300","dark:hover:bg-yellow-500","text-sm","items-center",3,"shortPress"],["name","trash"],["class","text-sm text-gray-600 dark:text-gray-400",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"fixed","bottom-20","right-6","z-40","flex","flex-col","items-center","gap-4"],["appPress","","type","button","class","bg-primary dark:bg-primary text-white rounded-full p-3 shadow-lg hover:bg-primary-dark dark:hover:bg-primary-light focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-focus dark:focus:ring-offset-gray-900 transition-opacity animate-fade-in",3,"shortPress",4,"ngIf"],[1,"flex","flex-col-reverse","items-center","gap-4",3,"mouseenter","mouseleave"],["appPress","","type","button",1,"flex","h-14","w-14","items-center","justify-center","rounded-full","bg-primary","text-white","shadow-xl","transition-all","duration-300","hover:bg-primary-dark","hover:scale-105","focus:outline-none","focus:ring-2","focus:ring-primary-focus","focus:ring-offset-2","dark:ring-offset-gray-900",3,"shortPress"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2.5",1,"h-8","w-8","transition-transform","duration-300"],["stroke-linecap","round","stroke-linejoin","round","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["class","flex flex-col items-center gap-4",4,"ngIf"],[1,"text-sm","text-gray-600","dark:text-gray-400"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",4,"ngIf","ngIfElse"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","mt-4"],["appBumpClick","","class","bg-white dark:bg-gray-700 rounded-md shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col relative border hover-dark-border-card hover-light-border-card",3,"zIndex","click",4,"ngFor","ngForOf"],["appBumpClick","",1,"bg-white","dark:bg-gray-700","rounded-md","shadow-lg","hover:shadow-xl","transition-shadow","duration-300","flex","flex-col","relative","border","hover-dark-border-card","hover-light-border-card",3,"click"],[1,"p-3","cursor-pointer"],[1,"flex","items-start","mb-1.5"],["class","w-7 h-7 sm:w-8 sm:h-8 object-contain mr-2 mt-0.5 sm:mt-1",3,"src","alt","ngClass",4,"ngIf"],[1,"text-lg","sm:text-xl","font-semibold","text-primary","dark:text-primary-light","flex-grow","pr-8",3,"title"],[1,"flex","flex-wrap","gap-2","mb-2"],["class","inline-flex items-center gap-x-1.5 rounded-full bg-yellow-100 px-2 py-1 text-xs font-medium text-yellow-700 dark:bg-yellow-800/50 dark:text-yellow-400",4,"ngIf"],["class","inline-flex items-center gap-x-1.5 rounded-full bg-blue-100 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-blue-800/50 dark:text-blue-400",4,"ngIf"],[1,"text-xs","text-gray-500","font-semibold","dark:text-gray-300","mb-2","gap-1","capitalize","flex","items-center"],["name","category",1,"h-5","w-5"],["class","text-xs text-gray-500 font-semibold dark:text-gray-300 mb-2 gap-1 capitalize flex items-center",4,"ngIf"],["class","flex items-center text-xs font-semibold text-gray-500 dark:text-gray-300 mb-2 flex gap-1",4,"ngIf"],["class","text-gray-600 dark:text-gray-400 text-xs sm:text-sm mb-3 sm:mb-4 line-clamp-2 sm:line-clamp-3",3,"title",4,"ngIf"],["class","text-xs sm:text-sm text-gray-500 dark:text-gray-400 italic",4,"ngIf"],[1,"absolute","top-2","right-2"],[1,"relative"],[1,"text-gray-500","dark:text-gray-400","hover:bg-gray-200","dark:hover:bg-gray-500","rounded-full","focus:outline-none","flex","items-center",3,"click"],["name","menu-action",1,"h-10","w-10"],["class","action-menu-container",3,"modalTitle","displayMode","gridClass","items","isVisible","itemClick","closeMenu",4,"ngIf"],["displayMode","compact",3,"items","isVisible","itemClick","closeMenu",4,"ngIf"],[1,"w-7","h-7","sm:w-8","sm:h-8","object-contain","mr-2","mt-0.5","sm:mt-1",3,"src","alt","ngClass"],[1,"inline-flex","items-center","gap-x-1.5","rounded-full","bg-yellow-100","px-2","py-1","text-xs","font-medium","text-yellow-700","dark:bg-yellow-800/50","dark:text-yellow-400"],["name","eye-off"],[1,"inline-flex","items-center","gap-x-1.5","rounded-full","bg-blue-100","px-2","py-1","text-xs","font-medium","text-blue-700","dark:bg-blue-800/50","dark:text-blue-400"],["name","favourite"],["name","dumbbell",1,"h-5","w-5"],[1,"flex","items-center","text-xs","font-semibold","text-gray-500","dark:text-gray-300","mb-2","flex","gap-1"],["name","muscle",1,"h-5","w-5"],[1,"text-center","text-xs","bg-purple-100","text-purple-700","dark:bg-purple-700","dark:text-purple-200","px-1.5","py-0.5","rounded-full","mx-1","inline-block"],[1,"text-gray-600","dark:text-gray-400","text-xs","sm:text-sm","mb-3","sm:mb-4","line-clamp-2","sm:line-clamp-3",3,"title"],[1,"text-xs","sm:text-sm","text-gray-500","dark:text-gray-400","italic"],[1,"action-menu-container",3,"itemClick","closeMenu","modalTitle","displayMode","gridClass","items","isVisible"],["displayMode","compact",3,"itemClick","closeMenu","items","isVisible"],[1,"text-center","py-10"],[1,"text-xl","text-gray-600","dark:text-gray-400"],[1,"text-sm","text-gray-500","dark:text-gray-400","mt-2"],["class","text-center py-10",4,"ngIf"],["class","text-center py-12 px-6 bg-white dark:bg-gray-700 rounded-md shadow-md",4,"ngIf"],["name","loading"],[1,"text-lg","text-gray-600","dark:text-gray-400","mt-3"],[1,"text-center","py-12","px-6","bg-white","dark:bg-gray-700","rounded-md","shadow-md"],["name","alert-filled"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-300","mb-2"],[1,"text-gray-500","dark:text-gray-400","mb-6"],["routerLink","/library/new",1,"bg-primary","hover:bg-primary-dark","text-white","font-semibold","py-2.5","px-6","rounded-md","shadow-md","hover:shadow-lg","transition-all","duration-300","focus:outline-none","focus:ring-2","focus:ring-primary-light","focus:ring-opacity-75"],["appPress","","type","button",1,"bg-primary","dark:bg-primary","text-white","rounded-full","p-3","shadow-lg","hover:bg-primary-dark","dark:hover:bg-primary-light","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-focus","dark:focus:ring-offset-gray-900","transition-opacity","animate-fade-in",3,"shortPress"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M4.5 15.75l7.5-7.5 7.5 7.5"],[1,"flex","flex-col","items-center","gap-4"],[1,"group","relative","flex","items-center"],[1,"absolute","right-full","md:hidden","whitespace-nowrap","rounded-md","bg-blue-500","px-3","py-2","text-sm","font-semibold","text-white","group-hover:block",2,"margin-right","-10px"],["appPress","","type","button",1,"flex","h-14","w-14","items-center","justify-center","rounded-full","bg-blue-500","text-white","shadow-lg","transition-transform","hover:scale-110","focus:outline-none","focus:ring-2","focus:ring-blue-400","focus:ring-offset-2","dark:ring-offset-gray-900",3,"shortPress"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-7","w-7"],["d","M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"]],template:function(t,i){if(t&1){let o=M();s(0,"div",2)(1,"header",3)(2,"h1",4),m(3),l(4,"translate"),a(),s(5,"button",5),v("click",function(){return y(o),b(i.toggleFilterAccordion())}),A(),s(6,"svg",6),_(7,"path",7),a(),q(),s(8,"span",8),m(9),l(10,"translate"),a()()(),s(11,"div",9)(12,"div",10)(13,"h2",11),m(14),l(15,"translate"),a(),s(16,"div",12)(17,"div")(18,"label",13),m(19),l(20,"translate"),a(),s(21,"select",14),v("change",function(f){return y(o),b(i.onCategoryChange(f))}),s(22,"option",15),m(23),l(24,"translate"),a(),x(25,xt,2,2,"option",16),a()(),s(26,"div")(27,"label",17),m(28),l(29,"translate"),a(),s(30,"select",18),v("change",function(f){return y(o),b(i.onEquipmentChange(f))}),s(31,"option",15),m(32),l(33,"translate"),a(),x(34,ft,3,4,"option",16),l(35,"async"),a()(),s(36,"div")(37,"label",19),m(38),l(39,"translate"),a(),s(40,"select",20),v("change",function(f){return y(o),b(i.onMuscleGroupChange(f))}),s(41,"option",15),m(42),l(43,"translate"),a(),be(44,ht,3,4,"option",21,gt),l(46,"async"),a()(),s(47,"div")(48,"label",22),m(49),l(50,"translate"),a(),s(51,"input",23),l(52,"translate"),v("input",function(f){return y(o),b(i.onSearchTermChange(f))}),a()(),s(53,"div",24)(54,"label",25)(55,"input",26),v("change",function(){return y(o),b(i.showHiddenExercises.set(!i.showHiddenExercises()))}),a(),_(56,"div",27),s(57,"span",28),m(58),l(59,"translate"),a()()()(),s(60,"div",29)(61,"button",30),v("shortPress",function(){return y(o),b(i.clearFilters())}),_(62,"app-icon",31),m(63),l(64,"translate"),l(65,"uppercase"),a(),x(66,vt,3,6,"div",32),a()()(),x(67,At,4,2,"div",33)(68,Gt,1,1,"ng-template",null,0,me),a(),s(70,"div",34),x(71,Dt,6,3,"button",35),s(72,"div",36),v("mouseenter",function(){return y(o),b(i.handleFabMouseEnter())})("mouseleave",function(){return y(o),b(i.handleFabMouseLeave())}),s(73,"button",37),v("shortPress",function(){return y(o),b(i.handleFabClick())}),A(),s(74,"svg",38),_(75,"path",39),a(),q(),s(76,"span",8),m(77),l(78,"translate"),a()(),x(79,Ot,13,11,"div",40),a()()}if(t&2){let o,d=ce(69);n(3),g(c(4,34,"exerciseList.title")),n(3),P("rotate-180",i.isFilterAccordionOpen()),n(3),g(c(10,36,"exerciseList.toggleFilters")),n(2),de("max-height",i.isFilterAccordionOpen()?"600px":"0px"),P("mb-8",i.isFilterAccordionOpen()),n(3),g(c(15,38,"exerciseList.filters.title")),n(5),g(c(20,40,"exerciseList.filters.categoryLabel")),n(2),p("value",i.selectedCategory()||""),n(2),g(c(24,42,"exerciseList.filters.allCategories")),n(2),p("ngForOf",i.sortedCategories),n(3),E(" ",c(29,44,"exerciseList.filters.equipmentLabel")," "),n(2),p("value",i.selectedEquipment()||""),n(2),g(c(33,46,"exerciseList.filters.allEquipment")),n(2),p("ngForOf",c(35,48,i.hydratedEquipments)),n(4),g(c(39,50,"exerciseList.filters.muscleLabel")),n(2),p("value",((o=i.selectedMuscleGroup())==null?null:o.id)||""),n(2),g(c(43,52,"exerciseList.filters.allMuscles")),n(2),Ee(c(46,54,i.primaryMuscleGroups$)),n(5),g(c(50,56,"exerciseList.filters.searchLabel")),n(2),p("placeholder",c(52,58,"exerciseList.filters.searchPlaceholder"))("value",i.searchTerm()),n(4),p("checked",i.showHiddenExercises()),n(3),E(" ",c(59,60,"exerciseList.filters.showHidden")," "),n(5),E(" ",c(65,64,c(64,62,"exerciseList.filters.clearButton"))," "),n(3),p("ngIf",i.allExercises().length>0),n(),p("ngIf",i.allExercises().length>0)("ngIfElse",d),n(4),p("ngIf",i.showBackToTopButton()),n(3),P("rotate-45",i.isFabActionsOpen()),n(3),g(c(78,66,"exerciseList.fab.openMenu")),n(2),p("ngIf",i.isFabActionsOpen())}},dependencies:[Y,Me,U,z,Q,Re,Je,J,ie,We,ke,Te,Ie,Fe,te],encapsulation:2,data:{animation:[W("fabSlideUp",[L(":enter",[T({opacity:0,transform:"translateY(200%)"}),F("250ms ease-out",T({opacity:1,transform:"translateY(0)"}))]),L(":leave",[F("200ms ease-in",T({opacity:0,transform:"translateY(100%)"}))])]),W("slideInOutActions",[V("void",T({height:"0px",opacity:0,overflow:"hidden",paddingTop:"0",paddingBottom:"0",marginTop:"0",marginBottom:"0"})),V("*",T({height:"*",opacity:1,paddingTop:"0.5rem",paddingBottom:"0.5rem"})),L("void <=> *",F("200ms ease-in-out"))]),W("dropdownMenu",[V("void",T({opacity:0,transform:"scale(0.75) translateY(-10px)",transformOrigin:"top right"})),V("*",T({opacity:1,transform:"scale(1) translateY(0)",transformOrigin:"top right"})),L("void => *",[F("150ms cubic-bezier(0.25, 0.8, 0.25, 1)")]),L("* => void",[F("100ms cubic-bezier(0.25, 0.8, 0.25, 1)")])])]}})};function Ht(r,e){if(r&1){let t=M();s(0,"span",31),m(1),l(2,"translate"),s(3,"button",32),v("click",function(){let o=y(t).index,d=u(2);return b(d.removeCategory(o))}),_(4,"app-icon",33),a()()}if(r&2){let t=e.$implicit;n(),E(" ",c(2,1,"categories."+t)," ")}}function Pt(r,e){if(r&1&&(s(0,"div",29),x(1,Ht,5,3,"span",30),a()),r&2){let t=u();n(),p("ngForOf",t.selectedCategories)}}function $t(r,e){if(r&1){let t=M();s(0,"li",36),v("mousedown",function(){let o=y(t).$implicit,d=u(2);return b(d.selectCategory(o))}),m(1),l(2,"translate"),a()}if(r&2){let t=e.$implicit;n(),E(" ",c(2,1,"categories."+t)," ")}}function jt(r,e){if(r&1&&(s(0,"ul",34),x(1,$t,3,3,"li",35),a()),r&2){let t=u();n(),p("ngForOf",t.filteredCategories)}}function Rt(r,e){if(r&1&&(s(0,"option",37),m(1),a()),r&2){let t=e.$implicit;p("value",t.id),n(),g(t.name)}}function Ut(r,e){if(r&1){let t=M();s(0,"span",31),m(1),l(2,"translate"),s(3,"button",32),v("click",function(){let o=y(t).index,d=u(2);return b(d.removeMuscle(o))}),_(4,"app-icon",33),a()()}if(r&2){let t=e.$implicit,i=u(2);n(),E(" ",c(2,1,i.getMuscleNameById(t.value))," ")}}function zt(r,e){if(r&1&&(s(0,"div",29),x(1,Ut,5,3,"span",30),a()),r&2){let t=u();n(),p("ngForOf",t.getFormArray("muscleGroups").controls)}}function Yt(r,e){if(r&1){let t=M();s(0,"li",36),v("mousedown",function(){let o=y(t).$implicit,d=u(2);return b(d.selectMuscle(o))}),m(1),a()}if(r&2){let t=e.$implicit;n(),E(" ",t.name," ")}}function Kt(r,e){if(r&1&&(s(0,"ul",34),x(1,Yt,2,1,"li",35),a()),r&2){let t=u();n(),p("ngForOf",t.filteredMuscles())}}function Qt(r,e){if(r&1){let t=M();s(0,"span",39),m(1),l(2,"translate"),s(3,"button",32),v("click",function(){let o=y(t).index,d=u(2);return b(d.removeEquipment(o))}),_(4,"app-icon",40),a()()}if(r&2){let t=e.$implicit,i=u(2);n(),E(" ",c(2,1,i.getEquipmentNameById(t.value))," ")}}function Wt(r,e){if(r&1&&(s(0,"div",29),x(1,Qt,5,3,"span",38),a()),r&2){let t=u();n(),p("ngForOf",t.getFormArray("equipmentNeeded").controls)}}function Xt(r,e){if(r&1){let t=M();s(0,"li",36),v("mousedown",function(){let o=y(t).$implicit,d=u(2);return b(d.selectEquipment(o))}),m(1),a()}if(r&2){let t=e.$implicit;n(),E(" ",t.name," ")}}function Zt(r,e){if(r&1&&(s(0,"ul",34),x(1,Xt,2,1,"li",35),a()),r&2){let t=u();n(),p("ngForOf",t.filteredEquipment())}}function Jt(r,e){r&1&&_(0,"app-icon",41)}function ei(r,e){r&1&&_(0,"app-icon",42)}var G=class r{translatedEquipment=[];translatedMuscles=[];fb=C($e);router=C(K);route=C(Le);exerciseService=C(ae);alertService=C(re);muscleMapService=C(se);equipmentService=C(ne);translate=C(ee);exerciseForm;isEditMode=S(!1);editingExerciseId=null;pageTitle=S("");allMuscles=X(this.muscleMapService.translatedMuscles$,{initialValue:[]});allEquipment=S([]);muscleSearchCtrl=new Z("");equipmentSearchCtrl=new Z("");filteredMuscles=S([]);highlightedMuscleIndex=S(-1);filteredEquipment=S([]);highlightedEquipmentIndex=S(-1);muscleMap=new Map;equipmentMap=new Map;categories=Object.values(Ke);isCategoryInputFocused=!1;categorySearchCtrl=new Z("");selectedCategories=[];filteredCategories=[];constructor(){this.exerciseForm=this.fb.group({name:["",N.required],description:[""],categories:[[],N.required],primaryMuscleGroup:["",N.required],muscleGroups:this.fb.array([]),equipmentNeeded:this.fb.array([]),videoUrl:[""],notes:[""]}),Se(()=>{let e=this.allMuscles();this.muscleNameMap=new Map(e.map(i=>[i.id,i.name]));let t=this.allEquipment();this.equipmentNameMap=new Map(t.map(i=>[i.id,i.name]))})}ngOnInit(){return B(this,null,function*(){this.route.paramMap.pipe(he(e=>(this.editingExerciseId=e.get("id"),this.editingExerciseId?(this.isEditMode.set(!0),this.pageTitle.set(this.translate.instant("exerciseForm.editTitle")),this.exerciseService.getExerciseById(this.editingExerciseId)):(this.pageTitle.set(this.translate.instant("exerciseForm.addTitle")),ge(null)))),O(1)).subscribe(e=>{e&&this.isEditMode()&&this.patchFormForEditing(e)}),this.muscleSearchCtrl.valueChanges.subscribe(e=>this.filterMuscles(e||"")),this.equipmentSearchCtrl.valueChanges.subscribe(e=>this.filterEquipment(e||"")),this.equipmentService.getTranslatedEquipment().pipe(O(1)).subscribe(e=>{this.translatedEquipment=e}),this.muscleMapService.getTranslatedMuscles().pipe(O(1)).subscribe(e=>{this.translatedMuscles=e}),this.categorySearchCtrl.valueChanges.subscribe(e=>this.filterCategories(e||"")),this.exerciseForm.value.categories&&(this.selectedCategories=[...this.exerciseForm.value.categories])})}hideMuscleSuggestions(){setTimeout(()=>this.filteredMuscles.set([]),150)}onMuscleSearchKeydown(e){let t=e.key,i=this.filteredMuscles();if(i.length!==0){if(t==="ArrowDown")e.preventDefault(),this.highlightedMuscleIndex.update(o=>(o+1)%i.length);else if(t==="ArrowUp")e.preventDefault(),this.highlightedMuscleIndex.update(o=>(o-1+i.length)%i.length);else if(t==="Enter"){e.preventDefault();let o=this.highlightedMuscleIndex();o>-1&&this.selectMuscle(i[o])}}}hideEquipmentSuggestions(){setTimeout(()=>this.filteredEquipment.set([]),150)}patchFormForEditing(e){this.exerciseForm.patchValue({name:e.name,description:e.description,categories:e.categories||[],primaryMuscleGroup:(typeof e.primaryMuscleGroup=="object"&&e.primaryMuscleGroup!==null,e.primaryMuscleGroup),videoUrl:e.videoUrl||"",notes:e.notes||""});let t=(e.muscleGroups||[]).map(o=>o),i=(e.equipmentNeeded||[]).map(o=>o);this.setFormArrayControls("muscleGroups",t),this.setFormArrayControls("equipmentNeeded",i),this.selectedCategories=e.categories||[],this.exerciseForm.get("categories")?.setValue(this.selectedCategories)}showAllCategoriesIfFew(){this.categories.length<=10&&(this.filteredCategories=this.categories.filter(e=>!this.selectedCategories.includes(e)))}onSubmit(){return B(this,null,function*(){if(this.exerciseForm.invalid){this.exerciseForm.markAllAsTouched();return}let e=this.exerciseForm.value;try{if(this.isEditMode()&&this.editingExerciseId)yield le(this.exerciseService.updateExercise(I(k({},e),{id:this.editingExerciseId}))),this.router.navigate(["/library",this.editingExerciseId]);else{let t=yield le(this.exerciseService.addExercise(e));t&&this.router.navigate(["/library",t.id])}}catch(t){console.error("Error saving exercise:",t)}})}muscleNameMap=new Map;equipmentNameMap=new Map;getFormArray(e){return this.exerciseForm.get(e)}setFormArrayControls(e,t){let i=this.getFormArray(e);i.clear(),t.forEach(o=>i.push(this.fb.control(o,N.required)))}getMuscleNameById(e){return this.translatedMuscles.find(t=>t.id===e)?.name||e}getEquipmentNameById(e){return this.translatedEquipment.find(t=>t.id===e)?.name||e}filterMuscles(e){if(!e){this.filteredMuscles.set([]);return}let t=e.toLowerCase().trim(),i=this.getFormArray("muscleGroups").value,o=this.sortedMuscles.filter(d=>{let f=d.name.toLowerCase().includes(t),h=d.id.toLowerCase().includes(t),w=i.includes(d.id);return(f||h)&&!w});this.filteredMuscles.set(o),this.highlightedMuscleIndex.set(-1)}filterEquipment(e){if(!e){this.filteredEquipment.set([]);return}let t=e.toLowerCase().trim(),i=this.getFormArray("equipmentNeeded").value,o=this.translatedEquipment.filter(d=>{let f=d.name.toLowerCase().includes(t),h=d.id.toLowerCase().includes(t),w=i.includes(d.id);return(f||h)&&!w});this.filteredEquipment.set(o),this.highlightedEquipmentIndex.set(-1)}selectMuscle(e){this.getFormArray("muscleGroups").push(this.fb.control(e.id)),this.muscleSearchCtrl.setValue("")}removeMuscle(e){this.getFormArray("muscleGroups").removeAt(e)}selectEquipment(e){this.getFormArray("equipmentNeeded").push(this.fb.control(e.id)),this.equipmentSearchCtrl.setValue("")}removeEquipment(e){this.getFormArray("equipmentNeeded").removeAt(e)}hideSuggestions(){setTimeout(()=>{this.filteredMuscles.set([]),this.filteredEquipment.set([])},150)}filterCategories(e){if(!e){this.isCategoryInputFocused&&this.sortedCategories.length<=10?this.filteredCategories=this.sortedCategories.filter(i=>!this.selectedCategories.includes(i)):this.filteredCategories=[];return}let t=e.toLowerCase().trim();this.filteredCategories=this.sortedCategories.filter(i=>!this.selectedCategories.includes(i)&&this.translate.instant("categories."+i).toLowerCase().includes(t))}selectCategory(e){this.selectedCategories.push(e),this.exerciseForm.get("categories")?.setValue(this.selectedCategories),this.categorySearchCtrl.setValue(""),this.filteredCategories=[]}removeCategory(e){this.selectedCategories.splice(e,1),this.exerciseForm.get("categories")?.setValue(this.selectedCategories)}hideCategorySuggestions(){setTimeout(()=>this.filteredCategories=[],150)}onCategoryInputFocus(){this.isCategoryInputFocused=!0,this.sortedCategories.length<=10&&(this.filteredCategories=this.sortedCategories.filter(e=>!this.selectedCategories.includes(e)))}onCategoryInputBlur(){this.isCategoryInputFocused=!1,setTimeout(()=>this.filteredCategories=[],150)}get sortedCategories(){return[...this.categories].sort((e,t)=>this.translate.instant("categories."+e).localeCompare(this.translate.instant("categories."+t)))}get sortedMuscles(){return[...this.translatedMuscles].sort((e,t)=>this.translate.instant(e.name).localeCompare(this.translate.instant(t.name)))}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=H({type:r,selectors:[["app-exercise-form"]],decls:69,vars:61,consts:[[1,"container","mx-auto","p-4"],[1,"flex","items-center","justify-start","mb-4"],[1,"text-gray-600","dark:text-gray-300","hover:text-primary","dark:hover:text-primary-light","p-2","-ml-2",3,"routerLink"],["name","back",1,"h-7","w-7"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-200","ml-2"],[1,"space-y-6","bg-white","dark:bg-gray-800","p-6","rounded-lg","shadow-md",3,"ngSubmit","formGroup"],["for","name",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","name","formControlName","name",1,"mt-1","block","w-full","p-2","border","rounded-md","dark:bg-gray-700","dark:border-gray-600","dark:text-gray-200"],["for","description",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","description","formControlName","description","rows","3",1,"mt-1","block","w-full","p-2","border","rounded-md","dark:bg-gray-700","dark:border-gray-600","dark:text-gray-200"],[1,"relative"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["class","mt-2 flex flex-wrap gap-2 p-2 border rounded-md min-h-[42px] dark:border-gray-600",4,"ngIf"],["type","text",1,"mt-1","block","w-full","p-2","border","rounded-md","dark:bg-gray-700","dark:border-gray-600",3,"focus","blur","formControl","placeholder"],["class","absolute z-10 w-full mt-1 bg-white dark:bg-gray-900 shadow-lg max-h-60 rounded-md overflow-auto border dark:border-gray-600",4,"ngIf"],["for","primaryMuscleGroup",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","primaryMuscleGroup","formControlName","primaryMuscleGroup",1,"mt-1","block","w-full","p-2","border","rounded-md","dark:bg-gray-700","dark:border-gray-600","dark:text-gray-200"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text",1,"mt-1","block","w-full","p-2","border","rounded-md","dark:bg-gray-700","dark:border-gray-600",3,"blur","formControl","placeholder"],["for","videoUrl",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","url","id","videoUrl","formControlName","videoUrl",1,"mt-1","block","w-full","p-2","border","rounded-md","dark:bg-gray-700","dark:border-gray-600"],["for","notes",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","notes","formControlName","notes","rows","3",1,"mt-1","block","w-full","p-2","border","rounded-md","dark:bg-gray-700","dark:border-gray-600"],[1,"pt-6","flex","justify-end","space-x-3"],["routerLink","/library",1,"px-4","py-2","border","rounded-md","shadow-sm","font-medium","text-gray-700","dark:text-gray-200","bg-white","dark:bg-gray-600","hover:bg-gray-50","dark:hover:bg-gray-500"],["type","submit",1,"flex","items-center","justify-center","px-4","py-2","border","border-transparent","rounded-md","shadow-sm","font-medium","text-white","bg-primary","hover:bg-primary-dark","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["name","save","class","h-5 w-5 mr-2",4,"ngIf"],["name","plus-circle","class","h-5 w-5 mr-2",4,"ngIf"],[1,"mt-2","flex","flex-wrap","gap-2","p-2","border","rounded-md","min-h-[42px]","dark:border-gray-600"],["class","inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-primary-light text-white",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-sm","font-medium","bg-primary-light","text-white"],["type","button",1,"flex-shrink-0","ml-1.5","p-0.5","rounded-full","inline-flex","items-center","justify-center","hover:bg-white/20",3,"click"],["name","cancel",1,"h-4","w-4"],[1,"absolute","z-10","w-full","mt-1","bg-white","dark:bg-gray-900","shadow-lg","max-h-60","rounded-md","overflow-auto","border","dark:border-gray-600"],["class","text-gray-900 dark:text-gray-200 cursor-pointer select-none relative py-2 px-4 hover:bg-gray-100 dark:hover:bg-gray-700",3,"mousedown",4,"ngFor","ngForOf"],[1,"text-gray-900","dark:text-gray-200","cursor-pointer","select-none","relative","py-2","px-4","hover:bg-gray-100","dark:hover:bg-gray-700",3,"mousedown"],[3,"value"],["class","inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-sm","font-medium","bg-blue-100","text-blue-800","dark:bg-blue-900","dark:text-blue-200"],["name","cancel"],["name","save",1,"h-5","w-5","mr-2"],["name","plus-circle",1,"h-5","w-5","mr-2"]],template:function(t,i){t&1&&(s(0,"div",0)(1,"header",1)(2,"button",2),_(3,"app-icon",3),a(),s(4,"h1",4),m(5),a()(),s(6,"form",5),v("ngSubmit",function(){return i.onSubmit()}),s(7,"div")(8,"label",6),m(9),l(10,"translate"),a(),_(11,"input",7),a(),s(12,"div")(13,"label",8),m(14),l(15,"translate"),a(),_(16,"textarea",9),a(),s(17,"div",10)(18,"label",11),m(19),l(20,"translate"),a(),x(21,Pt,2,1,"div",12),s(22,"input",13),l(23,"translate"),v("focus",function(){return i.onCategoryInputFocus()})("blur",function(){return i.onCategoryInputBlur()}),a(),x(24,jt,2,1,"ul",14),a(),s(25,"div")(26,"label",15),m(27),l(28,"translate"),a(),s(29,"select",16)(30,"option",17),m(31),l(32,"translate"),a(),x(33,Rt,2,2,"option",18),a()(),s(34,"div",10)(35,"label",11),m(36),l(37,"translate"),a(),x(38,zt,2,1,"div",12),s(39,"input",19),l(40,"translate"),v("blur",function(){return i.hideSuggestions()}),a(),x(41,Kt,2,1,"ul",14),a(),s(42,"div",10)(43,"label",11),m(44),l(45,"translate"),a(),x(46,Wt,2,1,"div",12),s(47,"input",19),l(48,"translate"),v("blur",function(){return i.hideSuggestions()}),a(),x(49,Zt,2,1,"ul",14),a(),s(50,"div")(51,"label",20),m(52),l(53,"translate"),a(),_(54,"input",21),a(),s(55,"div")(56,"label",22),m(57),l(58,"translate"),a(),_(59,"textarea",23),a(),s(60,"div",24)(61,"a",25),m(62),l(63,"translate"),a(),s(64,"button",26),x(65,Jt,1,0,"app-icon",27)(66,ei,1,0,"app-icon",28),m(67),l(68,"translate"),a()()()()),t&2&&(n(2),p("routerLink","/library"),n(3),g(i.pageTitle()),n(),p("formGroup",i.exerciseForm),n(3),g(c(10,33,"exerciseForm.labels.name")),n(5),g(c(15,35,"exerciseForm.labels.description")),n(5),E(" ",c(20,37,"exerciseForm.labels.category")," "),n(2),p("ngIf",i.selectedCategories.length>0),n(),p("placeholder",j(c(23,39,"exerciseForm.placeholders.searchCategories")))("formControl",i.categorySearchCtrl),n(2),p("ngIf",i.filteredCategories.length>0),n(3),g(c(28,41,"exerciseForm.labels.primaryMuscle")),n(4),g(c(32,43,"exerciseForm.placeholders.selectPrimary")),n(2),p("ngForOf",i.allMuscles()),n(3),g(c(37,45,"exerciseForm.labels.otherMuscles")),n(2),p("ngIf",i.getFormArray("muscleGroups").controls.length>0),n(),p("placeholder",j(c(40,47,"exerciseForm.placeholders.searchMuscles")))("formControl",i.muscleSearchCtrl),n(2),p("ngIf",i.filteredMuscles().length>0),n(3),g(c(45,49,"exerciseForm.labels.equipment")),n(2),p("ngIf",i.getFormArray("equipmentNeeded").controls.length>0),n(),p("placeholder",j(c(48,51,"exerciseForm.placeholders.searchEquipment")))("formControl",i.equipmentSearchCtrl),n(2),p("ngIf",i.filteredEquipment().length>0),n(3),g(c(53,53,"exerciseForm.labels.videoUrl")),n(5),g(c(58,55,"exerciseForm.labels.notes")),n(5),g(c(63,57,"exerciseForm.buttons.cancel")),n(2),p("disabled",i.exerciseForm.invalid),n(),p("ngIf",i.isEditMode()),n(),p("ngIf",!i.isEditMode()),n(),E(" ",c(68,59,i.isEditMode()?"exerciseForm.buttons.update":"exerciseForm.buttons.add")," "))},dependencies:[Y,U,z,je,Ve,He,Pe,Be,Oe,Ae,qe,Ne,Ge,De,Q,J,ie,te],encapsulation:2})};var or=[{path:"",component:oe,title:"Exercise Library"},{path:"new",component:G,title:"Add New Exercise"},{path:"edit/:id",component:G,title:"Edit Exercise"},{path:":id",component:st,title:"Exercise Details"}];export{or as EXERCISE_LIBRARY_ROUTES};
