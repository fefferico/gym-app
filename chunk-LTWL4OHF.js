import{$a as h,Hb as L,Ia as o,Ib as $,Ja as l,Jb as K,Ka as d,Kb as F,La as _,Lb as z,Ma as u,N as f,Na as C,Pa as k,Qa as y,Ra as a,S as M,T as I,Ub as R,_ as D,aa as B,ab as S,ad as P,bb as E,bd as j,ea as w,ec as Y,fd as q,gd as G,ha as H,hd as J,ia as s,oc as v,pb as N,pc as m,qa as O,qb as V,sc as r,uc as p,va as c,wa as A}from"./chunk-PV6B3BBM.js";import{g as T}from"./chunk-GAL4ENT6.js";function U(e,n){e&1&&_(0,"div",12)}function W(e,n){if(e&1&&(u(0),_(1,"app-icon",15),C()),e&2){let t=a(2).$implicit,i=a(3);s(),h(t.iconClass||"w-5 h-5 mr-3"),o("name",i.getIconNameForComponent(t))}}function X(e,n){if(e&1&&_(0,"span",17),e&2){let t=n.ngIf,i=a(3).$implicit;o("innerHTML",t,w)("ngClass",(i.iconClass||"w-5 h-5 mr-3")+" flex-shrink-0")}}function Z(e,n){if(e&1&&(u(0),c(1,X,1,2,"span",16),C()),e&2){let t=a(2).$implicit,i=a(3);s(),o("ngIf",i.getIconHtml(t))}}function tt(e,n){if(e&1){let t=k();l(0,"button",13),y("click",function(x){M(t);let g=a().$implicit,b=a(3);return I(b.onItemClicked(x,g))}),c(1,W,2,3,"ng-container",14)(2,Z,2,1,"ng-container",14),l(3,"span"),S(4),N(5,"translate"),d()()}if(e&2){let t=a().$implicit,i=a(3);o("ngClass",i.defaultDropdownButtonClass+" "+t.buttonClass),s(),o("ngIf",i.isComplexIcon(t)),s(),o("ngIf",!i.isComplexIcon(t)),s(2),E(t.label?V(5,4,t.label):"")}}function et(e,n){if(e&1&&(u(0),c(1,U,1,0,"div",10)(2,tt,6,6,"button",11),C()),e&2){let t=n.$implicit;s(),o("ngIf",t.isDivider),s(),o("ngIf",!t.isDivider)}}function nt(e,n){if(e&1&&(l(0,"div",7)(1,"div",8)(2,"div"),c(3,et,3,2,"ng-container",9),d()()()),e&2){let t=a(2);o("@dropdownMenu",void 0)("ngClass",t.dropdownMenuClass),s(2),h("flex flex-col gap-y-1 "+t.gridClass),s(),o("ngForOf",t.items)}}function it(e,n){if(e&1&&(l(0,"div"),c(1,nt,4,5,"div",6),d()),e&2){let t=a();s(),o("ngIf",t.isVisible)}}function ot(e,n){e&1&&_(0,"div")}function at(e,n){if(e&1&&(u(0),_(1,"app-icon",23),C()),e&2){let t=a(2).$implicit,i=a(3);s(),h(t.iconClass||"w-6 h-6"),o("name",i.getIconNameForComponent(t))}}function st(e,n){if(e&1&&_(0,"span",17),e&2){let t=n.ngIf,i=a(3).$implicit;o("innerHTML",t,w)("ngClass",i.iconClass||"w-6 h-6")}}function rt(e,n){if(e&1&&(u(0),c(1,st,1,2,"span",16),C()),e&2){let t=a(2).$implicit,i=a(3);s(),o("ngIf",i.getIconHtml(t))}}function ct(e,n){if(e&1&&(l(0,"span",24),S(1),d()),e&2){let t=a(2).$implicit;s(),E(t.label)}}function lt(e,n){if(e&1){let t=k();l(0,"button",21),y("click",function(x){M(t);let g=a().$implicit,b=a(3);return I(b.onItemClicked(x,g))}),c(1,at,2,3,"ng-container",14)(2,rt,2,1,"ng-container",14)(3,ct,2,1,"span",22),d()}if(e&2){let t=a().$implicit,i=a(3);o("title",t.label)("ngClass",i.defaultCompactButtonClass+" "+t.buttonClass),s(),o("ngIf",i.isComplexIcon(t)),s(),o("ngIf",!i.isComplexIcon(t)),s(),o("ngIf",i.showLabelInCompact(t))}}function mt(e,n){if(e&1&&(u(0),c(1,lt,4,5,"button",20),C()),e&2){let t=n.$implicit;s(),o("ngIf",!t.isDivider)}}function pt(e,n){if(e&1&&(l(0,"div",19),c(1,mt,2,1,"ng-container",9),d()),e&2){let t=a(2);o("@compactBar",void 0)("ngClass",t.compactBarClass+t.gridClass),s(),o("ngForOf",t.items)}}function dt(e,n){if(e&1&&(l(0,"div"),c(1,pt,2,3,"div",18),d()),e&2){let t=a();s(),o("ngIf",t.isVisible)}}var _t=v("modalOverlay",[p(":enter",[r({opacity:0}),m("200ms ease-out",r({opacity:1}))]),p(":leave",[m("150ms ease-in",r({opacity:0}))])]),ut=v("modalContent",[p(":enter",[r({transform:"translateY(100%)"}),m("200ms ease-out",r({transform:"translateY(0)"}))]),p(":leave",[m("150ms ease-in",r({transform:"translateY(100%)"}))])]),Ct=v("dropdownMenu",[p(":enter",[r({opacity:0,transform:"scale(0.95) translateY(-10px)"}),m("100ms ease-out",r({opacity:1,transform:"scale(1) translateY(0)"}))]),p(":leave",[m("75ms ease-in",r({opacity:0,transform:"scale(0.95) translateY(-10px)"}))])]),gt=v("compactBar",[p(":enter",[r({opacity:0}),m("200ms ease-out",r({opacity:1}))]),p(":leave",[m("150ms ease-in",r({opacity:0}))])]),Q=class e{sanitizer=f(Y);elRef=f(B);iconRegistry=f(P);alertService=f(J);items=[];isVisible=!1;displayMode="dropdown";modalTitle="Actions";dropdownMenuClass="origin-top-right absolute right-0 top-full mt-2 rounded-lg shadow-lg bg-gray-100 dark:bg-gray-800 ring-1 ring-black ring-opacity-5 p-1 z-[60] border border-gray-300 border-2 min-w-[250px] max-w-xs overflow-hidden";defaultDropdownButtonClass="flex items-center w-full rounded-md px-3 py-2 text-sm font-medium text-black dark:text-white hover:text-white";compactBarClass="flex gap-2 grid grid-cols-2 justify-center items-center z-20 rounded-b-lg p-2";defaultCompactButtonClass="flex items-center w-full rounded-md px-3 py-2 text-sm font-medium text-black dark:text-white hover:text-white";gridClass="";customButtonDivCssClass="grid grid-cols-2";itemClick=new A;closeMenu=new A;_boundOnEnterKey=this.handleEnterKey.bind(this);ngOnChanges(n){if(n.isVisible){let t=n.isVisible.currentValue;t&&this.displayMode==="modal"&&setTimeout(()=>this.presentAsAlert(),0),t&&this.displayMode!=="modal"?document.addEventListener("keydown",this._boundOnEnterKey):document.removeEventListener("keydown",this._boundOnEnterKey)}}ngOnDestroy(){document.removeEventListener("keydown",this._boundOnEnterKey)}presentAsAlert(){return T(this,null,function*(){let n=this.items.filter(i=>!i.isDivider).map(i=>({text:i.label||"",role:i.actionKey||"",icon:i.iconName,iconClass:i.iconClass,cssClass:`${i.buttonClass||""}`,overrideCssClass:i.overrideCssButtonClass?i.overrideCssButtonClass:"",data:i.data})),t=yield this.alertService.present({header:this.modalTitle,buttons:n,backdropDismiss:!0,customButtonDivCssClass:this.customButtonDivCssClass?this.customButtonDivCssClass:"grid grid-cols-2"});t&&t.role!=="backdrop"&&t.role!=="cancel"&&this.itemClick.emit({actionKey:t.role,data:t.data}),this.closeMenu.emit()})}onDocumentClick(n){this.displayMode==="dropdown"&&this.isVisible&&!this.elRef.nativeElement.contains(n.target)&&this.closeMenu.emit()}handleEnterKey(n){if(n.key==="Enter"){n.preventDefault();let t=this.items.find(i=>!i.isDivider);t&&this.onItemClicked({stopPropagation:()=>{}},t)}}onItemClicked(n,t){n.stopPropagation(),t.isDivider||(navigator.vibrate&&navigator.vibrate(50),this.itemClick.emit({actionKey:t.actionKey??"",data:t.data}),this.displayMode==="dropdown"&&this.closeMenu.emit())}getIconHtml(n){let t=null;return typeof n.iconName=="string"?t=this.iconRegistry.getIconString(n.iconName):n.iconSvg&&(t=n.iconSvg),t?this.sanitizer.bypassSecurityTrustHtml(t):null}showLabelInCompact(n){return!!n.label}isComplexIcon(n){return typeof n.iconName=="object"&&n.iconName!==null}getIconNameForComponent(n){return n.iconName}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=O({type:e,selectors:[["app-action-menu"]],hostBindings:function(t,i){t&1&&y("click",function(g){return i.onDocumentClick(g)},H)},inputs:{items:"items",isVisible:"isVisible",displayMode:"displayMode",modalTitle:"modalTitle",dropdownMenuClass:"dropdownMenuClass",compactBarClass:"compactBarClass",gridClass:"gridClass",customButtonDivCssClass:"customButtonDivCssClass"},outputs:{itemClick:"itemClick",closeMenu:"closeMenu"},features:[D],decls:8,vars:4,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"hidden","dark:hover:text-gray-100"],[1,"hidden","scale-120"],[1,"hidden","scale-125"],[1,"hidden","scale-110"],["class","flex flex-col max-h-[80vh] overflow-hidden",3,"ngClass",4,"ngIf"],[1,"flex","flex-col","max-h-[80vh]","overflow-hidden",3,"ngClass"],[1,"overflow-y-auto","p-1","custom-scrollbar"],[4,"ngFor","ngForOf"],["class","my-0.5 sm:my-1 border-t border-gray-200 dark:border-gray-600",4,"ngIf"],["type","button","class","transition-colors duration-150 ease-in-out",3,"ngClass","click",4,"ngIf"],[1,"my-0.5","sm:my-1","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"transition-colors","duration-150","ease-in-out",3,"click","ngClass"],[4,"ngIf"],[1,"flex-shrink-0",3,"name"],[3,"innerHTML","ngClass",4,"ngIf"],[3,"innerHTML","ngClass"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["type","button","class","transition-colors duration-150 ease-in-out",3,"title","ngClass","click",4,"ngIf"],["type","button",1,"transition-colors","duration-150","ease-in-out",3,"click","title","ngClass"],["class","truncate ml-2",4,"ngIf"],[3,"name"],[1,"truncate","ml-2"]],template:function(t,i){t&1&&(u(0,0),c(1,it,2,1,"div",1)(2,ot,1,0,"div",1)(3,dt,2,1,"div",1),C(),_(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)),t&2&&(o("ngSwitch",i.displayMode),s(),o("ngSwitchCase","dropdown"),s(),o("ngSwitchCase","modal"),s(),o("ngSwitchCase","compact"))},dependencies:[R,L,$,K,F,z,j,G,q],encapsulation:2,data:{animation:[Ct,gt,_t,ut]},changeDetection:0})};export{Q as a};
