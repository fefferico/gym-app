import{a as K}from"./chunk-5Z7KLKXC.js";import{c as $,d as F,f as k,h as O}from"./chunk-4PTIEP3X.js";import{f as q}from"./chunk-IM7MGHE7.js";import{f as Y,g as U,q as z}from"./chunk-G7GVPGMV.js";import{Ca as d,Da as h,Ja as r,Ka as a,La as u,Ma as v,Mb as H,Nb as V,Ob as W,Pc as j,Qa as E,Ra as B,Rc as R,S as m,Ta as y,Ua as c,Va as l,X as g,Y as b,Zb as L,_b as w,ca as _,cb as x,eb as f,fb as A,gb as N,ha as S,ja as P,na as M,oa as D,pa as s,xa as T,za as I}from"./chunk-ATFL7J5Z.js";function oe(n,t){let e=U(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,o=Y(n,t?.in),p=o.getDay(),J=(p<i?-7:0)+6-(p-i);return o.setDate(o.getDate()+J),o.setHours(23,59,59,999),o}function ae(n,t,e){return K(n,-t,e)}var C=class n{elementRef=m(S);clickOutside=new h;onDocumentClick(t){let e=t.target;e instanceof Node&&!this.elementRef.nativeElement.contains(e)&&this.clickOutside.emit(t)}static \u0275fac=function(e){return new(e||n)};static \u0275dir=I({type:n,selectors:[["","appClickOutside",""]],hostBindings:function(e,i){e&1&&c("click",function(p){return i.onDocumentClick(p)},D)},outputs:{clickOutside:"clickOutside"}})};function X(n,t){if(n&1){let e=y();a(0,"button",7),c("shortPress",function(){g(e);let o=l();return b(o.scrollToTop())}),v(1,"app-icon",8),a(2,"span",5),f(3,"Back to Top"),u()()}n&2&&(s(),x("rotate-90",!0),r("strokeWidth",2.5))}function Z(n,t){if(n&1){let e=y();a(0,"div",12)(1,"span",13),c("shortPress",function(){g(e);let o=l().$implicit,p=l(2);return b(p.handleAction(o.actionKey))}),f(2),u(),a(3,"button",14),c("shortPress",function(){g(e);let o=l().$implicit,p=l(2);return b(p.handleAction(o.actionKey))}),v(4,"app-icon",15),a(5,"span",5),f(6),u()()()}if(n&2){let e=l().$implicit;s(),r("ngClass",e.cssClass),s(),N(" ",e.label," "),s(),r("ngClass",e.cssClass),s(),r("name",e.iconName),s(2),A(e.label)}}function ee(n,t){if(n&1&&(E(0),d(1,Z,7,5,"div",11),B()),n&2){let e=t.$implicit,i=l(2);s(),r("ngIf",!e.isPremium||i.subscriptionService.isPremium())}}function te(n,t){if(n&1&&(a(0,"div",9),d(1,ee,2,1,"ng-container",10),u()),n&2){let e=l();r("@fabSlideUp",void 0),s(),r("ngForOf",e.actions)}}var G=class n{workoutService=m(q);subscriptionService=m(z);platformId=m(P);pausedSub;actions=[];checkForPausedSession=!0;actionClicked=new h;isFabActionsOpen=_(!1);showBackToTopButton=_(!1);isPausedSession=_(!1);ngOnInit(){this.checkForPausedSession&&(this.isPausedSession.set(this.workoutService.isPausedSession()),this.pausedSub=this.workoutService.pausedWorkoutDiscarded$.subscribe(()=>{this.isPausedSession.set(!1)}))}ngOnDestroy(){this.pausedSub?.unsubscribe()}onWindowScroll(){w(this.platformId)&&this.showBackToTopButton.set(window.pageYOffset>400)}scrollToTop(){w(this.platformId)&&window.scrollTo({top:0,behavior:"smooth"})}handleFabClick(){this.isFabActionsOpen.update(t=>!t)}handleFabMouseEnter(){}handleFabMouseLeave(){}handleAction(t){this.actionClicked.emit(t),this.isFabActionsOpen.set(!1)}handleClose(){this.isFabActionsOpen()&&this.isFabActionsOpen.set(!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=T({type:n,selectors:[["app-fab-menu"]],hostBindings:function(e,i){e&1&&c("scroll",function(){return i.onWindowScroll()},M)},inputs:{actions:"actions",checkForPausedSession:"checkForPausedSession"},outputs:{actionClicked:"actionClicked"},decls:8,vars:5,consts:[["appClickOutside","",1,"fixed","right-4","sm:right-10","z-40","flex","flex-col","items-center","gap-4","transition-all","duration-300",3,"clickOutside","ngClass"],["appPress","","type","button","class","bg-primary dark:bg-primary text-white rounded-full p-3 shadow-lg hover:bg-primary-dark dark:hover:bg-primary-light focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-focus dark:focus:ring-offset-gray-900 transition-opacity animate-fade-in flex items-center",3,"shortPress",4,"ngIf"],[1,"flex","flex-col-reverse","items-center","gap-4",3,"mouseenter","mouseleave"],["type","button",1,"flex","h-14","w-14","items-center","justify-center","rounded-full","bg-primary","text-white","shadow-xl","transition-all","duration-300","hover:bg-primary-dark","hover:scale-105","focus:outline-none","focus:ring-2","focus:ring-primary-focus","focus:ring-offset-2","dark:ring-offset-gray-900",3,"click"],["name","plus",1,"h-8","w-8","transition-transform","duration-300"],[1,"sr-only"],["class","flex flex-col items-center gap-4",4,"ngIf"],["appPress","","type","button",1,"bg-primary","dark:bg-primary","text-white","rounded-full","p-3","shadow-lg","hover:bg-primary-dark","dark:hover:bg-primary-light","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-focus","dark:focus:ring-offset-gray-900","transition-opacity","animate-fade-in","flex","items-center",3,"shortPress"],["name","back",1,"w-6","h-6",3,"strokeWidth"],[1,"flex","flex-col","items-center","gap-4"],[4,"ngFor","ngForOf"],["class","group relative flex items-center",4,"ngIf"],[1,"group","relative","flex","items-center"],["appPress","",1,"absolute","right-full","mr-4","sm:hidden","whitespace-nowrap","rounded-md","px-3","py-2","text-sm","font-semibold","text-white","group-hover:block","cursor-pointer",2,"margin-right","-10px",3,"shortPress","ngClass"],["appPress","","type","button",1,"flex","h-12","w-12","items-center","justify-center","rounded-full","text-white","shadow-lg","transition-transform","hover:scale-110","focus:outline-none","focus:ring-2","focus:ring-offset-2","dark:ring-offset-gray-900",3,"shortPress","ngClass"],[1,"h-7","w-7",3,"name"]],template:function(e,i){e&1&&(a(0,"div",0),c("clickOutside",function(){return i.handleClose()}),d(1,X,4,3,"button",1),a(2,"div",2),c("mouseenter",function(){return i.handleFabMouseEnter()})("mouseleave",function(){return i.handleFabMouseLeave()}),a(3,"button",3),c("click",function(){return i.handleFabClick()}),v(4,"app-icon",4),a(5,"span",5),f(6,"Open creation menu"),u()(),d(7,te,2,2,"div",6),u()()),e&2&&(r("ngClass",i.isPausedSession()?"bottom-36":"bottom-20"),s(),r("ngIf",i.showBackToTopButton()),s(3),x("rotate-45",i.isFabActionsOpen()),s(3),r("ngIf",i.isFabActionsOpen()))},dependencies:[L,H,V,W,R,j,C],styles:["[_nghost-%COMP%]{display:block}"],data:{animation:[$("fabSlideUp",[O(":enter",[k({transform:"translateY(20%)",opacity:0}),F("200ms ease-out",k({transform:"translateY(0)",opacity:1}))]),O(":leave",[F("200ms ease-in",k({transform:"translateY(20%)",opacity:0}))])])]}})};export{oe as a,ae as b,C as c,G as d};
