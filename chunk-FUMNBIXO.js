import{u as S}from"./chunk-LUJFSQJG.js";import{M as D,za as P}from"./chunk-MCOCDANC.js";import{g as O}from"./chunk-GAL4ENT6.js";var v=class m{transform(o,t="dd/MM/yy HH:mm"){if(o==null||!isFinite(o))return"";try{let e=new Date(o);return S(e,t)}catch(e){return console.error(`Error formatting date from milliseconds value: ${o}`,e),"Invalid Date"}}static \u0275fac=function(t){return new(t||m)};static \u0275pipe=P({name:"millisecondsDate",type:m,pure:!0})};var N=class m{audioCtx=null;constructor(){}playSound(o){return O(this,null,function*(){if(this.initializeAudioContext(),!this.audioCtx)return;this.audioCtx.state==="suspended"&&this.audioCtx.resume();let t=this.audioCtx.currentTime,e=this.audioCtx.createOscillator(),n=this.audioCtx.createGain(),s=this.audioCtx.createGain(),r=this.audioCtx.createGain(),i=this.audioCtx.createOscillator(),a=this.audioCtx.createOscillator(),u=this.audioCtx.createOscillator(),E=this.audioCtx.createOscillator();switch(o){case"countdown":e.type="sine",e.frequency.setValueAtTime(880,t),n.gain.setValueAtTime(2,t),n.gain.exponentialRampToValueAtTime(1e-4,t+.15),e.connect(n),n.connect(this.audioCtx.destination),e.start(t),e.stop(t+.15);break;case"end":s.gain.setValueAtTime(.8,t),s.gain.exponentialRampToValueAtTime(1e-4,t+2),i.type="sine",i.frequency.setValueAtTime(110,t),a.type="sine",a.frequency.setValueAtTime(220,t),u.type="sine",u.frequency.setValueAtTime(330,t),i.connect(s),a.connect(s),u.connect(s),s.connect(this.audioCtx.destination),i.start(t),i.stop(t+2),a.start(t),a.stop(t+2),u.start(t),u.stop(t+2);break;case"error":e.type="sawtooth",e.frequency.setValueAtTime(600,t),e.frequency.linearRampToValueAtTime(300,t+.25),n.gain.setValueAtTime(.4,t),n.gain.exponentialRampToValueAtTime(1e-4,t+.25),e.connect(n),n.connect(this.audioCtx.destination),e.start(t),e.stop(t+.25);break;case"correct":n.gain.setValueAtTime(.5,t),n.gain.exponentialRampToValueAtTime(1e-4,t+.7),i.type="sine",i.frequency.setValueAtTime(784,t),a.type="sine",a.frequency.setValueAtTime(1568,t),r.gain.setValueAtTime(.5,t),i.connect(n),a.connect(r),r.connect(n),n.connect(this.audioCtx.destination),i.start(t),i.stop(t+.7),a.start(t),a.stop(t+.7);break;case"untoggle":n.gain.setValueAtTime(.3,t),n.gain.exponentialRampToValueAtTime(1e-4,t+1),e.type="triangle",e.frequency.setValueAtTime(120,t),e.connect(n),n.connect(this.audioCtx.destination),e.start(t),e.stop(t+.1);break;case"whoosh":let A=.3;n.gain.setValueAtTime(1,t),n.gain.exponentialRampToValueAtTime(1e-4,t+A);let d=this.audioCtx.createBiquadFilter();d.type="bandpass",d.Q.value=15,d.frequency.setValueAtTime(4e3,t),d.frequency.exponentialRampToValueAtTime(100,t+A);let q=this.audioCtx.sampleRate*A,R=this.audioCtx.createBuffer(1,q,this.audioCtx.sampleRate),F=R.getChannelData(0);for(let h=0;h<q;h++)F[h]=Math.random()*2-1;let C=this.audioCtx.createBufferSource();C.buffer=R,C.connect(d),d.connect(n),n.connect(this.audioCtx.destination),C.start(t),C.stop(t+A);break;case"tada":s.gain.setValueAtTime(.6,t),s.gain.exponentialRampToValueAtTime(1e-4,t+1.2),s.connect(this.audioCtx.destination),i.type="triangle",i.frequency.setValueAtTime(523.25,t),i.connect(s),i.start(t),i.stop(t+.15),a.type="triangle",a.frequency.setValueAtTime(783.99,t+.15),a.connect(s),a.start(t+.15),a.stop(t+.3),u.type="triangle",u.frequency.setValueAtTime(1046.5,t+.3),u.connect(s),u.start(t+.3),u.stop(t+5);break;case"tatatada":s.gain.setValueAtTime(.6,t),s.gain.exponentialRampToValueAtTime(1e-4,t+3.5),s.connect(this.audioCtx.destination);let z=261.63,I=392,M=523.25,B=783.99,p=.15,w=.1,c=t,b=(h,k,T)=>{if(!this.audioCtx)return;let g=this.audioCtx.createOscillator(),y=this.audioCtx.createGain();g.type="triangle",g.frequency.setValueAtTime(h,T),y.gain.setValueAtTime(0,T),y.gain.linearRampToValueAtTime(1,T+.01),y.gain.exponentialRampToValueAtTime(1e-4,T+k),g.connect(y),y.connect(s),g.start(T),g.stop(T+k)};b(z,p,c),c+=p+w,b(I,p,c),c+=p+w,b(M,p,c),c+=p+w;let G=2,x=this.audioCtx.createOscillator(),f=this.audioCtx.createGain();x.type="triangle",x.frequency.setValueAtTime(B,c),f.gain.setValueAtTime(0,c),f.gain.linearRampToValueAtTime(1,c+.05),f.gain.exponentialRampToValueAtTime(1e-4,c+G+.5),x.connect(f),f.connect(s),x.start(c),x.stop(c+G+.5);break;case"magic":{this.playMagicRestoreSound();break}case"pop":{this.playPopSound();break}case"referee":let V=.4,l=this.audioCtx.createGain();l.gain.setValueAtTime(0,t),l.gain.linearRampToValueAtTime(.8,t+.05),l.gain.setValueAtTime(.8,t+V-.05),l.gain.linearRampToValueAtTime(1e-4,t+V),l.connect(this.audioCtx.destination),i.type="triangle",i.frequency.setValueAtTime(3e3,t),i.connect(l),a.type="triangle",a.frequency.setValueAtTime(3080,t),a.connect(l),i.start(t),i.stop(t+V),a.start(t),a.stop(t+V);break}})}initializeAudioContext(){if(!this.audioCtx)try{this.audioCtx=new(window.AudioContext||window.webkitAudioContext)}catch{console.error("Web Audio API is not supported in this browser")}}playMagicRestoreSound(){if(this.initializeAudioContext(),!this.audioCtx)return;let o=this.audioCtx.currentTime,t=[622.25,783.99,932.33],e=this.audioCtx.createGain();e.gain.setValueAtTime(.3,o),e.connect(this.audioCtx.destination),t.forEach((n,s)=>{if(!this.audioCtx)return;let r=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();r.type="sine",r.frequency.setValueAtTime(n,o),r.connect(i),i.connect(e);let a=o+s*.08;i.gain.setValueAtTime(0,a),i.gain.linearRampToValueAtTime(.4,a+.05),i.gain.exponentialRampToValueAtTime(1e-4,a+1.5),r.start(a),r.stop(a+1.5)})}playPopSound(){if(this.initializeAudioContext(),!this.audioCtx)return;let o=this.audioCtx.currentTime,t=this.audioCtx.createOscillator(),e=this.audioCtx.createGain();t.type="sine";let n=880,s=150,r=.1;t.frequency.setValueAtTime(n,o),t.frequency.exponentialRampToValueAtTime(s,o+r),e.gain.setValueAtTime(.7,o),e.gain.exponentialRampToValueAtTime(1e-4,o+.2),t.connect(e),e.connect(this.audioCtx.destination),t.start(o),t.stop(o+.25)}static \u0275fac=function(t){return new(t||m)};static \u0275prov=D({token:m,factory:m.\u0275fac,providedIn:"root"})};export{v as a,N as b};
