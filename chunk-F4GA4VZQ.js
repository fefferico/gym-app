import{L as a,Lc as d,P as u,_ as i,e as S}from"./chunk-FEV3X6UT.js";import{a as n}from"./chunk-GAL4ENT6.js";var o={enableTimerCountdownSound:!0,countdownSoundSeconds:5,enablePresetTimer:!1,presetTimerDurationSeconds:10,weightStep:1},c=class s{storageService=u(d);APP_SETTINGS_KEY="fitTrackPro_appSettings";appSettingsSubject;appSettings$;enableTimerCountdownSound=i(o.enableTimerCountdownSound);countdownSoundSeconds=i(o.countdownSoundSeconds);enablePresetTimer=i(o.enablePresetTimer);presetTimerDurationSeconds=i(o.presetTimerDurationSeconds);constructor(){let e=this.storageService.getItem(this.APP_SETTINGS_KEY),t=n(n({},o),e);this.appSettingsSubject=new S(t),this.appSettings$=this.appSettingsSubject.asObservable(),this.enableTimerCountdownSound.set(t.enableTimerCountdownSound),this.countdownSoundSeconds.set(t.countdownSoundSeconds),this.enablePresetTimer.set(t.enablePresetTimer),this.presetTimerDurationSeconds.set(t.presetTimerDurationSeconds)}getSettings(){return this.appSettingsSubject.getValue()}saveSettings(e){let t=this.getSettings(),r=n(n({},t),e);this.storageService.setItem(this.APP_SETTINGS_KEY,r),this.appSettingsSubject.next(r),e.enableTimerCountdownSound!==void 0&&this.enableTimerCountdownSound.set(e.enableTimerCountdownSound),e.countdownSoundSeconds!==void 0&&this.countdownSoundSeconds.set(e.countdownSoundSeconds),e.enablePresetTimer!==void 0&&this.enablePresetTimer.set(e.enablePresetTimer),e.presetTimerDurationSeconds!==void 0&&this.presetTimerDurationSeconds.set(e.presetTimerDurationSeconds)}setEnableTimerCountdownSound(e){this.saveSettings({enableTimerCountdownSound:e})}setCountdownSoundSeconds(e){this.saveSettings({countdownSoundSeconds:e})}getDataForBackup(){return this.getSettings()}replaceData(e){let t=e?n(n({},o),e):n({},o);this.storageService.setItem(this.APP_SETTINGS_KEY,t),this.appSettingsSubject.next(t),this.enableTimerCountdownSound.set(t.enableTimerCountdownSound),this.countdownSoundSeconds.set(t.countdownSoundSeconds),this.enablePresetTimer.set(t.enablePresetTimer),this.presetTimerDurationSeconds.set(t.presetTimerDurationSeconds)}clearAppSettings_DEV_ONLY(){this.replaceData(null),console.log("App settings reset to defaults.")}setEnablePresetTimer(e){this.saveSettings({enablePresetTimer:e})}setPresetTimerDurationSeconds(e){this.saveSettings({presetTimerDurationSeconds:e})}static \u0275fac=function(t){return new(t||s)};static \u0275prov=a({token:s,factory:s.\u0275fac,providedIn:"root"})};export{c as a};
