<!-- src/app/shared/alert/alert.component.html -->
<div *ngIf="options" @modalOverlay
  class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm"
  (click)="onBackdropClick()">

  <!-- Main alert container -->
  <div @modalContent class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md dark:text-gray-200 flex flex-col"
    [ngClass]="options.customCssClass" (click)="$event.stopPropagation()" (keydown.enter)="handleEnterPress()">

    <!-- Scrollable content wrapper -->
    <div *ngIf="options.header || options.message" class="p-6 pb-4 flex-shrink-0">
      <header *ngIf="options.header" class="mb-4">
        <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100">{{ options.header | uppercase}}</h3>
      </header>

      <main *ngIf="options.message || (options.inputs && options.inputs.length > 0)">
        <p *ngIf="options.message" class="text-m text-gray-600 dark:text-gray-300 mb-3">{{
          options.message }}</p>

        <ul *ngIf="options.listItems && options.listItems.length > 0"
          class="list-disc list-inside space-y-1 text-m text-gray-600 dark:text-gray-300 mb-3">
          <li *ngFor="let item of options.listItems">{{ item }}</li>
        </ul>

        <!-- Inputs Section -->
        <div *ngIf="options.inputs && options.inputs.length > 0" class="space-y-1">
          <div *ngFor="let input of options.inputs; let i = index">
            <ng-container [ngSwitch]="input.type">

              <!-- Checkbox Input Type -->
              <div *ngSwitchCase="'checkbox'" class="flex items-center">
                <input type="checkbox" [id]="input.id || ('alert-input-' + i)" [name]="input.name"
                  [(ngModel)]="inputValues[input.name]"
                  class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-800 dark:focus:ring-offset-gray-800">
                <label *ngIf="input.label" [for]="input.id || ('alert-input-' + i)"
                  class="ml-2 block text-sm text-gray-700 dark:text-gray-300 cursor-pointer">
                  {{ input.label }}
                </label>
              </div>

              <!-- +++ NEW: Radio Input Type +++ -->
              <div *ngSwitchCase="'radio'" class="flex items-center">
                <input type="radio" [id]="input.id || ('alert-input-' + i)" [name]="input.name" [value]="input.value"
                  [(ngModel)]="inputValues[input.name]"
                  class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-800 dark:focus:ring-offset-gray-800">
                <label *ngIf="input.label" [for]="input.id || ('alert-input-' + i)"
                  class="ml-2 block text-sm text-gray-700 dark:text-gray-300 cursor-pointer">
                  {{ input.label }}
                </label>
              </div>

              <!-- Textarea Input Type -->
              <div *ngSwitchCase="'textarea'">
                <label *ngIf="input.label" [for]="input.id || ('alert-input-' + i)"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                  {{ input.label }}
                </label>
                <textarea #alertInput [id]="input.id || ('alert-input-' + i)" [name]="input.name"
                  [placeholder]="input.placeholder || ''" [(ngModel)]="inputValues[input.name]"
                  [required]="input.required ? true : false" rows="3"
                  class="block w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-m dark:bg-gray-800 dark:text-gray-200">
                </textarea>
              </div>

              <!-- Default Input Type (text, number, etc.) -->
              <div *ngSwitchDefault>
                <label *ngIf="input.label" [for]="input.id || ('alert-input-' + i)"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                  {{ input.label }}
                </label>
                <input #alertInput [type]="input.type || 'text'" [id]="input.id || ('alert-input-' + i)"
                  [disabled]="input.attributes && input.attributes.disabled"
                  [name]="input.name" [placeholder]="input.placeholder || ''" [(ngModel)]="inputValues[input.name]"
                  [required]="input.required ? true : false" [min]="input.min" [max]="input.max"
                  class="block w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-m dark:bg-gray-800 dark:text-gray-200">
              </div>

            </ng-container>
          </div>
        </div>
      </main>

    </div>

    <footer *ngIf="options.buttons && options.buttons.length > 0"
      class="overflow-y-auto p-6 pt-4 custom-scrollbar gap-1"
      [ngClass]="options && options.customButtonDivCssClass ? options.customButtonDivCssClass : options.buttons.length === 2 ? 'flex justify-center gap-2 sm:gap-3' : 'grid grid-cols-1 gap-2 sm:gap-3'">

      <button #alertButton *ngFor="let button of options.buttons" appPress (shortPress)="onButtonClick(button)"
        style="line-height: 1.25;" [ngClass]="getButtonClass(button)">
        <app-icon *ngIf="button.icon" [name]="button.icon"
          [class]="button.iconClass ? button.iconClass : 'h-5 w-5 mr-1'"></app-icon>
        <!-- <span class="w-full"> -->
          {{ button.text | uppercase }}
        <!-- </span> -->
      </button>

    </footer>

  </div>
</div>

<style>
  :host {
    position: fixed !important;
    inset: 0 !important;
    z-index: 9999 !important;
    pointer-events: none;
  }

  :host>div {
    pointer-events: auto;
  }
</style>