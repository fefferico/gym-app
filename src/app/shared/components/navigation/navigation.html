<!-- In navigation.html -->

<!-- The <nav> element no longer needs positioning classes -->
<nav class="bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 shadow-lg rounded-t-md">
  <div class="container mx-auto flex justify-around items-center h-16 overflow-x-auto">

    <!-- The rest of your HTML remains exactly the same -->
    <a *ngFor="let item of navItems" appPress (shortPress)="onNavigate(item)" (longPress)="onLongPress(item)"
      (pressRelease)="onPressRelease(item)" [routerLink]="item.premiumFeature ? null : item.path"
      class="flex w-full flex-col items-center justify-center text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary-light cursor-pointer transition-colors p-1 w-16 max-w-[64px]"
      [ngClass]="{'hover:scale-125': !isLinkActive(item),
        'text-primary dark:text-primary-light': isLinkActive(item)
      }">

      <!-- MODIFIED: Replaced <svg> with conditional <app-icon> logic -->
      <ng-container *ngIf="item.label === 'PROGRAMS' && !subscriptionService.isPremium(); else defaultIcon">
        <!-- Layered Icon for Free Tier Programs Tab -->
        <app-icon [name]="[
            { name: 'calendar' },
            {
            name: 'none',
            display: 'filled-padded',
            position: 'bottom-right', 
            class: 'bg-white dark:bg-gray-800'
        },
        {
            name: 'crown',
            position: 'bottom-right',  
            size: 'w-4 h-4',   
            class: 'text-yellow-600',
            strokeWidth: 2.5
        }
          ]" class="w-6 h-6 transition-all duration-200" [class.mb-1]="isLinkActive(item)"
          [class.scale-125]="isLinkActive(item)">
        </app-icon>
      </ng-container>

      <ng-template #defaultIcon>
        <!-- Standard Icon for Premium Programs and all other tabs -->
        <app-icon [name]="item.iconName" class="w-6 h-6 transition-all duration-200" [class.mb-1]="isLinkActive(item)"
          [class.scale-125]="isLinkActive(item)">
        </app-icon>
      </ng-template>

      <span *ngIf="isLinkActive(item)" class="text-xs transition-opacity duration-300 font-medium">
        {{ item.label }}
      </span>

    </a>
  </div>
</nav>