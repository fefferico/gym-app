import{B as w,E as k,H as V,I as B,O as U,U as K,d as W,f as F,h as _,j as C,l as I,q as T,v as R,y as x}from"./chunk-XKPEWNK7.js";import{c as P,x as j}from"./chunk-FTHZU3WL.js";import{K as E,O as p,X as O,l as v,md as A,od as M,rd as N}from"./chunk-C767T4VF.js";import{a as L,g as S}from"./chunk-GAL4ENT6.js";var H=class D{unitsService=p(B);translate=p(M);appSettingsService=p(P);injector=p(O);_exerciseService;get exerciseService(){return this._exerciseService||(this._exerciseService=this.injector.get(K)),this._exerciseService}alertService=p(N);subscriptionService=p(j);ROUTINES_STORAGE_KEY="fitTrackPro_routines";PAUSED_WORKOUT_KEY="fitTrackPro_pausedWorkoutState";PAUSED_STATE_VERSION="1.2";toastService=p(A);progressiveOverloadService=p(V);formatMetricForLogged(e,r){switch(r){case"weight":if(e.type==="bodyweight")return"Bodyweight";if(e.type==="exact")return`${e.value}`;if(e.type==="percentage_1rm")return`${e.percentage}% 1RM`;if(e.type==="range")return`${e.min}-${e.max} kg`;break;case"reps":if(e.type==="exact")return`${e.value}`;if(e.type==="range")return`${e.min}-${e.max}`;break;case"duration":if(e.type==="exact")return`${e.seconds}`;if(e.type==="range")return`${e.minSeconds}-${e.maxSeconds}`;break;case"distance":if(e.type==="exact")return`${e.value}`;if(e.type==="range")return`${e.min}-${e.max}`;break;case"rest":if(e.type==="exact")return`${e.seconds}`;if(e.type==="range")return`${e.minSeconds}-${e.maxSeconds}`;break;default:return e.value?e.value.toString():"-"}return"-"}formatMetricTarget(e,r,s=!1){if(!e)return"-";if(s)return this.formatMetricForLogged(e,r);switch(r){case"weight":if(e.type==="bodyweight")return"Bodyweight";if(e.type==="exact")return`${e.value}`;if(e.type==="percentage_1rm")return`${e.percentage}% 1RM`;if(e.type==="range")return`${e.min}-${e.max}`;break;case"reps":if(e.type==="exact")return`${e.value}`;if(e.type==="range")return`${e.min}-${e.max}`;if(e.type==="max")return"Max reps";if(e.type==="amrap")return"AMRAP";break;case"duration":if(e.type==="exact")return`${e.seconds}`;if(e.type==="range")return`${e.minSeconds}-${e.maxSeconds}`;break;case"distance":if(e.type==="exact")return`${e.value}`;if(e.type==="range")return`${e.min}-${e.max}`;break;case"rest":if(e.type==="exact")return`${e.seconds}`;if(e.type==="range")return`${e.minSeconds}-${e.maxSeconds}`;break;default:return e.value?e.value.toString():"-"}return"-"}getRepsValue(e){if(e){if(e&&e.type==="exact")return e.value;if(e&&e.type==="range")return Math.floor((e.min+e.max)/2);if(e&&e.type==="min_plus")return e.value}}getWeightValue(e){if(e){if(e&&e.type==="exact")return e.value;if(e&&e.type==="range")return Math.floor((e.min+e.max)/2)}}getDurationValue(e){if(e){if(e&&e.type==="exact")return e.seconds;if(e&&e.type==="range")return Math.floor((e.minSeconds+e.maxSeconds)/2)}}getRestValue(e){if(e){if(e&&e.type==="exact")return e.seconds;if(e&&e.type==="range")return Math.floor((e.minSeconds+e.maxSeconds)/2)}}getDistanceValue(e){if(e){if(e&&e.type==="exact")return e.value;if(e&&e.type==="range")return Math.floor((e.min+e.max)/2)}}isTargetVisible(e,r){switch(r){case"reps":return this.isRepsTargetVisible(e);case"weight":return this.isWeightTargetVisible(e);case"duration":return this.isDurationTargetVisible(e);case"distance":return this.isDistanceTargetVisible(e);case"rest":return this.isRestTargetVisible(e);default:return!1}}isWeightTargetVisible(e){if(!e||typeof e!="object"||!("type"in e))return!1;switch(e.type){case"exact":return typeof e.value=="number"&&e.value>0;case"range":return typeof e.min=="number"&&typeof e.max=="number"&&(e.min>0||e.max>0);case"bodyweight":return!0;case"percentage_1rm":return typeof e.percentage=="number"&&e.percentage>0;default:return!1}}isRepsTargetVisible(e){if(!e||typeof e!="object"||!("type"in e))return!1;switch(e.type){case"exact":case"min_plus":return typeof e.value=="number"&&e.value>0;case"range":return typeof e.min=="number"&&typeof e.max=="number"&&(e.min>0||e.max>0);case"amrap":case"max":case"max_fraction":return!0;default:return!1}}isDurationTargetVisible(e){if(!e||typeof e!="object"||!("type"in e))return!1;switch(e.type){case"exact":return typeof e.seconds=="number"&&e.seconds>0;case"range":return typeof e.minSeconds=="number"&&typeof e.maxSeconds=="number"&&(e.minSeconds>0||e.maxSeconds>0);default:return!1}}isDistanceTargetVisible(e){if(!e||typeof e!="object"||!("type"in e))return!1;switch(e.type){case"exact":return typeof e.value=="number"&&e.value>0;case"range":return typeof e.min=="number"&&typeof e.max=="number"&&(e.min>0||e.max>0);default:return!1}}isRestTargetVisible(e){if(!e||typeof e!="object"||!("type"in e))return!1;switch(e.type){case"exact":return typeof e.seconds=="number"&&e.seconds>0;case"range":return typeof e.minSeconds=="number"&&typeof e.maxSeconds=="number"&&(e.minSeconds>0||e.maxSeconds>0);default:return!1}}getSetTargetDisplay(e,r){if(!e)return"";let s=-1,o=-1,t=-1;switch(r){case"reps":if(e.targetReps){if(e.targetReps.type==="range")s=e.targetReps.min,o=e.targetReps.max;else if(e.targetReps.type==="exact"||e.targetReps.type==="min_plus")t=e.targetReps.value;else if(e.targetReps.type==="amrap"||e.targetReps.type==="max")return"Max"}break;case"weight":if(e.targetWeight)if(e.targetWeight.type==="range")s=e.targetWeight.min,o=e.targetWeight.max;else if(e.targetWeight.type==="exact")t=e.targetWeight.value;else{if(e.targetWeight.type==="bodyweight")return"Bodyweight";if(e.targetWeight.type==="percentage_1rm")return`${e.targetWeight.percentage}% 1RM`}break;case"duration":if(e.targetDuration){if(e.targetDuration.type==="range")s=e.targetDuration.minSeconds,o=e.targetDuration.maxSeconds;else if(e.targetDuration.type==="exact")t=e.targetDuration.seconds;else if(e.targetDuration.type==="to_failure")return"To Failure"}break;case"distance":e.targetDistance&&(e.targetDistance.type==="range"?(s=e.targetDistance.min,o=e.targetDistance.max):e.targetDistance.type==="exact"&&(t=e.targetDistance.value));break;case"rest":e.targetRest&&(e.targetRest.type==="range"?(s=e.targetRest.minSeconds,o=e.targetRest.maxSeconds):e.targetRest.type==="exact"&&(t=e.targetRest.seconds));break;case"tempo":return e.targetTempo||"";default:break}return s>=0&&o>=0?s===o?s.toString():`${s}-${o}`:s>=0?`${s}+`:t>=0?t.toString():""}getSetWeightDisplay(e,r){let s=e.weightLogged,o=s??e.targetWeight;return r?.category==="cardio"||r?.category==="stretching"?o!=null&&o>0?`${o} ${this.unitsService.getWeightUnitSuffix()}`:this.translate.instant("workoutService.display.weightNotApplicable"):r?.category==="bodyweightCalisthenics"?o!=null&&o>0?`${o} ${this.unitsService.getWeightUnitSuffix()}`:this.translate.instant("workoutService.display.bodyweight"):o!=null&&o>0?`${o} ${this.unitsService.getWeightUnitSuffix()}`:o===0?this.translate.instant("workoutService.display.noAddedWeight"):this.translate.instant("workoutService.display.userDefined")}checkIfMetricIsVisible(e,r,s=!1){if(!e)return!1;let o=t=>{let n=!1,a=!1;switch(r){case"duration":let i=s?t?.durationLogged:t?.targetDuration;n=this.isDurationTargetVisible(i);break;case"weight":let f=s?t?.weightLogged:t?.targetWeight;n=this.isWeightTargetVisible(f);break;case"reps":let u=s?t?.repsLogged:t?.targetReps;n=this.isRepsTargetVisible(u);break;case"distance":let c=s?t?.distanceLogged:t?.targetDistance;n=this.isDistanceTargetVisible(c);break;case"rest":let d=s?t?.restLogged:t?.targetRest;n=this.isRestTargetVisible(d);break;default:return!1}if(this.isLoggedSet(t))switch(r){case"duration":a=this.isDurationTargetVisible(t?.durationLogged);break;case"weight":a=this.isWeightTargetVisible(t?.weightLogged);break;case"reps":a=this.isRepsTargetVisible(t?.repsLogged);break;case"distance":a=this.isDistanceTargetVisible(t?.distanceLogged);break;case"rest":a=this.isRestTargetVisible(t?.restLogged);break;default:a=!1}return n||a};if(typeof e.get=="function"){let t=typeof e.getRawValue=="function"?e.getRawValue():e.value;return t&&Array.isArray(t.sets)?t.sets.some(o):o(t)}return e.sets&&Array.isArray(e.sets)?e.sets.some(o):o(e)}getVisibleExerciseColumns(e,r,s=!1){let o=e.exercises[r];if(!o||o.sets?.length===0)return{weight:!1,reps:!1,distance:!1,duration:!1,tempo:!1,rest:!1};let t=L({},o),n=L({},U(o)),a={};return s?a={weight:n.sets.some(i=>i.targetWeight)||n.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("weight")),reps:n.sets.some(i=>i.targetReps)||n.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("reps")),distance:n.sets.some(i=>i.targetDistance)||n.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("distance")),duration:n.sets.some(i=>i.targetDuration)||n.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("duration")),rest:n.sets.some(i=>i.targetRest)||n.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("rest")),tempo:n.sets.some(i=>i.targetTempo)||n.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("tempo"))}:a={weight:t.sets.some(i=>i.targetWeight)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("weight")),reps:t.sets.some(i=>i.targetReps)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("reps")),distance:t.sets.some(i=>i.targetDistance)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("distance")),duration:t.sets.some(i=>i.targetDuration)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("duration")),rest:t.sets.some(i=>i.targetRest)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("rest")),tempo:t.sets.some(i=>i.targetTempo)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("tempo"))},a}getVisibleSetColumns(e,r,s){let t=e.exercises[r]?.sets[s];if(!t)return{weight:!1,reps:!1,distance:!1,duration:!1,tempo:!1};let n;if(this.isLoggedSet(t))n={weight:!!t.fieldOrder?.includes("weight"),reps:!!t.fieldOrder?.includes("reps"),distance:!!t.fieldOrder?.includes("distance"),duration:!!t.fieldOrder?.includes("duration"),tempo:!!(t.targetTempo?.trim()||t.fieldOrder?.includes("tempo")),rest:!!t.fieldOrder?.includes("rest")};else{let a=t;n={weight:!!(a.targetWeight||a.fieldOrder?.includes("weight")),reps:!!(a.targetReps||a.fieldOrder?.includes("reps")),distance:!!(a.targetDistance||a.fieldOrder?.includes("distance")),duration:!!(a.targetDuration||a.fieldOrder?.includes("duration")),tempo:!!(a.targetTempo?.trim()||a.fieldOrder?.includes("tempo")),rest:!!(a.targetRest||a.fieldOrder?.includes("rest"))}}return n}promptAddField(e,r,s,o=!1){return S(this,null,function*(){let{hidden:t}=this.getFieldsForSet(e,r,s);if(t.length===0)return this.toastService.info(this.translate.instant("toasts.allMetricsAdded")),null;let n=!!e.exercises[r].supersetId,a;if(n){let m=["weight","reps"];if(a=t.filter($=>m.includes($)),a.every($=>!m.includes($)))return this.toastService.info("Only 'Weight' and 'Reps' can be added to sets within a superset."),null}let i=a||t,f=this.appSettingsService.getSettings();if(i.length===0)return this.toastService.info(this.translate.instant("toasts.trueGymModeNoMetrics")),null;let u=i.map(m=>({text:this.translate.instant("metrics."+m),role:"add",data:m,icon:m}));u.push({text:this.translate.instant("common.cancel"),role:"cancel",data:null,icon:"cancel"});let c=yield this.alertService.showConfirmationDialog(this.translate.instant("workoutBuilder.prompts.addField.title"),this.translate.instant("workoutBuilder.prompts.addField.message",{setNumber:s+1}),u,{showCloseButton:!0});if(!c||!c.data)return null;let d=c.data,b=this.translate.instant("metrics."+d),g=this.translate.instant("workoutBuilder.prompts.setTarget.title",{field:b}),l=0;switch(d){case"weight":g+=` (${this.unitsService.getWeightUnitSuffix()})`,l=10;break;case"reps":l=8;break;case"duration":g+=" (s)",l=60;break;case"rest":g+=" (s)",l=60;break;case"distance":g+=` (${this.unitsService.getDistanceMeasureUnitSuffix()})`,l=1;break;case"tempo":l="2-0-1-0";break}let q=d!=="tempo"?{min:"0",step:"any"}:{},y=yield this.alertService.showPromptDialog(this.translate.instant("workoutBuilder.prompts.setTarget.title",{field:b}),this.translate.instant("workoutBuilder.prompts.setTarget.message",{setNumber:s+1}),[{name:"targetValue",type:d==="tempo"?"text":"number",label:this.translate.instant("metrics."+d),value:l,attributes:q}],this.translate.instant("workoutBuilder.prompts.setTarget.applyButton"));if(!y||y.targetValue===null||y.targetValue===void 0)return null;let h=y.targetValue;return Array.isArray(h)&&(h=h[0]??0),this.addFieldToSet(e,r,s,d,h)})}defaultHiddenFields(){return{visible:[],hidden:this.getDefaultFields()}}getRepsAndWeightFields(){return["reps","weight"]}getDefaultFields(){return["weight","reps","distance","duration","tempo","rest"]}getFieldsForSet(e,r,s){let o=this.getDefaultFields(),t=this.getVisibleSetColumns(e,r,s),n=o.filter(i=>t[i]),a=o.filter(i=>!n.includes(i));return{visible:n,hidden:a}}addFieldToSet(e,r,s,o,t){let n=JSON.parse(JSON.stringify(e)),a=n.exercises[r].sets[s];if(!a.fieldOrder){let{visible:i}=this.getFieldsForSet(e,r,s);a.fieldOrder=i}switch(a.fieldOrder.includes(o)||a.fieldOrder.push(o),o){case"weight":{let i;typeof t=="number"?i=R(t):typeof t=="string"&&!isNaN(Number(t))?i=R(Number(t)):typeof t=="object"&&t&&"type"in t?i=t:i=R(0),a.targetWeight=i,this.isLoggedRoutine(e)&&(a.weightLogged=i,delete a.targetWeight);break}case"reps":{let i;typeof t=="number"?i=T(t):typeof t=="string"&&!isNaN(Number(t))?i=T(Number(t)):typeof t=="object"&&t&&"type"in t?i=t:i=T(0),a.targetReps=i,this.isLoggedRoutine(e)&&(a.repsLogged=i,delete a.targetReps);break}case"distance":{let i;typeof t=="number"?i=w(t):typeof t=="string"&&!isNaN(Number(t))?i=w(Number(t)):typeof t=="object"&&t&&"type"in t?i=t:i=w(0),a.targetDistance=i,this.isLoggedRoutine(e)&&(a.distanceLogged=i,delete a.targetDistance);break}case"duration":{let i;typeof t=="number"?i=x(t):typeof t=="string"&&!isNaN(Number(t))?i=x(Number(t)):typeof t=="object"&&t&&"type"in t?i=t:i=x(0),a.targetDuration=i,this.isLoggedRoutine(e)&&(a.durationLogged=i,delete a.targetDuration);break}case"rest":{let i;typeof t=="number"?i=k(t):typeof t=="string"&&!isNaN(Number(t))?i=k(Number(t)):typeof t=="object"&&t&&"type"in t?i=t:i=k(0),a.targetRest=i,this.isLoggedRoutine(e)&&(a.restLogged=i,delete a.targetRest);break}case"tempo":{let i=typeof t=="string"?t:"";a.targetTempo=i,this.isLoggedRoutine(e)&&(a.tempoLogged=i);break}default:{o in a&&(a[o]=t);break}}return n}promptRemoveField(e,r,s,o=!1){return S(this,null,function*(){let t=this.getVisibleSetColumns(e,r,s),n=Object.keys(t).filter(l=>t[l]),a=this.appSettingsService.getSettings();if(o&&(n=n.filter(l=>l!=="rest")),n.length===0){let l=yield v(this.translate.get("workoutService.alerts.removeField.noFieldsToast"));return this.toastService.info(l),e}if(n.length===1){let l=yield v(this.translate.get("workoutService.alerts.removeField.atLeastOneMetric"));return this.toastService.info(l),e}let f=["workoutService.alerts.removeField.title","workoutService.alerts.removeField.message","common.cancel",...n.map(l=>`metrics.${l}`)],u=yield v(this.translate.get(f)),c=n.map(l=>({text:u[`metrics.${l}`],role:"remove",data:l,icon:l,cssClass:"bg-red-500 hover:bg-red-600"}));c.push({text:u["common.cancel"],role:"cancel",data:null,icon:"cancel"});let d=yield this.alertService.showConfirmationDialog(u["workoutService.alerts.removeField.title"],u["workoutService.alerts.removeField.message"],c,{showCloseButton:!0});if(!d||!d.data)return null;let b=d.data;return this.removeMetricFromSet(e,r,s,b)})}removeMetricFromSet(e,r,s,o){let t=JSON.parse(JSON.stringify(e)),n=t.exercises[r].sets[s];return this.isLoggedRoutine(t)?n[`${o}Logged`]=void 0:(n[`target${o.charAt(0).toUpperCase()+o.slice(1)}`]=void 0,n[`target${o.charAt(0).toUpperCase()+o.slice(1)}Min`]=void 0,n[`target${o.charAt(0).toUpperCase()+o.slice(1)}Max`]=void 0,n[`${o}Used`]=void 0,n[`${o}Achieved`]=void 0,n[`${o}AfterSet`]=void 0),n.fieldOrder&&(n.fieldOrder=n.fieldOrder.filter(a=>a!==o)),this.toastService.info(this.translate.instant("toasts.fieldRemovedFromSet",{fieldToRemove:this.translate.instant(`metrics.${o}`).toUpperCase(),setIndex:s+1})),t}getSetFieldOrder(e,r,s){let t=e?.exercises?.[r]?.sets?.[s];return t&&Array.isArray(t.fieldOrder)?t.fieldOrder:null}isLoggedSet(e){return e&&e.workoutLogId&&(typeof e.repsLogged<"u"||typeof e.weightLogged<"u"||typeof e.durationLogged<"u"||typeof e.distanceLogged<"u"||typeof e.tempoLogged<"u")}getSetFieldValue(e,r){if(!e)return"-";if(this.isLoggedSet(e))switch(r){case"reps":return(this.getRepsValue(e.repsLogged)??"-").toString();case"weight":return e.weightLogged!=null?(this.getWeightValue(e.weightLogged)??"-").toString():"-";case"distance":return(this.getDistanceValue(e.distanceLogged)??"-").toString();case"duration":return e.durationLogged!==void 0&&e.durationLogged!==null&&this.getDurationValue(e.durationLogged)!==void 0?this.formatSecondsToTime(this.getDurationValue(e.durationLogged).toString()):"-";case"rest":return e.restLogged!==void 0&&e.restLogged!==null&&this.getRestValue(e.restLogged)!==void 0?this.formatSecondsToTime(this.getRestValue(e.restLogged).toString()):"-";case"tempo":return e.tempoLogged||"-";default:return"-"}else{let s=e;switch(r){case"reps":return s.targetReps&&s.targetReps.type==="range"?Math.floor((s.targetReps.min+s.targetReps.max)/2).toString():(this.getRepsValue(s.targetReps)??"-").toString();case"weight":return s.targetWeight&&s.targetWeight.type==="range"?Math.floor((s.targetWeight.min+s.targetWeight.max)/2).toString():(this.getWeightValue(s.targetWeight)??"-").toString();case"distance":return s.targetDistance&&s.targetDistance.type==="range"?Math.floor((s.targetDistance.min+s.targetDistance.max)/2).toString():(this.getDistanceValue(s.targetDistance)??"-").toString();case"duration":return s.targetDuration&&s.targetDuration.type==="range"?Math.floor((s.targetDuration.minSeconds+s.targetDuration.maxSeconds)/2).toString():(this.getDurationValue(s.targetDuration)??"-").toString();case"rest":return s.targetRest&&s.targetRest.type==="range"?Math.floor((s.targetRest.minSeconds+s.targetRest.maxSeconds)/2).toString():(this.getRestValue(s.targetRest)??"-").toString();case"tempo":return s.targetTempo||"-";default:return"-"}}}_formatSingleSecondValue(e){let r;if(typeof e=="number")r=e;else{let t=e.trim().toLowerCase();if(t.includes(":")){let n=t.split(":");if(n.length===2){let a=parseFloat(n[0]),i=parseFloat(n[1]);if(!isNaN(a)&&!isNaN(i))r=a*60+i;else return""}else return""}else if(t.includes("m")||t.includes("minute")){let n=parseFloat(t.replace(/m|minute|minutes/g,""));if(!isNaN(n))r=n*60;else return""}else if(t.includes("s")||t.includes("second")){let n=parseFloat(t.replace(/s|second|seconds/g,""));if(!isNaN(n))r=n;else return""}else if(r=parseFloat(t),isNaN(r))return""}let s=String(Math.floor(r/60)).padStart(2,"0"),o=String(r%60).padStart(2,"0");return`${s}:${o}`}formatSecondsToTime(e){if(e==null||e==="")return"";if(typeof e=="string"&&e.includes("-")){let[r,s]=e.split("-"),o=this._formatSingleSecondValue(r),t=this._formatSingleSecondValue(s);return`${o}-${t}`}return this._formatSingleSecondValue(e)}getAvailableRepsSchemes(e){return W.filter(s=>e==="builder"?s.availableInBuilder:s.availableInPlayer).map(s=>({type:s.type,label:this.translate.instant(s.labelKey)}))}getAvailableWeightSchemes(e){return F.filter(r=>e==="builder"?r.availableInBuilder:r.availableInPlayer).map(r=>({type:r.type,label:this.translate.instant(r.labelKey)}))}repsTargetAsString(e){if(!e)return"";switch(e.type){case"exact":return`${e.value}`;case"range":return`${e.min}-${e.max}`;case"amrap":return"AMRAP";case"min_plus":return`${e.value}+`;default:return""}}weightTargetAsString(e){if(!e)return"";switch(e.type){case"exact":return`${e.value}`;case"range":return`${e.min}-${e.max}`;case"bodyweight":return this.translate.instant("weightSchemes.bodyweight");case"percentage_1rm":return`${e.percentage}% 1RM`;default:return""}}getAvailableDurationSchemes(e){return _.filter(r=>e==="builder"?r.availableInBuilder:r.availableInPlayer).map(r=>({type:r.type,label:this.translate.instant(r.labelKey)}))}durationTargetAsString(e){if(!e)return"";switch(e.type){case"exact":return`${e.seconds}`;case"range":return`${e.minSeconds}-${e.maxSeconds}`;case"to_failure":return this.translate.instant("durationSchemes.toFailure");default:return""}}getAvailableDistanceSchemes(e){return C.filter(r=>e==="builder"?r.availableInBuilder:r.availableInPlayer).map(r=>({type:r.type,label:this.translate.instant(r.labelKey)}))}distanceTargetAsString(e){if(!e)return"";switch(e.type){case"exact":return`${e.value}`;case"range":return`${e.min}-${e.max}`;default:return""}}getAvailableRestSchemes(e){return I.filter(r=>e==="builder"?r.availableInBuilder:r.availableInPlayer).map(r=>({type:r.type,label:this.translate.instant(r.labelKey)}))}restTargetAsString(e){if(!e)return"";switch(e.type){case"exact":return`${e.seconds}`;case"range":return`${e.minSeconds}-${e.maxSeconds}`;default:return""}}showSchemeModal(e,r,s){return S(this,null,function*(){let o=s.map(u=>{let c="pin";return u.type.includes("range")&&(c="range"),u.type.includes("percentage")&&(c="percentage"),u.type.includes("max")&&(c="max_performance"),u.type.includes("fraction")&&(c="fraction"),u.type.includes("amrap")&&(c="repeat"),u.type.includes("min_plus")&&(c="plus-circle"),u.type.includes("bodyweight")&&(c="weight"),{text:this.translate.instant(u.labelKey),role:"select",data:u.type,icon:c}}),t=yield this.alertService.showConfirmationDialog(this.translate.instant("schemes.titles.selectType",{metric:this.translate.instant(`metrics.${e}`)}),"",o,{customButtonDivCssClass:o.length>1?"grid grid-cols-2 gap-3":"grid grid-cols-1 gap-3",showCloseButton:!0});if(!t||!t.data)return null;let n=t.data,a=null,i=[],f=`schemes.titles.set${n.charAt(0).toUpperCase()+n.slice(1)}`;switch(n){case"exact":case"exact":case"exact":i.push({name:"value",type:"number",label:this.translate.instant(`metrics.${e}`),value:r?.value??8,attributes:{min:0,required:!0}});break;case"exact":case"exact":i.push({name:"seconds",type:"number",label:this.translate.instant(`metrics.${e}`),value:r?.value??30,attributes:{min:0,required:!0}});break;case"min_plus":i.push({name:"min",type:"number",label:this.translate.instant("common.atLeast"),value:r?.min??5,attributes:{min:0,required:!0}});break;case"max_fraction":i.push({name:"divisor",type:"number",label:this.translate.instant("common.fractionOfMax"),value:r?.divisor??2,attributes:{min:1,required:!0}});break;case"range":case"range":case"range":case"range":case"range":i.push({name:"min",type:"number",label:this.translate.instant("common.min"),value:r?.min??8,attributes:{min:0,required:!0}},{name:"max",type:"number",label:this.translate.instant("common.max"),value:r?.max??12,attributes:{min:0,required:!0}});break;case"percentage_1rm":i.push({name:"percentage",type:"number",label:"% 1RM",value:r?.percentage??80,attributes:{min:1,max:150,required:!0}});break}if(i.length>0){let u=yield this.alertService.showPromptDialog(this.translate.instant(f),"",i);if(!u)return null;switch(e){case"reps":switch(n){case"exact":a={type:n,value:Number(u.value)};break;case"range":a={type:n,min:Number(u.min),max:Number(u.max)};break;case"min_plus":a={type:n,value:Number(u.min)};break;case"max_fraction":a={type:n,divisor:Number(u.divisor)};break}break;case"weight":switch(n){case"exact":a={type:n,value:Number(u.value)};break;case"range":a={type:n,min:Number(u.min),max:Number(u.max)};break;case"percentage_1rm":a={type:n,percentage:Number(u.percentage)};break}break;case"duration":switch(n){case"exact":a={type:n,seconds:Number(u.value)};break;case"range":a={type:n,minSeconds:Number(u.min),maxSeconds:Number(u.max)};break;case"to_failure":a={type:n};break}break;case"rest":switch(n){case"exact":a={type:n,seconds:Number(u.value)};break;case"range":a={type:n,minSeconds:Number(u.min),maxSeconds:Number(u.max)};break}break;case"distance":switch(n){case"exact":a={type:n,value:Number(u.value)};break;case"range":a={type:n,min:Number(u.min),max:Number(u.max)};break}break}}else a={type:n};return a?{role:"confirm",data:a}:null})}isLoggedRoutine(e){return"workoutLogId"in e}static \u0275fac=function(r){return new(r||D)};static \u0275prov=E({token:D,factory:D.\u0275fac,providedIn:"root"})};export{H as a};
