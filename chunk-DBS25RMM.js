import{c as C,d as c,f as r,h as m}from"./chunk-4PTIEP3X.js";import{Aa as A,Ga as o,Ha as d,Ia as p,Ja as u,Kb as V,Lb as K,Mb as N,Na as v,Nb as L,Nc as R,Oa as y,Ob as $,Pc as Y,Q as g,Qa as I,Ra as x,Sa as a,U as b,V as h,Xb as z,bb as S,ca as D,cb as H,db as O,dc as F,ea as E,ia as w,la as T,ma as s,ua as B,za as l}from"./chunk-73CHABTJ.js";import{g as k}from"./chunk-GAL4ENT6.js";function j(e,n){e&1&&u(0,"div",9)}function q(e,n){if(e&1&&u(0,"span",12),e&2){let t=n.ngIf,i=a(2).$implicit;o("innerHTML",t,w)("ngClass",i.iconClass||"w-5 h-5 mr-2")}}function G(e,n){if(e&1){let t=I();d(0,"button",10),x("click",function(f){b(t);let _=a().$implicit,M=a(3);return h(M.onItemClicked(f,_))}),l(1,q,1,2,"span",11),S(2),p()}if(e&2){let t=a().$implicit,i=a(3);o("ngClass",i.defaultDropdownButtonClass+" "+t.buttonClass),s(),o("ngIf",i.getIconHtml(t)),s(),O(" ",t.label," ")}}function J(e,n){if(e&1&&(v(0),l(1,j,1,0,"div",7)(2,G,3,3,"button",8),y()),e&2){let t=n.$implicit;s(),o("ngIf",t.isDivider),s(),o("ngIf",!t.isDivider)}}function Q(e,n){if(e&1&&(d(0,"div",4)(1,"div",5),l(2,J,3,2,"ng-container",6),p()()),e&2){let t=a(2);o("@dropdownMenu",void 0)("ngClass",t.dropdownMenuClass),s(2),o("ngForOf",t.items)}}function U(e,n){if(e&1&&(d(0,"div"),l(1,Q,3,3,"div",3),p()),e&2){let t=a();s(),o("ngIf",t.isVisible)}}function W(e,n){e&1&&u(0,"div")}function X(e,n){if(e&1&&u(0,"span",12),e&2){let t=n.ngIf,i=a(2).$implicit;o("innerHTML",t,w)("ngClass",i.iconClass||"w-6 h-6 mr-3")}}function Z(e,n){if(e&1&&(d(0,"span",16),S(1),p()),e&2){let t=a(2).$implicit;s(),H(t.label)}}function tt(e,n){if(e&1){let t=I();d(0,"button",14),x("click",function(f){b(t);let _=a().$implicit,M=a(3);return h(M.onItemClicked(f,_))}),l(1,X,1,2,"span",11)(2,Z,2,1,"span",15),p()}if(e&2){let t=a().$implicit,i=a(3);o("title",t.label)("ngClass",i.defaultCompactButtonClass+" "+t.buttonClass),s(),o("ngIf",i.getIconHtml(t)),s(),o("ngIf",i.showLabelInCompact(t))}}function et(e,n){if(e&1&&(v(0),l(1,tt,3,4,"button",13),y()),e&2){let t=n.$implicit;s(),o("ngIf",!t.isDivider)}}function nt(e,n){if(e&1&&(d(0,"div",4),l(1,et,2,1,"ng-container",6),p()),e&2){let t=a(2);o("@compactBar",void 0)("ngClass",t.compactBarClass+t.gridClass),s(),o("ngForOf",t.items)}}function it(e,n){if(e&1&&(d(0,"div"),l(1,nt,2,3,"div",3),p()),e&2){let t=a();s(),o("ngIf",t.isVisible)}}var ot=C("modalOverlay",[m(":enter",[r({opacity:0}),c("200ms ease-out",r({opacity:1}))]),m(":leave",[c("150ms ease-in",r({opacity:0}))])]),st=C("modalContent",[m(":enter",[r({transform:"translateY(100%)"}),c("200ms ease-out",r({transform:"translateY(0)"}))]),m(":leave",[c("150ms ease-in",r({transform:"translateY(100%)"}))])]),at=C("dropdownMenu",[m(":enter",[r({opacity:0,transform:"scale(0.95) translateY(-10px)"}),c("100ms ease-out",r({opacity:1,transform:"scale(1) translateY(0)"}))]),m(":leave",[c("75ms ease-in",r({opacity:0,transform:"scale(0.95) translateY(-10px)"}))])]),rt=C("compactBar",[m(":enter",[r({opacity:0}),c("200ms ease-out",r({opacity:1}))]),m(":leave",[c("150ms ease-in",r({opacity:0}))])]),P=class e{sanitizer=g(F);elRef=g(E);iconRegistry=g(R);alertService=g(Y);items=[];isVisible=!1;displayMode="dropdown";modalTitle="Actions";dropdownMenuClass="origin-top-right absolute right-0 top-full mt-2 w-56 rounded-lg shadow-lg bg-gray-800 ring-1 ring-black ring-opacity-5 p-2 z-[60]";defaultDropdownButtonClass="flex items-center w-full rounded-md px-3 py-2 text-lg font-medium text-white";compactBarClass="flex gap-2 grid grid-cols-2 justify-center items-center z-20 rounded-b-lg p-2";defaultCompactButtonClass="flex items-center w-full rounded-md px-3 py-2 text-sm font-medium text-white";gridClass="";customButtonDivCssClass="grid grid-cols-2";itemClick=new A;closeMenu=new A;_boundOnEnterKey=this.handleEnterKey.bind(this);ngOnChanges(n){if(n.isVisible){let t=n.isVisible.currentValue;t&&this.displayMode==="modal"&&setTimeout(()=>this.presentAsAlert(),0),t&&this.displayMode!=="modal"?document.addEventListener("keydown",this._boundOnEnterKey):document.removeEventListener("keydown",this._boundOnEnterKey)}}ngOnDestroy(){document.removeEventListener("keydown",this._boundOnEnterKey)}presentAsAlert(){return k(this,null,function*(){let n=this.items.filter(i=>!i.isDivider).map(i=>({text:i.label||"",role:i.actionKey||"",icon:i.iconName,iconClass:i.iconClass,overrideCssClass:`justify-start text-xl ${i.buttonClass||""}`,data:i.data})),t=yield this.alertService.present({header:this.modalTitle,buttons:n,backdropDismiss:!0,customButtonDivCssClass:this.customButtonDivCssClass?this.customButtonDivCssClass:"grid grid-cols-2"});t&&t.role!=="backdrop"&&t.role!=="cancel"&&this.itemClick.emit({actionKey:t.role,data:t.data}),this.closeMenu.emit()})}onDocumentClick(n){this.displayMode==="dropdown"&&this.isVisible&&!this.elRef.nativeElement.contains(n.target)&&this.closeMenu.emit()}handleEnterKey(n){if(n.key==="Enter"){n.preventDefault();let t=this.items.find(i=>!i.isDivider);t&&this.onItemClicked({stopPropagation:()=>{}},t)}}onItemClicked(n,t){n.stopPropagation(),t.isDivider||(navigator.vibrate&&navigator.vibrate(50),this.itemClick.emit({actionKey:t.actionKey??"",data:t.data}),this.displayMode==="dropdown"&&this.closeMenu.emit())}getIconHtml(n){let t=null;return n.iconName?t=this.iconRegistry.getIconString(n.iconName):n.iconSvg&&(t=n.iconSvg),t?this.sanitizer.bypassSecurityTrustHtml(t):null}showLabelInCompact(n){return!!n.label}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=B({type:e,selectors:[["app-action-menu"]],hostBindings:function(t,i){t&1&&x("click",function(_){return i.onDocumentClick(_)},T)},inputs:{items:"items",isVisible:"isVisible",displayMode:"displayMode",modalTitle:"modalTitle",dropdownMenuClass:"dropdownMenuClass",compactBarClass:"compactBarClass",gridClass:"gridClass",customButtonDivCssClass:"customButtonDivCssClass"},outputs:{itemClick:"itemClick",closeMenu:"closeMenu"},features:[D],decls:5,vars:4,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"hidden","dark:hover:text-gray-100"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"flex","flex-col","gap-y-1"],[4,"ngFor","ngForOf"],["class","my-0.5 sm:my-1 border-t border-gray-200 dark:border-gray-600",4,"ngIf"],["type","button","class","transition-colors duration-150 ease-in-out",3,"ngClass","click",4,"ngIf"],[1,"my-0.5","sm:my-1","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"transition-colors","duration-150","ease-in-out",3,"click","ngClass"],[3,"innerHTML","ngClass",4,"ngIf"],[3,"innerHTML","ngClass"],["type","button","class","transition-colors duration-150 ease-in-out",3,"title","ngClass","click",4,"ngIf"],["type","button",1,"transition-colors","duration-150","ease-in-out",3,"click","title","ngClass"],["class","truncate",4,"ngIf"],[1,"truncate"]],template:function(t,i){t&1&&(v(0,0),l(1,U,2,1,"div",1)(2,W,1,0,"div",1)(3,it,2,1,"div",1),y(),u(4,"div",2)),t&2&&(o("ngSwitch",i.displayMode),s(),o("ngSwitchCase","dropdown"),s(),o("ngSwitchCase","modal"),s(),o("ngSwitchCase","compact"))},dependencies:[z,V,K,N,L,$],encapsulation:2,data:{animation:[at,rt,ot,st]},changeDetection:0})};export{P as a};
