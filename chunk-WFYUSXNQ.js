import{a as Zn,b as Qn}from"./chunk-WYM5WGTQ.js";import{a as _r,b as we,c as Ne,d as ct,e as no,f as fr,g as Pi,i as oo,j as xr,k as so}from"./chunk-DULDXDO5.js";import{a as uo}from"./chunk-VEUUSCDY.js";import{b as co}from"./chunk-JZ7Z2VF5.js";import{Q as to}from"./chunk-Y3I4T7J3.js";import{a as eo}from"./chunk-M3MD7EIL.js";import{a as Bi}from"./chunk-7DXBPLEQ.js";import{a as io,b as ro}from"./chunk-2OLJ5PV4.js";import{a as Jn}from"./chunk-VEASBVPN.js";import{a as Ai}from"./chunk-GG6QRTVP.js";import{a as Oi}from"./chunk-RPIKC5GL.js";import{a as vr,b as yr,c as ao,d as lo,e as br}from"./chunk-DLXLOYW4.js";import{A as $n,C as oe,D as zn,I as Ii,J as Ti,Y as Ee,_ as Mi,a as mr,b as Bn,ba as Yn,c as Pn,d as On,e as Ln,ea as Fi,f as Vn,g as Nn,h as Wn,i as Gn,j as Hn,ja as Di,k as Si,ka as Xn,la as lt,m as gr,ma as Ri,na as Kn,o as vt,p as hr,q as Ci,r as qn,s as ki,t as De,u as jn,v as Ei,w as ke,x as Un,z as Ue}from"./chunk-DKF37G4Q.js";import{$b as yn,$c as be,A as Se,Aa as ce,Bc as kn,Bd as Ve,C as St,Ca as ln,Cb as x,Cd as Bt,Da as k,Db as v,Dd as Pt,E as tn,Eb as Ce,Ed as An,F as lr,Fa as di,Fb as mn,G as rn,Ga as $t,Gb as Te,H as ve,Ha as ye,Hc as pr,I as Xe,Ia as Ze,Ic as gi,J as mt,Ja as Qe,K as li,Ka as cn,Kb as Me,La as kt,Lb as qe,Lc as xt,M as U,Ma as Et,N as Ht,Na as p,Nb as _e,Nc as hi,O as se,Oa as d,Ob as ur,P as nn,Pa as c,Q as y,Qa as E,Qb as ft,Rb as je,S as ci,Sb as gn,Tb as hn,Ua as H,Ub as _n,Uc as Yt,V as w,Va as q,Vb as et,Vc as Y,W as S,Wa as Be,Wb as It,Wc as _i,Xa as D,Xb as tt,Xc as rt,Ya as I,Yb as fn,Yc as Fe,Z as pe,Za as u,Zb as xn,Zc as nt,_ as J,_b as vn,_c as fi,a as Ae,aa as R,ac as bn,ad as Xt,b as ar,bb as Pe,bc as pi,bd as Mt,c as V,cb as Oe,cc as Tt,cd as xi,d as oi,da as Ke,db as Le,dd as En,ea as cr,eb as ee,ec as wn,f as Zr,fa as me,fb as zt,fc as Sn,fd as In,ga as on,gb as Je,h as ut,ha as sn,hb as dn,hc as it,hd as vi,i as he,ia as an,ib as h,id as Tn,ja as qt,jb as M,jd as Mn,ka as dr,kb as C,kd as yi,l as xe,lb as ne,ld as ot,m as ue,mb as un,md as st,n as Qr,na as a,nd as at,o as pt,ob as K,p as si,pa as j,pb as Z,pd as Fn,q as Jr,qa as re,qb as Q,ra as Ge,rb as pn,rd as bi,sa as gt,sd as Dn,ta as He,tb as ht,tc as mi,td as Ft,u as en,ua as Ct,ub as _t,ud as Dt,v as ai,va as ae,vb as de,vd as wi,w as wt,wa as jt,wb as z,wd as Rn,xb as ui,ya as le,yd as Rt,z as Gt,za as Ut,zc as Cn,zd as At}from"./chunk-RAZEFHXM.js";import{a as A,b as W,g as G}from"./chunk-GAL4ENT6.js";var wr;function as(){if(wr==null){let n=typeof document<"u"?document.head:null;wr=!!(n&&(n.createShadowRoot||n.attachShadow))}return wr}function Ot(n){if(as()){let t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Li(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){let t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function fe(n){return n.composedPath?n.composedPath()[0]:n.target}function Vi(n){return n.buttons===0||n.detail===0}function Ni(n){let t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var Wi=new WeakMap,yt=(()=>{class n{_appRef;_injector=y(pe);_environmentInjector=y(ci);load(e){let i=this._appRef=this._appRef||this._injector.get(di),r=Wi.get(i);r||(r={loaders:new Set,refs:[]},Wi.set(i,r),i.onDestroy(()=>{Wi.get(i)?.refs.forEach(o=>o.destroy()),Wi.delete(i)})),r.loaders.has(e)||(r.loaders.add(e),r.refs.push(hn(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Sr={},Lt=(()=>{class n{_appId=y(on);getId(e){return this._appId!=="ng"&&(e+=this._appId),Sr.hasOwnProperty(e)||(Sr[e]=0),`${e}${Sr[e]++}`}static \u0275fac=function(i){return new(i||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gi(n){return Array.isArray(n)?n:[n]}function Er(n){let t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return i==="canvas"?go(n,t):(i==="input"||i==="select"||i==="textarea")&&mo(n,t),po("canvas",n,t,go),po("input, textarea, select",n,t,mo),t}function po(n,t,e,i){let r=t.querySelectorAll(n);if(r.length){let o=e.querySelectorAll(n);for(let s=0;s<r.length;s++)i(r[s],o[s])}}var ls=0;function mo(n,t){t.type!=="file"&&(t.value=n.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${ls++}`)}function go(n,t){let e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}function Rr(n){let t=n.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function Ir(n,t,e){let{top:i,bottom:r,left:o,right:s}=n;return e>=i&&e<=r&&t>=o&&t<=s}function cs(n,t){let e=t.left<n.left,i=t.left+t.width>n.right,r=t.top<n.top,o=t.top+t.height>n.bottom;return e||i||r||o}function Qt(n,t,e){n.top+=t,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function ho(n,t,e,i){let{top:r,right:o,bottom:s,left:l,width:m,height:g}=n,_=m*t,f=g*t;return i>r-f&&i<s+f&&e>l-_&&e<o+_}var Hi=class{_document;positions=new Map;constructor(t){this._document=t}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:Rr(e)})})}handleScroll(t){let e=fe(t),i=this.positions.get(e);if(!i)return null;let r=i.scrollPosition,o,s;if(e===this._document){let g=this.getViewportScrollPosition();o=g.top,s=g.left}else o=e.scrollTop,s=e.scrollLeft;let l=r.top-o,m=r.left-s;return this.positions.forEach((g,_)=>{g.clientRect&&e!==_&&e.contains(_)&&Qt(g.clientRect,l,m)}),r.top=o,r.left=s,{top:l,left:m}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function Io(n,t){let e=n.rootNodes;if(e.length===1&&e[0].nodeType===t.ELEMENT_NODE)return e[0];let i=t.createElement("div");return e.forEach(r=>i.appendChild(r)),i}function Ar(n,t,e){for(let i in t)if(t.hasOwnProperty(i)){let r=t[i];r?n.setProperty(i,r,e?.has(i)?"important":""):n.removeProperty(i)}return n}function Vt(n,t){let e=t?"":"none";Ar(n.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function _o(n,t,e){Ar(n.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function qi(n,t){return t&&t!="none"?n+" "+t:n}function fo(n,t){n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.transform=Jt(t.left,t.top)}function Jt(n,t){return`translate3d(${Math.round(n)}px, ${Math.round(t)}px, 0)`}function xo(n){let t=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*t}function ds(n){let t=getComputedStyle(n),e=Cr(t,"transition-property"),i=e.find(l=>l==="transform"||l==="all");if(!i)return 0;let r=e.indexOf(i),o=Cr(t,"transition-duration"),s=Cr(t,"transition-delay");return xo(o[r])+xo(s[r])}function Cr(n,t){return n.getPropertyValue(t).split(",").map(i=>i.trim())}var us=new Set(["position"]),Tr=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(t,e,i,r,o,s,l,m,g,_){this._document=t,this._rootElement=e,this._direction=i,this._initialDomRect=r,this._previewTemplate=o,this._previewClass=s,this._pickupPositionOnPage=l,this._initialTransform=m,this._zIndex=g,this._renderer=_}attach(t){this._preview=this._createPreview(),t.appendChild(this._preview),vo(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(t){this._preview.style.transform=t}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(t){this._preview.classList.add(t)}getTransitionDuration(){return ds(this._preview)}addEventListener(t,e){return this._renderer.listen(this._preview,t,e)}_createPreview(){let t=this._previewTemplate,e=this._previewClass,i=t?t.template:null,r;if(i&&t){let o=t.matchSize?this._initialDomRect:null,s=t.viewContainer.createEmbeddedView(i,t.context);s.detectChanges(),r=Io(s,this._document),this._previewEmbeddedView=s,t.matchSize?fo(r,o):r.style.transform=Jt(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=Er(this._rootElement),fo(r,this._initialDomRect),this._initialTransform&&(r.style.transform=this._initialTransform);return Ar(r.style,{"pointer-events":"none",margin:vo(r)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},us),Vt(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("popover","manual"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(o=>r.classList.add(o)):r.classList.add(e)),r}};function vo(n){return"showPopover"in n}var ps={passive:!0},yo={passive:!1},ms={passive:!1,capture:!0},gs=800,bo="cdk-drag-placeholder",wo=new Set(["position"]),Mr=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=R(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new V;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=Ae.EMPTY;_pointerUpSubscription=Ae.EMPTY;_scrollSubscription=Ae.EMPTY;_resizeSubscription=Ae.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(t){t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(e=>Vt(e,t)))}_disabled=!1;beforeStarted=new V;started=new V;released=new V;ended=new V;entered=new V;exited=new V;dropped=new V;moved=this._moveEvents;data;constrainPosition;constructor(t,e,i,r,o,s,l){this._config=e,this._document=i,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=s,this._renderer=l,this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new Hi(i),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>we(i)),this._handles.forEach(i=>Vt(i,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){let e=we(t);if(e!==this._rootElement){this._removeRootElementListeners();let i=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[i.listen(e,"mousedown",this._pointerDown,yo),i.listen(e,"touchstart",this._pointerDown,ps),i.listen(e,"dragstart",this._nativeDragStart,yo)]),this._initialTransform=void 0,this._rootElement=e}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?we(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&cs(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let t=this._boundaryElement.getBoundingClientRect(),e=this._rootElement.getBoundingClientRect(),i=0,r=0;e.left<t.left?i=t.left-e.left:e.right>t.right&&(i=t.right-e.right),e.top<t.top?r=t.top-e.top:e.bottom>t.bottom&&(r=t.bottom-e.bottom);let o=this._activeTransform.x,s=this._activeTransform.y,l=o+i,m=s+r;this._rootElement.style.transform=Jt(l,m),this._activeTransform={x:l,y:m},this._passiveTransform={x:l,y:m}}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),Vt(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),Vt(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){let t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){let t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)};_pointerMove=t=>{let e=this._getPointerPositionOnPage(t);if(!this._hasStartedDragging()){let r=Math.abs(e.x-this._pickupPositionOnPage.x),o=Math.abs(e.y-this._pickupPositionOnPage.y);if(r+o>=this._config.dragStartThreshold){let l=Date.now()>=this._dragStartTime+this._getDragStartDelay(t),m=this._dropContainer;if(!l){this._endDragSequence(t);return}(!m||!m.isDragging()&&!m.isReceiving())&&(t.cancelable&&t.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(t)))}return}t.cancelable&&t.preventDefault();let i=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,e);else{let r=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=i.x-r.x+this._passiveTransform.x,o.y=i.y-r.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:t,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})};_pointerUp=t=>{this._endDragSequence(t)};_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){Kt(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),i=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(e,"selectstart",hs,ms)}),i){let r=this._rootElement,o=r.parentNode,s=this._placeholder=this._createPlaceholderElement(),l=this._marker=this._marker||this._document.createComment("");o.insertBefore(l,r),this._initialTransform=r.style.transform||"",this._preview=new Tr(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,e)),_o(r,!1,wo),this._document.body.appendChild(o.replaceChild(s,r)),this.started.next({source:this,event:t}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();let i=this.isDragging(),r=Kt(e),o=!r&&e.button!==0,s=this._rootElement,l=fe(e),m=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+gs>Date.now(),g=r?Ni(e):Vi(e);if(l&&l.draggable&&e.type==="mousedown"&&e.preventDefault(),i||o||m||g)return;if(this._handles.length){let b=s.style;this._rootElementTapHighlight=b.webkitTapHighlightColor||"",b.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(b=>this._updateOnScroll(b)),this._boundaryElement&&(this._boundaryRect=Rr(this._boundaryElement));let _=this._previewTemplate;this._pickupPositionInElement=_&&_.template&&!_.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,t,e);let f=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:f.x,y:f.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){_o(this._rootElement,!0,wo),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,i=e.getItemIndex(this),r=this._getPointerPositionOnPage(t),o=this._getDragDistance(r),s=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:o,dropPoint:r,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:r,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,s,o,r,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:r}){let o=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{let s=this._dropContainer.getItemIndex(this),l=this._dropContainer.getItemAtIndex(s+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(o,this._dropContainer,l),this._dropContainer=o,this._dropContainer.enter(this,t,e,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let t=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let r=l=>{(!l||this._preview&&fe(l)===this._preview.element&&l.propertyName==="transform")&&(s(),i(),clearTimeout(o))},o=setTimeout(r,e*1.5),s=this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){let t=this._placeholderTemplate,e=t?t.template:null,i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=Io(this._placeholderRef,this._document)):i=Er(this._rootElement),i.style.pointerEvents="none",i.classList.add(bo),i}_getPointerPositionInElement(t,e,i){let r=e===this._rootElement?null:e,o=r?r.getBoundingClientRect():t,s=Kt(i)?i.targetTouches[0]:i,l=this._getViewportScrollPosition(),m=s.pageX-o.left-l.left,g=s.pageY-o.top-l.top;return{x:o.left-t.left+m,y:o.top-t.top+g}}_getPointerPositionOnPage(t){let e=this._getViewportScrollPosition(),i=Kt(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,r=i.pageX-e.left,o=i.pageY-e.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let l=this._ownerSVGElement.createSVGPoint();return l.x=r,l.y=o,l.matrixTransform(s.inverse())}}return{x:r,y:o}}_getConstrainedPointerPosition(t){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:r}=this.constrainPosition?this.constrainPosition(t,this,this._initialDomRect,this._pickupPositionInElement):t;if(this.lockAxis==="x"||e==="x"?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,l=this._boundaryRect,{width:m,height:g}=this._getPreviewRect(),_=l.top+s,f=l.bottom-(g-s),b=l.left+o,T=l.right-(m-o);i=So(i,b,T),r=So(r,_,f)}return{x:i,y:r}}_updatePointerDirectionDelta(t){let{x:e,y:i}=t,r=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(e-o.x),l=Math.abs(i-o.y);return s>this._config.pointerDirectionChangeThreshold&&(r.x=e>o.x?1:-1,o.x=e),l>this._config.pointerDirectionChangeThreshold&&(r.y=i>o.y?1:-1,o.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,Vt(this._rootElement,t))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(t=>t()),this._rootElementCleanups=void 0}_applyRootElementTransform(t,e){let i=1/this.scale,r=Jt(t*i,e*i),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=qi(r,this._initialTransform)}_applyPreviewTransform(t,e){let i=this._previewTemplate?.template?void 0:this._initialTransform,r=Jt(t,e);this._preview.setTransform(qi(r,i))}_getDragDistance(t){let e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(t===0&&e===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(r.width===0&&r.height===0||i.width===0&&i.height===0)return;let o=r.left-i.left,s=i.right-r.right,l=r.top-i.top,m=i.bottom-r.bottom;r.width>i.width?(o>0&&(t+=o),s>0&&(t-=s)):t=0,r.height>i.height?(l>0&&(e+=l),m>0&&(e-=m)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){let e=this.dragStartDelay;return typeof e=="number"?e:Kt(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){let e=this._parentPositions.handleScroll(t);if(e){let i=fe(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Qt(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Ot(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){let i=this._previewContainer||"global";if(i==="parent")return t;if(i==="global"){let r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return we(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=t=>{if(this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&t.preventDefault()}else this.disabled||t.preventDefault()};_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}_conditionallyInsertAnchor(t,e,i){if(t===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(e===this._initialContainer&&e.hasAnchor){let r=this._anchor??=Er(this._placeholder);r.classList.remove(bo),r.classList.add("cdk-drag-anchor"),r.style.transform="",i?i.before(r):we(e.element).appendChild(r)}}};function So(n,t,e){return Math.max(t,Math.min(e,n))}function Kt(n){return n.type[0]==="t"}function hs(n){n.preventDefault()}function ei(n,t,e){let i=Co(t,n.length-1),r=Co(e,n.length-1);if(i===r)return;let o=n[i],s=r<i?-1:1;for(let l=i;l!==r;l+=s)n[l]=n[l+s];n[r]=o}function Co(n,t){return Math.max(0,Math.min(t,n))}var ji=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(t){this._dragDropRegistry=t}_previousSwap={drag:null,delta:0,overlaps:!1};start(t){this.withItems(t)}sort(t,e,i,r){let o=this._itemPositions,s=this._getItemIndexFromPointerPosition(t,e,i,r);if(s===-1&&o.length>0)return null;let l=this.orientation==="horizontal",m=o.findIndex(P=>P.drag===t),g=o[s],_=o[m].clientRect,f=g.clientRect,b=m>s?1:-1,T=this._getItemOffsetPx(_,f,b),O=this._getSiblingOffsetPx(m,o,b),F=o.slice();return ei(o,m,s),o.forEach((P,$)=>{if(F[$]===P)return;let B=P.drag===t,L=B?T:O,X=B?t.getPlaceholderElement():P.drag.getRootElement();P.offset+=L;let ie=Math.round(P.offset*(1/P.drag.scale));l?(X.style.transform=qi(`translate3d(${ie}px, 0, 0)`,P.initialTransform),Qt(P.clientRect,0,L)):(X.style.transform=qi(`translate3d(0, ${ie}px, 0)`,P.initialTransform),Qt(P.clientRect,L,0))}),this._previousSwap.overlaps=Ir(f,e,i),this._previousSwap.drag=g.drag,this._previousSwap.delta=l?r.x:r.y,{previousIndex:m,currentIndex:s}}enter(t,e,i,r){let o=r==null||r<0?this._getItemIndexFromPointerPosition(t,e,i):r,s=this._activeDraggables,l=s.indexOf(t),m=t.getPlaceholderElement(),g=s[o];if(g===t&&(g=s[o+1]),!g&&(o==null||o===-1||o<s.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(g=s[0]),l>-1&&s.splice(l,1),g&&!this._dragDropRegistry.isDragging(g)){let _=g.getRootElement();_.parentElement.insertBefore(m,_),s.splice(o,0,t)}else this._element.appendChild(m),s.push(t);m.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables?.forEach(t=>{let e=t.getRootElement();if(e){let i=this._itemPositions.find(r=>r.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return this._getVisualItemPositions().findIndex(e=>e.drag===t)}getItemAtIndex(t){return this._getVisualItemPositions()[t]?.drag||null}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{Qt(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(t){this._element=t}_cacheItemPositions(){let t=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:Rr(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(t,e,i){let r=this.orientation==="horizontal",o=r?e.left-t.left:e.top-t.top;return i===-1&&(o+=r?e.width-t.width:e.height-t.height),o}_getSiblingOffsetPx(t,e,i){let r=this.orientation==="horizontal",o=e[t].clientRect,s=e[t+i*-1],l=o[r?"width":"height"]*i;if(s){let m=r?"left":"top",g=r?"right":"bottom";i===-1?l-=s.clientRect[m]-o[g]:l+=o[m]-s.clientRect[g]}return l}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,r=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let s=i[i.length-1].clientRect;return r?t>=s.right:e>=s.bottom}else{let s=i[0].clientRect;return r?t<=s.left:e<=s.top}}_getItemIndexFromPointerPosition(t,e,i,r){let o=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:l,clientRect:m})=>{if(l===t)return!1;if(r){let g=o?r.x:r.y;if(l===this._previousSwap.drag&&this._previousSwap.overlaps&&g===this._previousSwap.delta)return!1}return o?e>=Math.floor(m.left)&&e<Math.floor(m.right):i>=Math.floor(m.top)&&i<Math.floor(m.bottom)});return s===-1||!this._sortPredicate(s,t)?-1:s}},Fr=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(t,e){this._document=t,this._dragDropRegistry=e}start(t){let e=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<e.length;i++){let r=e[i];this._relatedNodes.push([r,r.nextSibling])}this.withItems(t)}sort(t,e,i,r){let o=this._getItemIndexFromPointerPosition(t,e,i),s=this._previousSwap;if(o===-1||this._activeItems[o]===t)return null;let l=this._activeItems[o];if(s.drag===l&&s.overlaps&&s.deltaX===r.x&&s.deltaY===r.y)return null;let m=this.getItemIndex(t),g=t.getPlaceholderElement(),_=l.getRootElement();o>m?_.after(g):_.before(g),ei(this._activeItems,m,o);let f=this._getRootNode().elementFromPoint(e,i);return s.deltaX=r.x,s.deltaY=r.y,s.drag=l,s.overlaps=_===f||_.contains(f),{previousIndex:m,currentIndex:o}}enter(t,e,i,r){let o=this._activeItems.indexOf(t);o>-1&&this._activeItems.splice(o,1);let s=r==null||r<0?this._getItemIndexFromPointerPosition(t,e,i):r;s===-1&&(s=this._getClosestItemIndexToPointer(t,e,i));let l=this._activeItems[s];l&&!this._dragDropRegistry.isDragging(l)?(this._activeItems.splice(s,0,t),l.getRootElement().before(t.getPlaceholderElement())):(this._activeItems.push(t),this._element.appendChild(t.getPlaceholderElement()))}withItems(t){this._activeItems=t.slice()}withSortPredicate(t){this._sortPredicate=t}reset(){let t=this._element,e=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[r,o]=this._relatedNodes[i];r.parentNode===t&&r.nextSibling!==o&&(o===null?t.appendChild(r):o.parentNode===t&&t.insertBefore(r,o))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(t){return this._activeItems.indexOf(t)}getItemAtIndex(t){return this._activeItems[t]||null}updateOnScroll(){this._activeItems.forEach(t=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(t){t!==this._element&&(this._element=t,this._rootNode=void 0)}_getItemIndexFromPointerPosition(t,e,i){let r=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(i)),o=r?this._activeItems.findIndex(s=>{let l=s.getRootElement();return r===l||l.contains(r)}):-1;return o===-1||!this._sortPredicate(o,t)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=Ot(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(t,e,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let r=1/0,o=-1;for(let s=0;s<this._activeItems.length;s++){let l=this._activeItems[s];if(l!==t){let{x:m,y:g}=l.getRootElement().getBoundingClientRect(),_=Math.hypot(e-m,i-g);_<r&&(r=_,o=s)}}return o}},ko=.05,To=.05,Ie=(function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n})(Ie||{}),ge=(function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n})(ge||{}),Dr=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new V;entered=new V;exited=new V;dropped=new V;sorted=new V;receivingStarted=new V;receivingStopped=new V;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=Ae.EMPTY;_verticalScrollDirection=Ie.NONE;_horizontalScrollDirection=ge.NONE;_scrollNode;_stopScrollTimers=new V;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(t,e,i,r,o){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=o;let s=this.element=we(t);this._document=i,this.withOrientation("vertical").withElementContainer(s),e.registerDropContainer(this),this._parentPositions=new Hi(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,r){this._draggingStarted(),r==null&&this.sortingDisabled&&(r=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,r,o,s,l,m={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:o,distance:s,dropPoint:l,event:m})}withItems(t){let e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>t.indexOf(r)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._direction=t,this._sortStrategy instanceof ji&&(this._sortStrategy.direction=t),this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){if(t==="mixed")this._sortStrategy=new Fr(this._document,this._dragDropRegistry);else{let e=new ji(this._dragDropRegistry);e.direction=this._direction,e.orientation=t,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,i)=>this.sortPredicate(e,i,this)),this}withScrollableParents(t){let e=this._container;return this._scrollableElements=t.indexOf(e)===-1?[e,...t]:t.slice(),this}withElementContainer(t){if(t===this._container)return this;let e=we(this.element),i=this._scrollableElements.indexOf(this._container),r=this._scrollableElements.indexOf(t);return i>-1&&this._scrollableElements.splice(i,1),r>-1&&this._scrollableElements.splice(r,1),this._sortStrategy&&this._sortStrategy.withElementContainer(t),this._cachedShadowRoot=null,this._scrollableElements.unshift(t),this._container=t,this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}getItemAtIndex(t){return this._isDragging?this._sortStrategy.getItemAtIndex(t):this._draggables[t]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,r){if(this.sortingDisabled||!this._domRect||!ho(this._domRect,ko,e,i))return;let o=this._sortStrategy.sort(t,e,i,r);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,r=Ie.NONE,o=ge.NONE;if(this._parentPositions.positions.forEach((s,l)=>{l===this._document||!s.clientRect||i||ho(s.clientRect,ko,t,e)&&([r,o]=_s(l,s.clientRect,this._direction,t,e),(r||o)&&(i=l))}),!r&&!o){let{width:s,height:l}=this._viewportRuler.getViewportSize(),m={width:s,height:l,top:0,right:s,bottom:l,left:0};r=Mo(m,e),o=Fo(m,t),i=window}i&&(r!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=o,this._scrollNode=i,(r||o)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let t=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let t=this._container.style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),en(0,Zr).pipe(mt(this._stopScrollTimers)).subscribe(()=>{let t=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===Ie.UP?t.scrollBy(0,-e):this._verticalScrollDirection===Ie.DOWN&&t.scrollBy(0,e),this._horizontalScrollDirection===ge.LEFT?t.scrollBy(-e,0):this._horizontalScrollDirection===ge.RIGHT&&t.scrollBy(e,0)})};_isOverContainer(t,e){return this._domRect!=null&&Ir(this._domRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(r=>r._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._domRect||!Ir(this._domRect,e,i)||!this.enterPredicate(t,this))return!1;let r=this._getShadowRoot().elementFromPoint(e,i);return r?r===this._container||this._container.contains(r):!1}_startReceiving(t,e){let i=this._activeSiblings;!i.has(t)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let t=Ot(this._container);this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}};function Mo(n,t){let{top:e,bottom:i,height:r}=n,o=r*To;return t>=e-o&&t<=e+o?Ie.UP:t>=i-o&&t<=i+o?Ie.DOWN:Ie.NONE}function Fo(n,t){let{left:e,right:i,width:r}=n,o=r*To;return t>=e-o&&t<=e+o?ge.LEFT:t>=i-o&&t<=i+o?ge.RIGHT:ge.NONE}function _s(n,t,e,i,r){let o=Mo(t,r),s=Fo(t,i),l=Ie.NONE,m=ge.NONE;if(o){let g=n.scrollTop;o===Ie.UP?g>0&&(l=Ie.UP):n.scrollHeight-g>n.clientHeight&&(l=Ie.DOWN)}if(s){let g=n.scrollLeft;e==="rtl"?s===ge.RIGHT?g<0&&(m=ge.RIGHT):n.scrollWidth+g>n.clientWidth&&(m=ge.LEFT):s===ge.LEFT?g>0&&(m=ge.LEFT):n.scrollWidth-g>n.clientWidth&&(m=ge.RIGHT)}return[l,m]}var Zt={capture:!0},kr={passive:!1,capture:!0},fs=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(i,r){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),Br=(()=>{class n{_ngZone=y(re);_document=y(J);_styleLoader=y(yt);_renderer=y(He).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new V;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=R([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new V;pointerUp=new V;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,kr)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(e,i){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(fs),this._activeDragInstances.update(r=>[...r,e]),this._activeDragInstances().length===1)){let r=i.type.startsWith("touch"),o=l=>this.pointerUp.next(l),s=[["scroll",l=>this._scroll.next(l),Zt],["selectstart",this._preventDefaultWhileDragging,kr]];r?s.push(["touchend",o,Zt],["touchcancel",o,Zt]):s.push(["mouseup",o,Zt]),r||s.push(["mousemove",l=>this.pointerMove.next(l),kr]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=s.map(([l,m,g])=>this._renderer.listen(this._document,l,m,g))})}}stopDragging(e){this._activeDragInstances.update(i=>{let r=i.indexOf(e);return r>-1?(i.splice(r,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let i=[this._scroll];return e&&e!==this._document&&i.push(new ar(r=>this._ngZone.runOutsideAngular(()=>{let o=this._renderer.listen(e,"scroll",s=>{this._activeDragInstances().length&&r.next(s)},Zt);return()=>{o()}}))),ai(...i)}registerDirectiveNode(e,i){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,i)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xs={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Pr=(()=>{class n{_document=y(J);_ngZone=y(re);_viewportRuler=y(Pi);_dragDropRegistry=y(Br);_renderer=y(He).createRenderer(null,null);constructor(){}createDrag(e,i=xs){return new Mr(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new Dr(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ui=new se("CDK_DRAG_PARENT");var Do=new se("CdkDragHandle"),Ro=(()=>{class n{element=y(me);_parentDrag=y(Ui,{optional:!0,skipSelf:!0});_dragDropRegistry=y(Br);_stateChanges=new V;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let e=this.element.nativeElement.parentElement;for(;e;){let i=this._dragDropRegistry.getDragDirectiveForNode(e);if(i){this._parentDrag=i,i._addHandle(this);break}e=e.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ce({type:n,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",je]},features:[ht([{provide:Do,useExisting:n}])]})}return n})(),Ao=new se("CDK_DRAG_CONFIG"),Bo=new se("CdkDropList"),Po=(()=>{class n{element=y(me);dropContainer=y(Bo,{optional:!0,skipSelf:!0});_ngZone=y(re);_viewContainerRef=y(jt);_dir=y(ct,{optional:!0});_changeDetectorRef=y(ft);_selfHandle=y(Do,{optional:!0,self:!0});_parentDrag=y(Ui,{optional:!0,skipSelf:!0});_dragDropRegistry=y(Br);_destroyed=new V;_handles=new oi([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new j;released=new j;ended=new j;entered=new j;exited=new j;dropped=new j;moved=new ar(e=>{let i=this._dragRef.moved.pipe(ue(r=>({source:this,pointerPosition:r.pointerPosition,event:r.event,delta:r.delta,distance:r.distance}))).subscribe(e);return()=>{i.unsubscribe()}});_injector=y(pe);constructor(){let e=this.dropContainer,i=y(Ao,{optional:!0}),r=y(Pr);this._dragRef=r.createDrag(this.element,{dragStartThreshold:i&&i.dragStartThreshold!=null?i.dragStartThreshold:5,pointerDirectionChangeThreshold:i&&i.pointerDirectionChangeThreshold!=null?i.pointerDirectionChangeThreshold:5,zIndex:i?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),i&&this._assignDefaults(i),e&&(e.addItem(this),e._dropListRef.beforeStarted.pipe(mt(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){Ge(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let i=e.rootElementSelector,r=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let i=this._handles.getValue();i.push(e),this._handles.next(i)}_removeHandle(e){let i=this._handles.getValue(),r=i.indexOf(e);r>-1&&(i.splice(r,1),this._handles.next(i))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,i=e;this.rootElementSelector&&(i=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):we(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let i=this._dir,r=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof r=="object"&&r?r:_r(r),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe(Se(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){let r=this._dragDropRegistry.getDragDirectiveForNode(i);if(r){e.withParent(r._dragRef);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(e){let{lockAxis:i,dragStartDelay:r,constrainPosition:o,previewClass:s,boundaryElement:l,draggingDisabled:m,rootElementSelector:g,previewContainer:_}=e;this.disabled=m??!1,this.dragStartDelay=r||0,this.lockAxis=i||null,o&&(this.constrainPosition=o),s&&(this.previewClass=s),l&&(this.boundaryElement=l),g&&(this.rootElementSelector=g),_&&(this.previewContainer=_)}_setupHandlesListener(){this._handles.pipe(li(e=>{let i=e.map(r=>r.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),Xe(e=>ai(...e.map(i=>i._stateChanges.pipe(ve(i))))),mt(this._destroyed)).subscribe(e=>{let i=this._dragRef,r=e.element.nativeElement;e.disabled?i.disableHandle(r):i.enableHandle(r)})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ce({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,r){i&2&&Je("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",je],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",gn]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[ht([{provide:Ui,useExisting:n}]),Ke]})}return n})(),Eo=new se("CdkDropListGroup");var Oo=(()=>{class n{element=y(me);_changeDetectorRef=y(ft);_scrollDispatcher=y(fr);_dir=y(ct,{optional:!0});_group=y(Eo,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new V;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=y(Lt).getId("cdk-drop-list-");lockAxis=null;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;hasAnchor;dropped=new j;entered=new j;exited=new j;sorted=new j;_unsortedItems=new Set;constructor(){let e=y(Pr),i=y(Ao,{optional:!0});this._dropListRef=e.createDropList(this.element),this._dropListRef.data=this,i&&this._assignDefaults(i),this._dropListRef.enterPredicate=(r,o)=>this.enterPredicate(r.data,o.data),this._dropListRef.sortPredicate=(r,o,s)=>this.sortPredicate(r,o.data,s.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(e){this._unsortedItems.add(e),e._dragRef._withDropContainer(this._dropListRef),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef))}removeItem(e){if(this._unsortedItems.delete(e),this._latestSortedRefs){let i=this._latestSortedRefs.indexOf(e._dragRef);i>-1&&(this._latestSortedRefs.splice(i,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((e,i)=>e._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=n._dropLists.indexOf(this);e>-1&&n._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(ve(this._dir.value),mt(this._destroyed)).subscribe(i=>e.withDirection(i)),e.beforeStarted.subscribe(()=>{let i=Gi(this.connectedTo).map(r=>{if(typeof r=="string"){let o=n._dropLists.find(s=>s.id===r);return o}return r});if(this._group&&this._group._items.forEach(r=>{i.indexOf(r)===-1&&i.push(r)}),!this._scrollableParentsResolved){let r=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(r),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let r=this.element.nativeElement.querySelector(this.elementContainerSelector);e.withElementContainer(r)}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=_r(this.autoScrollStep,2),e.hasAnchor=this.hasAnchor,e.connectedTo(i.filter(r=>r&&r!==this).map(r=>r._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef)),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),ai(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:i,draggingDisabled:r,sortingDisabled:o,listAutoScrollDisabled:s,listOrientation:l}=e;this.disabled=r??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=s??!1,this.orientation=l||"vertical",this.lockAxis=i||null}_syncItemsWithRef(e){this._latestSortedRefs=e,this._dropListRef.withItems(e)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ce({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,r){i&2&&(ye("id",r.id),Je("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",je],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",je],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",je],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"],hasAnchor:[2,"cdkDropListHasAnchor","hasAnchor",je]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[ht([{provide:Eo,useValue:void 0},{provide:Bo,useExisting:n}])]})}return n})();var vs=new se("CdkDragPlaceholder"),sp=(()=>{class n{templateRef=y(gt);_drag=y(Ui,{optional:!0});data;constructor(){this._drag?._setPlaceholderTemplate(this)}ngOnDestroy(){this._drag?._resetPlaceholderTemplate(this)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ce({type:n,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[ht([{provide:vs,useExisting:n}])]})}return n})();var Lo=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ut({type:n});static \u0275inj=Ht({providers:[Pr],imports:[oo]})}return n})();var bs=["exerciseSearchFied"],ws=["scrollContainer"],Ss=n=>({category:n}),Cs=(n,t)=>({count:n,total:t}),ks=(n,t,e)=>({"border border-4 border-primary":n,"bg-gray-200 dark:bg-gray-600":t,"bg-gray-100 dark:bg-gray-500":e}),Es=n=>({count:n}),Is=n=>({date:n}),Ts=(n,t)=>t.name;function Ms(n,t){if(n&1&&(d(0,"option",23),h(1),x(2,"titlecase"),c()),n&2){let e=t.$implicit;p("value",e.id),a(),C("",v(2,2,e.name)," ")}}function Fs(n,t){if(n&1&&(d(0,"option",23),h(1),x(2,"titlecase"),c()),n&2){let e=t.$implicit;p("value",e.id),a(),M(v(2,2,e.name))}}function Ds(n,t){if(n&1){let e=D();d(0,"div")(1,"label",46),h(2),x(3,"translate"),c(),d(4,"input",47,1),x(6,"translate"),Q("ngModelChange",function(r){w(e);let o=u(2);return Z(o.searchTerm,r)||(o.searchTerm=r),S(r)}),I("keydown.enter",function(){w(e);let r=u(2);return S(r.onSearchEnter())}),c()()}if(n&2){let e=u(2);a(2),M(v(3,4,"exerciseSelectionModal.searchLabel")),a(2),p("placeholder",pn(v(6,6,"exerciseSelectionModal.searchExerciseLabel"))),K("ngModel",e.searchTerm)}}function Rs(n,t){if(n&1){let e=D();d(0,"button",48),I("click",function(){w(e);let r=u(2);return S(r.onFindSimilar())}),h(1),x(2,"translate"),c()}n&2&&(a(),C(" ",v(2,1,"exerciseSelectionModal.showSimilar")," "))}function As(n,t){if(n&1){let e=D();d(0,"button",49),I("click",function(){w(e);let r=u(2);return S(r.onBackToSearch())}),E(1,"app-icon",50),h(2),x(3,"translate"),c()}n&2&&(a(2),C(" ",v(3,1,"exerciseSelectionModal.backToSearch")," "))}function Bs(n,t){if(n&1&&(d(0,"span",51),h(1),x(2,"async"),x(3,"translate"),c()),n&2){let e=u(2);a(),C(" ",Ce(3,3,"exerciseSelectionModal.lastCategoryInfo",de(6,Ss,e.getCategoryLabel(v(2,1,e.categories$),e.getLastCategory())))," ")}}function Ps(n,t){if(n&1&&(d(0,"div",52),h(1),x(2,"translate"),c()),n&2){let e=u(2);a(),C(" ",Ce(2,1,"exerciseList.showingCount",z(4,Cs,e.filteredExerciseCount,e.totalExerciseCount))," ")}}function Os(n,t){if(n&1&&(d(0,"div",55),h(1),c()),n&2){let e=u().$implicit;a(),C(" ",e.label," ")}}function Ls(n,t){n&1&&E(0,"span",59)}function Vs(n,t){n&1&&E(0,"span",59)}function Ns(n,t){if(n&1&&(d(0,"span",59),h(1),x(2,"titlecase"),c()),n&2){let e=u(2).$implicit;a(),C(" ",v(2,1,e.primaryMuscleGroup==null?null:e.primaryMuscleGroup.name)," ")}}function Ws(n,t){n&1&&(H(0),h(1),x(2,"translate"),q()),n&2&&(a(),M(v(2,1,"exerciseSelectionModal.custom")))}function Gs(n,t){n&1&&(H(0),h(1," | "),q())}function Hs(n,t){if(n&1&&(H(0),h(1),x(2,"translate"),q()),n&2){let e=u(3).$implicit;a(),M(Ce(2,1,"exerciseSelectionModal.count",de(4,Es,e.usageCount)))}}function qs(n,t){n&1&&(H(0),h(1," | "),q())}function js(n,t){if(n&1&&(H(0),h(1),x(2,"date"),x(3,"translate"),q()),n&2){let e=u(3).$implicit;a(),M(Ce(3,5,"exerciseSelectionModal.lastUsed",de(8,Is,mn(2,1,e.lastUsedAt,"dd-MM-yy","UTC"))))}}function Us(n,t){if(n&1&&(d(0,"span",62),h(1," [ "),k(2,Ws,3,3,"ng-container",25)(3,Gs,2,0,"ng-container",25)(4,Hs,3,6,"ng-container",25)(5,qs,2,0,"ng-container",25)(6,js,4,10,"ng-container",25),h(7," ] "),c()),n&2){let e=u(2).$implicit;a(2),p("ngIf",e.isCustom),a(),p("ngIf",e.isCustom&&(e.usageCount!=null||e.lastUsedAt)),a(),p("ngIf",e.usageCount!=null),a(),p("ngIf",e.usageCount!=null&&e.lastUsedAt),a(),p("ngIf",e.lastUsedAt)}}function $s(n,t){if(n&1&&(d(0,"span",65),h(1),c()),n&2){let e=t.ngIf;a(),C(" ",e," ")}}function zs(n,t){if(n&1){let e=D();H(0),k(1,$s,2,1,"span",63),d(2,"input",64),I("change",function(){w(e);let r=u(2).$implicit,o=u(2);return S(o.toggleSelection(r))})("click",function(r){return w(e),S(r.stopPropagation())}),c(),q()}if(n&2){let e=u(2).$implicit,i=u(2);a(),p("ngIf",i.getSelectionIndex(e)),a(),p("checked",i.isSelected(e))}}function Ys(n,t){if(n&1&&E(0,"app-icon",66),n&2){let e=u(4);dn("h-6 w-6 mr-1 flex-shrink-0 "+e.itemIconClass()),p("name",e.itemIconName())}}function Xs(n,t){if(n&1){let e=D();d(0,"li",56),I("click",function(){w(e);let r=u().$implicit,o=u(2);return S(o.onExerciseClicked(r))}),d(1,"div",57)(2,"span",58),h(3),c(),Ze(4,Ls,1,0,"span",59)(5,Vs,1,0,"span",59)(6,Ns,3,3,"span",59),k(7,Us,8,5,"span",60),c(),k(8,zs,3,2,"ng-container",61)(9,Ys,1,3,"ng-template",null,2,Te),c()}if(n&2){let e=ee(10),i=u(),r=i.$implicit,o=i.odd,s=u(2);p("ngClass",ui(6,ks,s.isSelected(r),o&&!s.isSelected(r),!o&&!s.isSelected(r))),a(3),M(r.name),a(),Qe(r.categories&&(r.primaryMuscleGroup!=null&&r.primaryMuscleGroup.name)?4:r.categories?5:r.primaryMuscleGroup!=null&&r.primaryMuscleGroup.name?6:-1),a(3),p("ngIf",r.isCustom||r.lastUsedAt||r.usageCount!=null),a(),p("ngIf",s.isMultiSelect())("ngIfElse",e)}}function Ks(n,t){if(n&1&&(H(0),k(1,Os,2,1,"div",53)(2,Xs,11,10,"li",54),q()),n&2){let e=t.$implicit,i=u(2);a(),p("ngIf",!i.isExercise(e)),a(),p("ngIf",i.isExercise(e))}}function Zs(n,t){if(n&1&&(d(0,"li",67),h(1),x(2,"translate"),c()),n&2){let e=u(2);a(),C(" ",v(2,1,e.isShowingSimilarView()?"exerciseSelectionModal.noSimilar":"exerciseSelectionModal.noMatches")," ")}}function Qs(n,t){if(n&1){let e=D();d(0,"button",68),I("click",function(){w(e);let r=u(2);return S(r.confirmSelection())}),E(1,"app-icon",69),h(2),x(3,"translate"),c()}if(n&2){let e=u(2);p("disabled",e.selectionCount()===0),a(2),ne(" ",v(3,3,"exerciseSelectionModal.addSelected")," ",e.selectionCount()>0?"("+e.selectionCount()+")":""," ")}}function Js(n,t){if(n&1){let e=D();d(0,"button",70),I("click",function(){w(e);let r=u(2);return S(r.onCreateCustom())}),E(1,"app-icon",71),h(2),x(3,"translate"),c()}n&2&&(a(2),C(" ",v(3,1,"exerciseSelectionModal.createCustom")," "))}function ea(n,t){if(n&1){let e=D();d(0,"div",4)(1,"div",5),I("clickOutside",function(){w(e);let r=u();return S(r.onClose())}),d(2,"div",6)(3,"div",7)(4,"h3",8),h(5),c(),d(6,"button",9),I("click",function(){w(e);let r=u();return S(r.onClose())}),E(7,"app-icon",10),c()()(),d(8,"div",11)(9,"div",7)(10,"h4",12),h(11),x(12,"translate"),c(),d(13,"button",13),I("click",function(){w(e);let r=u();return S(r.toggleFilterAccordion())}),E(14,"app-icon",14),c()()(),d(15,"div",15)(16,"div",16)(17,"div",17)(18,"div")(19,"label",18),h(20),x(21,"translate"),c(),d(22,"select",19),Q("ngModelChange",function(r){w(e);let o=u();return Z(o.selectedCategoryValue,r)||(o.selectedCategoryValue=r),S(r)}),I("ngModelChange",function(r){w(e);let o=u();return S(o.onCategoryChangeModel(r))}),d(23,"option",20),h(24),x(25,"translate"),c(),k(26,Ms,3,4,"option",21),x(27,"async"),c()(),d(28,"div")(29,"label",18),h(30),x(31,"translate"),c(),d(32,"select",22),I("change",function(r){w(e);let o=u();return S(o.onMuscleGroupChange(r))}),d(33,"option",20),h(34),x(35,"translate"),c(),kt(36,Fs,3,4,"option",23,Ts),x(38,"async"),c()()(),d(39,"div",24),k(40,Ds,7,8,"div",25)(41,Rs,3,3,"button",26)(42,As,4,3,"button",27),c(),d(43,"div")(44,"label",18),h(45),x(46,"translate"),c(),d(47,"select",22),I("change",function(r){w(e);let o=u();return S(o.onSortModeChange(r))}),d(48,"option",28),h(49),x(50,"translate"),c(),d(51,"option",29),h(52),x(53,"translate"),c(),d(54,"option",30),h(55),x(56,"translate"),c()()(),d(57,"div",31)(58,"button",32),I("click",function(){w(e);let r=u();return S(r.clearFilters())}),E(59,"app-icon",33),h(60),x(61,"translate"),c()()()(),k(62,Bs,4,8,"span",34)(63,Ps,3,7,"div",35),d(64,"div",36,0)(66,"ul",37),k(67,Ks,3,2,"ng-container",38)(68,Zs,3,3,"li",39),c()(),d(69,"div",40)(70,"div",41),k(71,Qs,4,5,"button",42)(72,Js,4,3,"button",43),d(73,"button",44),I("click",function(){w(e);let r=u();return S(r.onClose())}),E(74,"app-icon",45),h(75),x(76,"translate"),c()()()()()}if(n&2){let e,i=u();p("ngClass",i.customPB()),a(5),M(i.title()),a(6),M(v(12,31,"exerciseSelectionModal.filtersTitle")),a(3),Je("rotate-180",i.isFilterAccordionOpen()),a(),zt("max-height",i.isFilterAccordionOpen()?"600px":"0px"),a(5),M(v(21,33,"exerciseSelectionModal.categoryLabel")),a(2),K("ngModel",i.selectedCategoryValue),a(2),M(v(25,35,"exerciseSelectionModal.allCategories")),a(2),p("ngForOf",v(27,37,i.categories$)),a(4),M(v(31,39,"exerciseSelectionModal.muscleGroupLabel")),a(2),p("value",((e=i.selectedMuscleGroup())==null?null:e.id)||""),a(2),M(v(35,41,"exerciseSelectionModal.allMuscles")),a(2),Et(v(38,43,i.primaryMuscleGroups$)),a(4),p("ngIf",!i.isShowingSimilarView()),a(),p("ngIf",i.showSimilarButton()&&!i.isShowingSimilarView()),a(),p("ngIf",i.isShowingSimilarView()),a(3),M(v(46,45,"exerciseSelectionModal.sortByLabel")),a(2),p("value",i.sortMode()),a(2),M(v(50,47,"exerciseSelectionModal.sort.alpha")),a(3),M(v(53,49,"exerciseSelectionModal.sort.lastUsed")),a(3),M(v(56,51,"exerciseSelectionModal.sort.frequency")),a(5),C(" ",v(61,53,"exerciseSelectionModal.clearFilters")),a(2),p("ngIf",i.getLastCategory()),a(),p("ngIf",i.totalExerciseCount>0),a(4),p("ngForOf",i.processedExercises())("ngForTrackBy",i.trackByExerciseOrHeader),a(),p("ngIf",i.processedExercises().length===0),a(3),p("ngIf",i.isMultiSelect()&&i.selectionCount()>0),a(),p("ngIf",i.showCreateCustomLink()||!i.processedExercises()||!i.processedExercises().length),a(3),C(" ",v(76,55,"exerciseSelectionModal.cancel")," ")}}var $i=class n{constructor(t){this.document=t;qe(()=>{let e=this.exercises();e&&e.length>0?this.exerciseService.getHydratedExerciseList(e).pipe(Se(1)).subscribe(i=>{this.hydratedExercises.set(i)}):this.translatedExercises.set([]),this.muscleMapService.getTranslatedMuscles().pipe(Se(1)).subscribe(i=>{this.translatedMuscles.set(i)})}),qe(()=>{let e=this.hydratedExercises(),i=this.usageCounts(),r=e.map(o=>W(A({},o),{usageCount:i.get(o.id)||0}));this.enrichedExercises.set(r)}),qe(()=>{this.sortMode(),this.scrollContainer?.nativeElement&&(this.scrollContainer.nativeElement.scrollTop=0),this.sortMode()==="lastUsed"&&this.isFilterAccordionOpen.set(!1)}),qe(()=>{this.isOpen()?this.document.body.classList.add("overflow-hidden"):this.document.body.classList.remove("overflow-hidden")}),qe(e=>{e(()=>{this.document.body.classList.remove("overflow-hidden")})})}exerciseService=y(lt);trackingService=y(Fi);toastService=y(At);translate=y(Ve);muscleMapService=y(Di);translatedMuscles=R([]);isMultiSelect=_e(!1);isFocusInputOnStart=_e(!1);customPB=_e("");static lastSelectedCategory=null;exerciseSelected=new j;exercisesSelected=new j;selectedExerciseIds=R([]);selectionCount=Me(()=>this.selectedExerciseIds().length);ngOnChanges(t){t.isOpen&&t.isOpen.currentValue&&(n.lastSelectedCategory?(this.selectedCategory.set(n.lastSelectedCategory),this.selectedCategoryValue=n.lastSelectedCategory):this.selectedCategoryValue="")}enrichedExercises=R([]);usageCounts=Yt(this.trackingService.getExerciseUsageCounts(),{initialValue:new Map});dataSub;myExerciseInput;scrollContainer;translatedExercises=R([]);hydratedExercises=R([]);isOpen=ur(!1);title=_e("Select Exercise");exercises=_e.required();searchPlaceholder=_e("Search exercises...");itemIconName=_e("done");itemIconClass=_e("text-primary dark:text-primary-light");showSimilarButton=_e(!1);showCreateCustomLink=_e(!1);isShowingSimilarView=_e(!1);close=new j;findSimilarClicked=new j;createCustomClicked=new j;backToSearchClicked=new j;searchTerm=ur("");isFilterAccordionOpen=R(!1);selectedCategoryValue="";selectedCategory=R("");selectedMuscleGroup=R(null);sortMode=R("alpha");categories$=this.exerciseService.getUniqueCategories();primaryMuscleGroups$=this.exerciseService.getUniquePrimaryMuscleGroups();processedExercises=Me(()=>{let t=this.searchTerm()?.toLowerCase()??"",e=this.enrichedExercises(),i=this.sortMode(),r=this.selectedCategory(),o=this.selectedMuscleGroup();if(r&&r!==""&&(e=e.filter(s=>s.categories?.some(l=>l==r))),o&&(e=e.filter(s=>s.primaryMuscleGroup&&s.primaryMuscleGroup.id===o.id||Array.isArray(s.muscleGroups)&&s.muscleGroups.some(l=>l.id===o.id))),t){let s=this.exerciseService.normalizeExerciseNameForSearch(t);e=e.filter(l=>{let m=this.getMuscleNameById(l.primaryMuscleGroup?.id||""),g=(l.muscleGroups||[]).map(f=>this.getMuscleNameById(f.id)).join(" "),_=[l._searchId,l._searchName,l.name].filter(Boolean).join(" ");return s.split(" ").every(f=>l.name.toLowerCase().includes(f)||_.toLowerCase().includes(f)||l.categories?.some(b=>b.toString().toLowerCase().includes(f))||l.description?.toLowerCase().includes(f)||m?.toLowerCase().includes(f)||g.toLowerCase().includes(f))})}switch(i){case"lastUsed":return e.sort((s,l)=>(l.lastUsedAt?new Date(l.lastUsedAt).getTime():0)-(s.lastUsedAt?new Date(s.lastUsedAt).getTime():0)),e;case"frequency":return e.sort((s,l)=>(l.usageCount||0)-(s.usageCount||0)),this.groupExercisesByFrequency(e);case"alpha":default:return e.sort((s,l)=>s.name.localeCompare(l.name)),this.groupExercisesAlphabetically(e)}});groupExercisesAlphabetically(t){if(t.length===0)return[];let e=[],i="";for(let r of t){let o=r.name[0].toUpperCase();o!==i&&(i=o,e.push({isHeader:!0,label:o})),e.push(r)}return e}groupExercisesByFrequency(t){if(t.length===0)return[];let e=[],i="",r=o=>o>=30?this.translate.instant("exerciseSelectionModal.frequencyGroups.gt30"):o>=10?this.translate.instant("exerciseSelectionModal.frequencyGroups.lt30"):o>=5?this.translate.instant("exerciseSelectionModal.frequencyGroups.lt10"):this.translate.instant("exerciseSelectionModal.frequencyGroups.lt5");for(let o of t){let s=o.usageCount||0,l=r(s);l!==i&&(i=l,e.push({isHeader:!0,label:l})),e.push(o)}return e}isExercise(t){return!t.isHeader}onExerciseClicked(t){if(this.isMultiSelect())this.toggleSelection(t);else{let e=this.exercises().find(i=>i.id===t.id);e&&(n.lastSelectedCategory=e?.categories[0]??null,this.exerciseSelected.emit(e)),this.onClose()}}toggleSelection(t){let e=this.selectedExerciseIds(),i;if(e.includes(t.id)?i=e.filter(r=>r!==t.id):i=[...e,t.id],this.selectedExerciseIds.set(i),i.length===1){let r=this.exercises().find(o=>o.id===i[0]);if(r){let o=typeof r.categories=="object"&&r.categories!==null?r.categories:r.categories??null;n.lastSelectedCategory=(o&&o[0])??null}}}isSelected(t){return this.selectedExerciseIds().includes(t.id)}confirmSelection(){let t=this.selectedExerciseIds();if(t.length===0){this.toastService.info(this.translate.instant("exerciseSelectionModal.toasts.noSelection"));return}let e=t.map(i=>this.exercises().find(r=>r.id===i)).filter(i=>!!i);this.exercisesSelected.emit(e),this.onClose()}onClose(){this.isOpen.set(!1),this.selectedExerciseIds.set([]),this.close.emit()}onFindSimilar(){this.findSimilarClicked.emit(),this.isFilterAccordionOpen.set(!1)}onCreateCustom(){this.createCustomClicked.emit()}onBackToSearch(){this.backToSearchClicked.emit()}onSearchEnter(){let t=this.processedExercises().filter(e=>this.isExercise(e));t.length===1&&this.onExerciseClicked(t[0])}ngAfterViewInit(){this.isOpen()&&this.isFocusInputOnStart()&&this.checkForInputFocus()}checkForInputFocus(){setTimeout(()=>{this.myExerciseInput?.nativeElement.focus(),this.myExerciseInput?.nativeElement.select()},100)}toggleFilterAccordion(){this.isFilterAccordionOpen.update(t=>!t)}onCategoryChangeModel(t){this.selectedCategory.set(t||""),this.selectedCategoryValue=t||"",this.scrollContainer?.nativeElement&&(this.scrollContainer.nativeElement.scrollTop=0)}onMuscleGroupChange(t){let e=t.target;if(!e.value||!this.primaryMuscleGroups$){this.selectedMuscleGroup.set(null);return}this.primaryMuscleGroups$?.subscribe(i=>{let r=i.find(o=>o.id===e.value)||null;this.selectedMuscleGroup.set(r)})}muscleToMuscleValue(t){return t.id}onSortModeChange(t){let e=t.target.value;this.sortMode.set(e)}clearFilters(t=!0){this.selectedCategory.set(""),this.selectedMuscleGroup.set(null),this.searchTerm.set(""),this.sortMode.set("alpha"),n.lastSelectedCategory=null,t&&this.toastService.info(this.translate.instant("exerciseSelectionModal.toasts.filtersCleared")),setTimeout(()=>{this.scrollContainer?.nativeElement?.scrollTo({top:0,behavior:"smooth"})},0)}getMuscleNameById(t){return this.translatedMuscles().find(e=>e.id===t)?.name||t}getMuscleById(t){return this.translatedMuscles().find(e=>e.id===t)||null}getSelectionIndex(t){if(!this.isMultiSelect())return null;let i=this.selectedExerciseIds().findIndex(r=>r===t.id);return i!==-1?i+1:null}trackByExerciseOrHeader(t,e){return e.isHeader?"header-"+e.label:"exercise-"+e.id}isMobileScreen(){return window.innerWidth<640}getCategoryLabel(t,e){if(!t||!e)return e?String(e):null;let i=t.find(r=>r.id.toString()===e.toString());return i?i.name&&typeof i.name=="string"?i.name:(typeof i.name=="string"?i.name:null)||(e?String(e):null):e?String(e):null}getLastCategory(){return n.lastSelectedCategory}get filteredExerciseCount(){return this.processedExercises().filter(t=>this.isExercise(t)).length}get totalExerciseCount(){return this.hydratedExercises()?.length||0}static \u0275fac=function(e){return new(e||n)(ae(J))};static \u0275cmp=le({type:n,selectors:[["app-exercise-selection-modal"]],viewQuery:function(e,i){if(e&1&&(Pe(bs,5),Pe(ws,5)),e&2){let r;Oe(r=Le())&&(i.myExerciseInput=r.first),Oe(r=Le())&&(i.scrollContainer=r.first)}},inputs:{isMultiSelect:[1,"isMultiSelect"],isFocusInputOnStart:[1,"isFocusInputOnStart"],customPB:[1,"customPB"],isOpen:[1,"isOpen"],title:[1,"title"],exercises:[1,"exercises"],searchPlaceholder:[1,"searchPlaceholder"],itemIconName:[1,"itemIconName"],itemIconClass:[1,"itemIconClass"],showSimilarButton:[1,"showSimilarButton"],showCreateCustomLink:[1,"showCreateCustomLink"],isShowingSimilarView:[1,"isShowingSimilarView"],searchTerm:[1,"searchTerm"]},outputs:{exerciseSelected:"exerciseSelected",exercisesSelected:"exercisesSelected",isOpen:"isOpenChange",close:"close",findSimilarClicked:"findSimilarClicked",createCustomClicked:"createCustomClicked",backToSearchClicked:"backToSearchClicked",searchTerm:"searchTermChange"},features:[Ke],decls:1,vars:1,consts:[["scrollContainer",""],["exerciseSearchFied",""],["singleSelectIcon",""],["class","fixed inset-0 z-[70] flex flex-col bg-white dark:bg-gray-800 transition-opacity",3,"ngClass",4,"ngIf"],[1,"fixed","inset-0","z-[70]","flex","flex-col","bg-white","dark:bg-gray-800","transition-opacity",3,"ngClass"],[1,"relative","flex","flex-col","w-full","h-full","overflow-hidden","text-left","transition-all",3,"clickOutside"],[1,"px-5","py-2","flex-shrink-0","border-b","border-gray-200","dark:border-gray-600"],[1,"flex","justify-between","items-center"],[1,"text-xl","font-semibold","text-gray-900","dark:text-gray-100"],["type","button",1,"p-1","rounded-full","text-gray-400","hover:text-gray-600","dark:hover:text-gray-300","focus:outline-none",3,"click"],["name","cancel",1,"w-6","h-6"],[1,"px-4","pt-2","flex-shrink-0"],[1,"font-semibold","text-gray-700","dark:text-gray-200"],[1,"rounded-md","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-700","focus:outline-none","transition-all","duration-300","ease-in-out",3,"click"],["name","filter",1,"w-10","h-10","transition-transform","duration-300"],[1,"overflow-hidden","transition-all","duration-300","ease-in-out","px-4","flex-shrink-0"],[1,"py-4","space-y-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","dark:bg-gray-700","dark:text-gray-200",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","dark:bg-gray-700","dark:text-gray-200",3,"change","value"],[3,"value"],[1,"text-center"],[4,"ngIf"],["class","justify-center inline-flex items-center mt-2 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",3,"click",4,"ngIf"],["class","justify-center inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md shadow-sm text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",3,"click",4,"ngIf"],["value","alpha"],["value","lastUsed"],["value","frequency"],[1,"text-right"],[1,"inline-flex","text-sm","text-blue-600","dark:text-blue-400","hover:bg-blue-500","dark:hover:text-white","rounded-xl","p-2",3,"click"],["name","trash",1,"h-6","w-6","mr-1"],["class","flex px-4 font-semibold text-gray-700 dark:text-gray-200",4,"ngIf"],["class","flex w-full justify-end text-sm text-gray-600 dark:text-gray-400 mb-2 px-4",4,"ngIf"],[1,"flex-grow","min-h-0","px-4","sm:px-6","py-2","overflow-y-auto","custom-scrollbar"],[1,"space-y-1"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","text-gray-500 dark:text-gray-400 text-center p-4",4,"ngIf"],[1,"bg-gray-50","dark:bg-gray-800","px-4","py-2","flex","justify-center","sticky","bottom-0"],[1,"flex","flex-col","sm:flex-row","gap-2","w-full","max-w-xs"],["type","button","class",`w-full rounded-md px-4 py-2 text-xl font-semibold text-white shadow-sm
                     bg-primary hover:bg-primary-dark focus-visible:outline focus-visible:outline-2
                     focus-visible:outline-offset-2 focus-visible:outline-primary-focus
                     disabled:opacity-50 disabled:cursor-not-allowed mb-1 sm:mb-0`,3,"disabled","click",4,"ngIf"],["type","button","class",`w-full rounded-md px-4 py-2 text-lg font-semibold text-white shadow-sm
                     bg-green-500 hover:bg-green-700 focus-visible:outline focus-visible:outline-2
                     focus-visible:outline-offset-2 focus-visible:outline-primary-focus
                     disabled:opacity-50 disabled:cursor-not-allowed flex items-center`,3,"click",4,"ngIf"],["type","button",1,"w-full","rounded-md","bg-white","dark:bg-gray-600","px-3","py-2","text-xl","font-semibold","text-gray-900","dark:text-gray-200","shadow-sm","ring-1","ring-inset","ring-gray-300","dark:ring-gray-500","hover:bg-gray-50","dark:hover:bg-gray-500","flex","items-center","justify-center",3,"click"],["name","cancel",1,"w-6","h-6","mr-1"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1","text-left"],["type","text",1,"w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","dark:bg-gray-700","dark:text-gray-200",3,"ngModelChange","keydown.enter","placeholder","ngModel"],[1,"justify-center","inline-flex","items-center","mt-2","px-4","py-2","border","border-transparent","text-sm","font-medium","rounded-md","shadow-sm","text-white","bg-blue-600","hover:bg-blue-700",3,"click"],[1,"justify-center","inline-flex","items-center","px-4","py-2","border","border-gray-300","dark:border-gray-600","text-sm","font-medium","rounded-md","shadow-sm","text-gray-700","dark:text-gray-200","bg-white","dark:bg-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600",3,"click"],["name","back",1,"w-5","h-5","mr-2"],[1,"flex","px-4","font-semibold","text-gray-700","dark:text-gray-200"],[1,"flex","w-full","justify-end","text-sm","text-gray-600","dark:text-gray-400","mb-2","px-4"],["class","py-2 px-3 sticky top-0 bg-gray-200 dark:bg-gray-800 text-gray-600 dark:text-gray-200 font-bold text-lg z-10",4,"ngIf"],["appBumpClick","","class","p-3 mx-1 rounded-md cursor-pointer transition-colors duration-150 ease-in-out flex justify-between items-center",3,"ngClass","click",4,"ngIf"],[1,"py-2","px-3","sticky","top-0","bg-gray-200","dark:bg-gray-800","text-gray-600","dark:text-gray-200","font-bold","text-lg","z-10"],["appBumpClick","",1,"p-3","mx-1","rounded-md","cursor-pointer","transition-colors","duration-150","ease-in-out","flex","justify-between","items-center",3,"click","ngClass"],[1,"flex-grow"],[1,"font-medium","text-gray-800","dark:text-gray-200"],[1,"block","text-xs","text-gray-500","dark:text-gray-400"],["class","block text-xs text-gray-500 dark:text-gray-400 italic",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"block","text-xs","text-gray-500","dark:text-gray-400","italic"],["class","p-2 mx-1 inline-flex items-center justify-center rounded-full bg-primary text-white text-xs font-bold w-6 h-6",4,"ngIf"],["type","checkbox",1,"form-checkbox","h-6","w-6","rounded-full","flex-shrink-0","text-primary","dark:text-primary-light","bg-gray-200","dark:bg-gray-800","border-gray-400","dark:border-gray-500","focus:ring-primary-focus","dark:focus:ring-primary-dark","cursor-pointer",3,"change","click","checked"],[1,"p-2","mx-1","inline-flex","items-center","justify-center","rounded-full","bg-primary","text-white","text-xs","font-bold","w-6","h-6"],[3,"name"],[1,"text-gray-500","dark:text-gray-400","text-center","p-4"],["type","button",1,"w-full","rounded-md","px-4","py-2","text-xl","font-semibold","text-white","shadow-sm","bg-primary","hover:bg-primary-dark","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-primary-focus","disabled:opacity-50","disabled:cursor-not-allowed","mb-1","sm:mb-0",3,"click","disabled"],["name","done",1,"w-6","h-6","mr-2"],["type","button",1,"w-full","rounded-md","px-4","py-2","text-lg","font-semibold","text-white","shadow-sm","bg-green-500","hover:bg-green-700","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-primary-focus","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center",3,"click"],["name","plus-circle",1,"w-6","h-6","mr-2"]],template:function(e,i){e&1&&k(0,ea,77,57,"div",3),e&2&&p("ngIf",i.isOpen())},dependencies:[it,et,It,tt,Dt,st,at,rt,ot,nt,Mt,Rt,Pt,Ai,xr,pi,Tt,wn,Bt],encapsulation:2})};var Yi=class n{constructor(t){this.fb=t}unitsService=y(Ti);translate=y(Ve);workoutUtilsService=y(Oi);appSettingsService=y(Ii);injector=y(pe);createSetFormGroup(t,e=!1,i,r){let o=t?.id||(typeof crypto<"u"?crypto.randomUUID():""),s=t?.fieldOrder||[],l=t?.notes||"",m=t?.type||"standard",g="targetTempo"in(t||{})&&t.targetTempo||"",_,f=new Date().toISOString(),b,T,O,F,P,$;if(t){let ie=N=>"repsLogged"in N,Re=N=>"targetReps"in N;if(e){let N=t;b=N.repsLogged??N.targetReps??null,T=N.weightLogged??N.targetWeight??null,O=N.durationLogged??N.targetDuration??null,F=N.distanceLogged??N.targetDistance??null,P=N.restLogged??N.targetRest??null,_=N.plannedSetId,f=N.timestamp}else{let N=t;b=N.targetReps??null,T=N.targetWeight??null,O=N.targetDuration??null,F=N.targetDistance??null,P=N.targetRest??null,_=N.id}}let B=A({},t),L={id:[o],type:[m],notes:[l||""],fieldOrder:[s||[]]};if(e)L.repsLogged=[b??null,[ie=>{let Re=ie.parent;if(!Re)return null;let N=Re.get("weightLogged")?.value,ze=Re.get("durationLogged")?.value;return(N==null||N==="")&&(ze==null||ze==="")&&typeof i=="function"?i(1)(ie):null}]],L.weightLogged=[T??null],L.durationLogged=[O??null],L.distanceLogged=[F??null],L.plannedSetId=[_],L.timestamp=[f],L.tempo=[g],L.restLogged=[P];else{let ie=null;B.targetReps&&typeof B.targetReps=="object"?ie=B.targetReps:B.min!=null&&B.max!=null?ie={type:"range",min:B.min,max:B.max}:B.targetReps!=null&&(ie={type:"exact",value:B.targetReps}),L.targetReps=[ie],L.targetWeight=[T??null],L.targetDuration=[O??null],L.targetDistance=[F??null],L.targetRest=[P??null],L.targetTempo=[g??null]}let X=e?{}:{validators:typeof r=="function"?r():null};return this.fb.group(L,X)}createExerciseFormGroup(t,e=!1,i=!1,r,o,s,l,m){let g=t?.exerciseId?r?.find(b=>b.id===t.exerciseId):null,_=t?.sets||[];return this.fb.group({id:[t?.id],exerciseId:[t?.exerciseId],exerciseName:[g?.name||t?.exerciseName],notes:[t?.notes||""],sets:this.fb.array(_.map(b=>this.createSetFormGroup(b,i,l,m))),supersetId:[t?.supersetId||null],supersetOrder:[t?.supersetOrder??null],supersetType:[t?.supersetType??"standard"],emomTimeSeconds:[t?.emomTimeSeconds??null]})}createExerciseFormGroupFromLoggedExercise(t,e,i,r,o,s){let l=e?.find(g=>g.id===t.exerciseId);return this.fb.group({id:[t.id],exerciseId:[t.exerciseId],exerciseName:[l?.name||t.exerciseName],notes:[t.notes||""],sets:this.fb.array(t.sets.map(g=>this.createSetFormGroup(g,!0,o,s))),supersetId:[t.supersetId||null],supersetOrder:[t.supersetOrder??null],supersetType:[t.supersetType??"standard"],emomTimeSeconds:[t.emomTimeSeconds??null]})}getSetsFormArray(t){return t.get("sets")??this.fb.array([])}static \u0275fac=function(e){return new(e||n)(nn(Ft))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var Nt=class n{constructor(t){this._el=t}onInputChange(t){let e=this._el.nativeElement.value,i=e.replace(/[^0-9.]*/g,""),r=i.split(".");r.length>2&&(i=r.shift()+"."+r.join("")),e!==i&&(this._el.nativeElement.value=i,t.stopPropagation(),this._el.nativeElement.dispatchEvent(new Event("input")))}static \u0275fac=function(e){return new(e||n)(ae(me))};static \u0275dir=ce({type:n,selectors:[["input","numbersOnly",""]],hostBindings:function(e,i){e&1&&I("input",function(o){return i.onInputChange(o)})}})};var Xi=class n{constructor(t,e){this.renderer=t;this.el=e;this.mouseDownHandler=this.onMouseDown.bind(this),this.touchStartHandler=this.onTouchStart.bind(this),this.pressEndHandler=this.onPressEnd.bind(this)}longPressEnabled=!0;longPressDelay=300;longPressClass="is-long-pressing";dragHandleSelector;classTargetSelector;longPress=new j;timer;isPressing=!1;mouseDownHandler;touchStartHandler;pressEndHandler;ngOnInit(){let t=this.el.nativeElement;t.addEventListener("mousedown",this.mouseDownHandler),t.addEventListener("mouseup",this.pressEndHandler),t.addEventListener("mouseleave",this.pressEndHandler),t.addEventListener("touchstart",this.touchStartHandler,{passive:!1}),t.addEventListener("touchend",this.pressEndHandler),t.addEventListener("touchcancel",this.pressEndHandler)}onMouseDown(t){!this.longPressEnabled||t.button!==0||this.dragHandleSelector&&!t.target.closest(this.dragHandleSelector)||this.startTimer()}onTouchStart(t){this.longPressEnabled&&(this.dragHandleSelector&&!t.target.closest(this.dragHandleSelector)||this.startTimer())}startTimer(){this.isPressing=!0,this.timer=setTimeout(()=>{this.isPressing&&(this.renderer.addClass(this.el.nativeElement,this.longPressClass),this.longPress.emit())},this.longPressDelay)}onPressEnd(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.isPressing=!1,this.renderer.removeClass(this.el.nativeElement,this.longPressClass)}ngOnDestroy(){let t=this.el.nativeElement;t.removeEventListener("mousedown",this.mouseDownHandler),t.removeEventListener("mouseup",this.pressEndHandler),t.removeEventListener("mouseleave",this.pressEndHandler),t.removeEventListener("touchstart",this.touchStartHandler),t.removeEventListener("touchend",this.pressEndHandler),t.removeEventListener("touchcancel",this.pressEndHandler),this.onPressEnd()}static \u0275fac=function(e){return new(e||n)(ae(Ct),ae(me))};static \u0275dir=ce({type:n,selectors:[["","appLongPressDrag",""]],inputs:{longPressEnabled:"longPressEnabled",longPressDelay:"longPressDelay",longPressClass:"longPressClass",dragHandleSelector:"dragHandleSelector",classTargetSelector:"classTargetSelector"},outputs:{longPress:"longPress"}})};var Ki=class n{textAreaElement=y(me).nativeElement;onInput(){this.adjustHeight()}ngOnInit(){setTimeout(()=>this.adjustHeight(),0)}adjustHeight(){this.textAreaElement.style.height="auto",this.textAreaElement.style.height=`${this.textAreaElement.scrollHeight}px`}static \u0275fac=function(e){return new(e||n)};static \u0275dir=ce({type:n,selectors:[["textarea","appAutoGrow",""]],hostBindings:function(e,i){e&1&&I("input",function(){return i.onInput()})}})};var Zi=class n{constructor(t,e){this.viewContainer=t;this.templateRef=e}context={ngLet:null};viewRef=null;set ngLet(t){this.context.ngLet=t,this.viewRef||(this.viewRef=this.viewContainer.createEmbeddedView(this.templateRef,this.context))}static \u0275fac=function(e){return new(e||n)(ae(jt),ae(gt))};static \u0275dir=ce({type:n,selectors:[["","ngLet",""]],inputs:{ngLet:"ngLet"}})};var ta=(n,t)=>({"bg-blue-500 text-white dark:bg-blue-700":n,"bg-gray-300 text-gray-600 dark:bg-gray-600 dark:text-gray-300 line-through":t});function ia(n,t){if(n&1&&(d(0,"option",18),h(1),c()),n&2){let e=t.$implicit;p("ngValue",e.id),a(),M(e.name)}}function ra(n,t){if(n&1){let e=D();d(0,"div")(1,"label",40)(2,"input",41),I("change",function(){let r=w(e).$implicit,o=u(2);return S(o.toggleMuscle("target",r))}),c(),h(3),x(4,"translate"),c()()}if(n&2){let e=t.$implicit,i=u(2);a(2),p("value",e.id)("checked",i.options.targetMuscles.includes(e.id))("disabled",i.options.avoidMuscles.includes(e.id)),a(),C(" ",v(4,4,e.name)," ")}}function na(n,t){if(n&1){let e=D();d(0,"div")(1,"label",40)(2,"input",41),I("change",function(){let r=w(e).$implicit,o=u(2);return S(o.toggleMuscle("avoid",r))}),c(),h(3),x(4,"translate"),c()()}if(n&2){let e=t.$implicit,i=u(2);a(2),p("value",e.id)("checked",i.options.avoidMuscles.includes(e.id))("disabled",i.options.targetMuscles.includes(e.id)),a(),C(" ",v(4,4,e.name)," ")}}function oa(n,t){n&1&&(d(0,"p",46),h(1),x(2,"translate"),c()),n&2&&(a(),M(v(2,1,"generateWorkoutModal.noPersonalGym")))}function sa(n,t){if(n&1){let e=D();d(0,"button",47),I("click",function(){let r=w(e).$implicit,o=u(3);return S(o.toggleExcludePersonalGymEquipment(r))}),h(1),x(2,"titlecase"),c()}if(n&2){let e=t.$implicit,i=u(3);p("ngClass",z(4,ta,!i.options.excludeEquipment.includes(e.toLowerCase()),i.options.excludeEquipment.includes(e.toLowerCase()))),a(),C(" ",v(2,2,e)," ")}}function aa(n,t){if(n&1&&(d(0,"div",42),k(1,oa,3,3,"p",43),d(2,"div",44),k(3,sa,3,7,"button",45),c()()),n&2){let e=u(2);a(),p("ngIf",e.allPersonalGymEquipment().length===0),a(2),p("ngForOf",e.allPersonalGymEquipment())}}function la(n,t){if(n&1){let e=D();d(0,"button",54),I("click",function(){let r=w(e).$implicit,o=u(4);return S(o.addExcludedEquipment(r))}),h(1),x(2,"titlecase"),c()}if(n&2){let e=t.$implicit;a(),C(" ",v(2,1,e)," ")}}function ca(n,t){if(n&1&&(d(0,"div",52),k(1,la,3,3,"button",53),c()),n&2){let e=u(3);a(),p("ngForOf",e.filteredAvailableEquipmentToExclude())}}function da(n,t){if(n&1){let e=D();d(0,"span",59)(1,"span"),h(2),x(3,"titlecase"),c(),d(4,"button",60),I("click",function(){let r=w(e).$implicit,o=u(4);return S(o.removeExcludedEquipment(r))}),E(5,"app-icon",61),c()()}if(n&2){let e=t.$implicit;a(2),M(v(3,1,e))}}function ua(n,t){if(n&1&&(d(0,"div",55)(1,"label",56),h(2," Excluded equipment "),c(),d(3,"div",57),k(4,da,6,3,"span",58),c()()),n&2){let e=u(3);a(4),p("ngForOf",e.options.excludeEquipment)}}function pa(n,t){if(n&1){let e=D();d(0,"div",33)(1,"label",48),h(2,"Exclude Equipment "),c(),d(3,"input",49),Q("ngModelChange",function(r){w(e);let o=u(2);return Z(o.excludeEquipmentSearchTerm,r)||(o.excludeEquipmentSearchTerm=r),S(r)}),c(),k(4,ca,2,1,"div",50)(5,ua,5,1,"div",51),c()}if(n&2){let e=u(2);a(3),K("ngModel",e.excludeEquipmentSearchTerm),a(),p("ngIf",e.filteredAvailableEquipmentToExclude().length>0&&e.excludeEquipmentSearchTerm().length>0),a(),p("ngIf",e.options.excludeEquipment.length>0)}}function ma(n,t){n&1&&(d(0,"p",46),h(1," No equipment excluded. "),c())}function ga(n,t){if(n&1){let e=D();d(0,"span",59)(1,"span"),h(2),x(3,"titlecase"),c(),d(4,"button",60),I("click",function(){let r=w(e).$implicit,o=u(4);return S(o.removeExcludedEquipment(r))}),E(5,"app-icon",61),c()()}if(n&2){let e=t.$implicit;a(2),M(v(3,1,e))}}function ha(n,t){if(n&1&&(d(0,"div",63),k(1,ma,2,0,"p",43)(2,ga,6,3,"span",58),c()),n&2){let e=u(3);a(),p("ngIf",e.options.excludeEquipment.length===0),a(),p("ngForOf",e.options.excludeEquipment)}}function _a(n,t){if(n&1){let e=D();d(0,"button",54),I("click",function(){let r=w(e).$implicit,o=u(4);return S(o.addExcludedEquipment(r))}),h(1),x(2,"titlecase"),c()}if(n&2){let e=t.$implicit;a(),C(" ",v(2,1,e)," ")}}function fa(n,t){if(n&1&&(d(0,"div",52),k(1,_a,3,3,"button",53),c()),n&2){let e=u(3);a(),p("ngForOf",e.filteredAvailableEquipmentToExclude())}}function xa(n,t){if(n&1){let e=D();d(0,"label",48),h(1,"Exclude personal gym equipment "),c(),k(2,ha,3,2,"div",62),d(3,"input",49),Q("ngModelChange",function(r){w(e);let o=u(2);return Z(o.excludeEquipmentSearchTerm,r)||(o.excludeEquipmentSearchTerm=r),S(r)}),c(),k(4,fa,2,1,"div",50)}if(n&2){let e=u(2);a(2),p("ngIf",e.options.excludeEquipment.length>0),a(),K("ngModel",e.excludeEquipmentSearchTerm),a(),p("ngIf",e.filteredAvailableEquipmentToExclude().length>0&&e.excludeEquipmentSearchTerm().length>0)}}function va(n,t){if(n&1){let e=D();d(0,"div",2),I("click",function(){w(e);let r=u();return S(r.close.emit())}),d(1,"div",3),I("click",function(r){return w(e),S(r.stopPropagation())}),d(2,"header",4)(3,"div",5),E(4,"app-icon",6),d(5,"h3",7),h(6),x(7,"translate"),c()(),d(8,"button",8),I("click",function(){w(e);let r=u();return S(r.close.emit())}),E(9,"app-icon",9),c()(),d(10,"div",10)(11,"div",11)(12,"div")(13,"label",12),h(14),x(15,"translate"),d(16,"strong"),h(17),x(18,"translate"),c()(),d(19,"input",13),Q("ngModelChange",function(r){w(e);let o=u();return Z(o.options.duration,r)||(o.options.duration=r),S(r)}),c()(),d(20,"div")(21,"label",12),h(22),x(23,"translate"),c(),d(24,"select",14),Q("ngModelChange",function(r){w(e);let o=u();return Z(o.options.goal,r)||(o.options.goal=r),S(r)}),d(25,"option",15),h(26),x(27,"translate"),c(),d(28,"option",16),h(29),x(30,"translate"),c(),d(31,"option",17),h(32),x(33,"translate"),c()()(),d(34,"div")(35,"label",12),h(36),x(37,"translate"),c(),d(38,"select",14),Q("ngModelChange",function(r){w(e);let o=u();return Z(o.options.exerciseCategory,r)||(o.options.exerciseCategory=r),S(r)}),d(39,"option",18),h(40),x(41,"translate"),c(),k(42,ia,2,2,"option",19),c()(),d(43,"div",20)(44,"label",12),h(45),x(46,"translate"),c(),d(47,"select",14),Q("ngModelChange",function(r){w(e);let o=u();return Z(o.options.split,r)||(o.options.split=r),S(r)}),d(48,"option",21),h(49),x(50,"translate"),c(),d(51,"option",22),h(52),x(53,"translate"),c(),d(54,"option",23),h(55),x(56,"translate"),c()()(),d(57,"div",24)(58,"label",25),h(59),x(60,"translate"),c(),d(61,"div",26),k(62,ra,5,6,"div",27),c()(),d(63,"div",24)(64,"label",12),h(65),x(66,"translate"),c(),d(67,"div",26),k(68,na,5,6,"div",27),c()(),d(69,"div",28)(70,"label",12),h(71),x(72,"translate"),c(),d(73,"label",29)(74,"input",30),Q("ngModelChange",function(r){w(e);let o=u();return Z(o.options.usePersonalGym,r)||(o.options.usePersonalGym=r),S(r)}),I("change",function(){w(e);let r=u();return S(r.onUsePersonalGymChange())}),c(),h(75),x(76,"translate"),c(),k(77,aa,4,2,"div",31)(78,pa,6,3,"div",32),c(),k(79,xa,5,3,"ng-template",33,0,Te),c()(),d(81,"footer",34)(82,"div",35)(83,"button",36),I("click",function(){w(e);let r=u();return S(r.generateQuick())}),E(84,"app-icon",37),h(85),x(86,"translate"),c(),d(87,"button",38),I("click",function(){w(e);let r=u();return S(r.generateDetailed())}),E(88,"app-icon",39),h(89),x(90,"translate"),c()()()()()}if(n&2){let e=ee(80),i=u();p("ngClass",i.customPB()),a(6),M(v(7,33,"generateWorkoutModal.title")),a(8),C("",v(15,35,"generateWorkoutModal.durationLabel"),": "),a(3),ne("",i.options.duration," ",v(18,37,"generateWorkoutModal.durationUnit")),a(2),K("ngModel",i.options.duration),a(3),M(v(23,39,"generateWorkoutModal.goalLabel")),a(2),K("ngModel",i.options.goal),a(2),M(v(27,41,"generateWorkoutModal.goals.hypertrophy")),a(3),M(v(30,43,"generateWorkoutModal.goals.strength")),a(3),C("",v(33,45,"generateWorkoutModal.goals.endurance")," "),a(4),M(v(37,47,"exerciseList.filters.categoryLabel")),a(2),K("ngModel",i.options.exerciseCategory),a(),p("ngValue",""),a(),M(v(41,49,"exerciseList.filters.allCategories")),a(2),p("ngForOf",i.categories()),a(3),M(v(46,51,"generateWorkoutModal.splitLabel")),a(2),K("ngModel",i.options.split),a(2),M(v(50,53,"generateWorkoutModal.splits.fullBody")),a(3),M(v(53,55,"generateWorkoutModal.splits.upperLower")),a(3),M(v(56,57,"generateWorkoutModal.splits.ppl")),a(4),M(v(60,59,"generateWorkoutModal.targetMusclesLabel")),a(3),p("ngForOf",i.allMuscleGroups()),a(3),M(v(66,61,"generateWorkoutModal.avoidMusclesLabel")),a(3),p("ngForOf",i.allMuscleGroups()),a(3),M(v(72,63,"generateWorkoutModal.equipmentLabel")),a(3),K("ngModel",i.options.usePersonalGym),a(),C(" ",v(76,65,"generateWorkoutModal.usePersonalGymLabel")," "),a(2),p("ngIf",i.options.usePersonalGym),a(),p("ngIf",!i.options.usePersonalGym)("ngIfElse",e),a(7),C(" ",v(86,67,"generateWorkoutModal.fab.quick")," "),a(4),C(" ",v(90,69,"generateWorkoutModal.fab.detailed")," ")}}var Qi=class n{constructor(t){this.document=t;qe(()=>{this.isOpen?this.document.body.classList.add("overflow-hidden"):this.document.body.classList.remove("overflow-hidden")}),qe(e=>{e(()=>{this.document.body.classList.remove("overflow-hidden")})})}isOpen=!1;customPB=_e("");close=new j;generate=new j;exerciseService=y(lt);personalGymService=y(Bi);muscleMapService=y(Di);exerciseCategory=y(Xn);categories=R([]);allMuscleGroups=R([]);allAvailableEquipment=R([]);allPersonalGymEquipment=R([]);equipmentSearchTerm=R("");excludeEquipmentSearchTerm=R("");filteredAvailableEquipment=Me(()=>{let t=this.equipmentSearchTerm().toLowerCase().trim();return t?this.allAvailableEquipment().filter(e=>e.toLowerCase().includes(t)&&!this.options.equipment.includes(e)):[]});options={duration:45,goal:"hypertrophy",split:"fullBody",targetMuscles:[],avoidMuscles:[],usePersonalGym:!0,equipment:[],excludeEquipment:[],exerciseCategory:""};ngOnInit(){return G(this,null,function*(){let t=this.exerciseService.getUniquePrimaryMuscleGroups(),e=this.muscleMapService.musclesMap$,i=Qr([t,e]).pipe(ue(([l,m])=>l.map(_=>m.get(typeof _=="string"?_:_.id)).filter(_=>_!==void 0).sort((_,f)=>_.name.localeCompare(f.name))));this.categories.set(this.exerciseCategory.getHydratedCategories());let r=yield xe(i);this.allMuscleGroups.set(r);let o=yield xe(this.exerciseService.getUniqueEquipment());this.allAvailableEquipment.set(o);let s=yield xe(this.personalGymService.getAllEquipment());this.allPersonalGymEquipment.set(s.flatMap(l=>l.name)),this.updateEquipmentFromPersonalGym()})}ngOnChanges(t){t.isOpen&&t.isOpen.currentValue===!0&&(this.resetOptions(),this.updateEquipmentFromPersonalGym())}toggleMuscle(t,e){let i=t==="target"?this.options.targetMuscles:this.options.avoidMuscles,r=i.indexOf(e.id);r>-1?i.splice(r,1):i.push(e.id)}generateQuick(){this.generate.emit("quick")}generateDetailed(){this.generate.emit(A({},this.options))}resetOptions(){this.options={duration:45,goal:"hypertrophy",split:"fullBody",targetMuscles:[],avoidMuscles:[],usePersonalGym:!0,equipment:[],excludeEquipment:[]},this.equipmentSearchTerm.set(""),this.excludeEquipmentSearchTerm.set("")}selectEquipment(t){this.options.equipment.includes(t)||this.options.equipment.push(t),this.equipmentSearchTerm.set("")}removeEquipment(t){let e=this.options.equipment.indexOf(t);e>-1&&this.options.equipment.splice(e,1)}toggleExcludePersonalGymEquipment(t){let e=this.options.excludeEquipment.indexOf(t.toLowerCase());e>-1?this.options.excludeEquipment.splice(e,1):this.options.excludeEquipment.push(t.toLowerCase()),this.updateEquipmentFromPersonalGym()}filteredAvailableEquipmentToExclude=Me(()=>{let t=this.excludeEquipmentSearchTerm().toLowerCase().trim();if(!t)return[];let e=this.allAvailableEquipment(),i=this.allPersonalGymEquipment();return(this.options.usePersonalGym?i:e).filter(o=>o.toLowerCase().includes(t)&&!this.options.excludeEquipment.includes(o.toLowerCase()))});addExcludedEquipment(t){let e=t.toLowerCase();this.options.excludeEquipment.includes(e)||this.options.excludeEquipment.push(e),this.excludeEquipmentSearchTerm.set("")}removeExcludedEquipment(t){let e=this.options.excludeEquipment.indexOf(t);e>-1&&this.options.excludeEquipment.splice(e,1)}onUsePersonalGymChange(){this.options.excludeEquipment=[],this.equipmentSearchTerm.set(""),this.updateEquipmentFromPersonalGym()}updateEquipmentFromPersonalGym(){if(this.options.usePersonalGym){let t=this.allPersonalGymEquipment(),e=this.options.excludeEquipment;this.options.equipment=t.filter(i=>!e.includes(i.toLowerCase()))}else this.options.equipment=[]}static \u0275fac=function(e){return new(e||n)(ae(J))};static \u0275cmp=le({type:n,selectors:[["app-generate-workout-modal"]],inputs:{isOpen:"isOpen",customPB:[1,"customPB"]},outputs:{close:"close",generate:"generate"},features:[Ke],decls:1,vars:1,consts:[["usePersonalGymSection",""],["class","fixed inset-0 z-[100] flex flex-col bg-gray-100 dark:bg-gray-800",3,"ngClass","click",4,"ngIf"],[1,"fixed","inset-0","z-[100]","flex","flex-col","bg-gray-100","dark:bg-gray-800",3,"click","ngClass"],[1,"w-full","h-full","flex","flex-col",3,"click"],[1,"px-5","py-2","border-b","border-gray-200","dark:border-gray-700","flex","justify-between","items-center","flex-shrink-0","bg-white/80","dark:bg-gray-800/80","backdrop-blur-sm"],[1,"flex","items-center","gap-3"],["name","magic-wand",1,"h-7","w-7","text-primary","dark:text-primary-light"],[1,"text-xl","font-semibold","text-gray-800","dark:text-gray-100"],[1,"p-1.5","rounded-full","text-gray-500","hover:text-gray-700",3,"click"],["name","cancel",1,"h-6","w-6"],[1,"overflow-y-auto","flex-grow","p-4","sm:p-6","pb-24"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-x-6","gap-y-6","max-w-4xl","mx-auto"],[1,"block","text-sm","font-medium","dark:text-gray-100"],["type","range","min","15","max","120","step","5",1,"w-full","h-2","rounded-md","appearance-none","cursor-pointer",3,"ngModelChange","ngModel"],[1,"block","w-full","p-2","border","rounded-md","dark:bg-gray-600","dark:border-gray-500","dark:text-gray-200",3,"ngModelChange","ngModel"],["value","hypertrophy"],["value","strength"],["value","muscular endurance"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"md:col-span-2"],["value","fullBody"],["value","upper-lower"],["value","push-pull-legs"],[1,"dark:text-gray-200"],[1,"block","text-sm","font-medium"],[1,"max-h-32","overflow-y-auto","p-2","border","rounded-md","dark:border-gray-600"],[4,"ngFor","ngForOf"],[1,"md:col-span-2","dark:text-gray-200"],[1,"flex","items-center","gap-2","my-2"],["type","checkbox",3,"ngModelChange","change","ngModel"],["class","p-2 border rounded-md bg-gray-100 dark:bg-gray-800",4,"ngIf"],["class","md:col-span-2 text-black dark:text-gray-200 relative",4,"ngIf","ngIfElse"],[1,"md:col-span-2","text-black","dark:text-gray-200","relative"],[1,"px-6","py-4","border-t","border-gray-200","dark:border-gray-700","flex-shrink-0","bg-white","dark:bg-gray-700","sticky","bottom-0"],[1,"flex","flex-col","sm:flex-row","sm:justify-end","sm:space-x-4","space-y-3","sm:space-y-0"],["type","button",1,"w-full","text-white","sm:w-auto","inline-flex","justify-center","items-center","px-4","py-2","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","dark:text-gray-200","bg-green-600","hover:bg-green-700",3,"click"],["name","random",1,"h-5","w-5","mr-2"],["type","button",1,"w-full","sm:w-auto","inline-flex","justify-center","items-center","px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-purple-500","hover:bg-purple-700",3,"click"],["name","magic-wand",1,"h-5","w-5","mr-2"],[1,"flex","items-center","gap-2"],["type","checkbox",3,"change","value","checked","disabled"],[1,"p-2","border","rounded-md","bg-gray-100","dark:bg-gray-800"],["class","text-sm italic text-gray-500 dark:text-gray-400",4,"ngIf"],[1,"flex","flex-wrap","gap-2"],["type","button","class","px-3 py-1.5 text-xs font-semibold rounded-full transition-colors",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"text-sm","italic","text-gray-500","dark:text-gray-400"],["type","button",1,"px-3","py-1.5","text-xs","font-semibold","rounded-full","transition-colors",3,"click","ngClass"],[1,"block","text-sm","font-medium","dark:text-gray-100","my-1"],["type","text","placeholder","Search equipment to exclude...",1,"block","w-full","p-2","border","rounded-md","dark:bg-gray-800","dark:border-gray-600","focus:ring-primary","focus:border-primary",3,"ngModelChange","ngModel"],["class","absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border dark:border-gray-600 rounded-md shadow-lg max-h-40 overflow-y-auto",4,"ngIf"],["class","relative border rounded-md px-3 pt-5 pb-2 mt-4 dark:border-gray-600",4,"ngIf"],[1,"absolute","z-10","w-full","mt-1","bg-white","dark:bg-gray-800","border","dark:border-gray-600","rounded-md","shadow-lg","max-h-40","overflow-y-auto"],["type","button","class","w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600",3,"click",4,"ngFor","ngForOf"],["type","button",1,"w-full","text-left","px-4","py-2","text-sm","text-gray-700","dark:text-gray-200","hover:bg-gray-100","dark:hover:bg-gray-600",3,"click"],[1,"relative","border","rounded-md","px-3","pt-5","pb-2","mt-4","dark:border-gray-600"],[1,"absolute","top-0","left-3","-mt-2","px-2","text-xs","font-medium","text-gray-500","dark:text-gray-400","bg-white","dark:bg-gray-700","rounded-md"],[1,"flex","flex-wrap","gap-2","min-h-[40px]"],["class","flex items-center gap-x-2 px-3 py-1.5 text-xs font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-700 dark:text-white",4,"ngFor","ngForOf"],[1,"flex","items-center","gap-x-2","px-3","py-1.5","text-xs","font-semibold","rounded-full","bg-red-100","text-red-800","dark:bg-red-700","dark:text-white"],["type","button",1,"text-red-800/70","hover:text-red-800","focus:outline-none","dark:text-white/70","dark:hover:text-white",3,"click"],["name","cancel",1,"h-4","w-4"],["class","p-2 border rounded-md mb-2 min-h-[40px] bg-white dark:bg-gray-800 flex flex-wrap gap-2",4,"ngIf"],[1,"p-2","border","rounded-md","mb-2","min-h-[40px]","bg-white","dark:bg-gray-800","flex","flex-wrap","gap-2"]],template:function(e,i){e&1&&k(0,va,91,71,"div",1),e&2&&p("ngIf",i.isOpen)},dependencies:[it,et,It,tt,Rt,Dt,st,at,rt,In,_i,ot,nt,Mt,Pt,Tt,Bt],encapsulation:2})};var Ji=class n{exerciseService=y(lt);personalGymService=y(Bi);workoutService=y(Ri);toastService=y(At);translate=y(Ve);generateQuickWorkout(){return G(this,null,function*(){console.log("Starting QUICK workout generation...");let t={usePersonalGym:!0,avoidMuscles:[],split:"fullBody",targetMuscles:[],duration:45,goal:"hypertrophy",equipment:[],excludeEquipment:[]},e=yield this.getSelectableExercises(t);if(e.length<5)return this.toastService.error("Not enough exercises available to generate a workout.",0,"Error"),null;let i=new Map;e.forEach(g=>{g.primaryMuscleGroup&&(i.has(g.primaryMuscleGroup)||i.set(g.primaryMuscleGroup,[]),i.get(g.primaryMuscleGroup).push(g))});let r={legs:["quadriceps","Hamstrings","Glutes","Calves"],push:["Chest","Shoulders","Triceps"],pull:["Lats","Traps","Biceps","Lower back","Back"],core:["Abs","Obliques","Core"]},o=[],s=new Set,l=g=>{let _=this.shuffleArray(g.filter(f=>i.has(f)));for(let f of _){let b=i.get(f),T=this.pickUniqueExercise(b,Array.from(s));if(T){o.push(this.createSimpleWorkoutExercise(T)),s.add(T.id);return}}};if(l(r.legs),l(r.push),l(r.pull),l(r.core),o.length<5){let g=Array.from(i.keys());l(g)}return o.length<3?(console.error("Quick generation failed: could not build a balanced workout."),null):{id:`generated-${Y()}`,name:"Quick Surprise Workout",description:`A randomly generated full-body session created on ${new Date().toLocaleDateString()}.`,workoutExercises:this.shuffleArray(o),goal:"hypertrophy",isFavourite:!1,isHidden:!0}})}tryGenerateWithCriteria(t){return G(this,null,function*(){let e=yield this.getSelectableExercises(t);return e.length<2?null:this.buildExerciseList(e,t)})}getSelectableExercises(t){return G(this,null,function*(){let i=(yield xe(this.exerciseService.getExercises())).filter(s=>!s.isHidden&&!s.categories?.some(l=>l==="stretching"));t.exerciseCategory&&t.exerciseCategory&&(i=i.filter(s=>s.categories?.some(l=>l===t.exerciseCategory)));let r=[];if(t.usePersonalGym?r=(yield xe(this.personalGymService.getAllEquipment())).map(l=>l.category.toLowerCase()):t.equipment.length>0&&(r=t.equipment.map(s=>s.toLowerCase())),r.length>0&&(i=i.filter(s=>{if(s.categories?.find(g=>g==="bodyweightCalisthenics")!==void 0||!s.equipment&&(!s.equipmentNeeded||s.equipmentNeeded.length===0))return!0;let l=(s.equipment||"").toLowerCase(),m=(s.equipmentNeeded||[]).map(g=>g.toLowerCase());return r.some(g=>l&&l.includes(g)?!0:m.some(_=>_.includes(g)))})),t.avoidMuscles.length>0){let s=new Set(t.avoidMuscles);i=i.filter(l=>l&&l.primaryMuscleGroup&&!s.has(l.primaryMuscleGroup))}let o=this.determineTargetMuscles(t.split,t.targetMuscles);if(o.size>0&&(i=i.filter(s=>s.primaryMuscleGroup&&o.has(s.primaryMuscleGroup.toLowerCase()))),t.excludeEquipment&&t.excludeEquipment.length>0){let s=t.excludeEquipment.map(l=>l.toLowerCase());i=i.filter(l=>{let m=(l.equipment||"").toLowerCase(),g=(l.equipmentNeeded||[]).map(f=>f.toLowerCase());return!s.some(f=>m.includes(f)||g.some(b=>b.includes(f)))})}return i})}determineTargetMuscles(t,e){if(e.length>0)return new Set(e);switch(t){case"upper-lower":return new Set(["chest","lats","shoulders","biceps","triceps","traps","lower back","forearms","abs","obliques"]);case"push-pull-legs":return new Set(["chest","shoulders","triceps"]);case"fullBody":default:return new Set(["quadriceps","hamstrings","glutes","calves","chest","lats","shoulders","biceps","triceps","lower back","traps","abs"])}}buildExerciseList(t,e){let i=[],r=0,o=e.duration*60,s=15,l=new Set;t.forEach(f=>{f.equipment&&f.categories?.find(b=>b==="bodyweightCalisthenics")===void 0&&l.add(f.equipment.toLowerCase()),(f.equipmentNeeded||[]).forEach(b=>l.add(b.toLowerCase()))});let m=this.shuffleArray(Array.from(l)),g=this.shuffleArray(t),_=new Map;for(;r<o&&i.length<s&&g.length>0;){let f=null,b=-1,T=m.find(B=>!i.some(L=>L.exercise.equipment?.toLowerCase()===B||L.exercise.equipmentNeeded?.map(X=>X.toLowerCase()).includes(B)));if(T){let B=this.shuffleArray(g.filter(L=>L.equipment?.toLowerCase()===T||L.equipmentNeeded?.map(X=>X.toLowerCase()).includes(T)));B.length>0&&(f=B[0],b=g.findIndex(L=>L.id===f.id))}if(!f&&g.length>0&&(f=g[0],b=0),!f)break;g.splice(b,1);let O=f.primaryMuscleGroup;if(!O)continue;let F=_.get(O)||0;if(F>=3)continue;let P=this.createWorkoutExercise(f,e.goal),$=this.workoutService.getEstimatedRoutineDuration({workoutExercises:[P]})*60;r+$>o+120||(i.push(P),r+=$,O&&_.set(O?.toString(),F+1))}return this.shuffleArray(i)}pickUniqueExercise(t,e){let i=this.shuffleArray([...t]);for(let r of i)if(!e.includes(r.id))return r;return null}shuffleArray(t){for(let e=t.length-1;e>0;e--){let i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}return t}createWorkoutExercise(t,e){let i=3,r={min:8,max:12},o=60,s=300;switch(e){case"strength":i=4,r={min:4,max:6},o=90;break;case"muscularEndurance":i=3,r={min:15,max:20},o=45,s=600;break;case"hypertrophy":default:i=3,r={min:8,max:12},o=60;break}let l={};t.categories&&t.categories[0]==="yogaPilates"?l={fieldOrder:["reps","duration"],targetReps:{type:"range",min:r.min,max:r.max},targetDuration:ke(s)}:t.categories.find(_=>_==="cardio")!==void 0?l={fieldOrder:["duration","distance","rest"],targetDuration:ke(s),targetDistance:Ue(1)}:t.categories.find(_=>_==="bodyweightCalisthenics")!==void 0?l={fieldOrder:["reps","rest"],targetReps:{type:"range",min:r.min,max:r.max}}:l={fieldOrder:["reps","weight","rest"],targetReps:{type:"range",min:r.min,max:r.max},targetWeight:De(10)};let m=Array.from({length:i},()=>A({id:Y(),type:"standard",targetRest:oe(o)},l));return{id:Y(),exerciseId:t.id,exerciseName:t.name,sets:m,supersetId:null,supersetOrder:null,type:"standard",exercise:t}}createSimpleWorkoutExercise(t){let e;return t.categories&&t.categories[0]==="yogaPilates"?e=Array.from({length:3},()=>({id:Y(),type:"standard",fieldOrder:["reps","duration"],targetReps:Ci(10),targetDuration:ke(300)})):t.categories.find(r=>r==="cardio")!==void 0?e=Array.from({length:3},()=>({id:Y(),type:"standard",fieldOrder:["duration","distance","rest"],targetDuration:ke(300),targetDistance:Ue(1),targetRest:oe(90)})):t.categories.find(r=>r==="bodyweightCalisthenics")!==void 0?e=Array.from({length:3},()=>({id:Y(),type:"standard",fieldOrder:["reps","rest"],targetReps:Ci(10),targetRest:oe(60)})):e=Array.from({length:3},()=>({id:Y(),type:"standard",fieldOrder:["reps","weight","rest"],targetReps:Ci(10),targetWeight:De(10),targetRest:oe(60)})),{id:Y(),exerciseId:t.id,exerciseName:t.name,sets:e,supersetId:null,supersetOrder:null}}generateWorkout(t){return G(this,null,function*(){console.log("Starting workout generation with options:",t);let e=yield this.tryGenerateWithCriteria(t);if(!e||e.length<2){console.warn("Generation failed with strict criteria. Fallback 1: Ignoring equipment constraints."),this.toastService.info("Not enough specific exercises found. Broadening search...",3e3,"Expanding Search");let o=W(A({},t),{usePersonalGym:!1,equipment:[]});e=yield this.tryGenerateWithCriteria(o)}if(!e||e.length<2){console.warn("Generation failed after relaxing equipment. Fallback 2: Ignoring target muscle constraints."),this.toastService.info("Still not enough. Ignoring specific muscle targets...",3e3,"Expanding Further");let o=W(A({},t),{targetMuscles:[]});e=yield this.tryGenerateWithCriteria(o)}if(!e||e.length===0)return console.error("CRITICAL: Workout generation failed even with all fallbacks."),null;let i=this.translate.instant("workoutGenerator.routineName",{split:t.split.replace("-"," ")});return{id:`generated-${Y()}`,name:i,description:this.translate.instant("workoutGenerator.routineDescription",{date:new Date().toLocaleDateString(),duration:t.duration,goal:this.translate.instant(`workoutBuilder.goals.${t.goal}`)}),workoutExercises:e,goal:t.goal,isFavourite:!1,isHidden:!0}})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var No=[{id:"strengthTraining",name:"workoutCategories.strengthTraining"},{id:"cardioEndurance",name:"workoutCategories.cardioEndurance"},{id:"flexibilityMobility",name:"workoutCategories.flexibilityMobility"},{id:"mindBodyRecovery",name:"workoutCategories.mindBodyRecovery"},{id:"sportSpecific",name:"workoutCategories.sportSpecific"},{id:"quickWorkouts",name:"workoutCategories.quickWorkouts"},{id:"specialty",name:"workoutCategories.specialty"},{id:"targetedWorkouts",name:"workoutCategories.targetedWorkouts"},{id:"guidedPrograms",name:"workoutCategories.guidedPrograms"},{id:"equipmentSpecific",name:"workoutCategories.equipmentSpecific"},{id:"custom",name:"workoutCategories.custom"}];var er=class n{translate=y(Ve);allCategories$=he(No);categoryMap$=this.allCategories$.pipe(ue(t=>new Map(t.map(e=>[e.id,e]))),lr(1));translatedCategories$=this.translate.onLangChange.pipe(ve(null),Xe(()=>this.allCategories$.pipe(Xe(t=>{if(!t.length)return he([]);let e=t.map(i=>`workoutCategories.${i.id}`);return this.translate.get(e).pipe(ue(i=>t.map(r=>W(A({},r),{name:i[`workoutCategories.${r.id}`]||r.name}))))}))),lr(1));getTranslatedCategories(){return this.translatedCategories$}static \u0275fac=function(e){return new(e||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var Vr=(s=>(s.NONE="None",s.WARM_UP="WarmUp",s.MAIN_LIFT="MainLift",s.CARDIO="Cardio",s.FINISHER="Finisher",s.COOL_DOWN="CoolDown",s))(Vr||{}),eg={WarmUp:0,MainLift:1,Finisher:2,CoolDown:3,None:99,Cardio:99};var ti;function ba(){if(ti==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ti=!0}))}finally{ti=ti||!1}return ti}function Wo(n){return ba()?n:!!n.capture}var wa=new se("cdk-input-modality-detector-options"),Sa={ignoreKeys:[18,17,224,91,16]},Go=650,Nr={passive:!0,capture:!0},Ca=(()=>{class n{_platform=y(Ne);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new oi(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(i=>i===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=fe(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<Go||(this._modality.next(Vi(e)?"keyboard":"mouse"),this._mostRecentTarget=fe(e))};_onTouchstart=e=>{if(Ni(e)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=fe(e)};constructor(){let e=y(re),i=y(J),r=y(wa,{optional:!0});if(this._options=A(A({},Sa),r),this.modalityDetected=this._modality.pipe(rn(1)),this.modalityChanged=this.modalityDetected.pipe(St()),this._platform.isBrowser){let o=y(He).createRenderer(null,null);this._listenerCleanups=e.runOutsideAngular(()=>[o.listen(i,"keydown",this._onKeydown,Nr),o.listen(i,"mousedown",this._onMousedown,Nr),o.listen(i,"touchstart",this._onTouchstart,Nr)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(e=>e())}static \u0275fac=function(i){return new(i||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ir=(function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n})(ir||{}),ka=new se("cdk-focus-monitor-default-options"),tr=Wo({passive:!0,capture:!0}),Ho=(()=>{class n{_ngZone=y(re);_platform=y(Ne);_inputModalityDetector=y(Ca);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=y(J);_stopInputModalityDetector=new V;constructor(){let e=y(ka,{optional:!0});this._detectionMode=e?.detectionMode||ir.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{let i=fe(e);for(let r=i;r;r=r.parentElement)e.type==="focus"?this._onFocus(e,r):this._onBlur(e,r)};monitor(e,i=!1){let r=we(e);if(!this._platform.isBrowser||r.nodeType!==1)return he();let o=Ot(r)||this._document,s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;let l={checkChildren:i,subject:new V,rootNode:o};return this._elementInfo.set(r,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(e){let i=we(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){let o=we(e),s=this._document.activeElement;o===s?this._getClosestElementsInfo(o).forEach(([l,m])=>this._originChanged(l,i,m)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===ir.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused",i==="touch"),e.classList.toggle("cdk-keyboard-focused",i==="keyboard"),e.classList.toggle("cdk-mouse-focused",i==="mouse"),e.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&i,this._detectionMode===ir.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?Go:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(e,i){let r=this._elementInfo.get(i),o=fe(e);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(e,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,tr),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,tr)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(mt(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){let i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,tr),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,tr),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){let i=[];return this._elementInfo.forEach((r,o)=>{(o===e||r.checkChildren&&o.contains(e))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let o=e.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var qo=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return n})();var Gr=(()=>{class n{_platform=y(Ne);constructor(){}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return Ia(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let i=Ea(Pa(e));if(i&&(jo(i)===-1||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),o=jo(e);return e.hasAttribute("contenteditable")?o!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!Aa(e)?!1:r==="audio"?e.hasAttribute("controls")?o!==-1:!1:r==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,i){return Ba(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ea(n){try{return n.frameElement}catch{return null}}function Ia(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function Ta(n){let t=n.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function Ma(n){return Da(n)&&n.type=="hidden"}function Fa(n){return Ra(n)&&n.hasAttribute("href")}function Da(n){return n.nodeName.toLowerCase()=="input"}function Ra(n){return n.nodeName.toLowerCase()=="a"}function Uo(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let t=n.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function jo(n){if(!Uo(n))return null;let t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function Aa(n){let t=n.nodeName.toLowerCase(),e=t==="input"&&n.type;return e==="text"||e==="password"||t==="select"||t==="textarea"}function Ba(n){return Ma(n)?!1:Ta(n)||Fa(n)||n.hasAttribute("contenteditable")||Uo(n)}function Pa(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var Wr=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_enabled=!0;constructor(t,e,i,r,o=!1,s){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._injector=s,o||this.attachAnchors()}destroy(){let t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){let e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=0;i<e.length;i++){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=e.length-1;i>=0;i--){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._injector?Ge(t,{injector:this._injector}):setTimeout(t)}},$o=(()=>{class n{_checker=y(Gr);_ngZone=y(re);_document=y(J);_injector=y(pe);constructor(){y(yt).load(qo)}create(e,i=!1){return new Wr(e,this._checker,this._ngZone,this._document,i,this._injector)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zo(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function Hr(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function $e(n){return n==null?"":typeof n=="string"?n:`${n}px`}var Yo=no();function Zo(n){return new qr(n.get(Pi),n.get(J))}var qr=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(t,e){this._viewportRuler=t,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=$e(-this._previousScrollPosition.left),t.style.top=$e(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,i=t.style,r=e.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Yo&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Yo&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.documentElement,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};var jr=class{enable(){}disable(){}attach(){}};var ii=class{positionStrategy;scrollStrategy=new jr;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(t){if(t){let e=Object.keys(t);for(let i of e)t[i]!==void 0&&(this[i]=t[i])}}};var Qo=(()=>{class n{_attachedOverlays=[];_document=y(J);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),La=(()=>{class n extends Qo{_ngZone=y(re);_renderer=y(He).createRenderer(null,null);_cleanupKeydown;add(e){super.add(e),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=e=>{let i=this._attachedOverlays;for(let r=i.length-1;r>-1;r--)if(i[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[r]._keydownEvents.next(e));break}};static \u0275fac=(()=>{let e;return function(r){return(e||(e=cr(n)))(r||n)}})();static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Va=(()=>{class n extends Qo{_platform=y(Ne);_ngZone=y(re);_renderer=y(He).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(e){if(super.add(e),!this._isAttached){let i=this._document.body,r={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(i,"pointerdown",this._pointerDownListener,r),o.listen(i,"click",this._clickListener,r),o.listen(i,"auxclick",this._clickListener,r),o.listen(i,"contextmenu",this._clickListener,r)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(e=>e()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=e=>{this._pointerDownEventTarget=fe(e)};_clickListener=e=>{let i=fe(e),r=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let l=o[s];if(l._outsidePointerEvents.observers.length<1||!l.hasAttached())continue;if(Xo(l.overlayElement,i)||Xo(l.overlayElement,r))break;let m=l._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>m.next(e)):m.next(e)}};static \u0275fac=(()=>{let e;return function(r){return(e||(e=cr(n)))(r||n)}})();static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xo(n,t){let e=typeof ShadowRoot<"u"&&ShadowRoot,i=t;for(;i;){if(i===n)return!0;i=e&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var Jo=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return n})(),zr=(()=>{class n{_platform=y(Ne);_containerElement;_document=y(J);_styleLoader=y(yt);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||Hr()){let r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}let i=this._document.createElement("div");i.classList.add(e),Hr()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(Jo)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ur=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(t,e,i,r){this._renderer=e,this._ngZone=i,this.element=t.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=e.listen(this.element,"click",r)}detach(){this._ngZone.runOutsideAngular(()=>{let t=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(t,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),t.style.pointerEvents="none",t.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},ri=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new V;_attachments=new V;_detachments=new V;_positionStrategy;_scrollStrategy;_locationChanges=Ae.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new V;_outsidePointerEvents=new V;_afterNextRenderRef;constructor(t,e,i,r,o,s,l,m,g,_=!1,f,b){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=l,this._location=m,this._outsideClickDispatcher=g,this._animationsDisabled=_,this._injector=f,this._renderer=b,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Ge(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,t&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=A(A({},this._config),t),this._updateElementSize()}setDirection(t){this._config=W(A({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=$e(this._config.width),t.height=$e(this._config.height),t.minWidth=$e(this._config.minWidth),t.minHeight=$e(this._config.minHeight),t.maxWidth=$e(this._config.maxWidth),t.maxHeight=$e(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new Ur(this._document,this._renderer,this._ngZone,e=>{this._backdropClick.next(e)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(t))}):this._backdropRef.element.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(t,e,i){let r=Gi(e||[]).filter(o=>!!o);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenEmpty(){let t=!1;try{this._detachContentAfterRenderRef=Ge(()=>{t=!0,this._detachContent()},{injector:this._injector})}catch(e){if(t)throw e;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let t=this._scrollStrategy;t?.disable(),t?.detach?.()}};var Ko="cdk-global-overlay-wrapper";function es(n){return new $r}var $r=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Ko),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:l}=i,m=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),g=(o==="100%"||o==="100vh")&&(!l||l==="100%"||l==="100vh"),_=this._xPosition,f=this._xOffset,b=this._overlayRef.getConfig().direction==="rtl",T="",O="",F="";m?F="flex-start":_==="center"?(F="center",b?O=f:T=f):b?_==="left"||_==="end"?(F="flex-end",T=f):(_==="right"||_==="start")&&(F="flex-start",O=f):_==="left"||_==="start"?(F="flex-start",T=f):(_==="right"||_==="end")&&(F="flex-end",O=f),t.position=this._cssPosition,t.marginLeft=m?"0":T,t.marginTop=g?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=m?"0":O,e.justifyContent=F,e.alignItems=g?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(Ko),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}};function ts(n,t){n.get(yt).load(Jo);let e=n.get(zr),i=n.get(J),r=n.get(Lt),o=n.get(di),s=n.get(ct),l=i.createElement("div"),m=i.createElement("div");m.id=r.getId("cdk-overlay-"),m.classList.add("cdk-overlay-pane"),l.appendChild(m),e.getContainerElement().appendChild(l);let g=new lo(m,o,n),_=new ii(t),f=n.get(Ct,null,{optional:!0})||n.get(He).createRenderer(null,null);return _.direction=_.direction||s.value,new ri(g,l,m,_,n.get(re),n.get(La),i,n.get(_n),n.get(Va),t?.disableAnimations??n.get(an,null,{optional:!0})==="NoopAnimations",n.get(ci),f)}function Na(n,t){}var Wt=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var Wa=(()=>{class n extends ao{_elementRef=y(me);_focusTrapFactory=y($o);_config;_interactivityChecker=y(Gr);_ngZone=y(re);_focusMonitor=y(Ho);_renderer=y(Ct);_changeDetectorRef=y(ft);_injector=y(pe);_platform=y(Ne);_document=y(J);_portalOutlet;_focusTrapped=new V;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=y(Wt,{optional:!0})||new Wt,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let i=this._ariaLabelledByQueue.indexOf(e);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}attachDomPortal=e=>{this._portalOutlet.hasAttached();let i=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),i};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{o(),s(),e.removeAttribute("tabindex")},o=this._renderer.listen(e,"blur",r),s=this._renderer.listen(e,"mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(e){this._isDestroyed||Ge(()=>{let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus(e);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(e)||this._focusDialogContainer(e);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',e);break;default:this._focusByCssSelector(this._config.autoFocus,e);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,i=null;if(typeof e=="string"?i=this._document.querySelector(e):typeof e=="boolean"?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&typeof i.focus=="function"){let r=Li(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(e){this._elementRef.nativeElement.focus?.(e)}_containsFocus(){let e=this._elementRef.nativeElement,i=Li();return e===i||e.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Li()))}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=le({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(i&1&&Pe(br,7),i&2){let o;Oe(o=Le())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){i&2&&ye("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[ln],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){i&1&&k(0,Na,0,0,"ng-template",0)},dependencies:[br],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return n})(),bt=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new V;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(t,e){this.overlayRef=t,this.config=e,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!zo(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=t.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(t,e){if(this._canClose(t)){let i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}_canClose(t){let e=this.config;return!!this.containerInstance&&(!e.closePredicate||e.closePredicate(t,e,this.componentInstance))}},Ga=new se("DialogScrollStrategy",{providedIn:"root",factory:()=>{let n=y(pe);return()=>Zo(n)}}),Xr=new se("DialogData"),Ha=new se("DefaultDialogConfig");function qa(n){let t=R(n),e=new j;return{valueSignal:t,get value(){return t()},change:e,ngOnDestroy(){e.complete()}}}var is=(()=>{class n{_injector=y(pe);_defaultOptions=y(Ha,{optional:!0});_parentDialog=y(n,{optional:!0,skipSelf:!0});_overlayContainer=y(zr);_idGenerator=y(Lt);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new V;_afterOpenedAtThisLevel=new V;_ariaHiddenElements=new Map;_scrollStrategy=y(Ga);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=Jr(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ve(void 0)));constructor(){}open(e,i){let r=this._defaultOptions||new Wt;i=A(A({},r),i),i.id=i.id||this._idGenerator.getId("cdk-dialog-"),i.id&&this.getDialogById(i.id);let o=this._getOverlayConfig(i),s=ts(this._injector,o),l=new bt(s,i),m=this._attachContainer(s,l,i);if(l.containerInstance=m,!this.openDialogs.length){let g=this._overlayContainer.getContainerElement();m._focusTrapped?m._focusTrapped.pipe(Se(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(g)}):this._hideNonDialogContentFromAssistiveTechnology(g)}return this._attachDialogContent(e,l,m,i),this.openDialogs.push(l),l.closed.subscribe(()=>this._removeOpenDialog(l,!0)),this.afterOpened.next(l),l}closeAll(){Yr(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){Yr(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),Yr(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let i=new ii({positionStrategy:e.positionStrategy||es().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation,disableAnimations:e.disableAnimations});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,r){let o=r.injector||r.viewContainerRef?.injector,s=[{provide:Wt,useValue:r},{provide:bt,useValue:i},{provide:ri,useValue:e}],l;r.container?typeof r.container=="function"?l=r.container:(l=r.container.type,s.push(...r.container.providers(r))):l=Wa;let m=new vr(l,r.viewContainerRef,pe.create({parent:o||this._injector,providers:s}));return e.attach(m).instance}_attachDialogContent(e,i,r,o){if(e instanceof gt){let s=this._createInjector(o,i,r,void 0),l={$implicit:o.data,dialogRef:i};o.templateContext&&(l=A(A({},l),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),r.attachTemplatePortal(new yr(e,null,l,s))}else{let s=this._createInjector(o,i,r,this._injector),l=r.attachComponentPortal(new vr(e,o.viewContainerRef,s));i.componentRef=l,i.componentInstance=l.instance}}_createInjector(e,i,r,o){let s=e.injector||e.viewContainerRef?.injector,l=[{provide:Xr,useValue:e.data},{provide:bt,useValue:i}];return e.providers&&(typeof e.providers=="function"?l.push(...e.providers(i,e,r)):l.push(...e.providers)),e.direction&&(!s||!s.get(ct,null,{optional:!0}))&&l.push({provide:ct,useValue:qa(e.direction)}),pe.create({parent:s||o,providers:l})}_removeOpenDialog(e,i){let r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(e){if(e.parentElement){let i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){let o=i[r];o!==e&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(i){return new(i||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Yr(n,t){let e=n.length;for(;e--;)t(n[e])}var Ua=(n,t)=>t.key,$a=(n,t)=>t.value;function za(n,t){if(n&1&&E(0,"div",9),n&2){let e=u(2);p("innerHTML",e.getSafeHtml(e.config.message),qt)}}function Ya(n,t){if(n&1&&(d(0,"p",10),h(1),c()),n&2){let e=u(2);a(),C(" ",e.config.message," ")}}function Xa(n,t){if(n&1&&Ze(0,za,1,1,"div",9)(1,Ya,2,1,"p",10),n&2){let e=u();Qe(e.config.renderAsHtml?0:1)}}function Ka(n,t){if(n&1&&(d(0,"li"),h(1),c()),n&2){let e=t.$implicit;a(),M(e)}}function Za(n,t){if(n&1&&(d(0,"ul",2),kt(1,Ka,2,1,"li",null,cn),c()),n&2){let e=u();p("ngClass",e.config.listClass||"list-disc pl-6 space-y-1"),a(),Et(e.config.listItems)}}function Qa(n,t){if(n&1&&(d(0,"label",11),h(1),c()),n&2){let e=u().$implicit;p("for",e.key),a(),C(" ",e.label," ")}}function Ja(n,t){if(n&1&&E(0,"input",12),n&2){let e=u().$implicit;p("id",e.key)("formControlName",e.key)("placeholder",e.placeholder||""),ye("minlength",e.attributes==null?null:e.attributes.minlength)("maxlength",e.attributes==null?null:e.attributes.maxlength)("pattern",e.attributes==null?null:e.attributes.pattern)}}function el(n,t){if(n&1&&E(0,"input",13),n&2){let e=u().$implicit;p("id",e.key)("formControlName",e.key),ye("min",e.attributes==null?null:e.attributes.min)("max",e.attributes==null?null:e.attributes.max)("step",e.attributes==null?null:e.attributes.step)}}function tl(n,t){if(n&1&&(d(0,"option",17),h(1),c()),n&2){let e=t.$implicit;p("value",e.value),a(),M(e.label)}}function il(n,t){if(n&1&&(d(0,"select",14),kt(1,tl,2,2,"option",17,$a),c()),n&2){let e=u().$implicit;p("id",e.key)("formControlName",e.key),ye("multiple",e.attributes==null?null:e.attributes.multiple),a(),Et(e.options)}}function rl(n,t){if(n&1&&(d(0,"textarea",15),h(1,"                  "),c()),n&2){let e=u().$implicit;p("id",e.key)("formControlName",e.key),ye("minlength",e.attributes==null?null:e.attributes.minlength)("maxlength",e.attributes==null?null:e.attributes.maxlength)("placeholder",e.placeholder||"")}}function nl(n,t){if(n&1&&(d(0,"div",16),E(1,"input",18),d(2,"label",19),h(3),c()()),n&2){let e=u().$implicit;a(),p("id",e.key)("formControlName",e.key),ye("disabled",e.attributes==null?null:e.attributes.disabled),a(),p("for",e.key),a(),C(" ",e.placeholder||e.label," ")}}function ol(n,t){if(n&1&&(d(0,"div",5),Ze(1,Qa,2,2,"label",11),Ze(2,Ja,1,6,"input",12)(3,el,1,5,"input",13)(4,il,3,3,"select",14)(5,rl,2,5,"textarea",15)(6,nl,4,5,"div",16),c()),n&2){let e,i=t.$implicit;p("ngClass",i.cssClass||"col-12"),a(),Qe(i.type!=="checkbox"?1:-1),a(),Qe((e=i.type)==="text"?2:e==="number"?3:e==="select"?4:e==="textarea"?5:e==="checkbox"?6:-1)}}function sl(n,t){if(n&1){let e=D();d(0,"button",20),I("click",function(){w(e);let r=u();return S(r.onCancel())}),h(1),c()}if(n&2){let e=u();a(),C(" ",e.config.cancelText||"Cancel"," ")}}var rr=class n{constructor(t,e,i){this.config=t;this.dialogRef=e;this.fb=i}form=new be({});ngOnInit(){let t={};this.config.fields?.forEach(e=>{let i=e.required?[Fe.required]:[];t[e.key]=[e.value||null,i]}),this.form=this.fb.group(t)}onConfirm(){this.form.valid&&this.dialogRef.close({action:"CONFIRM",data:this.form.value})}onCancel(){this.dialogRef.close({action:"CANCEL"})}sanitizer=y(mi);getSafeHtml(t){return this.sanitizer.bypassSecurityTrustHtml(t||"")}static \u0275fac=function(e){return new(e||n)(ae(Xr),ae(bt),ae(Ft))};static \u0275cmp=le({type:n,selectors:[["app-dynamic-dialog"]],decls:13,vars:7,consts:[[1,"w-full","max-w-lg","p-6","bg-white","border","border-gray-200","shadow-2xl","rounded-2xl","dark:bg-gray-800","dark:border-gray-700"],[1,"mb-2","text-xl","font-bold","text-gray-900","dark:text-white"],[1,"mb-6","text-sm","text-gray-700","dark:text-gray-300",3,"ngClass"],[3,"ngSubmit","formGroup"],[1,"grid","grid-cols-12","gap-4","mb-8"],[1,"flex","flex-col",3,"ngClass"],[1,"flex","justify-end","gap-3"],["type","button","class","px-4 py-2 text-sm font-medium text-gray-700 transition-colors bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600 dark:hover:text-white",3,"click",4,"ngIf"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","transition-colors","bg-blue-600","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed","dark:bg-blue-600","dark:hover:bg-blue-500",3,"disabled"],[1,"mb-6","text-sm","text-gray-500","dark:text-gray-400",3,"innerHTML"],[1,"mb-6","text-sm","text-gray-500","dark:text-gray-400"],[1,"mb-1.5","text-xs","font-semibold","uppercase","tracking-wider","text-gray-500","dark:text-gray-400",3,"for"],["type","text",1,"input-base",3,"id","formControlName","placeholder"],["type","text","inputmode","decimal","pattern","[0-9]*","numbersOnly","",1,"input-base",3,"id","formControlName"],[1,"input-base",3,"id","formControlName"],["rows","3",1,"input-base","resize-y",3,"id","formControlName"],[1,"flex","items-center","h-full","pt-1","space-x-3"],[3,"value"],["type","checkbox",1,"w-5","h-5","text-blue-600","border-gray-300","rounded","focus:ring-blue-500","dark:focus:ring-blue-600","dark:ring-offset-gray-800","dark:bg-gray-700","dark:border-gray-600",3,"id","formControlName"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-200","cursor-pointer","select-none",3,"for"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","transition-colors","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","dark:bg-gray-700","dark:text-gray-300","dark:border-gray-600","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"]],template:function(e,i){e&1&&(d(0,"div",0)(1,"h2",1),h(2),c(),Ze(3,Xa,2,1),Ze(4,Za,3,1,"ul",2),d(5,"form",3),I("ngSubmit",function(){return i.onConfirm()}),d(6,"div",4),kt(7,ol,7,3,"div",5,Ua),c(),d(9,"div",6),k(10,sl,2,1,"button",7),d(11,"button",8),h(12),c()()()()),e&2&&(a(2),C(" ",i.config.title," "),a(),Qe(i.config.message?3:-1),a(),Qe(i.config.listItems&&i.config.listItems.length>0?4:-1),a(),p("formGroup",i.form),a(2),Et(i.config.fields),a(3),p("ngIf",!!i.config.cancelText),a(),p("disabled",i.form.invalid),a(),C(" ",i.config.confirmText||"Confirm"," "))},dependencies:[it,et,tt,wi,xi,st,at,rt,_i,ot,nt,fi,bi,vi,yi,Nt],styles:["[_nghost-%COMP%]{display:block;animation:_ngcontent-%COMP%_scaleIn .2s ease-out forwards}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.input-base[_ngcontent-%COMP%]{width:100%;border-radius:.5rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:.5rem .75rem;font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1));outline:2px solid transparent;outline-offset:2px;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.input-base[_ngcontent-%COMP%]:focus{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1));--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.input-base[_ngcontent-%COMP%]:is(.dark *){--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.input-base[_ngcontent-%COMP%]:is(.dark *)::placeholder{--tw-placeholder-opacity: 1;color:rgb(156 163 175 / var(--tw-placeholder-opacity, 1))}.input-base[_ngcontent-%COMP%]:focus:is(.dark *){--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1));--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.col-12[_ngcontent-%COMP%]{grid-column:span 12/span 12}.col-6[_ngcontent-%COMP%]{grid-column:span 6/span 6}.col-4[_ngcontent-%COMP%]{grid-column:span 4/span 4}.col-3[_ngcontent-%COMP%]{grid-column:span 3/span 3}.col-full[_ngcontent-%COMP%]{grid-column:span 12/span 12}.col-half[_ngcontent-%COMP%]{grid-column:span 6/span 6}"]})};var nr=class n{dialog=y(is);prompt(t){return this.dialog.open(rr,{data:t,disableClose:!0,backdropClass:"app-modal-backdrop",panelClass:"app-modal-panel"}).closed.pipe(wt(i=>i?.action==="CONFIRM"),ue(i=>i?.data))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var al=["exerciseSearchFied"],ll=["setRepsInput"],cl=["expandedSetElement"],dl=["expandedExerciseCard"],ul=n=>({"pb-32":n}),or=(n,t)=>({"border-red-500 dark:border-red-400":n,"border-gray-300 dark:border-gray-500":t}),pl=n=>({week:n}),ml=n=>({day:n}),gl=n=>({"top-3":n}),Kr=n=>({count:n}),hl=n=>({"background-color":n}),_l=n=>({"rounded-b-none":n}),fl=(n,t)=>({"w-8 h-8 ":n,"w-10 h-10 py-1":t}),xl=(n,t)=>({order:n,total:t}),ni=()=>({standalone:!0}),vl=(n,t)=>({"bg-primary text-white border-primary-light":n,"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 border-gray-300 dark:border-gray-600":t}),yl=n=>[n],bl=(n,t)=>({"bg-gray-50 dark:bg-gray-700/50":n,"bg-blue-50 dark:bg-blue-700/50":t}),wl=()=>["warmup","dropset","failure","amrap","myorep","restpause"],Sl=(n,t)=>({"bg-gray-100 dark:bg-gray-800/50":n,"bg-blue-100 dark:bg-blue-800/50":t}),dt=(n,t)=>({setControl:n,field:t}),Cl=(n,t,e)=>({setControl:n,exIndex:t,setIndex:e}),kl=n=>({"animating-input-text":n});function El(n,t){if(n&1&&(d(0,"div",36),h(1),c()),n&2){let e=u();a(),C(" ",e.errorMessage(),`
`)}}function Il(n,t){if(n&1){let e=D();d(0,"app-action-menu",42),I("itemClick",function(r){w(e);let o=u(3);return S(o.handleActionMenuItemClick(r))})("closeMenu",function(){w(e);let r=u(3);return S(r.onCloseActionMenu())}),c()}if(n&2){let e=u(2).ngIf,i=u();p("gridClass"," grid grid-cols-2 ")("items",i.getRoutineDropdownActionItems(e.id,"dropdown"))("isVisible",i.areActionsVisible(e.id))}}function Tl(n,t){if(n&1){let e=D();d(0,"div",38)(1,"button",39),I("click",function(r){w(e);let o=u().ngIf,s=u();return S(s.toggleActions(o.id,r))}),E(2,"app-icon",40),c(),k(3,Il,1,3,"app-action-menu",41),c()}if(n&2){let e=u().ngIf,i=u();a(3),p("ngIf",i.areActionsVisible(e.id))}}function Ml(n,t){if(n&1&&(d(0,"div"),k(1,Tl,4,1,"div",37),c()),n&2){let e=t.ngIf;a(),p("ngIf",e.createdAt)}}function Fl(n,t){if(n&1&&(d(0,"div")(1,"div",53),E(2,"app-icon",54),d(3,"label",55),h(4),c()()()),n&2){let e,i=u(2);a(4),C(" ",(e=i.builderForm.get("name"))==null?null:e.value," ")}}function Dl(n,t){n&1&&(d(0,"span"),h(1),x(2,"translate"),c()),n&2&&(a(),M(v(2,1,"workoutBuilder.routineBuilder.nameRequired")))}function Rl(n,t){if(n&1&&(d(0,"div",60),k(1,Dl,3,3,"span",24),c()),n&2){let e,i=u(3);a(),p("ngIf",(e=i.builderForm.get("name"))==null||e.errors==null?null:e.errors.required)}}function Al(n,t){if(n&1&&(d(0,"div",56)(1,"label",57),h(2),x(3,"translate"),c(),E(4,"input",58),x(5,"translate"),k(6,Rl,2,1,"div",59),c()),n&2){let e,i,r=u(2);a(2),M(v(3,4,"workoutBuilder.routineBuilder.nameLabel")),a(2),p("placeholder",v(5,6,"workoutBuilder.routineBuilder.namePlaceholder"))("ngClass",z(8,or,((e=r.builderForm.get("name"))==null?null:e.invalid)&&((e=r.builderForm.get("name"))==null?null:e.touched),!((e=r.builderForm.get("name"))!=null&&e.invalid&&((e=r.builderForm.get("name"))!=null&&e.touched)))),a(2),p("ngIf",((i=r.builderForm.get("name"))==null?null:i.invalid)&&(((i=r.builderForm.get("name"))==null?null:i.dirty)||((i=r.builderForm.get("name"))==null?null:i.touched)))}}function Bl(n,t){if(n&1&&(d(0,"div"),E(1,"p",61),c()),n&2){let e=u(2);a(),p("innerHTML",e.sanitizedDescription,qt)}}function Pl(n,t){if(n&1&&(d(0,"div")(1,"label",62),E(2,"app-icon",63),d(3,"span",64),h(4),x(5,"translate"),c(),h(6),x(7,"translate"),c()()),n&2){let e,i=u(2);a(4),C("",v(5,2,"workoutBuilder.routineBuilder.goalLabel"),": "),a(2),C(" ",v(7,4,"workoutBuilder.goals."+(((e=i.builderForm.get("goal"))==null?null:e.value)||""))," ")}}function Ol(n,t){if(n&1&&(d(0,"option",71),h(1),x(2,"translate"),c()),n&2){let e=t.$implicit;p("value",e.value),a(),C(" ",v(2,2,e.label)," ")}}function Ll(n,t){if(n&1&&(d(0,"div",56)(1,"div",65),E(2,"app-icon",66),d(3,"label",67),h(4),x(5,"translate"),c()(),d(6,"select",68)(7,"option",69),h(8),x(9,"translate"),c(),k(10,Ol,3,4,"option",70),c()()),n&2){let e=u(2);a(4),M(v(5,3,"workoutBuilder.routineBuilder.goalLabel")),a(4),M(v(9,5,"workoutBuilder.routineBuilder.goalPlaceholder")),a(2),p("ngForOf",e.routineGoals)}}function Vl(n,t){if(n&1&&(d(0,"div",76)(1,"div",65),E(2,"app-icon",77),d(3,"span",64),h(4),x(5,"translate"),c(),h(6),c()()),n&2){let e=u().ngIf;a(4),C("",v(5,2,"workoutBuilder.routineBuilder.lastDuration"),":"),a(2),C(" ",e.duration," min ")}}function Nl(n,t){if(n&1&&(H(0),d(1,"div",72)(2,"span",73),E(3,"app-icon",74),h(4),x(5,"translate"),x(6,"millisecondsDate"),c()(),k(7,Vl,7,4,"div",75),q()),n&2){let e=t.ngIf;a(4),ne(" ",v(5,3,"workoutBuilder.routineBuilder.lastPerformed"),": ",v(6,5,e.startTime)," "),a(3),p("ngIf",e.duration)}}function Wl(n,t){n&1&&(d(0,"div",78),E(1,"app-icon",79),h(2),x(3,"translate"),c()),n&2&&(a(2),C(" ",v(3,1,"workoutBuilder.routineBuilder.notPerformed")," "))}function Gl(n,t){if(n&1&&(d(0,"div",80),E(1,"app-icon",81),d(2,"span",64),h(3),x(4,"translate"),c(),h(5),c()),n&2){let e=u(2);a(3),C("",v(4,2,"workoutBuilder.routineBuilder.estimatedDuration"),":"),a(2),C(" ~",e.getRoutineDuration()," min ")}}function Hl(n,t){if(n&1&&(d(0,"div",80),E(1,"app-icon",82),d(2,"span",64),h(3),x(4,"translate"),c(),h(5),c()),n&2){let e=u(2);a(3),C("",v(4,2,"workoutBuilder.routineBuilder.totExercises"),":"),a(2),C(" ",e.getTotalExerciseCount()," ")}}function ql(n,t){if(n&1&&(d(0,"span",83),h(1),c()),n&2){let e=u(2);a(),C(" ",e.getAdvancedOptionsCount()>0?"("+e.getAdvancedOptionsCount()+")":""," ")}}function jl(n,t){if(n&1&&(d(0,"div"),E(1,"p",61),c()),n&2){let e=u(3);a(),p("innerHTML",e.sanitizedDescription,qt)}}function Ul(n,t){n&1&&(d(0,"div")(1,"label",86),h(2),x(3,"translate"),c(),E(4,"textarea",87),x(5,"translate"),c()),n&2&&(a(2),M(v(3,2,"workoutBuilder.routineBuilder.descriptionLabel")),a(2),p("placeholder",v(5,4,"workoutBuilder.routineBuilder.descriptionPlaceholder")))}function $l(n,t){if(n&1&&(d(0,"div")(1,"label",62),E(2,"app-icon",88),d(3,"span",64),h(4),x(5,"translate"),c(),h(6),x(7,"translate"),c()()),n&2){let e,i=u(3);a(4),C("",v(5,2,"workoutBuilder.routineBuilder.primaryCategoryLabel"),": "),a(2),C(" ",v(7,4,"workoutCategories."+((e=i.builderForm.get("primaryCategory"))==null?null:e.value))," ")}}function zl(n,t){if(n&1&&(d(0,"option",71),h(1),c()),n&2){let e=t.$implicit;p("value",e.id),a(),C(" ",e.name," ")}}function Yl(n,t){if(n&1&&(d(0,"div")(1,"div",65),E(2,"app-icon",89),d(3,"label",90),h(4),x(5,"translate"),c()(),d(6,"select",91)(7,"option",69),h(8),x(9,"translate"),c(),k(10,zl,2,2,"option",70),c()()),n&2){let e=u(3);a(4),C(" ",v(5,3,"workoutBuilder.routineBuilder.primaryCategoryLabel")," "),a(4),C("",v(9,5,"workoutBuilder.routineBuilder.primaryCategoryPlaceholder")," "),a(2),p("ngForOf",e.categories())}}function Xl(n,t){if(n&1&&(d(0,"div")(1,"label",92)(2,"span",64),h(3),x(4,"translate"),c(),h(5),c()()),n&2){let e,i=u(3);a(3),C("",v(4,2,"workoutBuilder.routineBuilder.secondaryCategoryLabel"),": "),a(2),C(" ",(e=i.builderForm.get("secondaryCategory"))==null?null:e.value," ")}}function Kl(n,t){n&1&&(d(0,"div")(1,"label",93),h(2),x(3,"translate"),c(),E(4,"input",94),x(5,"translate"),c()),n&2&&(a(2),C(" ",v(3,2,"workoutBuilder.routineBuilder.secondaryCategoryLabel")," "),a(2),p("placeholder",v(5,4,"workoutBuilder.routineBuilder.secondaryCategoryPlaceholder")))}function Zl(n,t){if(n&1&&(d(0,"span",100),h(1),c()),n&2){let e=t.$implicit;a(),C(" ",e.trim()," ")}}function Ql(n,t){if(n&1&&(d(0,"div",95)(1,"div",96)(2,"div",65),E(3,"app-icon",97),d(4,"label",98),h(5),x(6,"translate"),c()(),k(7,Zl,2,1,"span",99),c()()),n&2){let e,i=u(3);a(5),C(" ",v(6,2,"workoutBuilder.routineBuilder.tagsLabelView"),": "),a(2),p("ngForOf",(e=i.builderForm.get("tags"))==null?null:e.value.split(","))}}function Jl(n,t){n&1&&(d(0,"div")(1,"div",65),E(2,"app-icon",97),d(3,"label",101),h(4),x(5,"translate"),c()(),E(6,"input",102),x(7,"translate"),c()),n&2&&(a(4),C(" ",v(5,2,"workoutBuilder.routineBuilder.tagsLabel")," "),a(2),p("placeholder",v(7,4,"workoutBuilder.routineBuilder.tagsPlaceholder")))}function ec(n,t){if(n&1&&(d(0,"div",84),k(1,jl,2,1,"div",24)(2,Ul,6,6,"div",24)(3,$l,8,6,"div",24)(4,Yl,11,7,"div",24)(5,Xl,6,4,"div",24)(6,Kl,6,6,"div",24)(7,Ql,8,4,"div",85)(8,Jl,8,6,"div",24),c()),n&2){let e,i,r,o=u(2);a(),p("ngIf",o.isViewMode),a(),p("ngIf",o.isEditableMode()),a(),p("ngIf",o.isViewMode&&((e=o.builderForm.get("primaryCategory"))==null?null:e.value)),a(),p("ngIf",o.isEditableMode()),a(),p("ngIf",o.isViewMode&&((i=o.builderForm.get("secondaryCategory"))==null?null:i.value)),a(),p("ngIf",o.isEditableMode()),a(),p("ngIf",o.isViewMode&&((r=o.builderForm.get("tags"))==null?null:r.value)),a(),p("ngIf",o.isEditableMode())}}function tc(n,t){if(n&1){let e=D();H(0),k(1,Fl,5,1,"div",24)(2,Al,7,11,"div",43)(3,Bl,2,1,"div",24)(4,Pl,8,6,"div",24)(5,Ll,11,7,"div",43)(6,Nl,8,7,"ng-container",44)(7,Wl,4,3,"ng-template",null,3,Te),d(9,"div"),k(10,Gl,6,4,"div",45),c(),d(11,"div"),k(12,Hl,6,4,"div",45),c(),d(13,"div",46)(14,"button",47),I("click",function(){w(e);let r=u();return S(r.showAdvancedOptions.set(!r.showAdvancedOptions()))}),d(15,"div",48),E(16,"app-icon",49),d(17,"span",50),h(18),x(19,"translate"),c()(),k(20,ql,2,1,"span",51),c(),k(21,ec,9,8,"div",52),c(),q()}if(n&2){let e=ee(8),i=u();a(),p("ngIf",i.isViewMode),a(),p("ngIf",i.isEditableMode()),a(),p("ngIf",i.isViewMode),a(),p("ngIf",i.isViewMode),a(),p("ngIf",i.isEditableMode()),a(),p("ngIf",i.lastLogForCurrentRoutine())("ngIfElse",e),a(4),p("ngIf",i.liveFormAsRoutine()&&i.getRoutineDuration()>0),a(2),p("ngIf",(i.workoutExercisesFormArray&&i.workoutExercisesFormArray.length>5)??0),a(4),p("name",i.showAdvancedOptions()?"chevron-down":"chevron-right"),a(2),M(v(19,13,"workoutBuilder.routineBuilder.advancedOptions")),a(2),p("ngIf",!i.showAdvancedOptions()),a(),p("ngIf",i.showAdvancedOptions())}}function ic(n,t){if(n&1&&(d(0,"span"),h(1),c()),n&2){let e=u(3);a(),M(e.getLogTitleForProgramEntry())}}function rc(n,t){if(n&1&&(d(0,"header",126)(1,"h1",127),k(2,ic,2,1,"span",24),c()()),n&2){let e=u(2);a(2),p("ngIf",e.isEditableMode)}}function nc(n,t){n&1&&(d(0,"span"),h(1),x(2,"translate"),c()),n&2&&(a(),M(v(2,1,"workoutBuilder.logEntry.dateRequired")))}function oc(n,t){if(n&1&&(d(0,"div",60),k(1,nc,3,3,"span",24),c()),n&2){let e,i=u(2);a(),p("ngIf",(e=i.builderForm.get("workoutDate"))==null||e.errors==null?null:e.errors.required)}}function sc(n,t){n&1&&(d(0,"span"),h(1),x(2,"translate"),c()),n&2&&(a(),M(v(2,1,"workoutBuilder.logEntry.startTimeRequired")))}function ac(n,t){if(n&1&&(d(0,"div",60),k(1,sc,3,3,"span",24),c()),n&2){let e,i=u(2);a(),p("ngIf",(e=i.builderForm.get("startTime"))==null||e.errors==null?null:e.errors.required)}}function lc(n,t){n&1&&(d(0,"span"),h(1),x(2,"translate"),c()),n&2&&(a(),M(v(2,1,"workoutBuilder.logEntry.endTimeRequired")))}function cc(n,t){if(n&1&&(d(0,"div",60),k(1,lc,3,3,"span",24),c()),n&2){let e,i=u(2);a(),p("ngIf",(e=i.builderForm.get("endTime"))==null||e.errors==null?null:e.errors.required)}}function dc(n,t){if(n&1&&(d(0,"option",71),h(1),c()),n&2){let e=t.$implicit;p("value",e.id),a(),M(e.name)}}function uc(n,t){if(n&1&&(d(0,"option",71),h(1),c()),n&2){let e=t.$implicit;p("value",e.id),a(),C("",e.name," ")}}function pc(n,t){n&1&&(d(0,"span",131),h(1),x(2,"translate"),c()),n&2&&(a(),M(v(2,1,"workoutBuilder.logEntry.iterationWarning")))}function mc(n,t){if(n&1&&(d(0,"option",71),h(1),c()),n&2){let e=t.$implicit;p("value",e),a(),M(e)}}function gc(n,t){if(n&1&&(d(0,"div")(1,"label",128),h(2),x(3,"translate"),c(),k(4,pc,3,3,"span",129),d(5,"select",130)(6,"option",69),h(7),x(8,"translate"),c(),k(9,mc,2,2,"option",70),c()()),n&2){let e,i=u(2);a(2),M(v(3,5,"workoutBuilder.logEntry.iterationLabel")),a(2),p("ngIf",i.isEditableMode),a(),p("disabled",!((e=i.builderForm.get("programIdForLog"))!=null&&e.value)||i.availableIterationIds.length===0),a(2),M(v(8,7,"workoutBuilder.logEntry.iterationPlaceholder")),a(2),p("ngForOf",i.availableIterationIds)}}function hc(n,t){n&1&&(d(0,"span",131),h(1),x(2,"translate"),c()),n&2&&(a(),M(v(2,1,"workoutBuilder.logEntry.scheduledDayWarning")))}function _c(n,t){if(n&1&&(d(0,"option",71),h(1),x(2,"translate"),x(3,"translate"),c()),n&2){let e=t.$implicit;p("value",e.id),a(),ne("",e.weekNumber?Ce(2,3,"workoutBuilder.logEntry.weekLabel",de(9,pl,e.weekNumber)):""," - ",e.dayName?Ce(3,6,"workoutBuilder.logEntry.dayLabel",de(11,ml,e.dayName)):""," ")}}function fc(n,t){if(n&1&&(d(0,"div")(1,"label",132),h(2),x(3,"translate"),c(),k(4,hc,3,3,"span",129),d(5,"select",133)(6,"option",69),h(7),x(8,"translate"),c(),k(9,_c,4,13,"option",70),c()()),n&2){let e,i=u(2);a(2),C("",v(3,5,"workoutBuilder.logEntry.scheduledDayLabel")," "),a(2),p("ngIf",i.isEditableMode),a(),p("disabled",!((e=i.builderForm.get("programIdForLog"))!=null&&e.value)||i.availableScheduledDayIds.length===0),a(2),M(v(8,7,"workoutBuilder.logEntry.scheduledDayPlaceholder")),a(2),p("ngForOf",i.availableScheduledDayInfos)}}function xc(n,t){if(n&1&&(d(0,"option",71),h(1),c()),n&2){let e=t.$implicit;p("value",e.id),a(),C(" ",e.label," ")}}function vc(n,t){if(n&1&&(d(0,"div")(1,"label",92)(2,"span",64),h(3),x(4,"translate"),c(),h(5),c()()),n&2){let e=u(2);a(3),C("",v(4,2,"workoutBuilder.logEntry.locationTypeLabel"),": "),a(2),C(" ",e.getLocationTypeLabel()," ")}}function yc(n,t){if(n&1&&E(0,"option",71),n&2){let e=t.$implicit;p("value",e)}}function bc(n,t){if(n&1){let e=D();d(0,"div")(1,"div",122),E(2,"app-icon",134),d(3,"label",135),h(4),x(5,"translate"),c()(),d(6,"input",136,4),x(8,"translate"),I("focus",function(){w(e);let r=ee(7),o=u(2);return S(o.onLocationNameFocus(r))})("input",function(r){w(e);let o=u(2);return S(o.onLocationNameInput(r))}),c(),d(9,"datalist",137),k(10,yc,1,1,"option",70),c()()}if(n&2){let e=u(2);a(4),C(" ",v(5,4,"workoutBuilder.logEntry.locationLabel")," "),a(2),p("placeholder",v(8,6,"workoutBuilder.logEntry.locationPlaceholder")),ye("list","locationName-list"),a(4),p("ngForOf",e.trackingService.getWorkoutLocations())}}function wc(n,t){if(n&1&&(d(0,"div")(1,"label",92)(2,"span",64),h(3),x(4,"translate"),c(),h(5),c()()),n&2){let e=u(2);a(3),C("",v(4,2,"workoutBuilder.logEntry.locationLabel"),": "),a(2),C(" ",e.getLocationName()," ")}}function Sc(n,t){if(n&1){let e=D();H(0),k(1,rc,3,1,"header",103),d(2,"div",104)(3,"div")(4,"div",105),E(5,"app-icon",106),d(6,"label",107),h(7),x(8,"translate"),c()(),E(9,"input",108),k(10,oc,2,1,"div",59),c(),d(11,"div",109)(12,"div")(13,"label",110),h(14),x(15,"translate"),c(),E(16,"input",111),k(17,ac,2,1,"div",59),c(),d(18,"div")(19,"label",112),h(20),x(21,"translate"),c(),d(22,"input",113),I("change",function(){w(e);let r=u();return S(r.handleEndTimeChange())}),c(),k(23,cc,2,1,"div",59),c()()(),d(24,"div")(25,"label",114),h(26),x(27,"translate"),c(),E(28,"input",115),x(29,"translate"),c(),d(30,"div")(31,"label",116),h(32),x(33,"translate"),c(),d(34,"select",117)(35,"option",69),h(36),x(37,"translate"),c(),k(38,dc,2,2,"option",70),c()(),d(39,"div")(40,"label",118),h(41),x(42,"translate"),c(),d(43,"select",119)(44,"option",69),h(45),x(46,"translate"),c(),k(47,uc,2,2,"option",70),c()(),k(48,gc,10,9,"div",24)(49,fc,10,9,"div",24),d(50,"div")(51,"label",120),h(52),x(53,"translate"),c(),d(54,"select",121)(55,"option",69),h(56),x(57,"translate"),c(),k(58,xc,2,2,"option",70),c()(),k(59,vc,6,4,"div",24)(60,bc,11,8,"div",24)(61,wc,6,4,"div",24),d(62,"div")(63,"div",122),E(64,"app-icon",123),d(65,"label",124),h(66),x(67,"translate"),c()(),E(68,"textarea",125),c(),q()}if(n&2){let e,i,r,o,s,l,m,g,_,f=u();a(),p("ngIf",f.checkIfLogForProgram()),a(6),C(" ",v(8,28,"workoutBuilder.logEntry.dateLabel")," "),a(2),p("ngClass",z(52,or,((e=f.builderForm.get("workoutDate"))==null?null:e.invalid)&&((e=f.builderForm.get("workoutDate"))==null?null:e.touched),!((e=f.builderForm.get("workoutDate"))!=null&&e.invalid&&((e=f.builderForm.get("workoutDate"))!=null&&e.touched)))),a(),p("ngIf",((i=f.builderForm.get("workoutDate"))==null?null:i.invalid)&&(((i=f.builderForm.get("workoutDate"))==null?null:i.dirty)||((i=f.builderForm.get("workoutDate"))==null?null:i.touched))),a(4),M(v(15,30,"workoutBuilder.logEntry.startTimeLabel")),a(2),p("ngClass",z(55,or,((r=f.builderForm.get("startTime"))==null?null:r.invalid)&&((r=f.builderForm.get("startTime"))==null?null:r.touched),!((r=f.builderForm.get("startTime"))!=null&&r.invalid&&((r=f.builderForm.get("startTime"))!=null&&r.touched)))),a(),p("ngIf",((o=f.builderForm.get("startTime"))==null?null:o.invalid)&&(((o=f.builderForm.get("startTime"))==null?null:o.dirty)||((o=f.builderForm.get("startTime"))==null?null:o.touched))),a(3),M(v(21,32,"workoutBuilder.logEntry.endTimeLabel")),a(2),p("ngClass",z(58,or,((s=f.builderForm.get("endTime"))==null?null:s.invalid)&&((s=f.builderForm.get("endTime"))==null?null:s.touched),!((s=f.builderForm.get("endTime"))!=null&&s.invalid&&((s=f.builderForm.get("endTime"))!=null&&s.touched)))),a(),p("ngIf",((l=f.builderForm.get("endTime"))==null?null:l.invalid)&&(((l=f.builderForm.get("endTime"))==null?null:l.dirty)||((l=f.builderForm.get("endTime"))==null?null:l.touched))),a(3),M(v(27,34,"workoutBuilder.logEntry.titleLabel")),a(2),p("placeholder",v(29,36,"workoutBuilder.logEntry.titlePlaceholder")),a(4),M(v(33,38,"workoutBuilder.logEntry.basedOnRoutineLabel")),a(2),p("disabled",(m=f.builderForm.get("programIdForLog"))==null?null:m.value),a(2),C("",v(37,40,"workoutBuilder.logEntry.adHocOption")," "),a(2),p("ngForOf",f.availableRoutines),a(3),M(v(42,42,"workoutBuilder.logEntry.basedOnProgramLabel")),a(4),M(v(46,44,"workoutBuilder.logEntry.adHocProgramOption")),a(2),p("ngForOf",f.availablePrograms),a(),p("ngIf",f.initialProgramIdForLogEdit),a(),p("ngIf",f.initialProgramIdForLogEdit),a(3),C(" ",v(53,46,"workoutBuilder.logEntry.locationTypeLabel")," "),a(4),M(v(57,48,"workoutBuilder.logEntry.locationTypePlaceholder")),a(2),p("ngForOf",f.locationService.allLocationTypes()),a(),p("ngIf",!f.isEditableMode()&&((g=f.builderForm.get("locationId"))==null?null:g.value)),a(),p("ngIf",f.isEditableMode()),a(),p("ngIf",!f.isEditableMode()&&((_=f.builderForm.get("locationName"))==null?null:_.value)),a(5),C(" ",v(67,50,"workoutBuilder.logEntry.notesLabel")," ")}}function Cc(n,t){if(n&1){let e=D();d(0,"button",163),I("click",function(){w(e);let r=u(5);return S(r.removeSelectedExercises())}),h(1),x(2,"translate"),c()}if(n&2){let e=u(5);a(),C(" ",Ce(2,1,"workoutBuilder.superset.removeExercisesButton",de(4,Kr,e.selectedExerciseIndicesForMultipleRemoval().length))," ")}}function kc(n,t){if(n&1){let e=D();d(0,"button",164),I("click",function(){w(e);let r=u(5);return S(r.openSectionSelectionModal())}),E(1,"app-icon",165),d(2,"span"),h(3),x(4,"translate"),c()()}n&2&&(a(3),M(v(4,1,"actionButtons.section")))}function Ec(n,t){if(n&1){let e=D();d(0,"button",166),I("click",function(){w(e);let r=u(5);return S(r.groupSelectedAsSuperset())}),h(1),x(2,"translate"),c()}if(n&2){let e=u(5);a(),C(" ",Ce(2,1,"workoutBuilder.superset.groupButton",de(4,Kr,e.selectedExerciseIndicesForSuperset().length))," ")}}function Ic(n,t){if(n&1){let e=D();d(0,"button",167),I("click",function(){w(e);let r=u(2).index,o=u(3);return S(o.ungroupSuperset(r))}),h(1),x(2,"translate"),c()}if(n&2){let e=u(5);a(),C(" ",Ce(2,1,"workoutBuilder.superset.ungroupButton",de(4,Kr,e.selectedExerciseIndicesForSuperset().length))," ")}}function Tc(n,t){if(n&1&&(d(0,"div",158),k(1,Cc,3,6,"button",159)(2,kc,5,3,"button",160)(3,Ec,3,6,"button",161)(4,Ic,3,6,"button",162),c()),n&2){let e=u(4);a(),p("ngIf",e.canRemoveSelectedExercises()&&e.selectedExerciseIndicesForSuperset().length>=2),a(),p("ngIf",e.selectedExerciseIndicesForSuperset().length>0),a(),p("ngIf",!e.canUngroupSelectedExercises()&&e.selectedExerciseIndicesForSuperset().length>=2),a(),p("ngIf",e.canUngroupSelectedExercises()&&e.selectedExerciseIndicesForSuperset().length>=2)}}function Mc(n,t){if(n&1&&(d(0,"div",168)(1,"span",169),h(2),c()()),n&2){let e=t.ngIf;a(),p("ngStyle",de(2,hl,e.color)),a(),C(" ",e.label," ")}}function Fc(n,t){n&1&&(d(0,"div",180),x(1,"translate"),E(2,"app-icon",181),c()),n&2&&p("title",v(1,1,"workoutBuilder.exercise.dragToReorder"))}function Dc(n,t){if(n&1&&(d(0,"div",182)(1,"label",183),h(2),x(3,"translate"),c(),E(4,"input",184),c()),n&2){let e=u(2).index;a(),p("for","emomTime-"+e),a(),C("",v(3,3,"workoutBuilder.set.time")," (s):"),a(2),p("id","emomTime-"+e)}}function Rc(n,t){if(n&1){let e=D();H(0),d(1,"div",182)(2,"label",185),h(3),x(4,"translate"),c(),d(5,"input",186),I("change",function(r){w(e);let o=u(2).$implicit,s=u(3);return S(s.setSupersetGroupRestValue(o,r))}),c()(),q()}n&2&&(a(3),C(" ",v(4,3,"workoutBuilder.superset.restBetweenRounds")," (s) "),a(2),p("step",15)("min",0))}function Ac(n,t){if(n&1){let e=D();d(0,"div",170,6)(2,"div",171),k(3,Fc,3,3,"div",151),d(4,"div",172)(5,"span",173),h(6),x(7,"translate"),c(),d(8,"strong",174),h(9),c()(),d(10,"div",175)(11,"span",173),h(12),x(13,"translate"),c(),d(14,"strong",176),h(15),x(16,"titlecase"),c(),d(17,"button",177),I("click",function(){w(e);let r=u().$implicit,o=u(3);return S(o.changeSupersetType(r))}),E(18,"app-icon",178),h(19),x(20,"translate"),c()(),k(21,Dc,5,5,"div",179)(22,Rc,6,5,"ng-container",24),c()()}if(n&2){let e,i,r=u(),o=r.$implicit,s=r.index,l=u(3);a(3),p("ngIf",l.isDraggingEnabled(s)),a(3),C(" ",v(7,9,"workoutBuilder.superset.rounds"),": "),a(3),M(l.workoutFormService.getSetsFormArray(o).length),a(3),C("",v(13,11,"workoutBuilder.set.type"),": "),a(2),p("ngClass",l.standarSuperSetOrEmomClass(o,!0)),a(),C(" ",v(16,13,((e=o.get("supersetType"))==null?null:e.value)||"standard")," "),a(4),C(" ",v(20,15,"workoutBuilder.changeType")," "),a(2),p("ngIf",((i=o.get("supersetType"))==null?null:i.value)==="emom"),a(),p("ngIf",l.isSuperSet(s)&&l.isFirstInSuperset(s)&&!l.isEmomExerciseByIndex(s))}}function Bc(n,t){if(n&1&&(d(0,"div",187),h(1),c()),n&2){let e=u().$implicit,i=u(3);p("ngClass",i.standarSuperSetOrEmomClass(e,!1)),a(),C(" ",i.standarSuperSetOrEmomLabel(e)," ")}}function Pc(n,t){n&1&&(d(0,"div",180),x(1,"translate"),E(2,"app-icon",181),c()),n&2&&p("title",v(1,1,"workoutBuilder.exercise.dragToReorder"))}function Oc(n,t){if(n&1){let e=D();d(0,"input",188),x(1,"translate"),I("change",function(r){w(e);let o=u().index,s=u(3);return S(s.toggleExerciseSelection(o,r))}),c()}if(n&2){let e=u().index,i=u(3);p("title",v(1,3,"workoutBuilder.exercise.selectForSuperset"))("id","superset-select-"+e)("checked",i.selectedExerciseIndicesForSuperset().includes(e))}}function Lc(n,t){if(n&1&&(d(0,"span"),h(1),x(2,"translate"),c()),n&2){let e,i=u(4).$implicit;a(),C(" ",v(2,1,"workoutBuilder.set.totalSets")+": "+((e=i.get("sets"))==null||e.value==null?null:e.value.length)," ")}}function Vc(n,t){if(n&1&&(d(0,"span"),h(1),c()),n&2){let e=u(2).ngIf,i=u(6);a(),un("",e.reps," x ",e.weight," ",i.unitService.getWeightUnitSuffix())}}function Nc(n,t){if(n&1&&(d(0,"span"),h(1),x(2,"translate"),c()),n&2){let e=u(2).ngIf;a(),ne("",v(2,2,"workoutBuilder.set.reps"),": ",e.reps)}}function Wc(n,t){if(n&1&&(d(0,"span"),h(1),c()),n&2){let e=u(2).ngIf,i=u(6);a(),ne("",e.weight," ",i.unitService.getWeightUnitSuffix())}}function Gc(n,t){if(n&1&&(H(0),k(1,Vc,2,3,"span",24)(2,Nc,3,4,"span",24)(3,Wc,2,2,"span",24),q()),n&2){let e=u().ngIf;a(),p("ngIf",e.reps&&e.weight),a(),p("ngIf",e.reps&&!e.weight),a(),p("ngIf",!e.reps&&e.weight)}}function Hc(n,t){n&1&&(d(0,"span",200),h(1,"|"),c())}function qc(n,t){if(n&1&&(d(0,"span"),h(1),c()),n&2){let e=u(2).ngIf,i=u(6);a(),ne("",e.distance," ",i.unitService.getDistanceUnitSuffix())}}function jc(n,t){n&1&&(d(0,"span",203),h(1,"/"),c())}function Uc(n,t){if(n&1&&(d(0,"span",204),E(1,"app-icon",205),h(2),c()),n&2){let e=u(2).ngIf,i=u(6);a(2),C(" ",i.workoutUtilsService.formatSecondsToTime(e.duration)," ")}}function $c(n,t){if(n&1&&(H(0),k(1,qc,2,2,"span",24)(2,jc,2,0,"span",201)(3,Uc,3,1,"span",202),q()),n&2){let e=u().ngIf;a(),p("ngIf",e.distance),a(),p("ngIf",e.distance&&e.duration),a(),p("ngIf",e.duration)}}function zc(n,t){n&1&&(d(0,"span",200),h(1,"|"),c())}function Yc(n,t){if(n&1&&(H(0),d(1,"span",204),E(2,"app-icon",206),h(3),c(),q()),n&2){let e=u().ngIf,i=u(6);a(3),C(" ",i.workoutUtilsService.formatSecondsToTime(e.rest)," ")}}function Xc(n,t){if(n&1&&(H(0,null,8),d(2,"p",197),k(3,Lc,3,3,"span",24),d(4,"span",198),h(5," ( "),k(6,Gc,4,3,"ng-container",24)(7,Hc,2,0,"span",199)(8,$c,4,3,"ng-container",24)(9,zc,2,0,"span",199)(10,Yc,4,1,"ng-container",24),h(11," ) "),c()(),q()),n&2){let e=t.ngIf,i=u(3).index,r=u(3);a(3),p("ngIf",!r.isSuperSet(i)),a(3),p("ngIf",e.reps||e.weight),a(),p("ngIf",(e.reps||e.weight)&&(e.distance||e.duration)),a(),p("ngIf",e.distance||e.duration),a(),p("ngIf",(e.reps||e.weight||e.distance||e.duration)&&e.rest),a(),p("ngIf",e.rest)}}function Kc(n,t){if(n&1&&(d(0,"div")(1,"span",207),h(2),c()()),n&2){let e=t.$implicit;a(2),M(e)}}function Zc(n,t){if(n&1&&k(0,Kc,3,1,"div",142),n&2){let e=u(3).$implicit,i=u(3);p("ngForOf",i.getDetailedSetViewInfo(e))}}function Qc(n,t){if(n&1&&(d(0,"div",191)(1,"div",192)(2,"div",193),E(3,"img",194),x(4,"async"),d(5,"h3",195),h(6),c()(),d(7,"div",196),k(8,Xc,12,6,"ng-container",44)(9,Zc,1,1,"ng-template",null,7,Te),c()()()),n&2){let e,i,r,o=ee(10),s=u(2).$implicit,l=u(3);a(3),p("src",v(4,5,l.getIconPath((e=s.get("exerciseId"))==null?null:e.value)),dr),a(2),p("title",(i=s.get("exerciseName"))==null?null:i.value),a(),C(" ",(r=s.get("exerciseName"))==null?null:r.value," "),a(2),p("ngIf",l.getUniformSetValues(s))("ngIfElse",o)}}function Jc(n,t){if(n&1&&(d(0,"div",189),k(1,Qc,11,7,"div",190),c()),n&2){let e=u().$implicit,i=u(3);a(),p("ngIf",i.workoutFormService.getSetsFormArray(e).controls.length>0)}}function ed(n,t){if(n&1&&(d(0,"span",216),h(1),x(2,"translate"),c()),n&2){let e,i=u(2),r=i.$implicit,o=i.index,s=u(3);p("ngClass",s.standarSuperSetOrEmomClass(r,!0)),a(),C(" ",Ce(2,2,"workoutBuilder.superset.exerciseLabel",z(5,xl,(((e=r.get("supersetOrder"))==null?null:e.value)??0)+1,s.getSupersetSize(o)))," ")}}function td(n,t){if(n&1&&(d(0,"div")(1,"label",217),h(2),x(3,"translate"),c(),E(4,"textarea",218),c()),n&2){let e=u(2).index,i=u(3);a(),p("for","exerciseNotes-"+e),a(),C(" ",v(3,4,i.isRoutineMode?"workoutBuilder.exercise.notesLabel":"workoutBuilder.exercise.loggedNotesLabel")," "),a(2),p("id","exerciseNotes-"+e)("readonly",i.isViewMode)}}function id(n,t){n&1&&(d(0,"div",220),h(1),x(2,"translate"),c()),n&2&&(a(),C(" ",v(2,1,"workoutBuilder.set.reps")))}function rd(n,t){n&1&&(d(0,"div",220),h(1),x(2,"translate"),c()),n&2&&(a(),C(" ",v(2,1,"workoutBuilder.set.weight")))}function nd(n,t){n&1&&(d(0,"div",220),h(1),x(2,"translate"),c()),n&2&&(a(),C(" ",v(2,1,"workoutBuilder.set.distance")))}function od(n,t){n&1&&(d(0,"div",220),h(1),x(2,"translate"),c()),n&2&&(a(),C(" ",v(2,1,"workoutBuilder.set.time")," (s)"))}function sd(n,t){n&1&&(d(0,"div",220),h(1),x(2,"translate"),c()),n&2&&(a(),C(" ",v(2,1,"workoutBuilder.set.rest")," (s)"))}function ad(n,t){n&1&&(d(0,"div",220),h(1),x(2,"translate"),c()),n&2&&(a(),C(" ",v(2,1,"workoutBuilder.set.notes")))}function ld(n,t){if(n&1&&(d(0,"div",225)(1,"strong"),h(2),c()()),n&2){let e=u().$implicit,i=u(6);a(2),M(i.workoutUtilsService.formatMetricTarget(e.targetReps,i.metricEnum.reps)||"-")}}function cd(n,t){if(n&1&&(d(0,"div",225)(1,"strong"),h(2),c()()),n&2){let e=u().$implicit,i=u(6);a(2),ne("",i.getSetTargetDisplay(e,i.metricEnum.weight)||"-","",i.getSetTargetDisplay(e,i.metricEnum.weight)!=="-"?" "+i.unitService.getWeightUnitSuffix():"")}}function dd(n,t){if(n&1&&(d(0,"div",225)(1,"strong"),h(2),c()()),n&2){let e=u().$implicit,i=u(6);a(2),ne("",i.getSetTargetDisplay(e,i.metricEnum.distance)||"-","",i.getSetTargetDisplay(e,i.metricEnum.distance)!=="-"?" "+i.unitService.getDistanceUnitSuffix():"")}}function ud(n,t){if(n&1&&(d(0,"div",225)(1,"strong"),h(2),c()()),n&2){let e=u().$implicit,i=u(6);a(2),M(i.getSetTargetDisplay(e,i.metricEnum.duration)||"-")}}function pd(n,t){if(n&1&&(d(0,"div",225)(1,"strong"),h(2),c()()),n&2){let e=u().$implicit,i=u(6);a(2),M(i.getSetTargetDisplay(e,i.metricEnum.rest)||"-")}}function md(n,t){if(n&1){let e=D();H(0),d(1,"div",226),I("click",function(){w(e);let r=u(2).$implicit,o=u(6);return S(o.showNotesModal(r.notes))}),E(2,"app-icon",227),c(),q()}}function gd(n,t){n&1&&(d(0,"span"),h(1,"-"),c())}function hd(n,t){if(n&1&&(d(0,"div",225),k(1,md,3,0,"ng-container",44)(2,gd,2,0,"ng-template",null,9,Te),c()),n&2){let e=ee(3),i=u().$implicit;a(),p("ngIf",i.notes)("ngIfElse",e)}}function _d(n,t){n&1&&E(0,"div",228)}function fd(n,t){if(n&1&&(H(0),d(1,"div",222),h(2),c(),k(3,ld,3,1,"div",223)(4,cd,3,2,"div",223)(5,dd,3,2,"div",223)(6,ud,3,1,"div",223)(7,pd,3,1,"div",223)(8,hd,4,2,"div",223)(9,_d,1,0,"div",224),q()),n&2){let e=t.$implicit,i=t.index,r=t.last,o=u(3).$implicit,s=u(3);a(2),M(i+1),a(),p("ngIf",s.checkIfRepsIsVisible(e)),a(),p("ngIf",s.checkIfWeightIsVisible(e)),a(),p("ngIf",s.checkIfDistanceIsVisible(e)),a(),p("ngIf",s.checkIfDurationIsVisible(e)&&!s.isEmom(o)),a(),p("ngIf",s.checkIfRestIsVisible(e)&&!s.isEmom(o)),a(),p("ngIf",s.checkIfNotesIsVisible(e)),a(),p("ngIf",!r)}}function xd(n,t){if(n&1&&(d(0,"div",219)(1,"div",220),h(2),x(3,"translate"),c(),k(4,id,3,3,"div",221)(5,rd,3,3,"div",221)(6,nd,3,3,"div",221)(7,od,3,3,"div",221)(8,sd,3,3,"div",221)(9,ad,3,3,"div",221)(10,fd,10,8,"ng-container",142),c()),n&2){let e,i=u(2).$implicit,r=u(3);p("ngClass",r.getGridColsForViewExercise(i)),a(2),C(" ",v(3,9,"workoutBuilder.set.header")),a(2),p("ngIf",r.checkIfRepsIsVisible(i)),a(),p("ngIf",r.checkIfWeightIsVisible(i)),a(),p("ngIf",r.checkIfDistanceIsVisible(i)),a(),p("ngIf",r.checkIfDurationIsVisible(i)&&!r.isEmom(i)),a(),p("ngIf",r.checkIfRestIsVisible(i)&&!r.isEmom(i)),a(),p("ngIf",r.checkIfNotesIsVisible(i)),a(),p("ngForOf",(e=i.get("sets"))==null?null:e.value)}}function vd(n,t){if(n&1){let e=D();H(0),d(1,"button",247),I("click",function(){let r=w(e).$implicit,o=u(4).index,s=u(3);return S(s.toggleMetricForAllSets(o,r))}),h(2),x(3,"translate"),c(),q()}if(n&2){let e=t.$implicit,i=u(4).index,r=u(3);a(),p("ngClass",z(4,vl,r.isMetricActiveForAllSets(i,e),!r.isMetricActiveForAllSets(i,e))),a(),C(" ",v(3,2,"metrics."+e)," ")}}function yd(n,t){if(n&1){let e=D();d(0,"div",235)(1,"button",236),I("click",function(r){w(e);let o=u(3).index,s=u(3);return S(s.toggleSetAllPanel(o,r))}),d(2,"span"),h(3),x(4,"translate"),c(),E(5,"app-icon",237),c(),d(6,"div",238,10)(8,"div",239),k(9,vd,4,7,"ng-container",142),c(),d(10,"div",240)(11,"div",109)(12,"div")(13,"label",241),h(14),x(15,"translate"),c(),d(16,"input",242),Q("ngModelChange",function(r){w(e);let o=u(6);return Z(o.repsToSetForAll,r)||(o.repsToSetForAll=r),S(r)}),c()(),d(17,"div")(18,"label",241),h(19),x(20,"translate"),c(),d(21,"input",243),Q("ngModelChange",function(r){w(e);let o=u(6);return Z(o.weightToSetForAll,r)||(o.weightToSetForAll=r),S(r)}),c()(),d(22,"div")(23,"label",241),h(24),x(25,"translate"),c(),d(26,"input",242),Q("ngModelChange",function(r){w(e);let o=u(6);return Z(o.durationToSetForAll,r)||(o.durationToSetForAll=r),S(r)}),c()(),d(27,"div")(28,"label",241),h(29),x(30,"translate"),c(),d(31,"input",244),Q("ngModelChange",function(r){w(e);let o=u(6);return Z(o.distanceToSetForAll,r)||(o.distanceToSetForAll=r),S(r)}),c()(),d(32,"div")(33,"label",241),h(34),x(35,"translate"),c(),d(36,"input",242),Q("ngModelChange",function(r){w(e);let o=u(6);return Z(o.restToSetForAll,r)||(o.restToSetForAll=r),S(r)}),c()()(),d(37,"div",245)(38,"button",246),I("click",function(){w(e);let r=u(3).index,o=u(3);return S(o.applyToAllSets(r))}),h(39),x(40,"translate"),c()()()()()}if(n&2){let e=u(3).index,i=u(3);a(3),M(v(4,30,"setValueForAllSets")),a(2),Je("rotate-180",i.expandedSetAllPanel()===e),a(),zt("max-height",i.expandedSetAllPanel()===e?"500px":"0px"),a(3),p("ngForOf",i.allAvailableMetrics),a(5),M(v(15,32,"metrics.reps")),a(2),K("ngModel",i.repsToSetForAll),p("ngModelOptions",_t(44,ni))("step",i.repsStep),a(3),ne("",v(20,34,"metrics.weight")," (",i.unitService.getWeightUnitSuffix(),")"),a(2),K("ngModel",i.weightToSetForAll),p("ngModelOptions",_t(45,ni))("step",i.weightStep),a(3),C("",v(25,36,"metrics.duration")," (s)"),a(2),K("ngModel",i.durationToSetForAll),p("ngModelOptions",_t(46,ni))("step",i.durationStep),a(3),ne("",v(30,38,"metrics.distance")," (",i.unitService.getDistanceUnitSuffix(),")"),a(2),K("ngModel",i.distanceToSetForAll),p("ngModelOptions",_t(47,ni))("step",i.distanceStep),a(3),C("",v(35,40,"metrics.rest")," (s)"),a(2),K("ngModel",i.restToSetForAll),p("ngModelOptions",_t(48,ni))("step",i.restStep),a(2),p("disabled",i.repsToSetForAll()===null&&i.weightToSetForAll()===null&&i.durationToSetForAll()===null&&i.distanceToSetForAll()===null&&i.restToSetForAll()===null),a(),C(" ",v(40,42,"applyToAllSets")," ")}}function bd(n,t){n&1&&(d(0,"div",256),h(1),x(2,"translate"),c()),n&2&&(a(),M(v(2,1,"workoutBuilder.set.reps")))}function wd(n,t){if(n&1&&(d(0,"div",257),h(1),x(2,"translate"),c()),n&2){let e=u(7);a(),ne("",v(2,2,"workoutBuilder.set.weight")," (",e.unitService.getWeightUnitSuffix(),")")}}function Sd(n,t){if(n&1&&(d(0,"div",257),h(1),x(2,"translate"),c()),n&2){let e=u(7);a(),ne("",v(2,2,"workoutBuilder.set.distance")," (",e.unitService.getDistanceUnitSuffix(),")")}}function Cd(n,t){n&1&&(d(0,"div",256),h(1),x(2,"translate"),c()),n&2&&(a(),C("",v(2,1,"workoutBuilder.set.time")," (s)"))}function kd(n,t){n&1&&(d(0,"div",258),h(1),x(2,"translate"),c()),n&2&&(a(),C("",v(2,1,"workoutBuilder.set.rest")," (s)"))}function Ed(n,t){if(n&1&&(H(0),d(1,"div",248)(2,"div",249),h(3),x(4,"translate"),c(),d(5,"div",250)(6,"div",251),k(7,bd,3,3,"div",252)(8,wd,3,4,"div",253)(9,Sd,3,4,"div",253)(10,Cd,3,3,"div",252)(11,kd,3,3,"div",254),c()(),E(12,"div",255),c(),q()),n&2){let e=t.ngLet,i=u(3).index,r=u(3);a(),p("ngClass",r.getGridClassForExercise(i)),a(2),M(v(4,7,"workoutBuilder.set.header")),a(4),p("ngIf",e[r.metricEnum.reps]),a(),p("ngIf",e[r.metricEnum.weight]),a(),p("ngIf",e[r.metricEnum.distance]),a(),p("ngIf",e[r.metricEnum.duration]),a(),p("ngIf",e[r.metricEnum.rest])}}function Id(n,t){if(n&1&&(d(0,"div",269),h(1),c()),n&2){let e=u(3).$implicit,i=u(6);a(),C(" ",i.getMetricDisplayValue(e,i.metricEnum.reps)," ")}}function Td(n,t){if(n&1&&(d(0,"div",270),h(1),c()),n&2){let e=u(3).$implicit,i=u(6);a(),C(" ",i.getMetricDisplayValue(e,i.metricEnum.weight)," ")}}function Md(n,t){if(n&1&&(d(0,"div",270),h(1),c()),n&2){let e=u(3).$implicit,i=u(6);a(),C(" ",i.getMetricDisplayValue(e,i.metricEnum.distance)," ")}}function Fd(n,t){if(n&1&&(d(0,"div",269),h(1),c()),n&2){let e=u(3).$implicit,i=u(6);a(),C(" ",i.getMetricDisplayValue(e,i.metricEnum.duration)," ")}}function Dd(n,t){if(n&1&&(d(0,"div",271),h(1),c()),n&2){let e=u(3).$implicit,i=u(6);a(),C(" ",i.getMetricDisplayValue(e,i.metricEnum.rest)," ")}}function Rd(n,t){if(n&1){let e=D();H(0),d(1,"div",261),I("click",function(r){w(e);let o=u(2).index,s=u(3).index,l=u(3);return S(l.toggleSetExpansion(s,o,r))}),d(2,"div",262),h(3),c(),d(4,"div",250)(5,"div",251),k(6,Id,2,1,"div",263)(7,Td,2,1,"div",264)(8,Md,2,1,"div",264)(9,Fd,2,1,"div",263)(10,Dd,2,1,"div",265),c()(),d(11,"div",266)(12,"button",267),x(13,"translate"),I("click",function(r){w(e);let o=u(2).index,s=u(3),l=s.$implicit,m=s.index,g=u(3);return S(g.removeSet(l,m,o,r))}),E(14,"app-icon",268),c()()(),q()}if(n&2){let e,i=t.ngLet,r=u(2),o=r.$implicit,s=r.index,l=u(3).index,m=u(3);a(),p("ngClass",de(11,yl,m.getGridClassForExercise(l)))("ngClass",z(13,bl,((e=o.get("type"))==null?null:e.value)==="standard",((e=o.get("type"))==null?null:e.value)==="warmup")),a(2),C(" #",s+1),a(3),p("ngIf",i[m.metricEnum.reps]),a(),p("ngIf",i[m.metricEnum.weight]),a(),p("ngIf",i[m.metricEnum.distance]),a(),p("ngIf",i[m.metricEnum.duration]),a(),p("ngIf",i[m.metricEnum.rest]),a(2),p("title",v(13,9,"workoutBuilder.set.removeSet"))}}function Ad(n,t){if(n&1&&(d(0,"div"),k(1,Rd,15,16,"ng-container",233),c()),n&2){let e=u(4).index,i=u(3);a(),p("ngLet",i.getVisibleColumnsForExercise(e))}}function Bd(n,t){if(n&1){let e=D();d(0,"div",281)(1,"button",267),x(2,"translate"),I("click",function(r){w(e);let o=u(2).index,s=u(3),l=s.$implicit,m=s.index,g=u(3);return S(g.removeSet(l,m,o,r))}),E(3,"app-icon",268),c()()}n&2&&(a(),p("title",v(2,1,"workoutBuilder.set.removeSet")))}function Pd(n,t){if(n&1){let e=D();d(0,"button",287),I("click",function(r){w(e);let o=u(3).index,s=u(3).index;return u(3).promptAddField(s,o),S(r.stopPropagation())}),E(1,"app-icon",288),c()}}function Od(n,t){if(n&1){let e=D();d(0,"div",282)(1,"label",283),h(2),x(3,"translate"),c(),d(4,"button",284),I("click",function(r){w(e);let o=u(2).index,s=u(3).index;return u(3).promptRemoveField(s,o),S(r.stopPropagation())}),E(5,"app-icon",285),c(),k(6,Pd,2,0,"button",286),c()}if(n&2){let e=u(2).index,i=u(3).index,r=u(3);a(2),C("",v(3,2,"workoutBuilder.set.metrics"),":"),a(4),p("ngIf",r.getFieldsForSet(i,e).hidden.length>0)}}function Ld(n,t){if(n&1&&(d(0,"option",71),h(1),c()),n&2){let e=t.$implicit;p("value",e.value),a(),M(e.label)}}function Vd(n,t){if(n&1&&(d(0,"div"),Be(1,292),c()),n&2){let e=u(4).$implicit,i=u(6),r=ee(21);a(),p("ngTemplateOutlet",r)("ngTemplateOutletContext",z(2,dt,e,i.metricEnum.reps))}}function Nd(n,t){if(n&1&&(d(0,"div"),Be(1,292),c()),n&2){let e=u(4).$implicit,i=u(6),r=ee(21);a(),p("ngTemplateOutlet",r)("ngTemplateOutletContext",z(2,dt,e,i.metricEnum.weight))}}function Wd(n,t){if(n&1&&(d(0,"div"),Be(1,292),c()),n&2){let e=u(4).$implicit,i=u(6),r=ee(21);a(),p("ngTemplateOutlet",r)("ngTemplateOutletContext",z(2,dt,e,i.metricEnum.distance))}}function Gd(n,t){if(n&1&&(d(0,"div"),Be(1,292),c()),n&2){let e=u(4).$implicit,i=u(6),r=ee(21);a(),p("ngTemplateOutlet",r)("ngTemplateOutletContext",z(2,dt,e,i.metricEnum.duration))}}function Hd(n,t){if(n&1&&(d(0,"div"),Be(1,292),c()),n&2){let e=u(4),i=e.$implicit,r=e.index,o=u(3).index;u(3);let s=ee(17);a(),p("ngTemplateOutlet",s)("ngTemplateOutletContext",ui(2,Cl,i,o,r))}}function qd(n,t){if(n&1&&(d(0,"div"),Be(1,292),c()),n&2){let e=u(4).$implicit,i=u(6),r=ee(21);a(),p("ngTemplateOutlet",r)("ngTemplateOutletContext",z(2,dt,e,i.metricEnum.rest))}}function jd(n,t){if(n&1&&(H(0)(1,290),k(2,Vd,2,5,"div",291)(3,Nd,2,5,"div",291)(4,Wd,2,5,"div",291)(5,Gd,2,5,"div",291)(6,Hd,2,6,"div",291)(7,qd,2,5,"div",291),q()()),n&2){let e=t.$implicit,i=u(9);a(),p("ngSwitch",e),a(),p("ngSwitchCase",i.metricEnum.reps),a(),p("ngSwitchCase",i.metricEnum.weight),a(),p("ngSwitchCase",i.metricEnum.distance),a(),p("ngSwitchCase",i.metricEnum.duration),a(),p("ngSwitchCase",i.metricEnum.tempo),a(),p("ngSwitchCase",i.metricEnum.rest)}}function Ud(n,t){if(n&1){let e=D();d(0,"div",293)(1,"button",294),I("click",function(r){w(e);let o=u(3).index,s=u(3).index;return u(3).promptAddField(s,o),S(r.stopPropagation())}),E(2,"app-icon",295),c()()}}function $d(n,t){if(n&1&&(H(0),k(1,jd,8,7,"ng-container",142)(2,Ud,3,0,"div",289),q()),n&2){let e=t.ngIf,i=u(5).index,r=u(3);a(),p("ngForOf",e),a(),p("ngIf",r.isGhostFieldVisible(e,i))}}function zd(n,t){if(n&1&&(d(0,"div")(1,"label",217),h(2),x(3,"translate"),c(),E(4,"textarea",218),c()),n&2){let e=u(2).index,i=u(3).index,r=u(3);a(),p("for","setNotes-"+i+e),a(),C(" ",v(3,4,(r.isRoutineMode,"workoutBuilder.set.notes"))," "),a(2),p("id","setNotes-"+i+e)("readonly",r.isViewMode)}}function Yd(n,t){if(n&1){let e=D();d(0,"div",272,12)(2,"div",273),I("click",function(r){w(e);let o=u().index,s=u(3).index,l=u(3);return S(l.toggleSetExpansion(s,o,r))}),h(3),x(4,"translate"),x(5,"translate"),d(6,"div",274),k(7,Bd,4,3,"div",275),c()(),d(8,"div",225),k(9,Od,7,4,"div",276),c(),d(10,"div",277)(11,"div",278)(12,"label",279),h(13),x(14,"translate"),c(),d(15,"select",280),k(16,Ld,2,2,"option",70),c()(),k(17,$d,3,2,"ng-container",24),c(),k(18,zd,5,6,"div",24),c()}if(n&2){let e,i,r,o=u(),s=o.$implicit,l=o.index,m=u(3),g=m.$implicit,_=m.index,f=u(3);p("ngClass",z(20,Sl,!_t(19,wl).includes(((e=s.get("type"))==null?null:e.value)??""),((e=s.get("type"))==null?null:e.value)==="warmup")),a(2),p("ngClass",f.setLabelClass(g)),a(),ne(" #",l+1," ",f.isSuperSet(_)?v(4,13,"workoutBuilder.set.round"):v(5,15,"workoutBuilder.set.set")," "),a(4),p("ngIf",f.isEditableMode()),a(2),p("ngIf",f.isEditableMode()&&!f.isSuperSet(_)),a(3),p("for","setType-exp-"+_+"-"+l),a(),M(v(14,17,"workoutBuilder.set.type")),a(2),p("id","setType-exp-"+_+"-"+l)("disabled",f.isViewMode),a(),p("ngForOf",f.availableSetTypes),a(),p("ngIf",(i=s.get("fieldOrder"))==null?null:i.value),a(),p("ngIf",(r=s.get("notes"))==null?null:r.value)}}function Xd(n,t){if(n&1&&(d(0,"div",259,11),k(2,Ad,2,1,"div",24)(3,Yd,19,23,"div",260),c()),n&2){let e=t.index,i=u(3).index,r=u(3);Je("add-set-animated",r.isNewlyAdded(i,e)),p("formGroupName",e),a(2),p("ngIf",!r.isSetExpanded(i,e)),a(),p("ngIf",r.isSetExpanded(i,e))}}function Kd(n,t){if(n&1){let e=D();d(0,"div",296)(1,"div",297)(2,"label",283),h(3),x(4,"translate"),c(),d(5,"button",298),x(6,"translate"),I("click",function(r){w(e);let o=u(3).$implicit,s=u(3);return S(s.removeLastSet(o,r))}),E(7,"app-icon",285),c(),d(8,"button",299),x(9,"translate"),I("click",function(r){w(e);let o=u(3),s=o.$implicit,l=o.index;return u(3).addSet(s,l),S(r.stopPropagation())}),E(10,"app-icon",288),c()()()}n&2&&(a(3),C("",v(4,3,"workoutBuilder.set.set"),":"),a(2),$t("aria-label",v(6,5,"workoutBuilder.set.removeLastSet")),a(3),$t("aria-label",v(9,7,"workoutBuilder.set.addSet")))}function Zd(n,t){if(n&1&&(d(0,"div",229)(1,"div",230)(2,"div",172)(3,"span",173),h(4),x(5,"translate"),c(),d(6,"strong",174),h(7),c()(),k(8,yd,41,49,"div",231),c(),d(9,"div",232),k(10,Ed,13,9,"ng-container",233)(11,Xd,4,5,"div",234),c(),k(12,Kd,11,9,"div",155),c()),n&2){let e=u(2),i=e.$implicit,r=e.index,o=u(3);a(4),C(" ",v(5,6,"workoutBuilder.set.totalSets"),": "),a(3),M(o.workoutFormService.getSetsFormArray(i).length),a(),p("ngIf",o.isEditableMode()&&o.getExerciseSetsLength(r)>1),a(2),p("ngLet",o.getVisibleColumnsForExercise(r)),a(),p("ngForOf",o.workoutFormService.getSetsFormArray(i).controls),a(),p("ngIf",!o.isSuperSet(r))}}function Qd(n,t){if(n&1){let e=D();d(0,"div",208)(1,"div",209),I("click",function(r){w(e);let o=u().index,s=u(3);return S(s.expandExerciseCard(o,r))}),d(2,"div",210),k(3,ed,3,8,"span",211),d(4,"div",105),E(5,"img",212),x(6,"async"),d(7,"h3",213),h(8),x(9,"translate"),c()()()(),k(10,td,5,6,"div",24)(11,xd,11,11,"div",214)(12,Zd,13,8,"div",215),c()}if(n&2){let e,i,r,o=u(),s=o.$implicit,l=o.index,m=u(3);a(),p("ngClass",de(12,_l,!m.isEditableMode())),a(2),p("ngIf",(e=s.get("supersetId"))==null?null:e.value),a(2),p("src",v(6,8,m.getIconPath((i=s.get("exerciseId"))==null?null:i.value)),dr)("ngClass",z(14,fl,!m.isSetExpanded(l,0),m.isSetExpanded(l,0))),a(3),C(" ",((r=s.get("exerciseName"))==null?null:r.value)||v(9,10,"workoutBuilder.exercise.selectPlaceholder")," "),a(2),p("ngIf",m.expandedExerciseNotes()===l),a(),p("ngIf",m.shouldShowExpandedExercise(l)&&m.isViewMode),a(),p("ngIf",m.shouldShowExpandedExercise(l)&&m.isEditableMode())}}function Jd(n,t){if(n&1){let e=D();d(0,"div",296,13)(2,"div",282)(3,"span",173),h(4),x(5,"translate"),c(),d(6,"button",300),x(7,"translate"),I("click",function(r){w(e);let o=u().$implicit,s=u(3);return S(s.removeRoundFromSuperset(o,r))}),E(8,"app-icon",301),c(),d(9,"button",302),x(10,"translate"),I("click",function(r){w(e);let o=u().$implicit,s=u(3);return S(s.addRoundToSuperset(o,r))}),E(11,"app-icon",303),c()()()}if(n&2){let e=u().$implicit,i=u(3);a(4),C(" ",v(5,4,"workoutBuilder.superset.rounds"),": "),a(2),p("disabled",i.workoutFormService.getSetsFormArray(e).length<=1),$t("aria-label",v(7,6,"workoutBuilder.set.removeLastSet")),a(3),$t("aria-label",v(10,8,"workoutBuilder.set.addSet"))}}function eu(n,t){if(n&1){let e=D();d(0,"app-action-menu",306),I("itemClick",function(r){w(e);let o=u(2),s=o.$implicit,l=o.index,m=u(3);return S(m.handleExerciseActionMenuItemClick(r,l,s))})("closeMenu",function(){w(e);let r=u(5);return S(r.closeExerciseActionMenu())}),c()}if(n&2){let e=u(2),i=e.$implicit,r=e.index,o=u(3);p("items",o.getExerciseActionMenuItems(i))("isVisible",o.isExerciseActionMenuVisible(r))}}function tu(n,t){if(n&1){let e=D();d(0,"div",304)(1,"div",38,14)(3,"button",39),I("click",function(r){w(e);let o=u().index,s=u(3);return S(s.toggleExerciseActionMenu(o,r))}),E(4,"app-icon",40),c(),k(5,eu,1,2,"app-action-menu",305),c()()}if(n&2){let e=u().index,i=u(3);a(5),p("ngIf",i.isExerciseActionMenuVisible(e))}}function iu(n,t){if(n&1){let e=D();H(0),d(1,"div",143,5),I("clickOutside",function(){w(e);let r=u(3);return S(r.closeExerciseActionMenu())}),k(3,Tc,5,4,"div",144),d(4,"div",145),x(5,"translate"),I("click",function(r){let o=w(e).index,s=u(3);return S(s.expandExerciseCard(o,r))})("cdkDragStarted",function(){let r=w(e).index,o=u(3);return S(o.onDragStarted(r))})("cdkDragEnded",function(){w(e);let r=u(3);return S(r.onDragEnded())}),k(6,Mc,3,4,"div",146)(7,Ac,23,17,"div",147),d(8,"div",148),k(9,Bc,2,2,"div",149),d(10,"div",150),k(11,Pc,3,3,"div",151)(12,Oc,2,5,"input",152)(13,Jc,2,1,"div",153),c(),k(14,Qd,13,17,"div",154),c(),k(15,Jd,12,10,"div",155),c(),d(16,"div",156),k(17,tu,6,1,"div",157),c()(),q()}if(n&2){let e=t.$implicit,i=t.index,r=u(3);a(),zt("z-index",r.isExerciseActionMenuVisible(i)?50:"auto"),p("@exerciseExit",void 0)("@.disabled",r.isSaving())("ngClass",r.getExerciseCardClass(e,i)),a(2),p("ngIf",r.isEditableMode()&&r.selectedExerciseIndicesForSuperset().length>=1&&i===r.firstSelectedExerciseIndexForSuperset),a(),p("cdkDragDisabled",!r.isDraggingEnabled(i))("dragHandleSelector",r.shouldShowExpandedExercise(i)?"[data-drag-handle]":void 0)("longPressEnabled",r.isEditableMode()&&!r.shouldShowExpandedExercise(i))("longPressDelay",150)("cdkDragData",e)("cdkDragStartDelay",110)("formGroupName",i)("title",r.isEditableMode()&&!r.shouldShowExpandedExercise(i)?v(5,24,"workoutBuilder.exercise.dragToReorder"):""),a(2),p("ngIf",r.getSectionBadgeInfo(e)),a(),p("ngIf",r.isEditableMode()&&r.isSuperSet(i)&&r.isFirstInSuperset(i)),a(2),p("ngIf",r.isFirstInSuperset(i)),a(2),p("ngIf",r.isStandardExercise(e)&&r.isDraggingEnabled(i)),a(),p("ngIf",(r.isEditableMode()||r.isNewMode)&&!r.isViewMode&&!r.shouldShowExpandedExercise(i)),a(),p("ngIf",!r.shouldShowExpandedExercise(i)),a(),p("ngIf",r.shouldShowExpandedExercise(i)),a(),p("ngIf",r.isEditableMode()&&r.isSuperSet(i)&&r.isLastInSuperset(i)),a(),p("ngClass",de(26,gl,r.isSuperSet(i))),a(),p("ngIf",r.isEditableMode()&&(!r.isSuperSet(i)||r.isSuperSet(i)&&r.isFirstInSuperset(i)))}}function ru(n,t){if(n&1){let e=D();d(0,"div",141),I("cdkDropListDropped",function(r){w(e);let o=u(2);return S(o.onExerciseDrop(r))}),k(1,iu,18,28,"ng-container",142),c()}if(n&2){let e=u(2);p("cdkDropListData",e.workoutExercisesFormArray.controls)("cdkDropListDisabled",!e.isEditableMode())("@.disabled",e.isSaving()),a(),p("ngForOf",e.workoutExercisesFormArray.controls)}}function nu(n,t){if(n&1){let e=D();d(0,"div",307)(1,"p",308),h(2),x(3,"translate"),c(),d(4,"button",309),I("click",function(){w(e);let r=u(2);return S(r.openExerciseSelectionModal())}),h(5),x(6,"translate"),c()()}n&2&&(a(2),M(v(3,2,"workoutBuilder.logEntry.noExercisesForLog")),a(3),C(" + ",v(6,4,"workoutBuilder.logEntry.addFirstExercise")," "))}function ou(n,t){n&1&&(d(0,"div",310),h(1),x(2,"translate"),c()),n&2&&(a(),C(" ",v(2,1,"workoutBuilder.logEntry.noExercisesInRoutine")," "))}function su(n,t){if(n&1&&(d(0,"section"),k(1,ru,2,4,"div",138)(2,nu,7,6,"div",139)(3,ou,3,3,"div",140),c()),n&2){let e,i,r=u();a(),p("ngIf",r.workoutExercisesFormArray.length>0),a(),p("ngIf",r.mode===r.BuilderMode.manualLogEntry&&r.workoutExercisesFormArray.length===0&&!((e=r.builderForm.get("routineIdForLog"))!=null&&e.value)),a(),p("ngIf",r.mode===r.BuilderMode.manualLogEntry&&r.workoutExercisesFormArray.length===0&&((i=r.builderForm.get("routineIdForLog"))==null?null:i.value))}}function au(n,t){n&1&&(d(0,"section",311)(1,"p",312),h(2),x(3,"translate"),c()()),n&2&&(a(2),M(v(3,1,"workoutBuilder.restDayMessage")))}function lu(n,t){if(n&1){let e=D();d(0,"div",317)(1,"button",318),I("click",function(){w(e);let r=u(2);return S(r.openExerciseSelectionModal())}),E(2,"app-icon",319),h(3),x(4,"translate"),c()()}n&2&&(a(3),C(" ",v(4,1,"workoutBuilder.addExerciseButton")," "))}function cu(n,t){if(n&1){let e=D();d(0,"div")(1,"button",320),I("click",function(){w(e);let r=u(2);return S(r.resetTemplateAndStardWizard())}),E(2,"app-icon",321),h(3),x(4,"translate"),c()()}n&2&&(a(3),C(" ",v(4,1,"workoutBuilder.buttons.resetTemplateButton")," "))}function du(n,t){if(n&1){let e=D();d(0,"div")(1,"button",322),I("click",function(){w(e);let r=u(2);return S(r.regenerateWorkout())}),E(2,"app-icon",323),h(3),x(4,"translate"),c()()}n&2&&(a(3),C(" ",v(4,1,"workoutBuilder.buttons.regenButton")," "))}function uu(n,t){if(n&1){let e=D();d(0,"div",313),k(1,lu,5,3,"div",314),d(2,"button",315),I("click",function(){w(e);let r=u();return S(r.onSubmit())}),E(3,"app-icon",316),h(4),x(5,"translate"),c(),k(6,cu,5,3,"div",24)(7,du,5,3,"div",24),c()}if(n&2){let e,i=u();a(),p("ngIf",i.mode!==i.BuilderMode.manualLogEntry&&((e=i.builderForm.get("goal"))==null?null:e.value)!==i.metricEnum.rest),a(),p("disabled",i.isFormInvalid()),a(2),C(" ",v(5,5,i.getSubmitButtonLabel())," "),a(2),p("ngIf",i.isNewMode&&i.isEditableMode()&&i.mode!==i.BuilderMode.manualLogEntry),a(),p("ngIf",i.isGeneratedRoutine())}}function pu(n,t){if(n&1&&(H(0),E(1,"input",327),x(2,"translate"),q()),n&2){let e=u(2);a(),p("placeholder",v(2,2,"workoutBuilder.set.tempoPlaceholder"))("readonly",e.isViewMode)}}function mu(n,t){if(n&1&&(E(0,"input",328),x(1,"translate")),n&2){let e=u(),i=e.exIndex,r=e.setIndex,o=u();p("id","tempo-exp-"+i+"-"+r)("placeholder",v(1,3,"workoutBuilder.set.tempoPlaceholder"))("readonly",o.isViewMode)}}function gu(n,t){if(n&1&&(d(0,"div",324)(1,"label",325)(2,"span"),h(3),x(4,"translate"),c()(),k(5,pu,3,4,"ng-container",24)(6,mu,2,5,"input",326),c()),n&2){let e=t.setControl,i=t.exIndex,r=t.setIndex,o=u();p("formGroup",e),a(),p("for","tempo-exp-"+i+"-"+r),a(2),M(v(4,5,"workoutBuilder.set.tempo")),a(2),p("ngIf",o.mode===o.BuilderMode.routineBuilder),a(),p("ngIf",o.mode===o.BuilderMode.manualLogEntry)}}function hu(n,t){if(n&1){let e=D();d(0,"div",324)(1,"div",329)(2,"button",330),I("shortPress",function(){let r=w(e),o=r.setControl,s=r.field,l=u();return S(l.onShortPressDecrement(o,s))})("longPress",function(){let r=w(e),o=r.setControl,s=r.field,l=u();return S(l.onLongPressDecrement(o,s))})("pressRelease",function(){w(e);let r=u();return S(r.onPressRelease())}),E(3,"app-icon",331),c(),d(4,"div",332)(5,"span",333),I("click",function(){let r,o=w(e),s=o.setControl,l=o.field,m=u();return S(m.focusInput((r=s.get("id"))==null?null:r.value,l))}),h(6),c(),d(7,"input",334,15),I("input",function(r){let o=w(e),s=o.setControl,l=o.field,m=u();return S(m.onExactInputChange(s,l,r))})("focus",function(){let r,o=w(e),s=o.setControl,l=o.field,m=ee(8),g=u();return g.onInputFocus((r=s.get("id"))==null?null:r.value,l),S(g.selectInputText(m))})("blur",function(){let r,o=w(e),s=o.setControl,l=o.field,m=u();return S(m.onInputBlur((r=s.get("id"))==null?null:r.value,l))})("wheel",function(r){let o=w(e),s=o.setControl,l=o.field,m=u();return S(m.onInputWheel(s,l,r))})("touchstart",function(r){w(e);let o=u();return S(o.onInputTouchStart(r))})("touchmove",function(r){let o=w(e),s=o.setControl,l=o.field,m=u();return S(m.onInputTouchMove(s,l,r))}),c()(),d(9,"button",335),I("shortPress",function(){let r=w(e),o=r.setControl,s=r.field,l=u();return S(l.onShortPressIncrement(o,s))})("longPress",function(){let r=w(e),o=r.setControl,s=r.field,l=u();return S(l.onLongPressIncrement(o,s))})("pressRelease",function(){w(e);let r=u();return S(r.onPressRelease())}),E(10,"app-icon",336),c()()()}if(n&2){let e,i,r=t.setControl,o=t.field,s=u();p("formGroup",r),a(5),p("@valueAnimation",s.getExactInputValue(r,o)),a(),C(" ",s.getSetMetricDisplayValue(r,o)||0," "),a(),p("value",s.getExactInputValue(r,o))("readonly",s.isViewMode)("ngClass",de(8,kl,s.isAnimatingSet()===((e=r.get("id"))==null?null:e.value))),ye("data-set-id",(i=r.get("id"))==null?null:i.value)("data-field",o)}}function _u(n,t){if(n&1&&(d(0,"span"),h(1),c()),n&2){let e=u(2);a(),C("(",e.unitService.currentWeightUnit(),")")}}function fu(n,t){n&1&&(d(0,"span"),h(1,"(s)"),c())}function xu(n,t){if(n&1&&(d(0,"span"),h(1),c()),n&2){let e=u(2);a(),C("(",e.unitService.currentDistanceMeasureUnit(),")")}}function vu(n,t){n&1&&(d(0,"span"),h(1,"(s)"),c())}function yu(n,t){if(n&1){let e=D();H(0),d(1,"div",340)(2,"input",341),I("input",function(r){w(e);let o=u(),s=o.setControl,l=o.field,m=u();return S(m.updateTargetField(s,m.getFormControlName(l),"min",r))}),c(),d(3,"span",342),h(4,"-"),c(),d(5,"input",343),I("input",function(r){w(e);let o=u(),s=o.setControl,l=o.field,m=u();return S(m.updateTargetField(s,m.getFormControlName(l),"max",r))}),c()(),q()}if(n&2){let e,i,r=u(),o=r.setControl,s=r.field,l=u();a(2),p("readonly",l.isViewMode)("value",((e=o.get(l.getFormControlName(s)))==null||e.value==null?null:e.value.min)??((e=o.get(l.getFormControlName(s)))==null||e.value==null?null:e.value.minSeconds)),a(3),p("readonly",l.isViewMode)("value",((i=o.get(l.getFormControlName(s)))==null||i.value==null?null:i.value.max)??((i=o.get(l.getFormControlName(s)))==null||i.value==null?null:i.value.maxSeconds))}}function bu(n,t){if(n&1&&(H(0),Be(1,292),q()),n&2){let e=u(),i=e.setControl,r=e.field;u();let o=ee(19);a(),p("ngTemplateOutlet",o)("ngTemplateOutletContext",z(2,dt,i,r))}}function wu(n,t){if(n&1&&(H(0),Be(1,292),q()),n&2){let e=u(),i=e.setControl,r=e.field;u();let o=ee(19);a(),p("ngTemplateOutlet",o)("ngTemplateOutletContext",z(2,dt,i,r))}}function Su(n,t){if(n&1&&(H(0),Be(1,292),q()),n&2){let e=u(),i=e.setControl,r=e.field;u();let o=ee(19);a(),p("ngTemplateOutlet",o)("ngTemplateOutletContext",z(2,dt,i,r))}}function Cu(n,t){if(n&1&&(d(0,"div",344)(1,"span"),h(2),c()()),n&2){let e,i=u(),r=i.setControl,o=i.field,s=u();a(2),M(s.workoutUtilsService.formatMetricTarget((e=r.get(s.getFormControlName(o)))==null?null:e.value,o))}}function ku(n,t){if(n&1&&(d(0,"div",344)(1,"span"),h(2),c()()),n&2){let e,i=u(),r=i.setControl,o=i.field,s=u();a(2),M(s.workoutUtilsService.formatMetricTarget((e=r.get(s.getFormControlName(o)))==null?null:e.value,o))}}function Eu(n,t){if(n&1&&(d(0,"div",344)(1,"span"),h(2),c()()),n&2){let e,i=u(),r=i.setControl,o=i.field,s=u();a(2),M(s.workoutUtilsService.formatMetricTarget((e=r.get(s.getFormControlName(o)))==null?null:e.value,o))}}function Iu(n,t){if(n&1&&(d(0,"div",344)(1,"span"),h(2),c()()),n&2){let e,i=u(),r=i.setControl,o=i.field,s=u();a(2),M(s.workoutUtilsService.formatMetricTarget((e=r.get(s.getFormControlName(o)))==null?null:e.value,o))}}function Tu(n,t){if(n&1&&(H(0),E(1,"input",345),q()),n&2){let e=u().field,i=u();a(),p("formControlName",i.getFormControlName(e))("readonly",i.isViewMode)}}function Mu(n,t){if(n&1){let e=D();d(0,"div",324)(1,"label",283)(2,"span"),h(3),x(4,"translate"),k(5,_u,2,1,"span",24)(6,fu,2,0,"span",24)(7,xu,2,1,"span",24)(8,vu,2,0,"span",24),c(),d(9,"button",337),I("click",function(r){let o=w(e),s=o.setControl,l=o.field,m=u();return S(m.openMetricSchemeModal(s,l,r))}),h(10),x(11,"translate"),c()(),H(12,290),k(13,yu,6,4,"ng-container",291)(14,bu,2,5,"ng-container",291)(15,wu,2,5,"ng-container",291)(16,Su,2,5,"ng-container",291)(17,Cu,3,1,"div",338)(18,ku,3,1,"div",338)(19,Eu,3,1,"div",338)(20,Iu,3,1,"div",338)(21,Tu,2,2,"ng-container",339),q(),c()}if(n&2){let e,i=t.setControl,r=t.field,o=u();p("formGroup",i),a(3),C("",v(4,16,"metrics."+r)," "),a(2),p("ngIf",r===o.metricEnum.weight),a(),p("ngIf",r===o.metricEnum.duration),a(),p("ngIf",r===o.metricEnum.distance),a(),p("ngIf",r===o.metricEnum.rest),a(2),C(" ",v(11,18,"common.edit")," "),a(2),p("ngSwitch",(e=i.get(o.getFormControlName(r)))==null||e.value==null?null:e.value.type),a(),p("ngSwitchCase","range"),a(),p("ngSwitchCase","exact"),a(),p("ngSwitchCase","min_plus"),a(),p("ngSwitchCase","percentage_1rm"),a(),p("ngSwitchCase","bodyweight"),a(),p("ngSwitchCase","max"),a(),p("ngSwitchCase","amrap"),a(),p("ngSwitchCase","max_fraction")}}function Fu(n,t){if(n&1){let e=D();d(0,"app-modal",346),x(1,"translate"),I("isOpenChange",function(){w(e);let r=u();return S(r.notesModalsData.set(null))}),d(2,"div",347)(3,"textarea",348),h(4),c(),d(5,"div",349)(6,"button",350),I("click",function(){w(e);let r=u();return S(r.notesModalsData.set(null))}),E(7,"app-icon",351),h(8),x(9,"translate"),c()()()()}if(n&2){let e=t.ngIf;p("isOpen",!!e)("modalTitle",v(1,5,"workoutBuilder.modal.notesTitle")),a(3),p("disabled",!0),a(),M(e),a(4),C(" ",v(9,7,"workoutBuilder.modal.close")," ")}}function Du(n,t){if(n&1){let e=D();d(0,"app-modal",352),Q("isOpenChange",function(r){w(e);let o=u();return Z(o.isSimpleModalOpen,r)||(o.isSimpleModalOpen=r),S(r)}),E(1,"app-exercise-detail",353),c()}if(n&2){let e=u();p("forceFullScreen",!0),K("isOpen",e.isSimpleModalOpen),p("modalTitle",e.exerciseDetailsName),a(),p("id",e.exerciseDetailsId)("isModal",!0)}}var ns=(r=>(r.routineBuilder="routineBuilder",r.customProgramEntryBuilder="customProgramEntryBuilder",r.manualLogEntry="manualLogEntry",r.newFromLog="newFromLog",r))(ns||{});var rs=class n{context="route";initialRoutine=null;mode="routineBuilder";routineConfirmed=new j;modalClose=new j;fb=y(Ft);router=y(kn);route=y(Cn);workoutService=y(Ri);trainingService=y(Kn);exerciseService=y(lt);unitService=y(Ti);spinnerService=y(Jn);alertService=y(An);modalService=y(nr);toastService=y(At);trackingService=y(Fi);cdr=y(ft);ngZone=y(re);platformId=y(sn);appSettingsService=y(Ii);translate=y(Ve);workoutGeneratorService=y(Ji);subscriptionService=y(Yn);audioService=y(Qn);workoutUtilsService=y(Oi);workoutCategoryService=y(er);workoutFormService=y(Yi);locationService=y(uo);isRoutineMode=!1;availableRepSchemes=[];availableExerciseCategories=[];setRepsInputs;expandedSetElements;expandedExerciseCard;myExerciseInput;isAllExpandedInViewMode=R(!1);expandedExerciseNotes=R(null);exerciseInfoTooltipString=this.translate.instant("workoutBuilder.exerciseInfoTooltip");lastRoutineDuration=0;liveFormAsRoutine;lastLoggedRoutineInfo=R({});builderForm;isEditableMode=R(!1);isEditMode=!1;isNewMode=!0;isViewMode=!1;pastSession=!1;currentRoutineId=null;currentProgramId=null;dateParam=null;currentLogId=null;routeSub;initialRoutineIdForLogEdit=void 0;initialProgramIdForLogEdit=void 0;initialProgramIterationIdForLogEdit=void 0;initialProgramScheduledIdForLogEdit=void 0;subscriptions=new Ae;expandedSetPath=R(null);expandedExercisePath=R(null);lastLogForCurrentRoutine=Me(()=>{let t=this.liveFormAsRoutine(),e=this.lastLoggedRoutineInfo();return!t||!e?null:e[t.id]||null});availableSetTypes=[{value:"standard",label:this.translate.instant("workoutBuilder.setTypes.standard")},{value:"warmup",label:this.translate.instant("workoutBuilder.setTypes.warmup")},{value:"superset",label:this.translate.instant("workoutBuilder.setTypes.superset")},{value:"amrap",label:this.translate.instant("workoutBuilder.setTypes.amrap")},{value:"dropset",label:this.translate.instant("workoutBuilder.setTypes.dropset")},{value:"failure",label:this.translate.instant("workoutBuilder.setTypes.failure")},{value:"myorep",label:this.translate.instant("workoutBuilder.setTypes.myorep")},{value:"restpause",label:this.translate.instant("workoutBuilder.setTypes.restpause")},{value:"custom",label:this.translate.instant("workoutBuilder.setTypes.custom")}];routineGoals=[{value:"hypertrophy",label:"workoutBuilder.goals.hypertrophy"},{value:"strength",label:"workoutBuilder.goals.strength"},{value:"tabata",label:"workoutBuilder.goals.tabata"},{value:"muscularEndurance",label:"workoutBuilder.goals.muscularEndurance"},{value:"cardiovascular Endurance",label:"workoutBuilder.goals.cardiovascularEndurance"},{value:"fatLossBodyComposition",label:"workoutBuilder.goals.fatLoss"},{value:"mobilityFlexibility",label:"workoutBuilder.goals.mobility"},{value:"powerExplosiveness",label:"workoutBuilder.goals.power"},{value:"speedAgility",label:"workoutBuilder.goals.speed"},{value:"balanceCoordination",label:"workoutBuilder.goals.balance"},{value:"skillAcquisition",label:"workoutBuilder.goals.skill"},{value:"rehabilitationInjuryPrevention",label:"workoutBuilder.goals.rehabilitation"},{value:"mentalHealthStressRelief",label:"workoutBuilder.goals.mentalHealth"},{value:"generalHealthLongevity",label:"workoutBuilder.goals.generalHealth"},{value:"sportSpecificPerformance",label:"workoutBuilder.goals.sportSpecific"},{value:"maintenance",label:"workoutBuilder.goals.maintenance"},{value:"rest",label:"workoutBuilder.goals.rest"},{value:"custom",label:"workoutBuilder.goals.custom"}];isExerciseModalOpen=!1;availableExercises=[];availableRoutines=[];availablePrograms=[];availableIterationIds=[];availableScheduledDayIds=[];availableScheduledDayInfos=[];modalSearchTerm=R("");filteredAvailableExercises=Me(()=>{let t=this.modalSearchTerm().trim().toLowerCase();return!t||t.length<2?this.availableExercises:this.availableExercises.filter(e=>e._searchName?.includes(t)||e._searchCategory?.includes(t)||e._searchDescription?.includes(t)||e._searchPrimaryMuscle?.includes(t))});selectedExerciseIndicesForSuperset=R([]);selectedExerciseIndicesForMultipleRemoval=R([]);sanitizer=y(mi);sanitizedDescription="";previousFormState=null;defaultMetricFieldOrder=["reps","weight","distance","duration","rest"];isGeneratorModalOpen=R(!1);isGeneratedRoutine=R(!1);lastGenerationOptions=R(null);constructor(){this.spinnerService.show(),this.builderForm=this.fb.group({id:[""],name:[""],description:[""],goal:[""],primaryCategory:[""],secondaryCategory:[""],tags:[""],notes:[""],targetMuscleGroups:[[]],estimatedDuration:[0],workoutDate:[""],startTime:[""],endTime:[""],overallNotesLog:[""],routineIdForLog:[""],programIdForLog:[""],iterationIdForLog:[""],scheduledDayIdForLog:[""],locationId:[""],locationName:[""],workoutExercises:this.fb.array([]),createdAt:[""],updatedAt:[""]});let t=this.builderForm.valueChanges.pipe(ve(this.builderForm.getRawValue()),ue(e=>{let i=e;return this.mode==="manualLogEntry"&&this.currentLogId?W(A({},i),{workoutLogId:this.currentLogId}):i}));this.liveFormAsRoutine=Yt(t,{initialValue:void 0}),this.builderForm.valueChanges.pipe(Gt(500),ve(this.builderForm.getRawValue()),tn()).subscribe(([e,i])=>{if(this.originalStateSnapshot||(this.originalStateSnapshot=JSON.parse(JSON.stringify(e))),this.history.length>0&&JSON.stringify(e)!==JSON.stringify(i)&&this.canRestore.set(!0),this.isUndoingOrRedoing){this.isUndoingOrRedoing=!1;return}this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1));let r=this.getActionDescription(e,i);this.history.push({state:JSON.parse(JSON.stringify(i)),action:r}),this.historyIndex++,this.history.length>this.MAX_HISTORY_SIZE&&(this.history.shift(),this.historyIndex--),this.updateHistorySignals(),this.refreshFabMenuItems()})}categories=Yt(this.workoutCategoryService.getTranslatedCategories(),{initialValue:[]});isRevertingGoal=!1;ngOnInit(){console.log("WorkoutBuilderComponent mode:",this.mode,"context:",this.context),window.scrollTo(0,0),this.isRoutineMode=this.mode==="routineBuilder"||this.mode==="customProgramEntryBuilder"||this.mode==="newFromLog",this.availableRepSchemes=this.workoutUtilsService.getAvailableRepsSchemes("builder"),this.loadAvailableExercises(),this.subscriptions.add(this.workoutService.routines$.pipe(Se(1)).subscribe(r=>{this.availableRoutines=r})),this.subscriptions.add(this.trainingService.programs$.pipe(Se(1)).subscribe(r=>{this.availablePrograms=r})),this.subscriptions.add(this.trackingService.workoutLogs$.subscribe(r=>{let o={};r.forEach(s=>{s.routineId&&(!o[s.routineId]||s.startTime&&s.startTime>(o[s.routineId].startTime??0))&&(o[s.routineId]={duration:s.durationMinutes??0,name:s.routineName??"",startTime:s.startTime??null})}),this.lastLoggedRoutineInfo.set(o)})),this.routeSub=this.route.data.pipe(Xe(r=>{this.isGeneratedRoutine.set(!1),this.context||(this.context="route"),this.context==="route"&&(this.mode=r.mode||"routineBuilder",this.isNewMode=r.isNew===!0),this.context==="modal"&&window.scrollTo(0,0),console.log(`Builder ngOnInit: Mode=${this.mode}, isNewMode=${this.isNewMode}`),console.log(`isNewMode: ${this.isNewMode}`);let o=this.route.snapshot.queryParamMap.get("openGenerator");o==="true"&&this.isNewMode&&this.mode==="routineBuilder"&&setTimeout(()=>{this.spinnerService.hide(),this.openWorkoutGenerator()},150),this.spinnerService.hide(),this.isRoutineMode&&this.isNewMode&&o!=="true"&&this.mode!=="newFromLog"&&this.showCreationWizard(),this.currentRoutineId=this.route.snapshot.paramMap.get("routineId"),this.currentLogId=this.route.snapshot.paramMap.get("logId"),this.currentProgramId=this.route.snapshot.queryParamMap.get("programId"),this.pastSession=this.route.snapshot.queryParamMap.get("pastSession")?!!this.route.snapshot.queryParamMap.get("pastSession"):!1,this.initialProgramIdForLogEdit=this.currentProgramId,this.initialProgramIterationIdForLogEdit=this.route.snapshot.queryParamMap.get("iterationId"),this.initialProgramScheduledIdForLogEdit=this.route.snapshot.queryParamMap.get("scheduledDayId");let s=this.route.snapshot.queryParamMap.get("date");if(this.dateParam=s?new Date(s):null,this.isViewMode=this.isRoutineMode&&!!this.currentRoutineId&&!this.isNewMode&&this.route.snapshot.routeConfig?.path?.includes("view")||!1,this.isEditMode=!this.isNewMode&&!this.isViewMode||this.mode==="customProgramEntryBuilder",this.isEditableMode.set(this.isEditMode||this.isNewMode),console.log(`Builder isEditableMode: Mode=${this.isEditableMode()}`),this.configureFormValidatorsAndFieldsForMode(),this.expandedSetPath.set(null),this.workoutExercisesFormArray.clear({emitEvent:!1}),this.builderForm.reset(this.getDefaultFormValuesForMode(),{emitEvent:!1}),this.isRoutineMode){if(this.mode==="customProgramEntryBuilder"&&this.initialRoutine)return this.patchFormWithRoutineData(this.initialRoutine),he(null);if(this.currentLogId&&this.isNewMode)return this.trackingService.getWorkoutLogById(this.currentLogId);if(this.currentRoutineId&&(this.isEditMode||this.isViewMode))return this.isNewMode=!1,this.workoutService.getRoutineById(this.currentRoutineId)}else if(this.mode==="manualLogEntry"){if(this.currentLogId&&this.isEditMode)return this.trackingService.getWorkoutLogById(this.currentLogId);if(this.currentRoutineId&&this.isNewMode)return this.workoutService.getRoutineById(this.currentRoutineId)}return he(null)}),li(r=>{r?(this.isEditMode&&(this.originalStateSnapshot=JSON.parse(JSON.stringify(r))),this.mode==="newFromLog"&&this.currentLogId&&this.isNewMode?this.prefillRoutineFormFromLog(r):this.mode==="routineBuilder"?this.patchFormWithRoutineData(r):this.mode==="manualLogEntry"&&this.isEditMode&&this.currentLogId?this.patchFormWithLogData(r):this.mode==="manualLogEntry"&&this.isNewMode&&this.currentRoutineId&&this.prefillLogFormFromRoutine(r)):!this.isNewMode&&(this.currentRoutineId||this.currentLogId)&&(this.toastService.error("Data not found.",0,this.translate.instant("common.error")),this.router.navigate([this.mode==="routineBuilder"?"/workout":"/history/list"])),this.isViewMode?this.expandAllSets():this.toggleFormState(!1),this.refreshFabMenuItems()})).subscribe(),this.subscriptions.add(this.routeSub),this.mode==="manualLogEntry"&&(this.subscriptions.add(this.addRoutineChoiceSubscription()),this.subscriptions.add(this.addProgramIdSubscription()),this.subscriptions.add(this.addScheduledDayIdSubscription())),this.subscriptions.add(this.addGoalSubscription());let t=this.builderForm.get("description")?.valueChanges.subscribe(r=>{this.updateSanitizedDescription(r||"")});this.subscriptions.add(t);let e=this.builderForm.get("sets")?.valueChanges.subscribe(r=>{this.getRoutineDuration()});this.subscriptions.add(e);let i=this.builderForm.get("supersetRounds")?.valueChanges.subscribe(r=>{this.getRoutineDuration()});this.subscriptions.add(i)}retrieveProgramRoutines(t){let e=this.availablePrograms.find(i=>i.id===t);return e?e.schedule&&e.schedule.length>0?e.schedule:[]:[]}retrieveProgramIterationIds(t){let e=this.availablePrograms.find(i=>i.id===t);return e?e.history&&e.history.length>0?e.history.map(i=>i.id).filter(i=>!!i):e.iterationId?[e.iterationId]:[]:[]}retrieveProgramScheduledDayInfo(t){let e=this.availablePrograms.find(r=>r.id===t);if(!e)return[];let i=[];if(e.schedule&&e.schedule.length>0){let r=e.schedule;i.push(...r)}if(e.weeks&&e.weeks.length>0){let r=e.weeks.flatMap(o=>o.schedule?o.schedule:[]);i.push(...r)}return[...new Set(i)]}retrieveProgramScheduledDayIds(t){let e=this.availablePrograms.find(r=>r.id===t);if(!e)return[];let i=[];if(e.schedule&&e.schedule.length>0){let r=e.schedule.map(o=>o.id).filter(o=>!!o);i.push(...r)}if(e.weeks&&e.weeks.length>0){let r=e.weeks.flatMap(o=>o.schedule?o.schedule.map(s=>s.id).filter(s=>!!s):[]);i.push(...r)}return[...new Set(i)]}updateSanitizedDescription(t){this.sanitizedDescription=this.sanitizer.bypassSecurityTrustHtml(t)}getDefaultFormValuesForMode(){let t={createdAt:"",updatedAt:"",name:"",description:"",goal:"",primaryCategory:"",secondaryCategory:"",tags:[],workoutDate:"",startTime:"",endTime:"",overallNotesLog:"",routineIdForLog:"",programIdForLog:"",iterationIdForLog:"",scheduledDayIdForLog:"",workoutExercises:[],notes:"",targetMuscleGroups:[],estimatedDuration:0};if(this.mode==="manualLogEntry"){let e=new Date;return W(A({},t),{goal:"custom",workoutDate:Ee(e,"yyyy-MM-dd"),startTime:Ee(e,"HH:mm"),endTime:Ee(e,"HH:mm")})}return A({},t)}configureFormValidatorsAndFieldsForMode(){let t=this.builderForm.get("name"),e=this.routineGoal,i=this.builderForm.get("workoutDate"),r=this.builderForm.get("startTime"),o=this.builderForm.get("endTime");t?.clearValidators(),e?.clearValidators(),i?.clearValidators(),r?.clearValidators(),o?.clearValidators(),this.isRoutineMode?(t?.setValidators(Fe.required),e?.setValidators(Fe.required),this.workoutExercisesFormArray?.setValidators(Fe.nullValidator)):(i?.setValidators(Fe.required),r?.setValidators(Fe.required),o?.setValidators(Fe.required),this.workoutExercisesFormArray?.setValidators(Fe.required)),this.builderForm.updateValueAndValidity({emitEvent:!1})}toggleFormState(t){t?this.builderForm.disable({emitEvent:!1}):(this.builderForm.enable({emitEvent:!1}),this.isRoutineMode?(this.builderForm.get("workoutDate")?.disable({emitEvent:!1}),this.builderForm.get("startTime")?.disable({emitEvent:!1}),this.builderForm.get("endTime")?.disable({emitEvent:!1}),this.builderForm.get("overallNotesLog")?.disable({emitEvent:!1}),this.builderForm.get("routineIdForLog")?.disable({emitEvent:!1}),this.builderForm.get("programIdForLog")?.disable({emitEvent:!1}),this.builderForm.get("iterationIdForLog")?.disable({emitEvent:!1}),this.builderForm.get("scheduledDayIdForLog")?.disable({emitEvent:!1})):(this.builderForm.get("description")?.disable({emitEvent:!1}),this.routineGoal?.disable({emitEvent:!1}),this.checkIfLogForProgram()&&(this.builderForm.get("programIdForLog")?.disable(),this.builderForm.get("routineIdForLog")?.disable(),this.pastSession?(this.builderForm.get("iterationIdForLog")?.disable(),this.builderForm.get("scheduledDayIdForLog")?.disable()):(this.builderForm.get("iterationIdForLog")?.enable(),this.builderForm.get("scheduledDayIdForLog")?.enable()),this.builderForm.get("workoutDate")?.disable())))}checkIfLogForProgram(){return!!(this.currentProgramId&&this.mode==="manualLogEntry"&&this.dateParam&&this.currentRoutineId)}getLogTitleForProgramEntry(){if(this.checkIfLogForProgram()){let t=this.availablePrograms.find(i=>i.id===this.currentProgramId),e=this.availableRoutines.find(i=>i.id===this.currentRoutineId);if(t)return this.translate.instant("workoutBuilder.logEntry.logForProgramTitle",{programName:t.name,routineName:e?.name||"Ad-hoc"})}return this.translate.instant("workoutBuilder.logEntry.adHocTitle")}get workoutExercisesFormArray(){return this.builderForm.get("workoutExercises")}get routineGoal(){return this.builderForm.get("goal")}addRepsListener(t){let e=this.setupRepsListener(t);this.subscriptions.add(e)}setupRepsListener(t){let e=this.workoutFormService.getSetsFormArray(t),i=e.valueChanges.pipe(Gt(300),ve(null),pt(r=>{let o=e.controls;return ut(o).pipe(pt((s,l)=>{let g=[s.get("targetReps")?.valueChanges].filter(_=>!!_);return g.length===0?he(null):ut(g).pipe(si(),ue(()=>({setIndex:l,exerciseId:t.get("id")?.value})),St((_,f)=>JSON.stringify(_)===JSON.stringify(f)))}))}),wt(r=>r!==null)).subscribe(r=>{console.log(`Reps Range changed on Ex: ${r.exerciseId}, Set: ${r.setIndex}`),this.getRoutineDuration()});this.subscriptions.add(i)}setupDurationListener(t){let e=this.workoutFormService.getSetsFormArray(t),i=e.valueChanges.pipe(Gt(300),ve(null),pt(r=>{let o=e.controls;return ut(o).pipe(pt((s,l)=>{let m=s.get("targetDurationMin"),g=s.get("targetDurationMax"),_=[m?.valueChanges,g?.valueChanges].filter(f=>!!f);return _.length===0?he(null):ut(_).pipe(si(),ue(()=>({setIndex:l,exerciseId:t.get("id")?.value})),St((f,b)=>JSON.stringify(f)===JSON.stringify(b)))}))}),wt(r=>r!==null)).subscribe(r=>{console.log(`Duration Range changed on Ex: ${r.exerciseId}, Set: ${r.setIndex}`),this.getRoutineDuration()});this.subscriptions.add(i)}addDurationListener(t){this.setupDurationListener(t)}addDistanceListener(t){let e=this.workoutFormService.getSetsFormArray(t),i=e.valueChanges.pipe(Gt(300),ve(null),pt(r=>{let o=e.controls;return ut(o).pipe(pt((s,l)=>{let g=[s.get("targetDistance")?.valueChanges].filter(_=>!!_);return g.length===0?he(null):ut(g).pipe(si(),ue(()=>({setIndex:l,exerciseId:t.get("id")?.value})),St((_,f)=>JSON.stringify(_)===JSON.stringify(f)))}))}),wt(r=>r!==null)).subscribe(r=>{console.log(`Distance Range changed on Ex: ${r.exerciseId}, Set: ${r.setIndex}`),this.getRoutineDuration()});this.subscriptions.add(i)}loadAvailableExercises(){this.exerciseService.getExercises().pipe(Se(1),Xe(t=>!t||t.length===0?he([]):this.exerciseService.getTranslatedExerciseList(t))).subscribe(t=>{this.availableExercises=t.filter(e=>!e.isHidden).map(e=>W(A({},e),{_searchName:this.exerciseService.normalizeExerciseNameForSearch(e.name).toLowerCase(),_searchCategory:e.categories?e.categories.map(i=>i.toString().toLowerCase()).join(", "):"",_searchDescription:e.description?e.description.toLowerCase():"",_searchPrimaryMuscle:e.primaryMuscleGroup?e.primaryMuscleGroup.toLowerCase():""}))})}updateExerciseNamesInForm(){let t=new Map(this.availableExercises.map(e=>[e.id,e.name]));this.workoutExercisesFormArray.controls.forEach(e=>{let i=e,r=i.get("exerciseId")?.value,o=i.get("exerciseName")?.value;if(r){let s=t.get(r);s&&s!==o&&i.get("exerciseName")?.patchValue(s,{emitEvent:!1})}})}patchFormWithRoutineData(t){this.builderForm.patchValue(W(A({},t),{name:t.name,description:t.description,goal:t.goal??"",primaryCategory:t.primaryCategory??"",secondaryCategory:t.secondaryCategory??"",tags:this.tagsAsString(t.tags)}),{emitEvent:!1}),this.updateSanitizedDescription(t.description||""),this.workoutExercisesFormArray.clear({emitEvent:!1}),t.workoutExercises&&t.workoutExercises.forEach(e=>{let i=this.workoutFormService.createExerciseFormGroup(e,!0,!1);i.addControl("section",this.fb.control(e.section??null)),i.addControl("restBetweenRounds",this.fb.control(0,{nonNullable:!0})),this.workoutExercisesFormArray.push(i,{emitEvent:!1}),this.addRepsListener(i),this.addDurationListener(i)}),this.workoutExercisesFormArray.controls.forEach(e=>{if(e.get("supersetId")?.value&&e.get("supersetOrder")?.value===0){let o=e.get("sets")?.at(0)}}),this.updateExerciseNamesInForm(),this.builderForm.updateValueAndValidity({emitEvent:!0}),this.builderForm.markAsPristine()}patchFormWithLogData(t){this.initialRoutineIdForLogEdit=t.routineId,this.initialProgramIdForLogEdit=t.programId,this.initialProgramIterationIdForLogEdit=t.iterationId,this.initialProgramScheduledIdForLogEdit=t.scheduledDayId,this.builderForm.patchValue({name:t.routineName||"Logged Workout",workoutDate:Ee(Mi(t.date),"yyyy-MM-dd"),startTime:Ee(new Date(t.startTime),"HH:mm"),endTime:t.endTime?Ee(new Date(t.endTime),"HH:mm"):t.startTime&&t.durationMinutes?Ee(new Date(new Date(t.startTime).getTime()+t.durationMinutes*6e4),"HH:mm"):"",overallNotesLog:t.notes||"",routineIdForLog:t.routineId||"",programIdForLog:t.programId||"",iterationIdForLog:t.iterationId||"",scheduledDayIdForLog:t.scheduledDayId||"",locationId:t.locationId||"",locationName:t.locationName||""}),t.programId&&(this.availableIterationIds=this.retrieveProgramIterationIds(t.programId),this.availableScheduledDayIds=this.retrieveProgramScheduledDayIds(t.programId),this.availableScheduledDayInfos=this.retrieveProgramScheduledDayInfo(t.programId)),this.workoutExercisesFormArray.clear(),t.workoutExercises.forEach(e=>{let i=this.workoutFormService.createExerciseFormGroupFromLoggedExercise(e);this.workoutExercisesFormArray.push(i)}),this.toggleFormState(!1),this.expandedSetPath.set(null),this.builderForm.markAsPristine()}prefillLogFormFromRoutine(t,e=!0){this.currentProgramId&&this.retrieveProgramInfo(this.currentProgramId);let i={name:`${this.translate.instant("workoutBuilder.logEntry.logForProgramTitle",{programName:"",routineName:""})}${t.name}`,routineIdForLog:t.id,iterationIdForLog:this.initialProgramIterationIdForLogEdit,scheduledDayIdForLog:this.initialProgramScheduledIdForLogEdit};if(e){let r=new Date,o=this.dateParam?this.dateParam:r;i.programIdForLog=this.currentProgramId||null,i.workoutDate=Ee(o,"yyyy-MM-dd"),i.startTime=Ee(o,"HH:mm")}this.builderForm.patchValue(i,{emitEvent:!1}),this.workoutExercisesFormArray.clear({emitEvent:!1}),t.workoutExercises.forEach(r=>{let o=this.workoutFormService.createExerciseFormGroup(r,!0,!0,t.workoutExercises);this.workoutExercisesFormArray.push(o,{emitEvent:!1})}),this.toggleFormState(!1),this.builderForm.markAsDirty(),this.builderForm.updateValueAndValidity()}prefillRoutineFormFromLog(t){this.builderForm.patchValue({name:`${t.routineName||this.translate.instant("workoutBuilder.logEntry.adHocTitle")} - As Routine`,description:t.notes||"",goal:this.availableRoutines.find(e=>e.id===t.routineId)?.goal||"custom"},{emitEvent:!1}),this.updateSanitizedDescription(t.notes||""),this.workoutExercisesFormArray.clear({emitEvent:!1}),t.workoutExercises.forEach(e=>{let i=this.createRoutineExerciseFromLoggedExercise(e);this.workoutExercisesFormArray.push(i,{emitEvent:!1})}),this.toggleFormState(!1),this.builderForm.markAsDirty(),this.builderForm.updateValueAndValidity()}createRoutineExerciseFromLoggedExercise(t){let e=this.availableExercises.find(o=>o.id===t.exerciseId),i=t.sets.map(o=>{let s={id:this.workoutService.generateExerciseSetId(),targetReps:o.targetReps??o.repsLogged,targetWeight:o.targetWeight??o.weightLogged??void 0,targetDuration:o.targetDuration??o.durationLogged,targetDistance:o.targetDistance??o.distanceLogged,targetTempo:o.targetTempo,targetRest:o.targetRest??o.restLogged??oe(60),type:o.type,notes:o.notes,fieldOrder:o.fieldOrder};return this.workoutFormService.createSetFormGroup(s,!1)}),r=this.fb.group({id:this.workoutService.generateWorkoutExerciseId(),exerciseId:[t.exerciseId,Fe.required],exerciseName:[e?.name||t.exerciseName],notes:[t.notes||""],sets:this.fb.array(i),supersetId:[t.supersetId||null],supersetOrder:[t.supersetOrder??null]});return this.addRepsListener(r),this.addDurationListener(r),r}scrollExpandedExerciseIntoView(){let t=this.expandedExercisePath();if(t){let e=this.expandedExerciseCard.get(t.exerciseIndex)?.nativeElement;e&&setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100)}}scrollExpandedSetIntoView(){let t=this.expandedSetPath();if(t){let e=this.expandedSetElements.get(t.exerciseIndex)?.nativeElement;if(e){let r=e.querySelectorAll(".set-item")[t.setIndex];if(r){let l=r.getBoundingClientRect().top+window.pageYOffset-120;window.scrollTo({top:l,behavior:"smooth"})}}}}openExerciseSelectionModal(){this.isViewMode||(this.modalSearchTerm.set(""),setTimeout(()=>{this.isExerciseModalOpen=!0},150))}closeExerciseSelectionModal(){this.isExerciseModalOpen=!1}onModalSearchTermChange(t){let e=t.target;this.modalSearchTerm.set(e.value)}selectExercisesFromLibrary(t){t.forEach(e=>{let i=this.isExerciseCardioOnly(e.id),r=[];i?r=["duration","distance","rest"]:r=["reps","weight","rest"];let o={id:this.workoutService.generateExerciseSetId(),type:"standard",fieldOrder:r,targetReps:i?void 0:vt(8),targetWeight:i?void 0:De(10),targetRest:oe(60),targetDuration:i?ke(60):void 0,targetDistance:i?Ue(1):void 0,targetTempo:void 0,notes:void 0},s={id:this.workoutService.generateWorkoutExerciseId(),exerciseId:e.id,exerciseName:e.name,sets:[o],supersetId:null,supersetOrder:null},l;this.isRoutineMode?(l=this.workoutFormService.createExerciseFormGroup(s,!0,!1),this.addRepsListener(l),this.addDurationListener(l),this.addDistanceListener(l),this.workoutExercisesFormArray.push(l)):(l=this.workoutFormService.createExerciseFormGroup(s,!1,!0),this.workoutExercisesFormArray.push(l)),t.indexOf(e)===t.length-1&&this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.ngZone.run(()=>{this.toggleSetExpansion(this.workoutExercisesFormArray.length-1,0)})},0)})}),this.closeExerciseSelectionModal(),this.audioService.playSound("pop")}ngAfterViewInit(){this.expandedSetElements.changes.subscribe(t=>{let e=t.first;e&&this.expandedSetPath()&&setTimeout(()=>{e.nativeElement.scrollIntoView({behavior:"smooth",block:"center"})},100)}),this.previousGoalValue=this.routineGoal?.value}addSet(t,e){if(this.isViewMode)return;let i=t.get("supersetId")?.value;if(i){this.workoutExercisesFormArray.controls.forEach((s,l)=>{let m=s;if(m.get("supersetId")?.value===i){let g=this.workoutFormService.getSetsFormArray(m),_=this.createSyncedSet(g,s);g.push(_)}});let o=this.workoutFormService.getSetsFormArray(t).length-1}else{let r=this.workoutFormService.getSetsFormArray(t),o=this.createSyncedSet(r,t);r.push(o),this.cdr.detectChanges();let s=r.length-1}this.audioService.playSound("correct"),this.handleAnimationForNewSet(e)}isNewlyAdded(t,e){return this.newlyAddedSets.get(t)===e}handleAnimationForNewSet(t){if(t<0)return;let e=this.workoutExercisesFormArray.controls.at(t);if(!e)return;let i=this.workoutFormService.getSetsFormArray(e).controls.length-1;this.newlyAddedSets.set(t,i),setTimeout(()=>{this.newlyAddedSets.delete(t)},500)}createSyncedSet(t,e){if(t.length>0){let i=t.at(t.length-1).value,r=A({},i);return delete r.id,this.workoutFormService.createSetFormGroup(r,this.mode==="manualLogEntry")}else return this.workoutFormService.createSetFormGroup(void 0,this.mode==="manualLogEntry")}removeSet(t,e,i,r){return G(this,null,function*(){if(r?.stopPropagation(),this.isViewMode)return;let o=t.get("supersetId")?.value,s=this.workoutFormService.getSetsFormArray(t),l=!1;if(o)if(s.length===1){let m=yield this.alertService.showConfirm(this.translate.instant("workoutBuilder.alerts.removeLastRoundTitle"),this.translate.instant("workoutBuilder.alerts.removeLastRoundMessage"),this.translate.instant("common.confirm"),this.translate.instant("common.cancel"));if(m&&m.data){this.workoutExercisesFormArray.removeAt(e),l=!0;let g=this.workoutExercisesFormArray.controls.filter(f=>f.get("supersetId")?.value===o),_=g[0]?.get("supersetType")?.value==="emom";g.length<2&&!_?g.length===1&&(g[0].patchValue({supersetId:null,supersetOrder:null,type:"standard"}),this.toastService.info("Superset ungrouped.",2e3)):g.length>0&&this.recalculateSupersetOrders(),this.showUndoWithToast("Exercise removed from superset"),this.audioService.playSound("whoosh")}else return}else this.workoutExercisesFormArray.controls.forEach(m=>{if(m.get("supersetId")?.value===o){let g=this.workoutFormService.getSetsFormArray(m);i<g.length&&g.removeAt(i)}}),l=!0,this.showUndoWithToast(this.translate.instant("workoutBuilder.toasts.roundRemoved")),this.audioService.playSound("whoosh");else if(s.length===1){let m=yield this.alertService.showConfirm(this.translate.instant("compactPlayer.removeLastSet"),this.translate.instant("workoutBuilder.exercise.removeLastSet"),this.translate.instant("workoutBuilder.exercise.remove"),this.translate.instant("common.cancel"));if(m&&m.data)this.workoutExercisesFormArray.removeAt(e),l=!0,this.showUndoWithToast(this.translate.instant("workoutBuilder.toasts.exerciseRemoved")),this.audioService.playSound("whoosh");else return}else s.removeAt(i),l=!0,this.showUndoWithToast(this.translate.instant("workoutBuilder.set.setRemoved")),this.audioService.playSound("whoosh");if(l){let m=this.expandedSetPath();m&&m.exerciseIndex===e&&m.setIndex===i?this.expandedSetPath.set(null):m&&m.exerciseIndex===e&&m.setIndex>i?this.expandedSetPath.set({exerciseIndex:e,setIndex:m.setIndex-1}):m&&m.exerciseIndex>e&&this.expandedSetPath.set({exerciseIndex:m.exerciseIndex-1,setIndex:m.setIndex})}})}showUndoWithToast(t){this.toastService.clearAll(),this.toastService.showWithAction(t,this.translate.instant("common.undo"),()=>this.undoLastChange(),this.translate.instant("common.info"),this.translate.instant("common.actionCompleted"))}toggleSetExpansion(t,e,i){if(this.closeExerciseActionMenu(),i?.stopPropagation(),navigator.vibrate&&navigator.vibrate(50),i&&(i.target instanceof HTMLInputElement||i.target instanceof HTMLTextAreaElement||i.target instanceof HTMLSelectElement))return;let r=this.expandedSetPath();r?.exerciseIndex===t&&r?.setIndex===e?this.expandedSetPath.set(null):(this.expandedSetPath.set({exerciseIndex:t,setIndex:e}),this.cdr.detectChanges(),setTimeout(()=>{this.scrollExpandedSetIntoView();let s=this.expandedSetElements.find((l,m)=>m===e)?.nativeElement},50))}isSetExpanded(t,e){let i=this.expandedSetPath();return i?.exerciseIndex===t&&i?.setIndex===e}collapseExpandedSet(t=!1,e){e&&e.target.closest(".view-mode-controls")||(this.isAllExpandedInViewMode.set(!1),this.expandedSetPath.set(null),e?.stopPropagation())}getFormErrors(t){let e={};return Object.keys(t.controls).forEach(i=>{let r=t.get(i).errors;if(r&&(e[i]=r),t.get(i)instanceof be||t.get(i)instanceof Dn){let o=this.getFormErrors(t.get(i));Object.keys(o).length>0&&(e[i]=o)}}),e}get f(){return this.builderForm.controls}toggleExerciseSelection(t,e){this.isViewMode||(e?.stopPropagation(),this.toggleExerciseSelectionForMultipleRemoval(t,e),this.toggleExerciseSelectionForSuperset(t,e))}toggleExerciseSelectionForMultipleRemoval(t,e){if(this.isViewMode)return;e?.stopPropagation();let i=e.target;this.selectedExerciseIndicesForMultipleRemoval.update(r=>{let o;return i.checked?o=r.includes(t)?r:[...r,t]:o=r.filter(s=>s!==t),o.sort((s,l)=>s-l)})}removeSelectedExercises(){if(this.isViewMode)return;this.selectedExerciseIndicesForMultipleRemoval().sort((e,i)=>i-e).forEach(e=>{this.workoutExercisesFormArray.removeAt(e)}),this.selectedExerciseIndicesForMultipleRemoval.set([]),this.selectedExerciseIndicesForSuperset.set([]),this.recalculateSupersetOrders(),this.expandedSetPath.set(null),this.audioService.playSound("whoosh")}toggleExerciseSelectionForSuperset(t,e){if(this.isViewMode)return;e?.stopPropagation();let i=e.target;this.selectedExerciseIndicesForSuperset.update(r=>{let o;return i.checked?o=r.includes(t)?r:[...r,t]:o=r.filter(s=>s!==t),o.sort((s,l)=>s-l)})}canRemoveSelectedExercises(){return this.selectedExerciseIndicesForMultipleRemoval().length>0&&!this.isViewMode}canUngroupSelectedExercises(){let t=this.selectedExerciseIndicesForSuperset();if(t.length===0)return!1;let e=Array.from(new Set(t.map(r=>this.workoutExercisesFormArray.at(r).get("supersetId")?.value).filter(r=>!!r)));return Array.from(new Set(e)).length===1}recalculateSupersetOrders(){let t=new Map;this.workoutExercisesFormArray.controls.forEach(e=>{let i=e,r=i.get("supersetId")?.value;r?(t.has(r)||t.set(r,[]),t.get(r).push(i)):i.patchValue({supersetOrder:null},{emitEvent:!1})}),t.forEach((e,i)=>{(e[0].get("supersetType")?.value||"standard")==="standard"&&e.length<2?e.forEach(o=>{o.patchValue({supersetId:null,supersetOrder:null})}):(e.sort((o,s)=>this.workoutExercisesFormArray.controls.indexOf(o)-this.workoutExercisesFormArray.controls.indexOf(s)),e.forEach((o,s)=>{o.patchValue({supersetOrder:s},{emitEvent:!1})}))}),this.workoutExercisesFormArray.updateValueAndValidity({emitEvent:!1})}ungroupSuperset(t){if(this.isViewMode)return;let i=this.workoutExercisesFormArray.at(t).get("supersetId")?.value;i&&(this.workoutExercisesFormArray.controls.forEach(r=>{let o=r;o.get("supersetId")?.value===i&&o.patchValue({supersetId:null,supersetOrder:null,supersetType:"standard",emomTimeSeconds:null})}),this.selectedExerciseIndicesForSuperset.set([]),this.toastService.info("Superset ungrouped",3e3,"Ungrouped"))}removeExercise(t,e){if(this.isViewMode)return;e?.stopPropagation();let i=this.workoutExercisesFormArray.at(t),r=i.get("supersetId")?.value,o=i.get("supersetOrder")?.value;if(r){let s=this.workoutExercisesFormArray.controls.map((l,m)=>({ctrl:l,idx:m})).filter(({ctrl:l})=>l.get("supersetId")?.value===r);if(s.length===2){s.sort((l,m)=>m.idx-l.idx).forEach(({idx:l})=>{this.workoutExercisesFormArray.removeAt(l)}),this.selectedExerciseIndicesForSuperset.set([]),this.expandedSetPath.set(null),this.showUndoWithToast("Superset removed (need at least 2 exercises)"),this.audioService.playSound("whoosh");return}}this.workoutExercisesFormArray.removeAt(t),this.selectedExerciseIndicesForSuperset.set([]),r&&this.recalculateSupersetOrders(),this.expandedSetPath.set(null),this.showUndoWithToast("Exercise removed"),this.audioService.playSound("whoosh")}errorMessage=R(null);isSaving=R(!1);onSubmit(){return G(this,null,function*(){if(this.isViewMode){this.toastService.info(this.translate.instant("workoutBuilder.toasts.viewMode"),3e3,this.translate.instant("workoutBuilder.toasts.viewMode"));return}this.isSaving.set(!0),this.cdr.detectChanges(),this.recalculateSupersetOrders();let t=this.mapFormToRoutine();if(!t)return;if(this.isRoutineMode&&t.goal==="tabata"&&this.previousGoalValue!=="tabata"&&!this.enforceTabataSuperset()){this.spinnerService.hide();return}let e=this.isRoutineMode&&this.routineGoal?.value==="rest";if(this.isRoutineMode&&(this.builderForm.get("name")?.invalid||this.routineGoal?.invalid)||this.mode==="manualLogEntry"&&(this.builderForm.get("workoutDate")?.invalid||this.builderForm.get("startTime")?.invalid||this.builderForm.get("endTime")?.invalid)){this.builderForm.markAllAsTouched();let r=[];this.builderForm.get("name")?.invalid&&r.push(this.translate.instant("workoutBuilder.routineBuilder.nameLabel")),this.routineGoal?.invalid&&r.push(this.translate.instant("workoutBuilder.routineBuilder.goalLabel")),this.builderForm.get("workoutDate")?.invalid&&r.push(this.translate.instant("workoutBuilder.logEntry.dateLabel")),this.builderForm.get("startTime")?.invalid&&r.push(this.translate.instant("workoutBuilder.logEntry.startTimeLabel")),this.builderForm.get("endTime")?.invalid&&r.push(this.translate.instant("workoutBuilder.logEntry.endTimeLabel")),this.toastService.error(`${this.translate.instant("workoutBuilder.toasts.validationError",{errors:r.join(", ")})}`,0,this.translate.instant("workoutBuilder.toasts.validationErrorTitle"));return}if(!e&&this.workoutExercisesFormArray.length===0){this.toastService.error(this.mode==="manualLogEntry"?this.translate.instant("workoutBuilder.toasts.noExercisesLogError"):this.translate.instant("workoutBuilder.toasts.noExercisesRoutineError"),0,this.translate.instant("workoutBuilder.toasts.validationErrorTitle"));return}if(!e&&!this.validateSupersetIntegrity()){this.toastService.error(this.translate.instant("workoutBuilder.toasts.invalidSupersetError"),0,this.translate.instant("workoutBuilder.toasts.validationErrorTitle"));return}if(this.builderForm.invalid){this.toastService.error(this.translate.instant("workoutBuilder.toasts.formError"),0,this.translate.instant("workoutBuilder.toasts.validationErrorTitle")),this.builderForm.markAllAsTouched();return}let i=this.builderForm.getRawValue();this.spinnerService.show(this.isNewMode?"Saving...":"Updating...");try{if(this.isRoutineMode){let r=i;if(!r){this.spinnerService.hide(),this.isSaving.set(!1);return}let o;if(this.context==="modal"){this.routineConfirmed.emit(r),this.toastService.success("Routine created!",2e3,"Success"),this.modalClose.emit();return}if(this.isNewMode)o=yield this.workoutService.addRoutine(r);else{let s=this.liveFormAsRoutine()?this.liveFormAsRoutine()?.cardColor:"";r.cardColor=s,this.currentRoutineId&&(r.id=this.currentRoutineId);let l=yield this.workoutService.updateRoutine(r);if(l)o=l;else return}this.toastService.success(`Routine ${this.isNewMode?"created":"updated"}!`,4e3,"Success"),this.isNewMode&&o&&(this.isEditMode=!0,this.isNewMode=!1,this.currentRoutineId=o.id,this.router.navigate(["/workout/routine/edit",o.id],{replaceUrl:!0}))}else{let r=i.workoutDate,o=i.startTime,s=i.endTime,l=`${r}T${o}:00`,m=`${r}T${s}:00`,g=Mi(l).getTime(),_=Mi(m).getTime();_<g&&(_+=1440*60*1e3);let f=i.workoutExercises.map(T=>{let O=T.sets.map(F=>({id:F.id||Y(),exerciseName:T.exerciseName,plannedSetId:F.plannedSetId,exerciseId:T.exerciseId,type:F.type,repsLogged:F.repsLogged,weightLogged:F.weightLogged?De(this.unitService.convertWeight(this.workoutUtilsService.getWeightValue(F.weightLogged),"kg",this.unitService.currentWeightUnit())):void 0,distanceLogged:F.distanceLogged,durationLogged:F.durationLogged,restLogged:F.restLogged,notes:F.notes,targetReps:F.targetReps,targetWeight:F.targetWeight,targetDuration:F.targetDuration,targetTempo:F.targetTempo,targetRest:F.targetRest,rpe:void 0,timestamp:F.timestamp||new Date().toISOString(),fieldOrder:F.fieldOrder}));return{id:T.id,exerciseId:T.exerciseId,exerciseName:T.exerciseName,notes:T.notes,sets:O,supersetId:T.supersetId,supersetOrder:T.supersetOrder,supersetType:T.supersetType||"standard",emomTimeSeconds:T.emomTimeSeconds||null}}),b={date:Ee(new Date(g),"yyyy-MM-dd"),startTime:g,endTime:_,durationMinutes:Math.round(_?(_-g)/6e4:(Date.now()-g)/6e4),routineId:i.routineIdForLog||void 0,routineName:i.routineIdForLog?this.availableRoutines.find(T=>T.id===i.routineIdForLog)?.name||i.name||"Workout from Routine":i.name||this.translate.instant("workoutBuilder.logEntry.adHocTitle"),programId:i.programIdForLog||void 0,notes:i.overallNotesLog,workoutExercises:f,iterationId:i.iterationIdForLog||void 0,scheduledDayId:i.scheduledDayIdForLog||void 0,dayName:"AAAA",locationName:i.locationName??void 0,locationId:i.locationId??void 0};if(this.isEditMode&&this.currentLogId){let T=W(A({},b),{id:this.currentLogId});yield this.trackingService.updateWorkoutLog(T),this.toastService.success(this.translate.instant("workoutBuilder.toasts.logUpdated"),4e3,"Success"),this.router.navigate(["/history/log",this.currentLogId])}else{let T=b,O=yield this.trackingService.addWorkoutLog(T);this.toastService.success(this.translate.instant("workoutBuilder.toasts.logSaved"),4e3,"Success"),this.router.navigate(["/history/log",O.id])}}this.builderForm.markAsPristine()}catch(r){console.error("Error saving:",r),this.toastService.error(`Failed to save: ${r.message||"Unknown error"}`,0,"Save Error")}finally{this.isSaving.set(!1),this.spinnerService.hide()}})}handleCancel(){this.context==="modal"?this.modalClose.emit():this.router.navigate([this.mode==="routineBuilder"?"/workout":"/history/list"])}validateSupersetIntegrity(){let t=this.workoutExercisesFormArray.value,e=new Map;for(let i of t)i.supersetId&&(e.has(i.supersetId)||e.set(i.supersetId,[]),e.get(i.supersetId).push(i));for(let[i,r]of e.entries()){let o=r.length>0&&r[0].supersetType==="emom";if(r.length<2&&!o)return!1;if(r.length>1){let s=r.sort((m,g)=>(m.supersetOrder??1/0)-(g.supersetOrder??1/0));for(let m=0;m<s.length;m++)if(s[m].supersetOrder!==m)return!1;let l=s.map(m=>this.workoutExercisesFormArray.controls.findIndex(g=>g.get("id")?.value===m.id));for(let m=1;m<l.length;m++)if(l[m]!==l[m-1]+1)return!1}}return!0}get firstSelectedExerciseIndexForSuperset(){let t=this.selectedExerciseIndicesForSuperset();return t.length>0?t[0]:null}startCurrentWorkout(){if(this.currentRoutineId){let t=this.workoutService.checkPlayerMode(this.currentRoutineId);this.router.navigate([t,this.currentRoutineId])}else this.toastService.error("Cannot start workout: Routine ID is missing",0,this.translate.instant("common.error"))}enableEditMode(){this.isViewMode&&this.currentRoutineId&&(this.isViewMode=!1,this.isEditMode=!0,this.toggleFormState(!1),this.toastService.info("Edit mode enabled",3e3,"Mode Changed"))}ngOnDestroy(){this.subscriptions.unsubscribe()}getSupersetSize(t){return this.workoutService.getSupersetSize(this.liveFormAsRoutine(),t)}getExerciseCardClass(t,e){let i=t.get("supersetId")?.value,r=t.get("supersetType")?.value==="emom",o=!!i&&!r,s=this.selectedExerciseIndicesForSuperset().includes(e),l=t.get("sets")?.value||[],m=l.length>0&&l.every(P=>P.type==="warmup"),g=t.get("supersetOrder")?.value??0,_=this.getSupersetSize(e),f=g===0,b=g===_-1,T=_===1,O=t.get("section")?.value,F={};if(r?F={"border-teal-500 dark:border-teal-400 border-r-2 border-l-2":!0,"bg-teal-50 dark:bg-teal-900/10":!s,"bg-teal-100 dark:bg-teal-800/50":s,"rounded-xl border-4":T,"mb-2":T||b,"mt-4":T||f,"rounded-t-xl border-x-2 border-t-2":f&&!T,"border-x-2":!f,"rounded-b-xl border-b-2":b||T}:o?F={"border-primary border-r-2 border-l-2":!0,"bg-orange-100 dark:bg-orange-900/10":!s,"bg-orange-200 dark:bg-orange-800/50":s,"rounded-t-xl border-x-2 border-t-2 mt-4":f,"border-x-2":!f,"rounded-b-xl border-b-2 mb-2":b}:F={"border rounded-xl mb-2":!0,"bg-blue-50 dark:bg-blue-900/40 border-blue-400":m&&!s,"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600":!m&&!s&&!O,"mt-5":this.isEditableMode()&&this.selectedExerciseIndicesForSuperset().length>=2&&e===this.firstSelectedExerciseIndexForSuperset},!s&&!r&&!o&&O)switch(F["border-l-4"]=!0,O){case"WarmUp":F["border-amber-500 dark:border-amber-500"]=!0;break;case"MainLift":F["border-red-500 dark:border-red-500"]=!0;break;case"Cardio":F["border-blue-500 dark:border-blue-500"]=!0;break;case"Finisher":F["border-purple-500 dark:border-purple-500"]=!0;break;case"CoolDown":F["border-emerald-500 dark:border-emerald-500"]=!0;break}return s&&(F["ring-2 ring-yellow-400 dark:ring-yellow-300"]=!0),F["shadow-sm"]=!0,F["cursor-grab"]=this.isEditableMode(),F["cursor-pointer"]=!this.isEditableMode(),F}hasAdjacentSupersets(t){let e=this.workoutExercisesFormArray;if(t<0||t>=e.length)return!1;let i=e.at(t).get("supersetId")?.value;if(!i)return!1;if(t>0){let r=e.at(t-1).get("supersetId")?.value;if(r&&r===i)return!0}if(t<e.length-1){let r=e.at(t+1).get("supersetId")?.value;if(r&&r===i)return!0}return!1}isSupersetSpacing(t){if(t<=0)return!1;let e=this.workoutExercisesFormArray.at(t).get("id")?.value,i=this.workoutExercisesFormArray.at(t-1).get("id")?.value;return t>0&&e&&e!==i}handleTrulyCustomExerciseEntry(t=!1){return G(this,null,function*(){let e=[{name:"exerciseName",type:"text",placeholder:this.translate.instant("workoutBuilder.exercise.newCustomExerciseName"),value:"",attributes:{required:!0},label:this.translate.instant("workoutBuilder.exercise.newCustomExerciseName")},{name:"numSets",type:"number",placeholder:this.translate.instant("workoutBuilder.exercise.newCustomExerciseSets"),value:"3",attributes:{min:"1",required:!0},label:this.translate.instant("workoutBuilder.exercise.newCustomExerciseSets")},{name:"equipmentNeeded",type:"text",placeholder:this.translate.instant("workoutBuilder.exercise.newCustomExerciseEquipment"),value:"",attributes:{required:!1},label:this.translate.instant("workoutBuilder.exercise.newCustomExerciseEquipment")},{name:"description",type:"textarea",placeholder:this.translate.instant("workoutBuilder.exercise.newCustomExerciseDescription"),value:"",attributes:{required:!1},label:this.translate.instant("workoutBuilder.exercise.newCustomExerciseDescription")}];t&&this.toastService.error(this.translate.instant("newCustomExerciseInvalidInput"),0,this.translate.instant("common.error"));let i=yield this.alertService.showPromptDialog(this.translate.instant("workoutBuilder.exercise.newCustomExerciseTitle"),this.translate.instant("workoutBuilder.exercise.newCustomExerciseMsg"),e,this.translate.instant("workoutBuilder.exercise.newCustomExerciseBtn"));if(i&&i.exerciseName){let r=String(i.exerciseName).trim(),o=String(i.description).trim(),s=i.numSets?parseInt(String(i.numSets),10):3;if(!r||s<=0){this.toastService.error(this.translate.instant("newCustomExerciseInvalidInput"),0,this.translate.instant("common.error"));return}let l=Array.from({length:s},()=>({id:`custom-adhoc-set-${Y()}`,fieldOrder:["reps","weight","rest"],targetReps:gr(8),targetWeight:De(10),targetDuration:void 0,targetRest:oe(60),type:"standard",notes:""})),g={id:`custom-adhoc-ex-${r.trim().toLowerCase().replace(/\s+/g,"-")}-${Y()}`,name:r,description:o,categories:["custom"],muscleGroups:[],primaryMuscleGroup:void 0,imageUrls:[]};this.closeExerciseSelectionModal(),this.exerciseService.addExercise(g);let _={id:this.workoutService.generateWorkoutExerciseId(),exerciseId:g.id,exerciseName:g.name,sets:l,supersetId:null,supersetOrder:null},f=this.workoutFormService.createExerciseFormGroup(_,!0,!1);this.workoutExercisesFormArray.push(f),this.toggleSetExpansion(this.workoutExercisesFormArray.length-1,0),this.addRepsListener(f),this.addDurationListener(f)}else{if(!i)return;this.handleTrulyCustomExerciseEntry(!0);return}})}getRoutineDuration(){return this.liveFormAsRoutine()?this.workoutService.getEstimatedRoutineDuration(this.liveFormAsRoutine()):0}getTotalExerciseCount(){return this.workoutExercisesFormArray.length}tagsAsString(t){return t?Array.isArray(t)?t.join(", "):typeof t=="string"?t:"":""}mapFormToRoutine(t){let e=t||void 0;if(this.liveFormAsRoutine&&typeof this.liveFormAsRoutine=="function"&&(e=this.liveFormAsRoutine()),!e)return;let i=e.tags,r=[];typeof i=="string"?r=i.split(",").map(b=>b.trim()).filter(b=>b.length>0):Array.isArray(i)&&(r=i);let o=e.workoutExercises||[],s=[],l=new Map,m=[];e.goal!=="rest"&&o.forEach(b=>{let T=!!b.supersetId,O=b.section,F={id:b.id||Y(),exerciseId:b.exerciseId,exerciseName:b.exerciseName,notes:b.notes,sets:b.sets.map(P=>W(A({},P),{targetWeight:this.unitService.convertWeight(P.targetWeight,"kg",this.unitService.currentWeightUnit())??null,targetDuration:P.targetDuration??null,targetDistance:P.targetDistance??null,targetTempo:P.targetTempo??null})),supersetId:b.supersetId||null,supersetOrder:T?b.supersetOrder:null,supersetType:T?b.supersetType||"standard":null,emomTimeSeconds:T&&b.supersetType==="emom"?b.emomTimeSeconds:null,section:O??void 0};m.push(F)});let g=[];return["WarmUp","MainLift","Cardio","Finisher","CoolDown"].forEach(b=>{let T=m.filter(O=>O.section===b);T.length>0&&g.push({id:Y(),type:b,titleI18nKey:`workoutSections.${b}`,exercises:T})}),{id:this.currentRoutineId||Y(),name:e.name,description:e.description,goal:e.goal,primaryCategory:e.primaryCategory||void 0,secondaryCategory:e.secondaryCategory||void 0,tags:Array.isArray(i)?i:typeof i=="string"?i.split(",").map(b=>b.trim()).filter(b=>b.length>0):[],workoutExercises:m,sections:g.length>0?g:void 0,isFavourite:e?.isFavourite,isHidden:e?.isHidden,lastPerformed:e?.lastPerformed,isDisabled:!1,cardColor:e?.cardColor||void 0,createdAt:e?.createdAt||void 0,updatedAt:e?.updatedAt||void 0}}isSuperSet(t){let e=this.liveFormAsRoutine()?.workoutExercises;return!(!e||!e[t]?.supersetId)}getRoutineDropdownActionItems(t,e){let i="rounded text-left px-3 py-1.5 sm:px-4 sm:py-2 font-medium text-gray-600 dark:text-gray-300 hover:bg-primary flex items-center text-sm hover:text-white dark:hover:text-gray-100 dark:hover:text-white",r="rounded text-left px-3 py-1.5 sm:px-4 sm:py-2 font-medium text-gray-600 dark:text-gray-300 hover:bg-red-600 flex items-center text-sm hover:text-gray-100 hover:animate-pulse",o=W(A({},to),{buttonClass:(e==="dropdown"?"w-full ":"")+i,data:{routineId:t}}),s={label:"actionButtons.edit",actionKey:"edit",iconName:"edit",iconClass:"w-8 h-8 mr-2",buttonClass:(e==="dropdown"?"w-full ":"")+i,data:{routineId:t}},l={label:"actionButtons.expand",actionKey:"expand",iconName:"ungroup",iconClass:"w-8 h-8 mr-2",buttonClass:(e==="dropdown"?"w-full ":"")+i,data:{routineId:t}},m={label:"actionButtons.collapse",actionKey:"collapse",iconName:"collapse",iconClass:"w-8 h-8 mr-2",buttonClass:(e==="dropdown"?"w-full ":"")+i,data:{routineId:t}},g={label:"actionButtons.delete",actionKey:"delete",iconName:"trash",iconClass:"w-8 h-8 mr-2",buttonClass:(e==="dropdown"?"w-full ":"")+r,data:{routineId:t}},_={label:"actionButtons.logs",actionKey:"history",iconName:"clock",iconClass:"w-8 h-8 mr-2",buttonClass:(e==="dropdown"?"w-full ":"")+i,data:{routineId:t}},f=[{label:"actionButtons.start",actionKey:"start",iconName:"play",iconClass:"w-8 h-8 mr-2",buttonClass:(e==="dropdown"?"w-full ":"")+i,data:{routineId:t}},{label:"actionButtons.copy",actionKey:"clone",iconName:"copy",iconClass:"w-8 h-8 mr-2",buttonClass:(e==="dropdown"?"w-full ":"")+i,data:{routineId:t}},_];return this.isViewMode&&(f.push(s),this.workoutExercisesFormArray?.length>0&&(f.push(l),f.push(m))),f.push(o),f.push({isDivider:!0}),f.push(g),f}checkEditRoutine(t){return G(this,null,function*(){let e=this.workoutService.getPausedSession();if(this.workoutService.isPausedSession()&&e&&e?.routineId===t){yield this.alertService.showAlert(this.translate.instant("workoutService.alerts.editRunningTitle"),this.translate.instant("workoutService.alerts.editRunningMessage")).then(()=>{});return}this.router.navigate(["/workout/routine/edit",t])})}handleActionMenuItemClick(t,e){let i=this.liveFormAsRoutine()?.id;if(i){switch(t.actionKey){case"start":this.startCurrentWorkout();break;case"edit":this.checkEditRoutine(i);break;case"clone":this.cloneAndEditRoutine(i);break;case"color":this.openColorPicker();break;case"delete":this.deleteRoutine(i);break;case"history":this.goToRoutineHistory(i);break;case"collapse":this.collapseAllSets();break;case"expand":this.expandAllSets();break}this.activeRoutineIdActions.set(null)}}goToRoutineHistory(t){this.router.navigate(["/history/list"],t?{queryParams:{routineId:t}}:{})}activeRoutineIdActions=R(null);toggleActions(t,e){e.stopPropagation(),this.activeRoutineIdActions.update(i=>i===t?null:t)}areActionsVisible(t){return this.activeRoutineIdActions()===t}onCloseActionMenu(){this.activeRoutineIdActions.set(null)}deleteRoutine(t,e){return G(this,null,function*(){let i=yield this.alertService.showConfirm("Delete Routine","Are you sure you want to delete this workout? This action cannot be undone","Delete");if(i&&i.data)try{this.spinnerService.show(),yield this.workoutService.deleteRoutine(t),this.toastService.success("Workout deleted successfully"),this.router.navigate(["/workout"])}catch{this.toastService.error("Failed to delete workout")}finally{this.spinnerService.hide()}})}cloneAndEditRoutine(t,e){return G(this,null,function*(){let i=this.liveFormAsRoutine();if(!i){this.toastService.error("Routine not found for cloning",0,this.translate.instant("common.error"));return}let r=W(A({},structuredClone(i)),{name:i.name+" (Copy)",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});try{this.spinnerService.show(),r=yield this.workoutService.addRoutine(r),this.toastService.success(`Routine "${r.name}" cloned successfully.`,3e3,"Routine Cloned"),this.router.navigate(["/workout/routine/edit",r.id])}catch(o){console.error("Error during routine cloning:",o),this.toastService.error("Failed to clone routine",0,"Clone Failed")}finally{this.spinnerService.hide()}})}checkIfTimedExercise(t){let e=t?.getRawValue();return!e||!e.sets?!1:e.sets.some(i=>i.duration!=null||i.durationMin!=null||i.durationMax!=null||i.durationLogged!=null)}checkIfWeightedExercise(t){return t?.getRawValue()?.sets.some(i=>i.weightLogged||i.targetWeight)}getSetReps(t){let e=t?.getRawValue()?.sets;if(!e||e.length===0)return"";let i=e.map(o=>this.getSetDisplayValue(new be({targetReps:new Xt(o.targetReps||o.repsLogged),repsLogged:new Xt(o.weightLogged)}),"reps")),r=i.join(", ");return i.every(o=>o===i[0])?"x "+i[0]:(r.length>15&&(r=r.substring(0,15)+"..."),r)}openMetricSchemeModal(t,e,i){return G(this,null,function*(){if(i?.stopPropagation(),this.isViewMode||!(t instanceof be))return;let r,o=this.getFormControlNameForBuilder(e);if(!o)return;let s=this.mode==="manualLogEntry";switch(e){case"reps":r=Bn.filter(g=>g.availableInBuilder&&!s||g.availableInLogs);break;case"weight":r=On.filter(g=>g.availableInBuilder&&!s||g.availableInLogs);break;case"duration":r=Vn.filter(g=>g.availableInBuilder&&!s||g.availableInLogs);break;case"distance":r=Wn.filter(g=>g.availableInBuilder&&!s||g.availableInLogs);break;case"rest":r=Hn.filter(g=>g.availableInBuilder&&!s||g.availableInLogs);break;default:this.toastService.error(`Scheme editing is not supported for metric: ${e}`);return}let l=t.get(o)?.value;if(r=r.filter(g=>g.type!==l?.type),r.length===0){this.toastService.error(`No further available schemes found for metric: ${e}. Consider that while logging metric types different from 'exact' are not allowed`,6e3,this.translate.instant("common.error"));return}let m=yield this.workoutUtilsService.showSchemeModal(e,l??null,r);m&&m.data&&(t.get(o)?.patchValue(m.data),t.markAsDirty())})}getFormControlNameForBuilder(t){let e=this.mode==="manualLogEntry";switch(t){case"reps":return e?this.getLoggedControlName("reps"):this.getTargetControlName("reps");case"weight":return e?this.getLoggedControlName("weight"):this.getTargetControlName("weight");case"duration":return e?this.getLoggedControlName("duration"):this.getTargetControlName("duration");case"distance":return e?this.getLoggedControlName("distance"):this.getTargetControlName("distance");case"rest":return e?this.getLoggedControlName("rest"):this.getTargetControlName("rest");default:return""}}isRangeMode(t,e,i){if(i?.stopPropagation(),!(t instanceof be))return!1;let r=e?String(e).charAt(0).toUpperCase()+String(e).slice(1):"",o=t.get(`target${r}Min`),s=t.get(`target${r}Max`);return o?.value!=null||s?.value!=null}getSetDurationDisplay(t){if(!t||!t.value||!t.value.sets||t.value.sets.length===0)return"";if(this.mode==="manualLogEntry"){let i=t.getRawValue().sets.map(r=>r.durationLogged).filter(r=>r!=null&&Ei(r)>0);return i.length>0?i.join("-"):""}else return this.workoutFormService.getSetsFormArray(t).controls.map(o=>this.getSetDisplayValue(o,this.metricEnum.duration)).filter(o=>o&&o!=="-").join(", ")}getSetDisplayValue(t,e){if(!t)return"-";let i={reps:qn,rest:zn,weight:jn,duration:Un,distance:$n,tempo:m=>m?String(m):"-"};if(i[e]){let m=t.get(this.getFormControlName(e))?.value;return i[e](m)||"-"}let r=e?String(e).charAt(0).toUpperCase()+String(e).slice(1):"",o=t.get(`target${r}Min`)?.value,s=t.get(`target${r}Max`)?.value,l=t.get(`target${r}`)?.value;if(o!=null||s!=null){if(o!=null&&s!=null)return o===s?`${o}`:`${o}-${s}`;if(o!=null)return`${o}+`;if(s!=null)return`Up to ${s}`}return l!=null?String(l):"-"}getSetWeightsUsed(t){let e=t?.getRawValue()?.sets;if(!e||e.length===0)return"";let r=e.map(o=>this.getSetDisplayValue(new be({targetWeight:new Xt(o.targetWeight||o.weightLogged),weightLogged:new Xt(o.weightLogged)}),this.metricEnum.weight)).join(", ");return r.length>15&&(r=r.substring(0,15)+"..."),r}getSetdurationLogged(t){return this.currentLogId?t?.getRawValue()?.sets.map(i=>i.durationLogged?this.workoutUtilsService.getDurationValue(i.durationLogged):"").join(" - "):t?.getRawValue()?.sets.map(i=>i.targetDuration?this.workoutUtilsService.getDurationValue(i.targetDuration):"").join(" - ")}getIconPath(t){if(!t)return he(this.exerciseService.getIconPath("default-exercise"));let e=this.liveFormAsRoutine()?.workoutExercises.find(i=>i.exerciseId===t);return e?this.exerciseService.getExerciseById(e.exerciseId).pipe(ue(i=>{if(i){let r=this.exerciseService.determineExerciseIcon(i,i.name);return this.exerciseService.getIconPath(r)}else return this.exerciseService.getIconPath("default-exercise")})):he(this.exerciseService.getIconPath("default-exercise"))}checkTextClass(t,e){if(!t)return"text-gray-700 dark:text-gray-300";let i={type:"exact",value:0},r=0,o=0;if(e==="reps"?(i=t.repsLogged??i,o=hr(t.targetReps)??hr(gr(0))):e==="duration"?(r=Ei(t.durationLogged)??0,o=Ei(t.targetDuration)??0):e==="weight"&&(r=ki(t.weightLogged)??0,o=ki(t.targetWeight)??0),e==="reps"){let s=i.type==="exact"?i.value:i.type==="range"?i.min:void 0;return s&&s>o?"text-green-500 dark:text-green-400":s&&s<o?"text-red-500 dark:text-red-400":"text-gray-800 dark:text-white"}else return r>o?"text-green-500 dark:text-green-400":r<o?"text-red-500 dark:text-red-400":"text-gray-800 dark:text-white"}notesModalsData=R(null);showNotesModal(t){this.notesModalsData.set(t)}expandExerciseCard(t,e){if(this.closeExerciseActionMenu(),e){let l=e.target;if(l.closest("button")||["INPUT","TEXTAREA","SELECT"].includes(l.tagName)||l.closest("#expandedExerciseSetsContainer"))return}if(e?.stopPropagation(),t<0||t>=this.workoutExercisesFormArray.length){this.expandedExercisePath.set(null),this.expandedSetPath.set(null);return}let r=this.workoutExercisesFormArray.at(t).get("supersetId")?.value,o=t;this.expandedExercisePath()?.exerciseIndex===o?(this.expandedExercisePath.set(null),this.expandedSetPath.set(null),this.expandedExerciseNotes.set(null)):(this.expandedExercisePath.set({exerciseIndex:o}),this.scrollExpandedExerciseIntoView())}getSetControl(t,e){return t.get("sets").at(e)}shouldShowExpandedExercise(t){return this.expandedExercisePath()?.exerciseIndex===t}isExerciseDetailModalOpen=R(!1);isSimpleModalOpen=R(!1);exerciseDetailsId="";exerciseDetailsName="";openExerciseModal(t){let i=this.workoutExercisesFormArray.at(t).value;this.exerciseDetailsId=i.exerciseId,this.exerciseDetailsName=i.exerciseName||"Exercise details",this.isSimpleModalOpen.set(!0)}isExerciseCardioOnlyCtrl(t){let e=t.value?.exerciseId;return this.isExerciseCardioOnly(e)}isExerciseCardioOnly(t){if(!t)return!1;let e=this.availableExercises.find(i=>i.id===t);return e&&e.categories?e.categories.find(i=>i==="cardio")!==void 0:!1}handleEndTimeChange(){let t=this.builderForm.get("workoutDate"),e=this.builderForm.get("startTime"),i=this.builderForm.get("endTime");if(!t||!e||!i)return;let r=t.value,o=e.value,s=i.value;if(!r||!o||!s)return;let l=new Date(`${r}T${o}:00`),m=new Date(`${r}T${s}:00`);if(m.getTime()<l.getTime()){m.setDate(m.getDate()+1);let g=Ee(m,"yyyy-MM-dd");t.setValue(g,{emitEvent:!1}),this.toastService.info("End time was before start time, assuming next day")}}retrieveProgramInfo(t){this.availableIterationIds=this.retrieveProgramIterationIds(t),this.availableScheduledDayIds=this.retrieveProgramScheduledDayIds(t),this.availableScheduledDayInfos=this.retrieveProgramScheduledDayInfo(t)}isFormInvalid(){return this.builderForm.invalid||this.workoutExercisesFormArray.length===0&&!(this.isRoutineMode&&this.routineGoal?.value==="rest")}getSetTargetDisplay(t,e){let i=this.workoutUtilsService.getSetTargetDisplay(t,e);return i.length>15&&(i=i.substring(0,15)+"..."),i}changeSupersetType(t){return G(this,null,function*(){if(this.isViewMode||!(t instanceof be))return;let e=t.get("supersetId")?.value;if(!e)return;let r=(t.get("supersetType")?.value||"standard")==="standard"?"emom":"standard",o=60;if(r==="emom"){let s=yield this.alertService.showPromptDialog("Set EMOM Time","Enter the time for each round in seconds (e.g., 60 for EMOM, 120 for E2MOM).",[{name:"emomTime",type:"number",value:"60",attributes:{min:"10",required:!0}}]);if(s&&s.emomTime)o=Number(s.emomTime);else return}else o=null;this.ngZone.run(()=>{this.syncSupersetProperties(e,r,o),this.toastService.success(`Superset converted to ${r.toUpperCase()}`,3e3,"Type Changed"),this.expandedSetPath.set(null),this.toggleSetExpansion(this.getExerciseIndexByControl(t),0),this.cdr.detectChanges()})})}getExerciseIndexByControl(t){return this.workoutExercisesFormArray.controls.findIndex(e=>e===t)}getSetIndexByControl(t){let e=t.parent;return e&&e.controls?e.controls.indexOf(t):-1}getSetPathByControl(t){let e=t.parent;if(!e||!e.controls)return null;let i=e.controls.indexOf(t);if(i===-1)return null;let r=e.parent;if(!r||!r.parent)return null;let o=r.parent.controls.indexOf(r);return o===-1?null:{exerciseIndex:o,setIndex:i}}syncSupersetProperties(t,e,i){this.workoutExercisesFormArray.controls.filter(o=>o.get("supersetId")?.value===t).forEach(o=>{let s=o,l=this.getExerciseIndexByControl(s);s.patchValue({supersetType:e,emomTimeSeconds:i},{emitEvent:!1});let m=0;e==="standard"&&this.isLastInSuperset(l)&&(m=60),this.workoutFormService.getSetsFormArray(s).controls.forEach(_=>{_.patchValue({targetRest:m},{emitEvent:!1})})}),this.cdr.detectChanges()}isFirstInSuperset(t){let e=this.workoutExercisesFormArray.at(t);return e?.get("supersetId")?.value?e.get("supersetOrder")?.value===0:!1}getNumberOfRoundsAsArray(t){let i=this.workoutExercisesFormArray.at(t).get("sets")?.length||0;return Array.from({length:i},(r,o)=>o)}isLastInSuperset(t){let e=this.workoutExercisesFormArray.at(t),i=e?.get("supersetId")?.value,r=this.workoutExercisesFormArray.controls.filter(s=>s.get("supersetId")?.value===i).length,o=e?.get("supersetOrder")?.value;return!i||r==null||o==null?!1:o===r-1}isMiddleInSuperset(t){return this.workoutExercisesFormArray.at(t)?.get("supersetId")?.value?!this.isFirstInSuperset(t)&&!this.isLastInSuperset(t):!1}getIndexOfExercise(t){return this.workoutExercisesFormArray.controls.indexOf(t)}getSupersetGroupExercises(t){let i=this.workoutExercisesFormArray.at(t)?.get("supersetId")?.value;return i?this.workoutExercisesFormArray.controls.filter(r=>r.get("supersetId")?.value===i).sort((r,o)=>(r.get("supersetOrder")?.value??0)-(o.get("supersetOrder")?.value??0)):[]}standarSuperSetOrEmomClass(t,e=!1){let i=" absolute -left-2 top-2 text-white text-xs font-bold rounded-xl shadow-md z-10 transform translate-x-3 -translate-y-6 p-1";return t.get("supersetType")?.value=="emom"?e?"font-bold text-teal-600 dark:text-teal-400":i+" bg-teal-400 text-white":t.get("supersetType")?.value!=="emom"?e?"font-bold text-primary":i+" bg-primary text-white":""}setLabelClass(t){let e="flex text-white text-xl font-bold rounded-xl shadow-lg z-10 p-1 w-full bg-primary justify-between items-center";return t.get("supersetType")?.value=="emom"?e+" bg-teal-400 text-white":t.get("supersetType")?.value!=="emom"?e+" bg-primary text-white":""}standarSuperSetOrEmomLabel(t){let e=t.get("sets")?.value?.length||1,i=e>1?` (${e} ROUNDS)`:` (${e} ROUND)`;return t.get("supersetType")?.value=="emom"?`EMOM${i} - Every ${t.get("emomTimeSeconds")?.value||60}s`:t.get("supersetType")?.value!=="emom"?`SUPERSET${i}`:""}convertToSingleExerciseEmom(t,e){return G(this,null,function*(){if(this.isViewMode||!(t instanceof be))return;e?.stopPropagation();let i=this.getExerciseIndexByControl(t);this.expandExerciseCardIfNeeded(i);let r=[{name:"emomTime",type:"number",label:"Time per Round (s)",value:"60",attributes:{min:"10",required:!0}},{name:"numSets",type:"number",label:"Number of Rounds (Sets)",value:"10",attributes:{min:"1",required:!0}}],o=yield this.alertService.showPromptDialog("Create Single-Exercise EMOM","Configure EMOM parameters.",r);if(!o||!o.emomTime||!o.numSets)return;let s=Number(o.emomTime),l=Number(o.numSets),m=t.get("sets"),g=m.length>0?A({},m.at(0).value):{id:Y(),type:"standard",targetReps:8,targetRest:60};delete g.id,m.clear();for(let _=0;_<l;_++)m.push(this.workoutFormService.createSetFormGroup(g,!1));t.patchValue({supersetId:Y(),supersetOrder:0,supersetType:"emom",emomTimeSeconds:s,type:"superset"})})}isEmomExerciseByIndex(t){let e=this.workoutExercisesFormArray.at(t);return this.isEmom(e)}isEmomExercise(t){let e=this.getExerciseIndexByControl(t),i=this.workoutExercisesFormArray.at(e),r=this.isEmom(i);return t.get("supersetType")?.value==="emom"||r}isStandardSupersetExercise(t){return t.get("supersetType")?.value==="standard"}isStandardExercise(t){return!t.get("supersetId")?.value}isSSExercise(t){return t.get("supersetId")?.value}isLastExercise(t){return t===this.workoutExercisesFormArray.length-1}addRoundToSuperset(t,e){if(e.stopPropagation(),this.isViewMode)return;let i=t.get("supersetId")?.value;if(!i)return;this.workoutExercisesFormArray.controls.forEach(o=>{let s=o;if(s.get("supersetId")?.value===i){let l=this.workoutFormService.getSetsFormArray(s),m=this.createSyncedSet(l,o),g=this._getCorrectRestForSupersetExercise(s);m.get("targetRest")?.setValue(g,{emitEvent:!1}),l.push(m)}}),this.toastService.success("Round added to superset.",2e3);let r=this.getExerciseIndexByControl(t);this.handleAnimationForNewSet(r)}removeRoundFromSuperset(t,e){if(e.stopPropagation(),this.isViewMode)return;let i=t.get("supersetId")?.value;i&&(this.workoutExercisesFormArray.controls.forEach(r=>{let o=r;if(o.get("supersetId")?.value===i){let s=this.workoutFormService.getSetsFormArray(o);s.length>1&&s.removeAt(s.length-1)}}),this.toastService.info("Round removed from superset.",2e3))}isEmom(t){return t.get("supersetType")?.value==="emom"}checkIfWeightIsVisible(t){if(!t)return!1;let e=i=>this.workoutUtilsService.isTargetVisible(i?.targetWeight,"weight");if(typeof t.get=="function"){let i=typeof t.getRawValue=="function"?t.getRawValue():t.value;return i&&Array.isArray(i.sets)?i.sets.some(e):e(i)}return t.sets&&Array.isArray(t.sets)?t.sets.some(e):e(t)}checkIfRepsIsVisible(t){if(!t)return!1;let e=i=>this.workoutUtilsService.isTargetVisible(i?.targetReps,"reps");if(typeof t.get=="function"){let i=typeof t.getRawValue=="function"?t.getRawValue():t.value;return i&&Array.isArray(i.sets)?i.sets.some(e):e(i)}return t.sets&&Array.isArray(t.sets)?t.sets.some(e):e(t)}checkIfDistanceIsVisible(t){if(!t)return!1;let e=i=>this.workoutUtilsService.isTargetVisible(i?.targetDistance,"distance");if(typeof t.get=="function"){let i=typeof t.getRawValue=="function"?t.getRawValue():t.value;return i&&Array.isArray(i.sets)?i.sets.some(e):e(i)}return t.sets&&Array.isArray(t.sets)?t.sets.some(e):e(t)}checkIfDurationIsVisible(t){if(!t)return!1;let e=i=>this.workoutUtilsService.isTargetVisible(i?.targetDuration,"duration");if(typeof t.get=="function"){let i=typeof t.getRawValue=="function"?t.getRawValue():t.value;return i&&Array.isArray(i.sets)?i.sets.some(e):e(i)}return t.sets&&Array.isArray(t.sets)?t.sets.some(e):e(t)}checkIfRestIsVisible(t){if(!t)return!1;let e=i=>this.workoutUtilsService.isTargetVisible(i?.targetRest,"rest");if(typeof t.get=="function"){let i=typeof t.getRawValue=="function"?t.getRawValue():t.value;return i&&Array.isArray(i.sets)?i.sets.some(e):e(i)}return t.sets&&Array.isArray(t.sets)?t.sets.some(e):e(t)}checkIfNotesIsVisible(t){return t?typeof t.get=="function"?typeof t.getRawValue=="function"&&t.getRawValue()&&t.getRawValue().sets?t.getRawValue().sets.some(e=>!!e.notes):!!t.get("notes")?.value:!!t.notes:!1}getGridColsForViewExercise(t){let e=this.isEmom(t),i=1,r=t.get("sets");if(r&&r.length>0){let l=this.getIndexOfExercise(t),m=this.getVisibleColumnsForExercise(l);m.reps&&i++,m.weight&&i++,m.distance&&i++,m.duration&&i++,m.rest&&i++,this.checkIfNotesIsVisible(t)&&i++}let o;switch(i){case 1:o="grid-cols-1";break;case 2:o="grid-cols-2";break;case 3:o="grid-cols-3";break;case 4:o="grid-cols-4";break;case 5:o="grid-cols-5";break;case 6:o="grid-cols-6";break;case 7:o="grid-cols-7";break;default:o="grid-cols-2"}return`grid ${o}`}activeExerciseActionMenu=R(null);isExerciseActionMenuVisible(t){return this.activeExerciseActionMenu()===t}toggleExerciseActionMenu(t,e){e.stopPropagation(),this.activeExerciseActionMenu.update(i=>i===t?null:t)}closeExerciseActionMenu(){this.activeExerciseActionMenu.set(null)}fabMenuItems=[];refreshFabMenuItems(){let t=this.isRoutineMode?!!this.currentRoutineId:!!this.isNewMode,e={label:"fab.start",actionKey:"start",iconName:"play",cssClass:"bg-blue-400 focus:ring-blue-600",isPremium:!1};if(this.isEditableMode()){if(this.fabMenuItems=[{label:"fab.add_exercise",actionKey:"add_exercise",iconName:"plus-circle",cssClass:"bg-green-500 focus:ring-green-400",isPremium:!1},{label:this.mode==="routineBuilder"?"fab.save_routine":this.isNewMode?"fab.save_log":"fab.save_log_changes",actionKey:"save_routine",iconName:"save",cssClass:"bg-primary focus:ring-primary-light",isPremium:!1}],this.canRestore()&&this.fabMenuItems.unshift({label:"fab.restore",actionKey:"restore",iconName:"restore",cssClass:"bg-red-500 focus:ring-red-400"}),this.canRedo()){let r=this.nextRedoAction;this.fabMenuItems.unshift({label:this.translate.instant("fab.redo")+(r?` (${r})`:""),actionKey:"redo",iconName:"redo",cssClass:"bg-blue-500 focus:ring-blue-400"})}if(this.canUndo()){let r=this.nextUndoAction;this.fabMenuItems.unshift({label:this.translate.instant("fab.undo")+(r?` (${r})`:""),actionKey:"undo",iconName:"undo",cssClass:"bg-yellow-500 focus:ring-yellow-400"})}this.fabMenuItems.unshift({label:"workoutBuilder.buttons.resetTemplateButton",actionKey:"template_wizard",iconName:"restore",cssClass:"bg-amber-500 focus:ring-amber-400"}),this.isGeneratedRoutine()&&this.fabMenuItems.unshift({label:"fab.regenerate",actionKey:"regenerate_workout",iconName:"random",cssClass:"bg-purple-500 focus:ring-purple-400"}),this.subscriptionService.canAccess("workout_generator")&&this.mode!=="manualLogEntry"&&this.fabMenuItems.unshift({label:"fab.generate",actionKey:"generate_workout",iconName:"magic-wand",cssClass:"bg-purple-500 focus:ring-purple-400",isPremium:!0});let i=this.liveFormAsRoutine()?.id||"";i&&this.workoutService.getRoutineById(i).pipe(Se(1)).subscribe(r=>{r&&this.fabMenuItems.push(e)})}else this.fabMenuItems=[{label:"fab.start",actionKey:"start",iconName:"play",cssClass:"bg-blue-400 focus:ring-blue-600",isPremium:!1},{label:"fab.edit",actionKey:"edit",iconName:"edit",cssClass:"bg-primary focus:ring-primary-light",isPremium:!1}]}onFabAction(t){switch(t){case"add_exercise":this.openExerciseSelectionModal();break;case"save_routine":this.onSubmit();break;case"template_wizard":this.resetTemplateAndStardWizard();break;case"start":this.startCurrentWorkout();break;case"edit":let e=this.liveFormAsRoutine()?.id;if(!e)return;this.checkEditRoutine(e);break;case"undo":this.undoLastChange();break;case"redo":this.redoLastChange();break;case"restore":this.restoreOriginal();break;case"generate_workout":this.openWorkoutGenerator();break;case"regenerate_workout":this.regenerateWorkout();break}}regenerateWorkout(){return G(this,null,function*(){let t=this.lastGenerationOptions();t?yield this.handleWorkoutGeneration(t):yield this.handleWorkoutGeneration("quick")})}resetTemplateAndStardWizard(){this.showCreationWizard()}isSwitchExerciseModalOpen=R(!1);exerciseToSwitchIndex=R(null);isShowingSimilarInSwitchModal=R(!1);exercisesForSwitchModal=R([]);handleExerciseActionMenuItemClick(t,e,i){switch(t.actionKey){case"ungroup":this.ungroupSuperset(e);break;case"make_emom":this.convertToSingleExerciseEmom(i);break;case"switchExercise":this.openSwitchExerciseModal(e);break;case"fill_latest":this.fillWithLatestPerformanceData(e);break;case"info":this.openExerciseModal(e);break;case"toggle_notes":this.toggleExerciseNotes(e);break;case"remove":this.removeExercise(e);break}this.closeExerciseActionMenu()}getExerciseActionMenuItems(t){let e=[],i=!!t.get("supersetId")?.value,r=this.getExerciseIndexByControl(t),o=this.isFirstInSuperset(r);return i?o&&e.push({label:this.translate.instant("actionButtons.ungroup"),buttonClass:"bg-purple-500 text-white hover:bg-purple-700",actionKey:"ungroup",iconName:"ungroup"}):(e.push({label:this.translate.instant("workoutBuilder.exercise.exerciseInfo"),buttonClass:"bg-blue-500 text-white hover:bg-blue-700 text-left",actionKey:"info",iconName:"info"}),e.push({label:this.translate.instant("workoutBuilder.exercise.fillWithLast"),buttonClass:"bg-green-500 text-white hover:bg-green-700 text-left",actionKey:"fill_latest",iconName:"task"}),e.push({label:this.translate.instant("workoutBuilder.exercise.toggleNotes"),buttonClass:"bg-yellow-500 text-gray-500 hover:bg-yellow-700 rounded-full focus:outline-none flex items-center p-2 transition-colors",actionKey:"toggle_notes",iconName:"clipboard-list"}),e.push({label:"Make EMOM",buttonClass:"bg-teal-500 text-white hover:bg-teal-700",actionKey:"make_emom",iconName:"clock"}),e.push({label:"Switch Exercise",buttonClass:"bg-blue-500 text-white hover:bg-blue-700",actionKey:"switchExercise",iconName:"change"})),e.push({label:this.translate.instant("workoutBuilder.exercise.remove"),buttonClass:"bg-red-500 text-white hover:bg-red-700",actionKey:"remove",iconName:"trash"}),e}openSwitchExerciseModal(t,e){e?.stopPropagation(),this.exerciseToSwitchIndex.set(t),this.exercisesForSwitchModal.set(this.availableExercises),this.isShowingSimilarInSwitchModal.set(!1),this.modalSearchTerm.set(""),this.isSwitchExerciseModalOpen.set(!0)}closeSwitchExerciseModal(){this.isSwitchExerciseModalOpen.set(!1),this.exerciseToSwitchIndex.set(null)}findAndShowSimilarExercises(){return G(this,null,function*(){let t=this.exerciseToSwitchIndex();if(t===null)return;let i=this.workoutExercisesFormArray.at(t).get("exerciseId")?.value,r=this.availableExercises.find(o=>o.id===i);if(!r){this.toastService.error("Could not find the base exercise to search for similar ones.");return}try{let o=yield xe(this.exerciseService.getSimilarExercises(r,12));o.length===0&&this.toastService.info("No similar exercises found."),this.exercisesForSwitchModal.set(o),this.isShowingSimilarInSwitchModal.set(!0)}catch{this.toastService.error("Failed to load similar exercises.")}})}onBackToSearchFromSimilar(){this.exercisesForSwitchModal.set(this.availableExercises),this.isShowingSimilarInSwitchModal.set(!1),this.modalSearchTerm.set("")}handleExerciseSwitch(t){let e=this.exerciseToSwitchIndex();if(e===null)return;let i=this.workoutExercisesFormArray.at(e),r=i.get("exerciseName")?.value;i.patchValue({exerciseId:t.id,exerciseName:t.name}),this.toastService.success(`Switched '${r}' to '${t.name}'.`),this.closeSwitchExerciseModal()}expandAllSets(){this.isViewMode&&(this.expandedSetPath.set(null),this.isAllExpandedInViewMode.set(!0))}collapseAllSets(){this.isViewMode&&(this.expandedSetPath.set(null),this.isAllExpandedInViewMode.set(!1))}removeLastSet(t,e){return G(this,null,function*(){if(e.stopPropagation(),this.isViewMode)return;let i=this.workoutFormService.getSetsFormArray(t);if(i.length===0)return;let r=this.getExerciseIndexByControl(t),o=i.length-1;yield this.removeSet(t,r,o,e)})}fillWithLatestPerformanceData(t,e){return G(this,null,function*(){if(this.isViewMode){this.toastService.info("Cannot modify data in view mode.",3e3);return}e?.stopPropagation(),this.expandExerciseCardIfNeeded(t);let i=this.workoutExercisesFormArray.at(t);if(!i){console.error(`Exercise control at index ${t} not found.`);return}let r=i.get("exerciseId")?.value;if(!r){this.toastService.warning("Please select an exercise first.",3e3);return}this.spinnerService.show("Loading last performance...");try{let o=yield xe(this.trackingService.getLastPerformanceForExercise(r));if(!o||o.sets.length===0){this.toastService.info("No recent performance data found for this exercise.",3e3);return}this.workoutFormService.getSetsFormArray(i).controls.forEach((l,m)=>{let g=o.sets[m];if(g){let _={},f=g.weightLogged!=null?this.unitService.convertWeight(ki(g.weightLogged),this.unitService.currentWeightUnit(),"kg"):null;this.mode==="manualLogEntry"?(_.repsLogged=g.repsLogged,_.weightLogged=f,_.durationLogged=g.durationLogged,_.distanceLogged=g.distanceLogged,_.tempoLogged=g.tempoLogged):(_.targetReps=g.repsLogged,_.targetWeight=f,_.targetDuration=g.durationLogged,_.targetDistance=g.distanceLogged,_.targetTempo=g.tempoLogged),l.patchValue(_)}}),this.builderForm.markAsDirty(),this.toastService.success("Sets pre-filled with your last performance data.",3e3,"Success")}catch(o){console.error("Failed to load performance data:",o),this.toastService.error("Could not load performance data.",0,this.translate.instant("common.error"))}finally{this.spinnerService.hide()}})}getSetDistanceDisplay(t){function e(i){return i!=null}if(!t||!t.value||!t.value.sets||t.value.sets.length===0)return"";if(this.mode==="manualLogEntry"){let i=t.getRawValue();if(!i.sets||i.sets.length===0)return"";let r=[];for(let o of i.sets){let s=o?.distanceLogged;if(s==null)continue;let l=this.workoutUtilsService.getDistanceValue(s);typeof l=="number"&&l>0&&(s.type==="exact"?r.push(String(s.value)):s.type==="range"&&r.push(`${s.min}-${s.max}`))}return r.length>0?r.join("-"):""}else return this.workoutFormService.getSetsFormArray(t).controls.map(s=>this.getSetDisplayValue(s,"distance")).filter(s=>s&&s!=="-").join(", ")}cardColors=["#7f1d1d","#86198f","#4a044e","#1e1b4b","#1e3a8a","#064e3b","#14532d","#b91c1c","#c026d3","#701a75","#312e81","#2563eb","#047857","#15803d","#f97316","#ca8a04","#4d7c0f","#0f766e","#0369a1","#1d4ed8","#5b21b6"];openColorPicker(){return G(this,null,function*(){let t=this.liveFormAsRoutine();if(!t)return;let e=this.cardColors.map(r=>({text:"",role:"confirm",data:r,cssClass:"color-swatch",styles:{"background-color":r,width:"40px",height:"40px","border-radius":"50%",border:"2px solid white","box-shadow":"0 2px 4px rgba(0,0,0,0.2)"}}));e.push({text:"Clear Color",role:"confirm",data:"clear",cssClass:"bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200 mt-4 col-span-5",icon:"trash"});let i=yield this.alertService.showConfirmationDialog(`Select a Color for "${t.name}"`,"",e,{customButtonDivCssClass:"grid grid-cols-5 gap-3 justify-center"});if(i&&i.data){i.data==="clear"?delete t.cardColor:t.cardColor=i.data;let r=yield this.workoutService.updateRoutine(t);this.toastService.success(`Color updated for "${t.name}"`)}})}getCardValueTextColor(){return"text-gray-700 dark:text-gray-200"}getCardTitleTextColor(){if(!this.liveFormAsRoutine()||this.liveFormAsRoutine()===void 0)return"";let t=this.liveFormAsRoutine();return t===void 0?"":t.cardColor?t.cardColor?"text-white":"":"text-gray-600 dark:text-gray-200"}previousGoalValue=null;getUniformSetValues(t){let e=this.workoutFormService.getSetsFormArray(t);if(!e||e.length===0)return null;let i=this.getIndexOfExercise(t),r=this.getVisibleColumnsForExercise(i),o=Object.keys(r).filter(f=>r[f]);if(o.length===0)return null;let s=e.at(0),l={};o.forEach(f=>{let b=this.getFormControlName(f),T=s.get(b);l[f]=T?this.workoutUtilsService.formatMetricTarget(T.value,f):"-"});let m=new Set(o);for(let f=1;f<e.length;f++){let b=e.at(f);for(let T of Array.from(m)){let O=this.getFormControlName(T),F=b.get(O);(F?this.workoutUtilsService.formatMetricTarget(F.value,T):"-")!==l[T]&&m.delete(T)}if(m.size===0)break}let g={},_=!1;for(let f of m){let b=l[f];b&&b!=="-"&&(g[f]=b,_=!0)}return _?g:null}getDetailedSetViewInfo(t){let e=this.workoutFormService.getSetsFormArray(t);if(!e||e.length===0)return[];let i=[{key:"targetReps",label:this.translate.instant("workoutBuilder.set.reps")},{key:"targetWeight",label:this.translate.instant("workoutBuilder.set.weight"),unit:this.unitService.getWeightUnitSuffix()},{key:"targetDistance",label:this.translate.instant("workoutBuilder.set.distance"),unit:this.unitService.getDistanceUnitSuffix()},{key:"targetDuration",label:this.translate.instant("workoutBuilder.set.time"),unit:"s"},{key:"targetRest",label:this.translate.instant("workoutBuilder.set.rest"),unit:"s"}];return e.controls.map((r,o)=>{let s=[];return i.forEach(l=>{let m=r.get(l.key)?.value;if(m!=null&&m!==""){let g=this.workoutUtilsService.formatMetricTarget(m,l.key);s.push(`${l.label}: ${g}${l.unit?" "+l.unit:""}`)}}),`#${o+1} ${s.join(" | ")}`})}getFieldsForSet(t,e){let i=this.liveFormAsRoutine();return i?this.workoutUtilsService.getFieldsForSet(i,t,e):this.workoutUtilsService.defaultHiddenFields()}promptRemoveField(t,e){return G(this,null,function*(){let i=this.liveFormAsRoutine();if(!i)return;let r=this.mode==="manualLogEntry",o=yield this.workoutUtilsService.promptRemoveField(i,t,e,r);if(o){let s=o.workoutExercises[t].sets[e],l=this.workoutFormService.getSetsFormArray(this.workoutExercisesFormArray.at(t)),m=this.workoutFormService.createSetFormGroup(s,this.mode==="manualLogEntry");l.setControl(e,m)}})}promptAddField(t,e){return G(this,null,function*(){let i=this.liveFormAsRoutine();if(!i)return;let r=this.mode==="manualLogEntry",o=yield this.workoutUtilsService.promptAddField(i,t,e,r);if(o){let s=o.workoutExercises[t].sets[e],l=this.workoutFormService.getSetsFormArray(this.workoutExercisesFormArray.at(t)),m=this.workoutFormService.createSetFormGroup(s,this.mode==="manualLogEntry");l.setControl(e,m)}})}getVisibleColumnsForExercise(t){let e=this.liveFormAsRoutine();if(!e)return{};let i=this.mode==="manualLogEntry";return this.workoutUtilsService.getVisibleExerciseColumns(e,t,i)}getGridClassForExercise(t){let e=this.getVisibleColumnsForExercise(t),i=2;return e.reps&&i++,e.weight&&i++,e.distance&&i++,e.duration&&i++,e.rest&&i++,this.isEmomExerciseByIndex(t)||i+1,`grid-cols-${Math.max(2,i)}`}toggleExerciseNotes(t,e){e?.stopPropagation(),this.expandedExerciseNotes.update(i=>i===t?null:t),this.expandExerciseCardIfNeeded(t),setTimeout(()=>{document.getElementById(`exerciseNotes-${t}`)?.focus()},300)}expandExerciseCardIfNeeded(t){(!this.expandedExercisePath()||this.expandedExercisePath()?.exerciseIndex!==t)&&this.expandExerciseCard(t)}getCollapsedSetRowClass(t,e){let i=this.getVisibleColumnsForExercise(t),r=2;i.reps&&r++,i.weight&&r++,i.distance&&r++,i.duration&&r++,i.rest&&r++;let o=`grid-cols-${Math.max(2,r)}`,s=this.workoutExercisesFormArray.at(t),m=this.workoutFormService.getSetsFormArray(s).at(e);if(!(m instanceof be))return`grid ${o} bg-white dark:bg-gray-800`;let g=m.get("type")?.value,_="bg-white dark:bg-gray-800";return g==="standard"?_="bg-gray-50 dark:bg-gray-700/50":g==="warmup"&&(_="bg-blue-50 dark:bg-blue-900/40"),`grid ${o} ${_}`}undoLastChange(){if(!this.canUndo())return;this.isUndoingOrRedoing=!0,this.historyIndex--;let t=this.history[this.historyIndex];this.restoreFormState(t.state),this.toastService.info(this.translate.instant("workoutBuilder.toasts.undoSuccessful")),this.updateHistorySignals(),this.refreshFabMenuItems(),this.audioService.playSound("magic")}redoLastChange(){if(!this.canRedo())return;this.isUndoingOrRedoing=!0,this.historyIndex++;let t=this.history[this.historyIndex];this.restoreFormState(t.state),this.toastService.info(this.translate.instant("workoutBuilder.toasts.redoSuccessful")),this.updateHistorySignals(),this.refreshFabMenuItems()}restoreOriginal(){return G(this,null,function*(){if(!this.canRestore()||!this.originalStateSnapshot)return;let t=yield this.alertService.showConfirm("Restore Original","Are you sure you want to discard all changes and restore the routine to its original state?","Restore");t&&t.data&&(this.isUndoingOrRedoing=!0,this.restoreFormState(this.originalStateSnapshot),this.history=[JSON.parse(JSON.stringify(this.originalStateSnapshot))],this.historyIndex=0,this.toastService.success("Routine has been restored to its original state."),this.updateHistorySignals(),this.canRestore.set(!1)),this.refreshFabMenuItems()})}restoreFormState(t){if(!t)return;this.workoutExercisesFormArray.clear({emitEvent:!1}),(t.exercises||[]).forEach(i=>{let r=this.workoutFormService.createExerciseFormGroup(i,!0,this.mode==="manualLogEntry");this.workoutExercisesFormArray.push(r,{emitEvent:!1})}),this.builderForm.patchValue(t)}history=[];historyIndex=-1;MAX_HISTORY_SIZE=20;isUndoingOrRedoing=!1;canUndo=R(!1);canRedo=R(!1);canRestore=R(!1);originalStateSnapshot=null;updateHistorySignals(){this.canUndo.set(this.historyIndex>0),this.canRedo.set(this.historyIndex<this.history.length-1)}handleWorkoutGeneration(t){return G(this,null,function*(){this.isGeneratorModalOpen.set(!1),this.spinnerService.show("Generating your workout...");let e=null;try{if(t==="quick"?(this.lastGenerationOptions.set(null),e=yield this.workoutGeneratorService.generateQuickWorkout()):e=yield this.workoutGeneratorService.generateWorkout(t),!e){this.errorMessage.set("Could not generate a workout with the selected options. Please try different criteria."),this.isGeneratedRoutine.set(!1),this.lastGenerationOptions.set(null);return}t!=="quick"?this.lastGenerationOptions.set(t):this.lastGenerationOptions.set(null),this.patchFormWithRoutineData(e),this.builderForm.markAsDirty(),this.isGeneratedRoutine.set(!0),this.toastService.success("Workout generated successfully!")}catch(i){this.errorMessage.set(i.message||"An unknown error occurred during workout generation.")}finally{this.spinnerService.hide(),this.refreshFabMenuItems()}})}openWorkoutGenerator(){this.isGeneratorModalOpen.set(!0)}isPartOfExpandedSuperset(t){let i=this.workoutExercisesFormArray.at(t)?.get("supersetId")?.value;if(!i)return!1;let r=this.workoutExercisesFormArray.controls.findIndex(s=>s.get("supersetId")?.value===i&&s.get("supersetOrder")?.value===0);return this.expandedExercisePath()?.exerciseIndex===r}baseExercise(){let t=this.workoutExercisesFormArray.length>0?this.workoutExercisesFormArray.at(0).get("exerciseId")?.value:void 0;return this.availableExercises.find(e=>e.id===t)}isBodyweight=Me(()=>!!this.baseExercise()?.categories.find(t=>t==="bodyweightCalisthenics"));isCardio=Me(()=>!!this.baseExercise()?.categories.find(t=>t==="cardio"));expandedSetAllPanel=R(null);repsToSetForAll=R(null);weightToSetForAll=R(null);durationToSetForAll=R(null);distanceToSetForAll=R(null);restToSetForAll=R(null);tempoToSetForAll=R(null);toggleSetAllPanel(t,e){e.stopPropagation(),this.expandedSetAllPanel.update(i=>i===t?null:t)}repsStep=1;weightStep=.1;durationStep=5;distanceStep=.1;restStep=5;applyToAllSets(t){let e=this.workoutExercisesFormArray.at(t),i=this.workoutFormService.getSetsFormArray(e),r={},o=[];function s(b,T,O=!1){if(b==null)return null;let F=Number(b);return isNaN(F)?null:(F=Math.abs(F),O?Math.round(F*100)/100:Math.round(F/T)*T)}let l=s(this.repsToSetForAll(),this.repsStep);if(l!==null){let b=this.mode==="manualLogEntry"?"repsLogged":"targetReps";r[b]=vt(l),o.push("reps")}let m=s(this.weightToSetForAll(),this.weightStep,!0);if(m!==null){let b=this.mode==="manualLogEntry"?"weightLogged":"targetWeight";r[b]=De(m),o.push("weight")}let g=s(this.durationToSetForAll(),this.durationStep);if(g!==null){let b=this.mode==="manualLogEntry"?"durationLogged":"targetDuration";r[b]=ke(g),o.push("duration")}let _=s(this.distanceToSetForAll(),this.distanceStep);if(_!==null){let b=this.mode==="manualLogEntry"?"distanceLogged":"targetDistance";r[b]=Ue(_),o.push("distance")}let f=s(this.restToSetForAll(),this.restStep);if(f!==null){let b=this.mode==="manualLogEntry"?"restLogged":"targetRest";r[b]=oe(f),o.push("rest")}if(this.tempoToSetForAll()!==null&&this.tempoToSetForAll().trim()!==""&&(r.targetTempo=this.tempoToSetForAll(),o.push("tempo")),Object.keys(r).length===0){this.toastService.info("No values entered to apply.");return}i.controls.forEach(b=>{let T=b,O=T.get("fieldOrder")?.value?[...T.get("fieldOrder")?.value]:[],F=!1;o.forEach(P=>{let $=this.getFormControlName(P);if($&&!T.get($)&&(T.addControl($,this.fb.control(null)),this.isRoutineMode&&["reps","weight","duration","distance","rest"].includes(P))){let B=P.charAt(0).toUpperCase()+P.slice(1);T.addControl(`target${B}Min`,this.fb.control(null)),T.addControl(`target${B}Max`,this.fb.control(null))}O.includes(P)||(O.push(P),F=!0)}),F&&T.get("fieldOrder")?.patchValue(O),T.patchValue(r)}),this.repsToSetForAll.set(null),this.weightToSetForAll.set(null),this.durationToSetForAll.set(null),this.distanceToSetForAll.set(null),this.restToSetForAll.set(null),this.tempoToSetForAll.set(null),this.expandedSetAllPanel.set(null),this.toastService.success(`Applied values to all ${i.length} sets/rounds.`)}_getCorrectRestForSupersetExercise(t){if(!(t instanceof be))return 0;let e=t.get("supersetType")?.value,i=t.get("supersetId")?.value;if(e==="emom"||!i)return 0;if(e==="standard"){let r=this.getExerciseIndexByControl(t);if(this.isLastInSuperset(r))return 60}return 0}metricEnum=Si;repsTargetTypeEnum=mr;restTargetTypeEnum=Gn;weightTargetTypeEnum=Pn;durationTargetTypeEnum=Ln;distanceTargetTypeEnum=Nn;isGhostFieldVisible(t,e){return!!(this.isEditableMode()&&!this.isSuperSet(e)&&t&&t.length!==void 0&&(t.length<=1||t.length>2&&t.length%2==1))}intervalId=null;onShortPressIncrement(t,e){this.incrementValue(t,e)}onLongPressIncrement(t,e){this.isLongPressing=!0,this.intervalId=setInterval(()=>this.incrementValue(t,e),200)}onShortPressDecrement(t,e){this.decrementValue(t,e)}onLongPressDecrement(t,e){this.isLongPressing=!0,this.intervalId=setInterval(()=>this.decrementValue(t,e),200)}onPressRelease(){this.isLongPressing=!1,this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}incrementValue(t,e){let i=this.appSettingsService.getSettings(),r=e==="weight",o=e==="duration"||e==="rest",s=r?i.weightStep||.5:1,l=this.getFormControlName(e),m=t.get(l);if(!m)return;let g=m.value;if(g&&typeof g=="object"&&g.type)switch(g.type){case"exact":case"min_plus":let f=g.seconds!==void 0?"seconds":"value";m.patchValue(W(A({},g),{[f]:Math.max(0,(g[f]||0)+s)}));break;case"range":o?m.patchValue(W(A({},g),{minSeconds:g.minSeconds!=null?Math.max(0,g.minSeconds+s):g.minSeconds,maxSeconds:g.maxSeconds!=null?Math.max(0,g.maxSeconds+s):g.maxSeconds})):m.patchValue(W(A({},g),{min:g.min!=null?Math.max(0,g.min+s):g.min,max:g.max!=null?Math.max(0,g.max+s):g.max}));break;case"percentage_1rm":m.patchValue(W(A({},g),{percentage:Math.min(100,(g.percentage||0)+s)}));break;default:break}else{let f=g?.toString()||"0",b=o?this.parseTimeToSeconds(f)||0:parseFloat(f)||0,T=parseFloat((b+s).toFixed(2));m.patchValue(T)}t.markAsDirty();let _=t.get("id")?.value;_&&!this.isLongPressing&&this.triggerAnimation(_)}decrementValue(t,e){let i=this.appSettingsService.getSettings(),r=e==="weight",o=e==="duration"||e==="rest",s=r?i.weightStep||.5:1,l=this.getFormControlName(e),m=t.get(l);if(!m)return;let g=m.value;if(g&&typeof g=="object"&&g.type)switch(g.type){case"exact":case"min_plus":let f=g.seconds!==void 0?"seconds":"value";m.patchValue(W(A({},g),{[f]:Math.max(1,(g[f]||0)-s)}));break;case"range":o?m.patchValue(W(A({},g),{minSeconds:g.minSeconds!=null?Math.max(1,g.minSeconds-s):g.minSeconds,maxSeconds:g.maxSeconds!=null?Math.max(1,g.maxSeconds-s):g.maxSeconds})):m.patchValue(W(A({},g),{min:g.min!=null?Math.max(1,g.min-s):g.min,max:g.max!=null?Math.max(1,g.max-s):g.max}));break;case"percentage_1rm":m.patchValue(W(A({},g),{percentage:Math.max(1,(g.percentage||0)-s)}));break;default:break}else{let f=g?.toString()||"0",b=o?this.parseTimeToSeconds(f)||0:parseFloat(f)||0,T=Math.max(0,parseFloat((b-s).toFixed(2)));m.patchValue(T)}t.markAsDirty();let _=t.get("id")?.value;_&&!this.isLongPressing&&this.triggerAnimation(_)}getFormControlName(t){let e=this.mode==="manualLogEntry";switch(t){case"reps":return e?"repsLogged":"targetReps";case"weight":return e?"weightLogged":"targetWeight";case"distance":return e?"distanceLogged":"targetDistance";case"duration":return e?"durationLogged":"targetDuration";case"rest":return e?"restLogged":"targetRest";case"tempo":return"targetTempo";default:return""}}getSetMetricDisplayValue(t,e){if(!(t instanceof be))return"-";let i=this.getFormControlName(e),r=t.get(i);if(!r||r.value==null)return"-";let o=this.mode==="manualLogEntry";return this.workoutUtilsService.formatMetricTarget(r.value,e,o)}parseTimeToSeconds(t){if(!t)return 0;let e=t.toString().split(":").map(i=>parseInt(i,10)||0);return e.length===2?e[0]*60+e[1]:e[0]}getExerciseSetsLength(t){let e=this.workoutExercisesFormArray.at(t);if(!e)return 0;let i=this.workoutFormService.getSetsFormArray(e);return i?i.length:0}updateTargetField(t,e,i,r){let o=t.get(e),s=o?.value;if(!o||!s)return;let l=r.target.value;if(l=l.replace(/[^0-9.]/g,""),l===""||isNaN(Number(l)))return;let m=Number(l);if(s.type==="range"){let g=W(A({},s),{[i]:m});o.patchValue(g)}else if(i==="value"&&(s.type==="exact"||s.type==="min_plus")){let g=W(A({},s),{value:m});o.patchValue(g)}t.markAsDirty()}incrementExactReps(t,e){let i=t.get("targetReps"),r=i?.value;if(!(!i||r?.type!=="exact"&&r?.type!=="min_plus")){if(r.type==="exact"){let o=Math.max(0,r.value+e),s=W(A({},r),{value:o});i.patchValue(s),t.markAsDirty()}else if(r.type==="min_plus"){let o=Math.max(0,r.value+e),s=W(A({},r),{value:o});i.patchValue(s),t.markAsDirty()}}}isAnimatingSet=R(null);animationTimeout=null;triggerAnimation(t){this.animationTimeout&&clearTimeout(this.animationTimeout),this.isAnimatingSet.set(t),this.animationTimeout=setTimeout(()=>{this.isAnimatingSet.set(null),this.animationTimeout=null},200)}newlyAddedSets=new Map;getMetricDisplayValue(t,e){let i=t.get(this.getTargetControlName(e))?.value,r=t.get(this.getLoggedControlName(e))?.value,o=this.isRoutineMode?i:r;return this.workoutUtilsService.formatMetricTarget(o,e)||"-"}getTargetControlName(t){switch(t){case"reps":return"targetReps";case"weight":return"targetWeight";case"duration":return"targetDuration";case"distance":return"targetDistance";case"rest":return"targetRest";default:return""}}getLoggedControlName(t){switch(t){case"reps":return"repsLogged";case"weight":return"weightLogged";case"duration":return"durationLogged";case"distance":return"distanceLogged";case"rest":return"restLogged";default:return""}}getMetricLabel(t){return"metrics."+Object.keys(Si)[t]}BuilderMode=ns;isLongPressing=!1;allAvailableMetrics=["reps","weight","distance","duration","rest"];isMetricActiveForAllSets(t,e){let i=this.workoutExercisesFormArray.at(t);return this.workoutFormService.getSetsFormArray(i).controls.every(o=>(o.get("fieldOrder")?.value||[]).includes(e))}toggleMetricForAllSets(t,e){let i=this.workoutExercisesFormArray.at(t),r=this.workoutFormService.getSetsFormArray(i),o=!this.isMetricActiveForAllSets(t,e);r.controls.forEach(s=>{let l=s.get("fieldOrder")?.value||[];if(o){if(!l.includes(e)){l=[...l,e],s.get("fieldOrder")?.setValue(l);let m=this.getTargetControlName(e),g=this.getLoggedControlName(e),_=s;if(_.contains(m)&&!_.get(m)?.value)switch(e){case"rest":_.get(m)?.setValue(oe(60));break;case"weight":_.get(m)?.setValue(De(10));break;case"reps":_.get(m)?.setValue(vt(8));break;case"distance":_.get(m)?.setValue(Ue(2));break;case"duration":_.get(m)?.setValue(ke(45));break}if(_.contains(g)&&!_.get(g)?.value)switch(e){case"rest":_.get(g)?.setValue(oe(60));break;case"weight":_.get(g)?.setValue(De(10));break;case"reps":_.get(g)?.setValue(vt(8));break;case"distance":_.get(g)?.setValue(Ue(2));break;case"duration":_.get(g)?.setValue(ke(45));break}}}else if(l.includes(e)){l=l.filter(f=>f!==e),s.get("fieldOrder")?.setValue(l);let m=this.getTargetControlName(e),g=this.getLoggedControlName(e),_=s;_.contains(m)&&_.get(m)?.setValue(null),_.contains(g)&&_.get(g)?.setValue(null)}}),o?this.toastService.success(this.translate.instant("workoutBuilder.set.metricAdded",{metric:this.translate.instant("metrics."+e)}),2e3):this.toastService.info(this.translate.instant("workoutBuilder.set.metricRemoved",{metric:this.translate.instant("metrics."+e)}),2e3)}setMetricsForAllSets(t,e){let i=this.workoutExercisesFormArray.at(t);this.workoutFormService.getSetsFormArray(i).controls.forEach(o=>{o.get("fieldOrder")?.setValue([...e])})}getExactInputValue(t,e){let i=t.get(this.getFormControlName(e))?.value;return i?e==="duration"||e==="rest"?i.seconds??null:i.value??null:null}onExactInputChange(t,e,i){let r=i.target,o=r.value===""?null:Number(r.value);(o===null||isNaN(o)||o<1)&&(o=1,r.value="1");let s=t.get(this.getFormControlName(e)),l=s?.value;l&&(e==="duration"||e==="rest"?s.patchValue(W(A({},l),{seconds:o})):s.patchValue(W(A({},l),{value:o})),t.markAsDirty())}focusedInput={};onInputFocus(t,e){this.focusedInput[t+"-"+e]=!0}onInputBlur(t,e){this.focusedInput[t+"-"+e]=!1}isInputFocused(t,e){return!!this.focusedInput[t+"-"+e]}focusInput(t,e){setTimeout(()=>{let i=document.querySelector(`input[data-set-id="${t}"][data-field="${e}"]`);i&&i.focus()})}lastTouchY=null;onInputWheel(t,e,i){i.preventDefault(),i.deltaY<0?this.incrementValue(t,e):i.deltaY>0&&this.decrementValue(t,e)}onInputTouchStart(t){t.touches.length===1&&(this.lastTouchY=t.touches[0].clientY)}onInputTouchMove(t,e,i){if(i.preventDefault(),i.touches.length===1&&this.lastTouchY!==null){let r=i.touches[0].clientY,o=r-this.lastTouchY;Math.abs(o)>20&&(o<0?this.decrementValue(t,e):this.incrementValue(t,e),this.lastTouchY=r)}}selectInputText(t){setTimeout(()=>t.select(),0)}getSubmitButtonLabel(){return this.mode==="routineBuilder"?this.translate.instant("workoutBuilder.routineBuilder.saveButton"):this.mode==="customProgramEntryBuilder"?this.translate.instant("workoutBuilder.routineBuilder.saveCustomRoutineButton"):this.mode==="newFromLog"?this.translate.instant("workoutBuilder.routineBuilder.saveButton"):this.isNewMode?this.translate.instant("workoutBuilder.logEntry.logButton"):this.translate.instant("workoutBuilder.logEntry.saveLogButton")}showCreationWizard(){return G(this,null,function*(){let t=yield this.alertService.showPromptDialog(this.translate.instant("workoutBuilder.wizard.templateOrBlankTitle"),this.translate.instant("workoutBuilder.wizard.templateOrBlankMsg"),[{name:"routineTemplate",type:"radio",label:this.translate.instant("workoutBuilder.wizard.templateOrBlankLabel"),value:"blank",options:[{label:"Blank (Custom)",value:"blank"},{label:"3x3",value:"3x3"},{label:"5x5",value:"5x5"},{label:"Push/Pull/Legs",value:"ppl"},{label:"5/3/1",value:"531"}],required:!0}],this.translate.instant("alertService.buttons.ok"));if(!t||!t.routineTemplate)return;let e=String(t.routineTemplate);if(e!=="blank"){yield this.createRoutineFromTemplate(e);return}this.workoutExercisesFormArray.clear();let i=yield this.alertService.showPromptDialog(this.translate.instant("workoutBuilder.routineBuilder.nameLabel"),this.translate.instant("workoutBuilder.routineBuilder.nameWizardMsg"),[{name:"routineName",type:"text",label:this.translate.instant("workoutBuilder.routineBuilder.nameLabel"),placeholder:this.translate.instant("workoutBuilder.routineBuilder.namePlaceholder"),required:!0,autofocus:!0}],this.translate.instant("alertService.buttons.ok"));if(!i||!i.routineName)return;let r=yield this.alertService.showPromptDialog(this.translate.instant("workoutBuilder.routineBuilder.goalLabel"),this.translate.instant("workoutBuilder.routineBuilder.goalWizardMsg"),[{name:"routineGoal",type:"select",label:this.translate.instant("workoutBuilder.routineBuilder.goalLabel"),value:"hypertrophy",options:this.routineGoals.map(o=>({label:this.translate.instant(o.label),value:o.value})),required:!0}],this.translate.instant("alertService.buttons.ok"));!r||!r.routineGoal||this.builderForm.patchValue({name:i.routineName,goal:r.routineGoal})})}createRoutineFromTemplate(t){return G(this,null,function*(){let e=this.workoutService.generateRoutineFromTemplate(t,this.availableExercises),i;if(e.length===1)i=e[0];else{let o=yield this.alertService.showPromptDialog(this.translate.instant("workoutBuilder.wizard.pickRoutineTitle"),this.translate.instant("workoutBuilder.wizard.pickRoutineMsg"),[{name:"routinePick",type:"select",label:this.translate.instant("workoutBuilder.wizard.pickRoutineLabel"),value:e[0].id,options:e.map(s=>({label:s.name,value:s.id})),required:!0}],this.translate.instant("alertService.buttons.ok"));if(!o||!o.routinePick)return;i=e.find(s=>s.id===o.routinePick)||e[0]}let r=new Date().toLocaleDateString();i.name=`${i.name} - ${r}`,this.patchFormWithRoutineData(i),this.toastService.success(this.translate.instant("workoutBuilder.wizard.templateCreated"),3e3)})}getActionDescription(t,e){if(e.workoutExercises.length>t.workoutExercises.length)return this.translate.instant("workoutBuilder.history.addedExercise");if(e.workoutExercises.length<t.workoutExercises.length)return this.translate.instant("workoutBuilder.history.removedExercise");let i=t.workoutExercises.some(o=>o.supersetId);return e.workoutExercises.some(o=>o.supersetId)&&!i?this.translate.instant("workoutBuilder.history.createdSuperset"):this.translate.instant("workoutBuilder.history.editedRoutine")}get nextUndoAction(){return this.historyIndex>0&&this.history[this.historyIndex]?.action||null}get nextRedoAction(){return this.historyIndex<this.history.length-1&&this.history[this.historyIndex+1]?.action||null}getSectionBadgeInfo(t){let e=t.get("section")?.value;return e?this.getSectionColorAndLabel(e):null}getSectionColorAndLabel(t){switch(t){case"WarmUp":return{label:"Warm Up",color:"#f59e0b"};case"MainLift":return{label:"Main Lift",color:"#ef4444"};case"Cardio":return{label:"Cardio",color:"#3b82f6"};case"Finisher":return{label:"Finisher",color:"#a855f7"};case"CoolDown":return{label:"Cool Down",color:"#10b981"};default:return{label:t,color:"#6b7280"}}}openSectionSelectionModal(){return G(this,null,function*(){if(this.isViewMode)return;let t=this.selectedExerciseIndicesForMultipleRemoval().sort((r,o)=>r-o);if(t.length===0)return;let e=Object.values(Vr).map(r=>({label:r==="None"?"None (Remove from Section)":this.getSectionColorAndLabel(r).label,value:r})),i=yield this.alertService.showPromptDialog("Assign to Section","Select a section for the selected exercises:",[{name:"sectionType",type:"select",label:"Section",value:"none",options:e,required:!0}],"Assign");if(i&&i.sectionType){let r=i.sectionType==="none"?null:i.sectionType;t.forEach(o=>{let s=this.workoutExercisesFormArray.at(o);s.contains("section")?s.patchValue({section:r}):s.addControl("section",this.fb.control(r)),s.markAsDirty()}),this.toastService.success(`Assigned ${t.length} exercises to ${r||"general list"}.`),this.selectedExerciseIndicesForMultipleRemoval.set([]),this.selectedExerciseIndicesForSuperset.set([])}})}getLocationTypeLabel(){let t=this.builderForm.get("locationId")?.value,e=this.locationService.allLocationTypes().find(i=>i.id===t);return e?e.label:""}getLocationName(){let t=this.builderForm.get("locationName")?.value;return this.trackingService.getWorkoutLocations().find(i=>i===t)??""}enforceTabataSuperset(){let t=this.workoutExercisesFormArray.controls;if(t.length<2)return this.toastService.warning(this.translate.instant("workoutBuilder.toasts.tabataSizeError"),5e3),!1;let e=Y(),i=Math.max(...t.map(r=>r.get("sets").length||1));return t.forEach((r,o)=>{let s=r.get("sets");for(;s.length<i;)s.push(this.fb.group({targetDuration:null,targetRest:null,targetReps:null,targetWeight:null,targetDistance:null,targetTempo:null}));for(;s.length>i;)s.removeAt(s.length-1);s.controls.forEach(l=>{let m=l.get("targetDuration")?.value,g=l.get("targetRest")?.value,_=l.get("targetReps")?.value,f=l.get("targetWeight")?.value,b=l.get("targetDistance")?.value;l.patchValue({targetDuration:m!=null&&!isNaN(m)&&m>0?ke(m):ke(20),targetRest:g!=null&&!isNaN(g)&&g>0?oe(g):oe(10),targetReps:_!=null&&!isNaN(_)&&_>0?vt(_):null,targetWeight:f!=null&&!isNaN(f)&&f>0?vt(f):null,targetDistance:b!=null&&!isNaN(b)&&b>0?Ue(b):null,targetTempo:null},{emitEvent:!1})}),r.patchValue({supersetId:e,supersetOrder:o,supersetType:"standard",type:"superset"},{emitEvent:!1})}),!0}onLocationNameFocus(t){t&&(t.value=t.value,t.setSelectionRange(t.value.length,t.value.length))}onLocationNameInput(t){let e=t.target;e.value.endsWith(" ")&&(e.value=e.value,e.blur(),e.focus())}handleSupersetGroupDrag(t,e,i){let o=this.workoutExercisesFormArray.controls.map((_,f)=>({ctrl:_,idx:f})).filter(({ctrl:_})=>_.get("supersetId")?.value===t);if(o.length===0)return;let s=o.length,l=e+s-1,m=o.map(({ctrl:_})=>_);for(let _=l;_>=e;_--)this.workoutExercisesFormArray.removeAt(_);let g=i;i>e&&(g=i-s),m.forEach((_,f)=>{this.workoutExercisesFormArray.insert(g+f,_)}),this.workoutExercisesFormArray.updateValueAndValidity(),this.recalculateSupersetOrders(),this.selectedExerciseIndicesForSuperset.set([]),this.expandedSetPath.set(null),this.toastService.success(this.translate.instant("workoutBuilder.drag.supersetMoved"),2e3)}groupSelectedAsSuperset(){return G(this,null,function*(){if(this.isViewMode)return;let t=this.selectedExerciseIndicesForSuperset().sort(($,B)=>$-B);if(t.length<2){this.toastService.warning(this.translate.instant("workoutBuilder.toasts.supersetSizeError"),3e3,"Superset Error");return}if(!t.every(($,B,L)=>B===0||$===L[B-1]+1)){if(!(yield this.alertService.showConfirm(this.translate.instant("workoutBuilder.superset.nonConsecutiveTitle"),this.translate.instant("workoutBuilder.superset.nonConsecutiveMessage"),this.translate.instant("workoutBuilder.superset.reorderAndGroup"),this.translate.instant("common.cancel")))?.data)return;let B=t.map(X=>this.workoutExercisesFormArray.at(X));for(let X=t.length-1;X>=0;X--)this.workoutExercisesFormArray.removeAt(t[X]);let L=t[0];B.forEach((X,ie)=>{this.workoutExercisesFormArray.insert(L+ie,X)}),this.toastService.info(this.translate.instant("workoutBuilder.superset.exercisesReordered"),2e3)}let i=!1,r=[{text:"STANDARD",role:"confirm",data:"standard",cssClass:"bg-orange-500 text-white"},{text:"EMOM",role:"confirm",data:"emom",cssClass:"bg-teal-500 text-white"}],o=yield this.alertService.showConfirmationDialog(this.translate.instant("workoutBuilder.superset.selectGroupType"),this.translate.instant("workoutBuilder.superset.howToGroup"),r);if(!o||!o.data){this.toastService.info("Grouping cancelled.",2e3);return}let s=o.data,l,m=null;if(s==="emom"){i=!0;let $=[{key:"emomTime",type:"number",label:this.translate.instant("workoutBuilder.superset.emomTimePerRound"),value:60,required:!0,attributes:{min:10}},{key:"numSets",type:"number",label:this.translate.instant("workoutBuilder.superset.numRounds"),value:5,required:!0,attributes:{min:1}}],B=yield xe(this.modalService.prompt({title:this.translate.instant("workoutBuilder.superset.setEmomDetails"),message:this.translate.instant("workoutBuilder.superset.configureEmom"),confirmText:this.translate.instant("common.ok"),cancelText:this.translate.instant("common.cancel"),fields:$}));if(!B||!B.emomTime||!B.numSets)return;m=Number(B.emomTime),l=Number(B.numSets)}else{let $=[{key:"numSets",type:"number",label:this.translate.instant("workoutBuilder.superset.numRounds"),value:3,required:!0,attributes:{min:1}}],B=yield xe(this.modalService.prompt({title:this.translate.instant("workoutBuilder.superset.setSupersetRounds"),message:this.translate.instant("workoutBuilder.superset.howManyRounds"),confirmText:this.translate.instant("common.ok"),cancelText:this.translate.instant("common.cancel"),fields:$}));if(!B||!B.numSets){this.toastService.info(this.translate.instant("workoutBuilder.superset.groupingCancelled"),2e3);return}l=Number(B.numSets)}let g=[],f=this.unitService.convertWeight(15,this.unitService.currentWeightUnit(),"kg"),b=this.selectedExerciseIndicesForSuperset().sort(($,B)=>$-B);for(let[$,B]of b.entries()){let L=this.workoutExercisesFormArray.at(B),X=L.get("exerciseName")?.value,ie=L.get("exerciseId")?.value,Re=this.availableExercises.find(Ye=>Ye.id===ie),N=Re?!Re.categories.find(Ye=>Ye==="cardio"):!1,ze=[{name:"reps",type:"textNumber",label:`${this.translate.instant("workoutBuilder.set.reps")}`,value:"8",attributes:{min:"0",required:!0}}];N&&ze.push({name:"weight",type:"textNumber",label:`${this.translate.instant("workoutBuilder.set.weight")} (${this.unitService.getWeightUnitSuffix()})`,value:String(Math.round(f)),attributes:{min:"0"}});let We=yield this.alertService.showPromptDialog(this.translate.instant("workoutBuilder.superset.setExerciseTargets"),this.translate.instant("workoutBuilder.superset.enterTargets",{weight:N?this.translate.instant("workoutBuilder.superset.enterTargetsAndWeight"):"",exerciseName:X}),ze);if(!We||!We.reps){this.toastService.info(this.translate.instant("workoutBuilder.superset.supersetCreationCancelled"),2e3);return}g.push({reps:Number(We.reps),weight:N&&We.weight!==void 0?Number(We.weight):void 0})}let T=Y(),O=b.length,F=b[0];b.forEach(($,B)=>{let L=this.workoutExercisesFormArray.at($),{reps:X,weight:ie}=g[B];L.patchValue({supersetId:T,supersetOrder:B,supersetType:s,emomTimeSeconds:m,type:"superset"});let Re=L.get("sets"),N={type:"exact",value:X},ze=ie!==void 0?De(this.unitService.convertWeight(ie,"kg",this.unitService.currentWeightUnit())):void 0,We=oe(0);s==="standard"&&B===O-1&&(We=oe(60));let Ye=[];N&&Ye.push("weight"),ze&&Ye.push("reps"),We&&Ye.push("rest");let os={id:Y(),type:"superset",targetReps:N,targetWeight:ze,fieldOrder:Ye,targetRest:We};Re.clear();for(let sr=0;sr<l;sr++){let ss=this.workoutFormService.createSetFormGroup(os,!1);Re.push(ss)}}),this.selectedExerciseIndicesForSuperset.set([]);let P=s==="emom"?this.translate.instant("workoutBuilder.superset.emomCreated",{numberOfSets:l}):this.translate.instant("workoutBuilder.superset.supersetCreated",{numberOfSets:l});this.toastService.success(P,4e3,"Success"),this.expandedSetPath.set(null),this.toggleSetExpansion(F,0)})}moveSupersetGroup(t,e,i){let r=this.workoutExercisesFormArray.controls,o=[];if(r.forEach((f,b)=>{f.get("supersetId")?.value===t&&o.push(b)}),o.length===0)return;let s=o.length,l=o[0],m=o[o.length-1];if(m-l+1!==s){console.error("Superset exercises are not consecutive - this should not happen");return}let g=o.map(f=>r[f]);for(let f=m;f>=l;f--)this.workoutExercisesFormArray.removeAt(f);let _=i;i>m?_=i-s:i<l?_=i:_=l,_=Math.max(0,Math.min(_,this.workoutExercisesFormArray.length)),g.forEach((f,b)=>{this.workoutExercisesFormArray.insert(_+b,f)}),this.workoutExercisesFormArray.updateValueAndValidity(),this.recalculateSupersetOrders(),this.selectedExerciseIndicesForSuperset.set([]),this.expandedSetPath.set(null),this.toastService.success(this.translate.instant("workoutBuilder.drag.supersetMoved"),2e3)}getExerciseAtIndex(t){return t<0||t>=this.workoutExercisesFormArray.length?null:this.workoutExercisesFormArray.at(t)}getSupersetGroup(t){let e=this.workoutExercisesFormArray.controls,i=[];return e.forEach((r,o)=>{r.get("supersetId")?.value===t&&i.push({control:r,index:o})}),i.sort((r,o)=>r.index-o.index)}onExerciseDrop(t){if(this.isViewMode||t.previousContainer!==t.container)return;let e=document.querySelector(".exercise-list-container");e&&e.classList.remove("dragging-superset-group"),document.querySelectorAll(".superset-member-of-dragged").forEach(g=>{g.classList.remove("superset-member-of-dragged")});let i=this.workoutExercisesFormArray,r=i.at(t.previousIndex),o=r.get("supersetId")?.value,s=r.get("supersetOrder")?.value;if(o&&s===0){let g=this.getExerciseAtIndex(t.currentIndex);if(g){let _=g.get("supersetId")?.value;if(_&&_!==o){this.toastService.warning(this.translate.instant("workoutBuilder.drag.cannotDropSupersetOnSuperset"),3e3);return}}this.moveSupersetGroup(o,t.previousIndex,t.currentIndex);return}if(o&&s!==0){this.toastService.info(this.translate.instant("workoutBuilder.drag.cannotDragSupersetMember"),3e3);return}let l=this.getExerciseAtIndex(t.currentIndex);if(l&&!o){let g=l.get("supersetId")?.value;if(g){this.handleStandaloneDropIntoSuperset(t.previousIndex,t.currentIndex,g,l);return}}ei(i.controls,t.previousIndex,t.currentIndex),i.updateValueAndValidity(),i.at(t.currentIndex)?.get("supersetId")?.value&&this.recalculateSupersetOrders(),this.selectedExerciseIndicesForSuperset.set([]),this.expandedSetPath.set(null)}isDraggingEnabled(t){let e=this.workoutExercisesFormArray.at(t),i=e?.get("supersetId")?.value,r=e?.get("supersetOrder")?.value;return this.isEditableMode()&&!this.shouldShowExpandedExercise(t)&&(!i||r===0)}handleStandaloneDropIntoSuperset(t,e,i,r){return G(this,null,function*(){let o=this.workoutExercisesFormArray.at(t),s=o.get("exerciseName")?.value,l=this.getSupersetGroup(i),m=l[0].index,g=l[l.length-1].index,_=l.length,f=0,b=r.get("supersetOrder")?.value;typeof b=="number"&&(f=b);let T=[{text:this.translate.instant("workoutBuilder.drag.addToSuperset"),role:"confirm",data:"add",cssClass:"bg-blue-600 text-white"},{text:this.translate.instant("workoutBuilder.drag.keepSeparate"),role:"cancel",data:"separate",cssClass:"bg-gray-500 text-white"}];if((yield this.alertService.showConfirmationDialog(this.translate.instant("workoutBuilder.drag.addExerciseToSuperset",{name:s,supersetSize:_}),this.translate.instant("workoutBuilder.drag.chooseAction"),T))?.data==="add"){let F=this.workoutExercisesFormArray.at(t);this.workoutExercisesFormArray.removeAt(t);let P=m;t<m&&P--;let $=P+f;this.workoutExercisesFormArray.insert($,F),o.patchValue({supersetId:i,supersetType:r.get("supersetType")?.value,emomTimeSeconds:r.get("emomTimeSeconds")?.value}),this.workoutExercisesFormArray.updateValueAndValidity(),this.recalculateSupersetOrders(),this.toastService.success(this.translate.instant("workoutBuilder.drag.exerciseAddedToSuperset",{name:s}),2e3)}else ei(this.workoutExercisesFormArray.controls,t,e),this.workoutExercisesFormArray.updateValueAndValidity(),this.toastService.info(this.translate.instant("workoutBuilder.drag.exerciseMovedSeparate"),2e3);this.selectedExerciseIndicesForSuperset.set([]),this.expandedSetPath.set(null)})}markSupersetMembersForDrag(t,e){if(!e){document.querySelectorAll(".superset-member-of-dragged").forEach(s=>{s.classList.remove("superset-member-of-dragged")});let o=document.querySelector(".exercise-list-container");o&&o.classList.remove("dragging-superset-group");return}if(!t)return;let i=this.workoutExercisesFormArray.controls,r=!1;if(i.forEach((o,s)=>{let l=document.querySelector(`[formGroupName="${s}"]`)?.closest(".exercise-card-wrapper");l&&o.get("supersetId")?.value===t&&o.get("supersetOrder")?.value!==0&&(l.classList.add("superset-member-of-dragged"),r=!0)}),r){let o=document.querySelector(".exercise-list-container");o&&o.classList.add("dragging-superset-group")}}onDragStarted(t){let e=this.workoutExercisesFormArray.at(t),i=e?.get("supersetId")?.value,r=e?.get("supersetOrder")?.value;i&&r===0&&this.markSupersetMembersForDrag(i,!0)}onDragEnded(){this.markSupersetMembersForDrag("",!1)}setSupersetGroupRestValue(t,e){let i=+e.target.value,r=this.getExerciseIndexByControl(t);if(r===-1||!this.isSuperSet(r))return;let o=t.get("supersetId")?.value;if(!o)return;let s=this.workoutExercisesFormArray.controls.map((m,g)=>({ctrl:m,idx:g})).filter(({ctrl:m})=>m.get("supersetId")?.value===o);if(s.length===0)return;let l=oe(i);s.forEach(({ctrl:m,idx:g})=>{let _=m.get("supersetOrder")?.value===0,f=m.get("sets");if(_){f.controls.forEach(T=>{T.get("targetRest")?.setValue(l,{emitEvent:!1})});let b=m.get("fieldOrder")?.value||[];b.includes("rest")||(b.push("rest"),m.get("fieldOrder")?.setValue(b,{emitEvent:!1})),m.get("restBetweenRounds")?.setValue(i,{emitEvent:!1})}else{f.controls.forEach(T=>{T.get("targetRest")?.setValue(null,{emitEvent:!1})});let b=m.get("fieldOrder")?.value||[];b=b.filter(T=>T!=="rest"),m.get("fieldOrder")?.setValue(b,{emitEvent:!1}),m.get("restBetweenRounds")?.setValue(0,{emitEvent:!1})}}),this.toastService.info(`Rest between rounds updated to ${i}s`,2e3)}addRoutineChoiceSubscription(){return this.builderForm.get("routineIdForLog")?.valueChanges.subscribe(t=>{if(this.isEditMode&&t===this.initialRoutineIdForLogEdit&&!this.builderForm.get("routineIdForLog")?.dirty||this.isEditMode&&t===this.initialProgramIdForLogEdit&&!this.builderForm.get("programIdForLog")?.dirty)return;let e=this.availableRoutines.find(i=>i.id===t);e?this.prefillLogFormFromRoutine(e,!1):(this.workoutExercisesFormArray.clear(),this.isEditMode||this.builderForm.get("name")?.setValue("Ad-hoc Workout"))})}addProgramIdSubscription(){return this.builderForm.get("programIdForLog")?.valueChanges.subscribe(t=>{t?(this.builderForm.get("routineIdForLog")?.disable(),this.initialProgramIdForLogEdit=t,this.retrieveProgramInfo(t),this.builderForm.get("iterationIdForLog")?.setValue("",{emitEvent:!1}),this.builderForm.get("scheduledDayIdForLog")?.setValue("",{emitEvent:!1}),this.builderForm.get("routineIdForLog")?.setValue("",{emitEvent:!1}),this.workoutExercisesFormArray.clear()):(this.builderForm.get("routineIdForLog")?.enable(),this.initialProgramIdForLogEdit=void 0,this.availableIterationIds=[],this.availableScheduledDayIds=[],this.availableScheduledDayInfos=[],this.builderForm.get("iterationIdForLog")?.setValue("",{emitEvent:!1}),this.builderForm.get("scheduledDayIdForLog")?.setValue("",{emitEvent:!1}))})}addScheduledDayIdSubscription(){return this.builderForm.get("scheduledDayIdForLog")?.valueChanges.subscribe(t=>{let e=this.availableScheduledDayInfos.find(i=>i.id===t);if(!e){this.workoutExercisesFormArray.clear(),this.builderForm.get("routineIdForLog")?.setValue("",{emitEvent:!1}),this.builderForm.get("name")?.setValue("Ad-hoc Workout",{emitEvent:!1});return}xe(this.workoutService.getRoutineById(e.routineId)).then(i=>{i?(this.initialProgramIterationIdForLogEdit=e.iterationId,this.initialProgramScheduledIdForLogEdit=e.id,this.prefillLogFormFromRoutine(i,!1),this.builderForm.get("name")?.setValue(`Log: ${i.name}`,{emitEvent:!1}),this.builderForm.get("routineIdForLog")?.setValue(i.id,{emitEvent:!1}),e.iterationId&&this.builderForm.get("iterationIdForLog")?.setValue(e.iterationId,{emitEvent:!1})):(this.toastService.error(`Routine with ID ${e.routineId} not found.`,0,this.translate.instant("common.error")),this.workoutExercisesFormArray.clear())}).catch(i=>{console.error("Failed to fetch routine for scheduled day:",i),this.toastService.error("Could not load routine details.",0,this.translate.instant("common.error")),this.workoutExercisesFormArray.clear()})})}addGoalSubscription(){return this.routineGoal.valueChanges.subscribe(t=>G(this,null,function*(){if(this.isRevertingGoal){this.isRevertingGoal=!1;return}if(this.previousGoalValue!==t&&t!=="tabata"&&(this.previousGoalValue=t),this.isRoutineMode&&t==="rest"){for(;this.workoutExercisesFormArray.length;)this.workoutExercisesFormArray.removeAt(0);this.workoutExercisesFormArray.clearValidators()}let e=this.workoutExercisesFormArray.controls;if(this.isRoutineMode&&this.previousGoalValue!==t&&t==="tabata"){if(e.length<2){this.toastService.warning(this.translate.instant("workoutBuilder.toasts.tabataSizeError"),5e3),this.isRevertingGoal=!0,this.routineGoal.setValue(this.previousGoalValue,{emitEvent:!0});return}let i=yield this.alertService.showConfirm(this.translate.instant("workoutBuilder.alerts.tabataConvertTitle"),this.translate.instant("workoutBuilder.alerts.tabataConvertMessage"),this.translate.instant("workoutBuilder.alerts.convert"),this.translate.instant("common.cancel"));if(!i||!i.data){this.isRevertingGoal=!0,this.routineGoal.setValue(this.previousGoalValue,{emitEvent:!0});return}if(!this.enforceTabataSuperset()){this.isRevertingGoal=!0,this.routineGoal.setValue(this.previousGoalValue,{emitEvent:!0});return}this.toastService.info(this.translate.instant("workoutBuilder.toasts.tabataConverted"))}else if(this.isRoutineMode&&this.routineGoal.value!=="tabata"){let i=this.workoutExercisesFormArray.at(0);i&&i.get("supersetId")?.value&&i.get("sets")?.value?.length===this.workoutExercisesFormArray.length&&(this.workoutExercisesFormArray.controls.forEach(r=>{r.patchValue({supersetId:null,supersetOrder:null,type:"standard"},{emitEvent:!1})}),this.toastService.info(this.translate.instant("workoutBuilder.toasts.tabataRemoved"),3e3))}this.workoutExercisesFormArray.updateValueAndValidity(),this.previousGoalValue=t}))}showAdvancedOptions=R(!1);getAdvancedOptionsCount(){let t=0;return this.builderForm.get("description")?.value&&t++,this.builderForm.get("primaryCategory")?.value&&t++,this.builderForm.get("secondaryCategory")?.value&&t++,this.builderForm.get("tags")?.value&&t++,t}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=le({type:n,selectors:[["app-workout-builder"]],viewQuery:function(e,i){if(e&1&&(Pe(al,5),Pe(ll,5),Pe(cl,5),Pe(dl,5)),e&2){let r;Oe(r=Le())&&(i.myExerciseInput=r.first),Oe(r=Le())&&(i.setRepsInputs=r),Oe(r=Le())&&(i.expandedSetElements=r),Oe(r=Le())&&(i.expandedExerciseCard=r)}},inputs:{context:"context",initialRoutine:"initialRoutine",mode:"mode"},outputs:{routineConfirmed:"routineConfirmed",modalClose:"modalClose"},features:[ht([Sn])],decls:32,vars:39,consts:[["tempoInputTemplate",""],["incrementerInputTemplate",""],["metricInputTemplate",""],["notPerformedYet",""],["locationNameInput",""],["expandedExerciseCard",""],["superSetControlPanel_Info",""],["detailedSetView",""],["uniformValues",""],["noNotes",""],["allSetEditingPanel",""],["setElement",""],["expandedSetElement",""],["superSetControlPanel_rounds",""],["exerciseActionMenuContainer",""],["inputElem",""],["class","my-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-xl dark:bg-red-900/30 dark:border-red-600 dark:text-red-300",4,"ngIf"],[1,"container","mx-auto",3,"ngClass"],[1,"flex","items-center","justify-between","p-2"],[1,"flex","justify-between","items-center"],[1,"text-gray-600","dark:text-gray-300","hover:text-primary","dark:hover:text-primary-light","p-2","rounded-full","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["name","back"],[1,"w-10","h-10"],[1,"flex","items-center","space-x-2","flex-shrink-0"],[4,"ngIf"],[1,"space-y-6","mb-6","p-1","rounded-xl","shadow-xl","overflow-hidden",3,"formGroup"],[1,"space-y-2","p-2","rounded-xl","shadow-sm","dark:shadow-none","text-gray-700","dark:text-gray-200"],["class","p-4 bg-blue-50 dark:bg-blue-900/30 rounded-xl text-center",4,"ngIf"],["class","py-2 px-1 flex-col gap-2 flex items-center sticky bottom-0",4,"ngIf"],["itemIconName","plus-circle","itemIconClass","text-primary dark:text-primary-light",3,"searchTermChange","exercisesSelected","createCustomClicked","close","isOpen","searchTerm","isMultiSelect","title","exercises","customPB"],["itemIconName","change","itemIconClass","text-green-500",3,"searchTermChange","exerciseSelected","findSimilarClicked","backToSearchClicked","close","isOpen","searchTerm","title","exercises","searchPlaceholder","showSimilarButton","isShowingSimilarView","customPB"],[3,"isOpen","modalTitle","isOpenChange",4,"ngIf"],[3,"forceFullScreen","isOpen","modalTitle","isOpenChange",4,"ngIf"],[3,"actionClicked","actions","checkForPausedSession","scrollToBottomDisabled","scrollToTopDisabled"],[3,"close","generate","isOpen","customPB"],[1,"hidden","p-2.5"],[1,"my-4","p-3","bg-red-100","border","border-red-400","text-red-700","rounded-xl","dark:bg-red-900/30","dark:border-red-600","dark:text-red-300"],["class","relative",4,"ngIf"],[1,"relative"],["appBumpClick","",1,"text-gray-500","dark:text-gray-400","hover:bg-gray-200","dark:hover:bg-gray-500","rounded-full","focus:outline-none","flex","items-center",3,"click"],["name","menu-action",1,"h-10","w-10"],["displayMode","dropdown",3,"gridClass","items","isVisible","itemClick","closeMenu",4,"ngIf"],["displayMode","dropdown",3,"itemClick","closeMenu","gridClass","items","isVisible"],["class","text-gray-700 dark:text-gray-200",4,"ngIf"],[4,"ngIf","ngIfElse"],["class","text-m text-gray-500 dark:text-gray-300 flex items-center justify-start gap-2",4,"ngIf"],[1,"border-t","border-gray-300","dark:border-gray-600","pt-2","mt-2"],["type","button","appBumpClick","",1,"flex","items-center","justify-between","w-full","px-3","py-2","rounded-lg","hover:bg-gray-100","dark:hover:bg-gray-700","transition-colors",3,"click"],[1,"flex","items-center","gap-2"],[1,"h-5","w-5","text-gray-500",3,"name"],[1,"font-medium","text-gray-700","dark:text-gray-300"],["class","text-xs text-gray-500 dark:text-gray-400",4,"ngIf"],["class","mt-3 px-2 p-2 space-y-3 bg-gray-50 dark:bg-gray-700/30 rounded-lg",4,"ngIf"],[1,"flex","items-center","justify-start","gap-2","pb-3"],["name","routines",1,"w-10","h-10","text-primary"],[1,"block","text-xl","font-black","text-gray-700","dark:text-gray-200"],[1,"text-gray-700","dark:text-gray-200"],["for","routineName",1,"block","text-m","font-medium"],["type","text","id","routineName","formControlName","name",1,"mt-1","block","w-full","p-2","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:border-gray-500",3,"placeholder","ngClass"],["class","text-red-500 dark:text-red-400 text-xs mt-1",4,"ngIf"],[1,"text-red-500","dark:text-red-400","text-xs","mt-1"],[1,"mt-1","block","w-full","shadow-sm","dark:shadow-none","text-gray-700","dark:text-gray-200",3,"innerHTML"],[1,"block","text-m","text-gray-700","dark:text-gray-300","flex","items-center","justify-start","gap-2"],["name","goal",1,"h-6","w-6","text-primary"],[1,"font-medium"],[1,"flex","items-center","justify-start","gap-2"],["name","goal",1,"w-6","h-6","text-primary"],["for","goal",1,"block","text-m","font-medium","text-gray-700","dark:text-gray-300"],["id","goal","formControlName","goal",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","dark:bg-gray-600","dark:text-gray-200"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-m","text-gray-500","dark:text-gray-300"],[1,"font-medium","flex","items-center","justify-start","gap-2"],["name","calendar",1,"w-6","h-6","text-primary"],["class","text-sm text-gray-500 dark:text-gray-300 flex gap-1",4,"ngIf"],[1,"text-sm","text-gray-500","dark:text-gray-300","flex","gap-1"],["name","duration",1,"w-6","h-6","text-primary"],[1,"text-sm","text-gray-500","dark:text-gray-300","italic","flex","items-center","justify-start","gap-2","mb-2"],["name","calendar",1,"h-6","w-6","text-primary"],[1,"text-m","text-gray-500","dark:text-gray-300","flex","items-center","justify-start","gap-2"],["name","duration",1,"h-6","w-6","text-primary"],["name","muscle",1,"h-6","w-6","text-primary"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"mt-3","px-2","p-2","space-y-3","bg-gray-50","dark:bg-gray-700/30","rounded-lg"],["class","mt-2",4,"ngIf"],["for","description",1,"block","text-m","font-medium","text-gray-700","dark:text-gray-300"],["id","description","formControlName","description","rows","3",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-500","rounded-xl","shadow-sm","dark:bg-gray-600","dark:text-gray-200",3,"placeholder"],["name","category",1,"h-6","w-6","text-primary"],["name","category",1,"w-6","h-6","text-primary"],["for","primaryCategory",1,"block","text-m","font-medium","text-gray-700","dark:text-gray-200"],["id","primaryCategory","formControlName","primaryCategory",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-500","rounded-xl","shadow-sm","dark:bg-gray-600","text-gray-700","dark:text-gray-200"],[1,"block","text-m","text-gray-700","dark:text-gray-300"],["for","secondaryCategory",1,"block","text-m","font-medium","text-gray-700","dark:text-gray-200"],["type","text","id","secondaryCategory","formControlName","secondaryCategory",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-500","rounded-xl","shadow-sm","text-gray-700","dark:bg-gray-600","dark:text-gray-200",3,"placeholder"],[1,"mt-2"],[1,"flex","items-center","gap-2","flex-wrap"],["name","tags",1,"w-6","h-6","text-primary"],[1,"block","text-m","font-medium","text-gray-700","dark:text-gray-200"],["class","bg-gray-200 text-gray-700 dark:bg-gray-600 text-gray-700 dark:text-gray-200 text-xs font-semibold px-2 py-1 rounded-full",4,"ngFor","ngForOf"],[1,"bg-gray-200","text-gray-700","dark:bg-gray-600","text-gray-700","dark:text-gray-200","text-xs","font-semibold","px-2","py-1","rounded-full"],["for","tags",1,"block","text-m","font-medium","text-gray-700","dark:text-gray-200"],["type","text","id","tags","formControlName","tags",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-500","rounded-xl","shadow-sm","dark:bg-gray-600","text-gray-700","dark:text-gray-200",3,"placeholder"],["class","flex items-center justify-between py-2",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"flex","items-center"],["name","calendar",1,"h-5","w-5","text-gray-500","dark:text-gray-300","mr-2"],["for","workoutDate",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","date","id","workoutDate","formControlName","workoutDate",1,"mt-1","block","w-full","p-2","border","rounded-md","shadow-sm","dark:bg-gray-600","dark:border-gray-500","dark:text-gray-200",3,"ngClass"],[1,"grid","grid-cols-2","gap-4"],["for","startTime",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","time","id","startTime","formControlName","startTime",1,"mt-1","block","w-full","p-2","border","rounded-md","shadow-sm","dark:bg-gray-600","dark:border-gray-500","dark:text-gray-200",3,"ngClass"],["for","endTime",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","time","id","endTime","formControlName","endTime",1,"mt-1","block","w-full","p-2","border","rounded-md","shadow-sm","dark:bg-gray-600","dark:border-gray-500","dark:text-gray-200",3,"change","ngClass"],["for","logWorkoutName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","logWorkoutName","formControlName","name",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","dark:bg-gray-600","dark:text-gray-200",3,"placeholder"],["for","routineIdForLog",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","routineIdForLog","formControlName","routineIdForLog",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","dark:bg-gray-600","dark:text-gray-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["for","programIdForLog",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","programIdForLog","formControlName","programIdForLog",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","dark:bg-gray-600","dark:text-gray-200"],["for","locationId",1,"block","text-m","font-medium","text-gray-700","dark:text-gray-200"],["id","locationId","formControlName","locationId",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","dark:bg-gray-600","text-gray-700","dark:text-gray-200"],[1,"flex","items-center","mb-1"],["name","clipboard-list",1,"h-5","w-5","text-gray-500","dark:text-gray-300","mr-2"],["for","overallNotesLog",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","overallNotesLog","formControlName","overallNotesLog","rows","2",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-500","rounded-xl","shadow-sm","dark:bg-gray-600","dark:text-gray-200"],[1,"flex","items-center","justify-between","py-2"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-200"],["for","iterationIdForLog",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["class","text-xs text-red-500 dark:text-primary-light",4,"ngIf"],["id","iterationIdForLog","formControlName","iterationIdForLog",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","dark:bg-gray-600","dark:text-gray-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"text-xs","text-red-500","dark:text-primary-light"],["for","scheduledDayIdForLog",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","scheduledDayIdForLog","formControlName","scheduledDayIdForLog",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","dark:bg-gray-600","dark:text-gray-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["name","map",1,"h-5","w-5","text-gray-500","dark:text-gray-300","mr-2"],["for","locationName",1,"block","text-m","font-medium","text-gray-700","dark:text-gray-200"],["id","locationName","type","text","formControlName","locationName","autocomplete","off",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-500","rounded-xl","shadow-sm","dark:bg-gray-600","text-gray-700","dark:text-gray-200",3,"focus","input","placeholder"],["id","locationName-list"],["cdkDropList","","formArrayName","workoutExercises","class","exercise-list-container",3,"cdkDropListData","cdkDropListDisabled","cdkDropListDropped",4,"ngIf"],["class","text-center text-gray-500 dark:text-gray-400 border border-dashed dark:border-gray-700 rounded-xl mt-4 py-1",4,"ngIf"],["class","text-center py-4 text-gray-500 dark:text-gray-400",4,"ngIf"],["cdkDropList","","formArrayName","workoutExercises",1,"exercise-list-container",3,"cdkDropListDropped","cdkDropListData","cdkDropListDisabled"],[4,"ngFor","ngForOf"],["appClickOutside","",1,"relative","group","exercise-card-wrapper",3,"clickOutside","ngClass"],["class","absolute left-1/2 -translate-x-1/2 z-20 flex space-x-2","style","top: -1.8rem;",4,"ngIf"],["cdkDrag","","appLongPressDrag","","longPressClass","is-long-pressing",1,"transition-all",3,"click","cdkDragStarted","cdkDragEnded","cdkDragDisabled","dragHandleSelector","longPressEnabled","longPressDelay","cdkDragData","cdkDragStartDelay","formGroupName","title"],["class","absolute -right-2 top-2 z-20 transform translate-x-1 -translate-y-5",4,"ngIf"],["class","flex flex-col items-end space-y-2 flex-shrink-0 w-full sm:w-auto",4,"ngIf"],[1,"exercise-item-content"],["class","px-2 text-xl font-medium mt-0.5",3,"ngClass",4,"ngIf"],[1,"flex","items-center","space-x-1","pt-1","px-1"],["cdkDragHandle","","class","p-1 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 flex-shrink-0 flex item-center cursor-move rounded-xl",3,"title",4,"ngIf"],["type","checkbox","class","h-6 w-6 text-orange-600 border-gray-300 dark:border-gray-600 rounded-xl focus:ring-orange-500 flex-shrink-0 disabled:opacity-50",3,"title","id","checked","change",4,"ngIf"],["class","flex-grow min-w-0 py-2 px-0",4,"ngIf"],["class","p-2",4,"ngIf"],["class","flex items-center justify-center py-2",4,"ngIf"],[1,"absolute","top-1","right-1","z-20",3,"ngClass"],["class","flex items-center space-x-1",4,"ngIf"],[1,"absolute","left-1/2","-translate-x-1/2","z-20","flex","space-x-2",2,"top","-1.8rem"],["type","button","class","bg-red-600 hover:bg-red-700 text-white text-xs font-semibold py-1.5 px-3 rounded-lg shadow-lg min-w-[100px]",3,"click",4,"ngIf"],["type","button","class","bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-semibold py-1.5 px-3 rounded-lg shadow-lg min-w-[100px] flex items-center justify-center",3,"click",4,"ngIf"],["type","button","class","bg-green-600 hover:bg-green-700 text-white text-xs font-semibold py-1.5 px-3 rounded-lg shadow-lg min-w-[100px]",3,"click",4,"ngIf"],["type","button","class","bg-violet-600 hover:bg-violet-700 text-white text-xs font-semibold py-1.5 px-3 rounded-lg shadow-lg min-w-[100px]",3,"click",4,"ngIf"],["type","button",1,"bg-red-600","hover:bg-red-700","text-white","text-xs","font-semibold","py-1.5","px-3","rounded-lg","shadow-lg","min-w-[100px]",3,"click"],["type","button",1,"bg-indigo-600","hover:bg-indigo-700","text-white","text-xs","font-semibold","py-1.5","px-3","rounded-lg","shadow-lg","min-w-[100px]","flex","items-center","justify-center",3,"click"],["name","bookmark",1,"h-4","w-4","mr-1"],["type","button",1,"bg-green-600","hover:bg-green-700","text-white","text-xs","font-semibold","py-1.5","px-3","rounded-lg","shadow-lg","min-w-[100px]",3,"click"],["type","button",1,"bg-violet-600","hover:bg-violet-700","text-white","text-xs","font-semibold","py-1.5","px-3","rounded-lg","shadow-lg","min-w-[100px]",3,"click"],[1,"absolute","-right-2","top-2","z-20","transform","translate-x-1","-translate-y-5"],[1,"text-[10px]","uppercase","font-black","px-2","py-0.5","rounded-md","text-white","shadow-sm",3,"ngStyle"],[1,"flex","flex-col","items-end","space-y-2","flex-shrink-0","w-full","sm:w-auto"],[1,"p-2","bg-gray-100","dark:bg-gray-800","rounded-lg","shadow-sm","w-full"],[1,"flex","items-center","gap-x-2"],[1,"text-sm","font-semibold","text-gray-700","dark:text-gray-300"],[1,"text-lg","text-gray-900","dark:text-white"],[1,"flex","items-center","justify-start"],[1,"text-sm","ml-1",3,"ngClass"],["appBumpClick","","type","button",1,"flex","items-center","ml-2","text-xs","font-semibold","text-white","hover:underline","bg-blue-300","hover:bg-blue-500","rounded-xl","p-1",3,"click"],["name","change",1,"h-5","w-5","mr-1"],["class","col-span-2 flex items-center gap-x-2",4,"ngIf"],["cdkDragHandle","",1,"p-1","text-gray-400","hover:text-gray-600","dark:text-gray-500","dark:hover:text-gray-300","flex-shrink-0","flex","item-center","cursor-move","rounded-xl",3,"title"],["name","reorder"],[1,"col-span-2","flex","items-center","gap-x-2"],[1,"text-sm","font-semibold","text-gray-700","dark:text-gray-300","flex-shrink-0",3,"for"],["type","text","inputmode","decimal","pattern","[0-9]*","numbersOnly","","formControlName","emomTimeSeconds","min","10",1,"w-full","p-1","mt-1","text-m","border-gray-300","dark:border-gray-500","rounded-xl","focus:ring-primary","dark:bg-gray-600","dark:text-gray-200","text-right",3,"id"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["type","text","formControlName","restBetweenRounds","inputmode","decimal","pattern","[0-9]*","numbersOnly","",1,"w-full","p-1","mt-1","text-m","border-gray-300","dark:border-gray-500","rounded-xl","focus:ring-primary","dark:bg-gray-600","dark:text-gray-200","text-right",3,"change","step","min"],[1,"px-2","text-xl","font-medium","mt-0.5",3,"ngClass"],["type","checkbox",1,"h-6","w-6","text-orange-600","border-gray-300","dark:border-gray-600","rounded-xl","focus:ring-orange-500","flex-shrink-0","disabled:opacity-50",3,"change","title","id","checked"],[1,"flex-grow","min-w-0","py-2","px-0"],["class","flex items-center text-s text-gray-500 dark:text-gray-400 mt-0.5 gap-4 pl-2",4,"ngIf"],[1,"flex","items-center","text-s","text-gray-500","dark:text-gray-400","mt-0.5","gap-4","pl-2"],[1,"min-w-0"],[1,"flex"],["alt","Exercise Icon",1,"object-contain","mr-1","flex-shrink-0","filter","dark:invert","w-8","h-8",3,"src"],[1,"font-semibold","text-gray-800","dark:text-gray-100","text-wrap","text-lg","max-exercise-length",3,"title"],[1,"text-xl","text-gray-500","dark:text-gray-400","truncate"],[1,"max-w-[250px]","sm:max-w-full","text-wrap","text-sm","text-gray-500","dark:text-gray-400"],[1,"ml-1"],["class","mx-2",4,"ngIf"],[1,"mx-2"],["class","mx-1",4,"ngIf"],["class","inline-flex items-center",4,"ngIf"],[1,"mx-1"],[1,"inline-flex","items-center"],["name","duration",1,"h-4","w-4","mr-1"],["name","rest",1,"h-4","w-4","mr-1"],[1,"block","text-sm","text-gray-500","dark:text-gray-400"],[1,"p-2"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","pb-2","pt-1","px-1","sm:pt-0","rounded-xl","bg-gray-100","dark:bg-gray-800",3,"click","ngClass"],[1,"flex-grow"],["class","text-xs font-mono block mb-1",3,"ngClass",4,"ngIf"],["alt","Exercise Icon",1,"object-contain","mr-3","flex-shrink-0","filter","dark:invert",3,"src","ngClass"],[1,"text-lg","font-semibold","text-gray-800","dark:text-gray-100","max-exercise-length"],["class","gap-x-2 gap-y-2 px-2 py-2 bg-white rounded-xl rounded-t-none dark:bg-gray-800 text-gray-900 dark:text-white ",3,"ngClass",4,"ngIf"],["class","space-y-1","id","expandedExerciseSetsContainer",4,"ngIf"],[1,"text-xs","font-mono","block","mb-1",3,"ngClass"],[1,"block","text-s","font-medium","text-gray-600","dark:text-gray-400","mb-0.5",3,"for"],["formControlName","notes","rows","1","appAutoGrow","",1,"mt-0.5","mb-2","block","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-500","rounded-xl","shadow-sm","dark:bg-gray-600","dark:text-gray-200",3,"id","readonly"],[1,"gap-x-2","gap-y-2","px-2","py-2","bg-white","rounded-xl","rounded-t-none","dark:bg-gray-800","text-gray-900","dark:text-white",3,"ngClass"],[1,"font-bold","text-xs","uppercase","text-gray-500","dark:text-gray-400","text-center"],["class","font-bold text-xs uppercase text-gray-500 dark:text-gray-400 text-center",4,"ngIf"],[1,"font-medium","flex","items-center","justify-center"],["class","flex items-center justify-center",4,"ngIf"],["class","col-span-full h-px bg-gray-200 dark:bg-gray-700",4,"ngIf"],[1,"flex","items-center","justify-center"],[1,"cursor-pointer",3,"click"],["name","clipboard-list",1,"h-8","w-8","text-gray-500","dark:text-white"],[1,"col-span-full","h-px","bg-gray-200","dark:bg-gray-700"],["id","expandedExerciseSetsContainer",1,"space-y-1"],[1,"flex-col","py-2","px-1","flex","gap-y-2"],["class","px-2 pt-2",4,"ngIf"],["formArrayName","sets",1,"space-y-1.5"],[4,"ngLet"],[3,"formGroupName","add-set-animated",4,"ngFor","ngForOf"],[1,"px-2","pt-2"],["appBumpClick","",1,"w-full","flex","justify-between","items-center","p-2","text-sm","font-semibold","text-gray-600","dark:text-gray-300","bg-gray-200","dark:bg-gray-700/60","rounded-xl","hover:bg-gray-300","dark:hover:bg-gray-700",3,"click"],["name","chevron-down",1,"h-5","w-5","transition-transform","duration-200"],[1,"overflow-hidden","transition-all","duration-300","ease-in-out"],[1,"flex","flex-wrap","gap-2","my-3","justify-center"],[1,"p-4","border","border-t-0","border-gray-200","dark:border-gray-700","rounded-b-xl","bg-white","dark:bg-gray-800"],[1,"block","text-xs","font-medium","text-gray-500","dark:text-gray-200"],["type","number","min","1",1,"mt-1","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-500","rounded-xl","dark:bg-gray-600","dark:text-gray-200",3,"ngModelChange","ngModel","ngModelOptions","step"],["type","number","min","0",1,"mt-1","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-500","rounded-xl","dark:bg-gray-600","dark:text-gray-200",3,"ngModelChange","ngModel","ngModelOptions","step"],["type","number","min","0.1",1,"mt-1","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-500","rounded-xl","dark:bg-gray-600","dark:text-gray-200",3,"ngModelChange","ngModel","ngModelOptions","step"],[1,"mt-4","text-right"],["appBumpClick","",1,"px-4","py-2","bg-primary","text-white","text-sm","font-semibold","rounded-xl","shadow-sm","hover:bg-primary-dark","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["type","button",1,"px-3","py-1","rounded-full","border","font-semibold","text-xs","transition",3,"click","ngClass"],[1,"flex","items-center","gap-x-3","py-1","px-2","text-xs","font-medium","text-gray-500","dark:text-gray-400","border-b","dark:border-gray-600",3,"ngClass"],[1,"flex-shrink-0","w-8","text-center"],[1,"flex-grow","min-w-0"],[1,"flex","items-center","justify-start","gap-x-4"],["class","w-16 text-center",4,"ngIf"],["class","w-20 text-center truncate",4,"ngIf"],["class","w-24 text-center",4,"ngIf"],[1,"flex-shrink-0","w-6"],[1,"w-16","text-center"],[1,"w-20","text-center","truncate"],[1,"w-24","text-center"],[3,"formGroupName"],["class","p-1 rounded-xl shadow-inner space-y-2 border-gray-400 ring-1 dark:ring-gray-500 z-10",3,"ngClass",4,"ngIf"],[1,"flex","items-center","gap-x-3","py-1.5","px-2","rounded-xl","hover:bg-gray-100","dark:hover:bg-gray-800/60","cursor-pointer","border","dark:border-gray-700","dark:text-white",3,"click","ngClass"],[1,"flex-shrink-0","w-8","text-s","text-center","font-medium"],["class","w-16 text-s text-center truncate",4,"ngIf"],["class","w-20 text-s text-center truncate",4,"ngIf"],["class","w-24 text-s text-center truncate",4,"ngIf"],[1,"flex-shrink-0"],["appBumpClick","","type","button",1,"flex","items-center","text-red-500","hover:text-red-600","dark:text-red-400","dark:hover:text-red-300","p-0.5","rounded-full","hover:bg-red-100","dark:hover:bg-red-900/30",3,"click","title"],["name","cancel",1,"h-4","w-4"],[1,"w-16","text-s","text-center","truncate"],[1,"w-20","text-s","text-center","truncate"],[1,"w-24","text-s","text-center","truncate"],[1,"p-1","rounded-xl","shadow-inner","space-y-2","border-gray-400","ring-1","dark:ring-gray-500","z-10",3,"ngClass"],[3,"click","ngClass"],[1,"flex","items-center","justify-end"],["class","flex w-fit items-center justify-center gap-2 bg-gray-200 dark:bg-gray-900/70 p-2 rounded-full",4,"ngIf"],["class","flex w-fit items-center justify-center gap-2 bg-gray-200 dark:bg-gray-900/70 py-1 px-2 rounded-full",4,"ngIf"],[1,"grid","grid-cols-2","sm:grid-cols-3","gap-x-3","gap-y-2","items-end"],[1,"col-span-full","sm:col-span-1"],[1,"block","text-s","font-medium","text-gray-600","dark:text-gray-400",3,"for"],["formControlName","type",1,"mt-0.5","w-full","p-1.5","text-m","border-gray-300","dark:border-gray-500","rounded-xl","dark:bg-gray-600","dark:text-gray-200","disabled:opacity-70","disabled:cursor-not-allowed",3,"id","disabled"],[1,"flex","w-fit","items-center","justify-center","gap-2","bg-gray-200","dark:bg-gray-900/70","p-2","rounded-full"],[1,"flex","w-fit","items-center","justify-center","gap-2","bg-gray-200","dark:bg-gray-900/70","py-1","px-2","rounded-full"],[1,"flex","items-center","justify-between","text-s","font-medium","text-gray-600","dark:text-gray-400"],["appBumpClick","",1,"p-1.5","rounded-full","bg-red-500","dark:bg-red-500/80","hover:bg-red-500","text-white","disabled:opacity-50","flex","items-center",3,"click"],["name","minus",1,"h-5","w-5"],["appBumpClick","","class","p-1.5 rounded-full bg-blue-500 dark:bg-blue-500/80 hover:bg-blue-500 text-white disabled:opacity-50 flex items-center",3,"click",4,"ngIf"],["appBumpClick","",1,"p-1.5","rounded-full","bg-blue-500","dark:bg-blue-500/80","hover:bg-blue-500","text-white","disabled:opacity-50","flex","items-center",3,"click"],["name","plus",1,"h-5","w-5"],["class","flex items-end justify-center h-full",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"flex","items-end","justify-center","h-full"],["appBumpClick","",1,"flex","items-center","justify-center","w-full","p-2","h-16","border-2","border-dashed","border-gray-300","dark:border-gray-600","rounded-xl","text-gray-400","hover:bg-gray-200/50","dark:hover:bg-gray-700/50","transition-colors",3,"click"],["name","plus-circle",1,"h-6","w-6"],[1,"flex","items-center","justify-center","py-2"],[1,"flex","w-fit","items-center","justify-center","gap-2","bg-gray-200","dark:bg-gray-900/70","py-1","px-2","rounded-full","shadow-md"],["appBumpClick","","type","button",1,"p-1.5","rounded-full","bg-red-500","dark:bg-red-500/80","hover:bg-red-500","text-white","disabled:opacity-50","flex","items-center",3,"click","aria-label"],["appBumpClick","","type","button",1,"p-1.5","rounded-full","bg-green-500","dark:bg-green-500/80","hover:bg-green-500","text-white","flex","items-center",3,"click","aria-label"],["appBumpClick","","type","button",1,"p-1.5","rounded-full","bg-red-500","dark:bg-red-500/80","hover:bg-red-500","text-white","disabled:opacity-50","flex","items-center",3,"click","disabled","aria-label"],["name","minus",1,"h-6","w-6"],["appBumpClick","","type","button",1,"p-1.5","rounded-full","bg-green-500","dark:bg-green-500/80","hover:bg-green-500","text-white","disabled:opacity-50","flex","items-center",3,"click","aria-label"],["name","plus",1,"h-6","w-6"],[1,"flex","items-center","space-x-1"],["displayMode","dropdown",3,"items","isVisible","itemClick","closeMenu",4,"ngIf"],["displayMode","dropdown",3,"itemClick","closeMenu","items","isVisible"],[1,"text-center","text-gray-500","dark:text-gray-400","border","border-dashed","dark:border-gray-700","rounded-xl","mt-4","py-1"],[1,"my-2"],["appBumpClick","","type","button",1,"bg-green-500","hover:bg-green-600","text-white","text-m","font-medium","py-2","px-3","rounded-xl",3,"click"],[1,"text-center","py-4","text-gray-500","dark:text-gray-400"],[1,"p-4","bg-blue-50","dark:bg-blue-900/30","rounded-xl","text-center"],[1,"text-m","text-blue-700","dark:text-blue-300"],[1,"py-2","px-1","flex-col","gap-2","flex","items-center","sticky","bottom-0"],["class","text-center text-gray-500 dark:text-gray-400 border border-dashed dark:border-gray-700 rounded-xl mt-4",4,"ngIf"],["appBumpClick","","type","button",1,"flex","items-center","justify-center","px-4","py-2","border","border-transparent","rounded-xl","shadow-sm","text-sm","font-medium","text-white","bg-primary","hover:bg-primary-dark","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-dark","disabled:opacity-50","min-w-[220px]",3,"click","disabled"],["name","save",1,"h-6","w-6","mr-1"],[1,"text-center","text-gray-500","dark:text-gray-400","border","border-dashed","dark:border-gray-700","rounded-xl","mt-4"],["appBumpClick","","type","button",1,"flex","items-center","justify-center","px-4","py-2","border","border-transparent","rounded-xl","shadow-sm","text-sm","font-medium","text-white","bg-green-600","hover:bg-green-800","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-green-800","disabled:opacity-50","min-w-[220px]",3,"click"],["name","plus-circle",1,"h-6","w-6","mr-1"],["appBumpClick","","type","button",1,"flex","items-center","justify-center","px-4","py-2","border","border-transparent","rounded-xl","shadow-sm","text-sm","font-medium","text-white","bg-yellow-600","hover:bg-yellow-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-yellow-500","min-w-[220px]",3,"click"],["name","restore",1,"h-6","w-6","mr-1"],["appBumpClick","","type","button",1,"flex","items-center","justify-center","px-4","py-2","border","border-transparent","rounded-xl","shadow-sm","text-sm","font-medium","text-white","bg-purple-600","hover:bg-purple-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-purple-500","min-w-[220px]",3,"click"],["name","random",1,"h-6","w-6","mr-1"],[3,"formGroup"],[1,"flex","items-center","justify-between","text-s","font-medium","text-gray-600","dark:text-gray-400",3,"for"],["type","text","formControlName","targetTempo","class","mt-0.5 input_number_class",3,"id","placeholder","readonly",4,"ngIf"],["type","text","formControlName","targetTempo",1,"mt-0.5","input_number_class",3,"placeholder","readonly"],["type","text","formControlName","targetTempo",1,"mt-0.5","input_number_class",3,"id","placeholder","readonly"],[1,"flex","items-stretch","w-full","shadow-sm","p-0.5","bg-gray-200","dark:bg-gray-700","rounded-xl"],["appBumpClick","","type","button","appPress","",1,"flex","items-center","px-3","py-5","bg-gray-200","dark:bg-gray-700","text-gray-800","dark:text-gray-200","hover:bg-gray-300","dark:hover:bg-gray-600","rounded-l-xl","border-y","border-l","border-gray-200","dark:border-gray-700","transition-colors",3,"shortPress","longPress","pressRelease"],["name","minus",1,"h-6","w-6","pointer-events-none"],[1,"relative","w-full","flex-grow","rounded-xl","my-1","h-14"],[1,"absolute","inset-0","flex","items-center","justify-center","text-center","text-lg","font-bold","text-black","dark:text-gray-200","border-y","border-transparent","z-10","cursor-text","select-none",3,"click"],["type","text","inputmode","decimal","pattern","[0-9]*","numbersOnly","",1,"absolute","inset-0","w-full","h-full","px-1.5","py-2","text-center","text-lg","font-bold","bg-transparent","dark:bg-gray-800","rounded-xl","text-black","dark:text-gray-200","focus:ring-2","focus:ring-primary","dark:focus:ring-primary-light","focus:outline-none","no-arrows","z-20",3,"input","focus","blur","wheel","touchstart","touchmove","value","readonly","ngClass"],["appBumpClick","","type","button","appPress","",1,"flex","items-center","px-3","py-5","bg-gray-200","dark:bg-gray-700","text-gray-800","dark:text-gray-200","hover:bg-gray-300","dark:hover:bg-gray-600","rounded-r-xl","border-y","border-r","border-gray-200","dark:border-gray-700","transition-colors",3,"shortPress","longPress","pressRelease"],["name","plus",1,"h-6","w-6","pointer-events-none"],["type","button",1,"text-xs","text-blue-600","hover:text-blue-800","dark:text-blue-400","dark:hover:text-blue-300","font-semibold","p-0.5","rounded",3,"click"],["class","w-full px-2 py-5 text-center text-lg font-bold bg-gray-50 dark:bg-gray-800 border border-2 border-gray-200 dark:border-gray-700 text-black dark:text-gray-200 focus:ring-2 focus:ring-primary dark:focus:ring-primary-light focus:outline-none z-10 relative rounded-xl",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"flex","items-center","w-full","justify-center","bg-gray-200","dark:bg-gray-700","p-0.5","rounded-xl"],["type","text","inputmode","decimal","pattern","[0-9]*","numbersOnly","","placeholder","Min","min","0",1,"w-full","px-2","py-4","text-center","text-lg","font-bold","bg-gray-50","dark:bg-gray-800","border-y","border-gray-200","dark:border-gray-700","text-black","dark:text-gray-200","focus:ring-2","focus:ring-primary","dark:focus:ring-primary-light","focus:outline-none","z-10","relative","rounded-xl","no-arrows","h-16",3,"input","readonly","value"],[1,"input_number_class_separator"],["type","text","inputmode","decimal","pattern","[0-9]*","numbersOnly","","placeholder","Max","min","0",1,"w-full","px-2","py-4","text-center","text-lg","font-bold","bg-gray-50","dark:bg-gray-800","border-y","border-gray-200","dark:border-gray-700","text-black","dark:text-gray-200","focus:ring-2","focus:ring-primary","dark:focus:ring-primary-light","focus:outline-none","z-10","relative","rounded-xl","no-arrows","h-16",3,"input","readonly","value"],[1,"w-full","px-2","py-5","text-center","text-lg","font-bold","bg-gray-50","dark:bg-gray-800","border","border-2","border-gray-200","dark:border-gray-700","text-black","dark:text-gray-200","focus:ring-2","focus:ring-primary","dark:focus:ring-primary-light","focus:outline-none","z-10","relative","rounded-xl"],["type","text",1,"mt-0.5","input_number_class",3,"formControlName","readonly"],[3,"isOpenChange","isOpen","modalTitle"],[1,"flex","flex-col","p-4","text-left","text-gray-700","dark:text-gray-200"],["name","","id","",1,"font-semibold","pb-2","dark:border-gray-600","dark:bg-gray-800",3,"disabled"],[1,"flex","justify-center"],["appBumpClick","",1,"w-fit","px-4","py-2","bg-primary","text-white","rounded-xl","hover:bg-primary-dark","focus:outline-none","focus:ring-2","focus:ring-primary-light","flex","items-center",3,"click"],["name","done",1,"h-6","w-6","mr-1"],[3,"isOpenChange","forceFullScreen","isOpen","modalTitle"],[3,"id","isModal"]],template:function(e,i){if(e&1){let r=D();k(0,El,2,1,"div",16),d(1,"div",17)(2,"header",18)(3,"div",19)(4,"button",20),I("click",function(){return w(r),S(i.handleCancel())}),E(5,"app-icon",21),c(),E(6,"div",22),c(),d(7,"div",23),k(8,Ml,2,1,"div",24),c()(),d(9,"form",25)(10,"section",26),k(11,tc,22,15,"ng-container",24)(12,Sc,69,61,"ng-container",24),c(),k(13,su,4,3,"section",24)(14,au,4,3,"section",27)(15,uu,8,7,"div",28),c()(),k(16,gu,7,7,"ng-template",null,0,Te)(18,hu,11,10,"ng-template",null,1,Te)(20,Mu,22,20,"ng-template",null,2,Te),d(22,"app-exercise-selection-modal",29),x(23,"translate"),Q("searchTermChange",function(s){return w(r),Z(i.modalSearchTerm,s)||(i.modalSearchTerm=s),S(s)}),I("exercisesSelected",function(s){return w(r),S(i.selectExercisesFromLibrary(s))})("createCustomClicked",function(){return w(r),S(i.handleTrulyCustomExerciseEntry())})("close",function(){return w(r),S(i.closeExerciseSelectionModal())}),c(),d(24,"app-exercise-selection-modal",30),x(25,"translate"),x(26,"translate"),Q("searchTermChange",function(s){return w(r),Z(i.modalSearchTerm,s)||(i.modalSearchTerm=s),S(s)}),I("exerciseSelected",function(s){return w(r),S(i.handleExerciseSwitch(s))})("findSimilarClicked",function(){return w(r),S(i.findAndShowSimilarExercises())})("backToSearchClicked",function(){return w(r),S(i.onBackToSearchFromSimilar())})("close",function(){return w(r),S(i.closeSwitchExerciseModal())}),c(),k(27,Fu,10,9,"app-modal",31)(28,Du,2,5,"app-modal",32),d(29,"app-fab-menu",33),I("actionClicked",function(s){return w(r),S(i.onFabAction(s))}),c(),d(30,"app-generate-workout-modal",34),I("close",function(){return w(r),S(i.isGeneratorModalOpen.set(!1))})("generate",function(s){return w(r),S(i.handleWorkoutGeneration(s))}),c(),E(31,"div",35)}if(e&2){let r,o;p("ngIf",i.errorMessage()),a(),p("ngClass",de(37,ul,i.context==="modal")),a(7),p("ngIf",i.liveFormAsRoutine()),a(),p("formGroup",i.builderForm),a(2),p("ngIf",i.isRoutineMode),a(),p("ngIf",i.mode===i.BuilderMode.manualLogEntry),a(),p("ngIf",i.mode===i.BuilderMode.manualLogEntry||((r=i.builderForm.get("goal"))==null?null:r.value)!==i.metricEnum.rest),a(),p("ngIf",((o=i.builderForm.get("goal"))==null?null:o.value)===i.metricEnum.rest),a(),p("ngIf",!1),a(7),p("isOpen",i.isExerciseModalOpen),K("searchTerm",i.modalSearchTerm),p("isMultiSelect",!0)("title",v(23,31,"workoutBuilder.modal.addTitle"))("exercises",i.availableExercises)("customPB",i.context==="modal"?"pb-32":""),a(2),p("isOpen",i.isSwitchExerciseModalOpen()),K("searchTerm",i.modalSearchTerm),p("title",v(25,33,i.isShowingSimilarInSwitchModal()?"workoutBuilder.modal.similarTitle":"workoutBuilder.modal.switchTitle"))("exercises",i.exercisesForSwitchModal())("searchPlaceholder",v(26,35,"workoutBuilder.modal.searchPlaceholder"))("showSimilarButton",!0)("isShowingSimilarView",i.isShowingSimilarInSwitchModal())("customPB",i.context==="modal"?"pb-32":""),a(3),p("ngIf",i.notesModalsData()),a(),p("ngIf",i.exerciseDetailsId),a(),p("actions",i.fabMenuItems)("checkForPausedSession",!1)("scrollToBottomDisabled",!0)("scrollToTopDisabled",!0),a(),p("isOpen",i.isGeneratorModalOpen())("customPB",i.context==="modal"?"pb-32":"")}},dependencies:[it,et,It,tt,bn,yn,fn,xn,vn,wi,xi,st,at,rt,En,ot,nt,fi,bi,Fn,vi,yi,Tn,Mn,Dt,Mt,Lo,Oo,Po,Ro,Xi,Ki,eo,so,io,co,Rt,$i,ro,Pt,Zi,Rn,Qi,Ai,Nt,pi,Tt,Zn,Bt],styles:[".exercise-list-container[_ngcontent-%COMP%]{min-height:60px}.exercise-item[_ngcontent-%COMP%]{transition:transform .2s ease-out,box-shadow .2s ease-out}[_nghost-%COMP%]     .is-long-pressing{box-shadow:0 5px 15px #00000040;z-index:1000;box-shadow:inset 0 0 0 2px #a855f7,0 5px 15px #00000040;border-radius:5px}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.5;background:linear-gradient(135deg,#f3f4f6 25%,transparent 25%,transparent 75%,#f3f4f6 75%,#f3f4f6),linear-gradient(135deg,#f3f4f6 25%,transparent 25%,transparent 75%,#f3f4f6 75%,#f3f4f6);background-size:20px 20px;background-position:0 0,10px 10px;background-color:#e5e7eb;border:2px dashed #d1d5db;min-height:100px;border-radius:.375rem;margin-bottom:.5rem;display:block;transition:all .2s ease-out}.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 8px 16px #0000004d;border-radius:.5rem;background-color:var(--card-background-color, white);opacity:.95;transform:scale(1.02);border:3px solid #a855f7}body.dark[_ngcontent-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{background-color:var(--dark-card-background-color, #1f2937);box-shadow:0 8px 16px #00000080;border:3px solid #a855f7}body.dark[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:#374151;border-color:#4b5563}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .exercise-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .2s cubic-bezier(0,0,.2,1),opacity .2s ease-out}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .exercise-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.exercise-card-wrapper.superset-start[_ngcontent-%COMP%]{margin-left:0}.exercise-card-wrapper.superset-member[_ngcontent-%COMP%]{margin-left:1rem;border-left:3px solid var(--primary-color, #3b82f6)}.exercise-card-wrapper.cdk-drag-animating.superset-member[_ngcontent-%COMP%]{opacity:.85;border-left-color:#a855f7}body.dark[_ngcontent-%COMP%]   .exercise-card-wrapper.superset-member[_ngcontent-%COMP%]{border-left-color:var(--primary-light-color, #60a5fa)}body.dark[_ngcontent-%COMP%]   .exercise-card-wrapper.superset-member.cdk-drag-animating[_ngcontent-%COMP%]{border-left-color:#a855f7}.exercise-list-container.dragging-superset-group[_ngcontent-%COMP%]   .superset-member-of-dragged[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);border-left-color:#a855f7;box-shadow:inset 0 0 0 1px #a855f74d}.exercise-card-wrapper.superset-member-of-dragged[_ngcontent-%COMP%]{opacity:.9;border-left:3px solid #a855f7;transition:opacity .15s ease-out,border-left-color .15s ease-out}.cdk-drag-handle[_ngcontent-%COMP%]{cursor:grab;padding:.25rem;color:#9ca3af;position:relative;top:.25rem;right:.25rem}.cdk-drag-handle[_ngcontent-%COMP%]:hover{color:#4b5563}.dark[_ngcontent-%COMP%]   .cdk-drag-handle[_ngcontent-%COMP%]{color:#6b7280}.dark[_ngcontent-%COMP%]   .cdk-drag-handle[_ngcontent-%COMP%]:hover{color:#d1d5db}@media (min-width: 640px){.cdk-drag-handle[_ngcontent-%COMP%]{position:static}}.superset-spacing[_ngcontent-%COMP%]{margin-top:0!important}.max-exercise-length[_ngcontent-%COMP%]{max-width:250px}@media (min-width: 768px){.max-exercise-length[_ngcontent-%COMP%]{max-width:100%}}.input_number_class[_ngcontent-%COMP%]{position:relative;z-index:10;height:4rem;width:100%;border-radius:.75rem;border-top-width:1px;border-bottom-width:1px;--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1));padding:.375rem;text-align:center;font-weight:700;--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity, 1))}.input_number_class[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-opacity: 1;--tw-ring-color: rgb(224 70 13 / var(--tw-ring-opacity, 1))}.input_number_class[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.7}.input_number_class[_ngcontent-%COMP%]:is(.dark *){--tw-border-opacity: 1;border-color:rgb(55 65 81 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity, 1))}.input_number_class[_ngcontent-%COMP%]:focus:is(.dark *){--tw-ring-opacity: 1;--tw-ring-color: rgb(232 108 63 / var(--tw-ring-opacity, 1))}.wrapper_ranged_input_number_class[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:center;border-radius:.75rem;--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1));padding:.125rem}.wrapper_ranged_input_number_class[_ngcontent-%COMP%]::-webkit-outer-spin-button, .wrapper_ranged_input_number_class[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.wrapper_ranged_input_number_class[_ngcontent-%COMP%]{-moz-appearance:textfield}.wrapper_ranged_input_number_class[_ngcontent-%COMP%]:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.input_number_class_separator[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem;font-weight:700;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.input_number_class_separator[_ngcontent-%COMP%]:is(.dark *){--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.numeric-stepper-container[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#2c3240;border-radius:12px;position:relative;overflow:hidden}.numeric-stepper-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent!important;color:transparent;caret-color:#fff;border:none!important;box-shadow:none!important;outline:none!important;position:relative;z-index:2;width:100%;height:100%;text-align:center;font-size:1.5em;font-weight:700}.numeric-stepper-container[_ngcontent-%COMP%]   .input-number-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:absolute;z-index:1;left:0;right:0;text-align:center;color:#fff;pointer-events:none}.numeric-stepper-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;border-top-width:1px;border-bottom-width:1px;--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1));padding:1.25rem .75rem;--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1));transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.numeric-stepper-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.numeric-stepper-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:is(.dark *){--tw-border-opacity: 1;border-color:rgb(55 65 81 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity, 1))}.numeric-stepper-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.no-arrows[_ngcontent-%COMP%]::-webkit-outer-spin-button, .no-arrows[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.no-arrows[_ngcontent-%COMP%]{-moz-appearance:textfield}"],data:{animation:[pr("valueAnimation",[hi(":increment",[xt({transform:"translateY(-100%)",opacity:0}),gi("200ms ease-out",xt({transform:"translateY(0)",opacity:1}))]),hi(":decrement",[xt({transform:"translateY(100%)",opacity:0}),gi("200ms ease-out",xt({transform:"translateY(0)",opacity:1}))])]),pr("exerciseExit",[hi(":leave",[xt({opacity:1,transform:"translateX(0) scale(1)"}),gi("350ms cubic-bezier(.36,1.01,.32,1)",xt({opacity:0,transform:"translateX(80px) scale(0.8)"}))])])]}})};export{Ji as a,er as b,ei as c,Ro as d,Po as e,Oo as f,sp as g,Lo as h,$i as i,Zi as j,Yi as k,Vr as l,eg as m,Nt as n,nr as o,ns as p,rs as q};
