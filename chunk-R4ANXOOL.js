import{a as X}from"./chunk-3COFTT3J.js";import{ba as J,ma as Q}from"./chunk-XO2OHR5N.js";import{$a as c,Ba as E,Bd as U,Da as H,Eb as w,Fb as C,Fd as q,Ga as b,Gd as G,Kc as V,Lc as k,Oc as m,Pb as L,Qa as r,Qb as $,Qc as x,Ra as a,Sa as p,T as f,Ta as v,Xa as N,Y as u,Ya as W,Yb as Y,Z as d,Zb as j,_a as h,_b as R,ab as l,da as y,ia as M,jb as F,ka as D,kc as z,lb as _,mb as O,mc as B,nb as P,oa as I,pa as A,qa as s,sa as S,zd as K}from"./chunk-QWSJMNH2.js";var T=class i{elementRef=f(M);clickOutside=new S;onDocumentClick(t){let e=t.target;e instanceof Node&&!this.elementRef.nativeElement.contains(e)&&this.clickOutside.emit(t)}static \u0275fac=function(e){return new(e||i)};static \u0275dir=H({type:i,selectors:[["","appClickOutside",""]],hostBindings:function(e,o){e&1&&c("click",function(g){return o.onDocumentClick(g)},A)},outputs:{clickOutside:"clickOutside"}})};function te(i,t){if(i&1){let e=h();a(0,"div",4),c("click",function(){u(e);let n=l();return d(n.handleClose())}),p()}}function ie(i,t){if(i&1){let e=h();a(0,"button",5),c("shortPress",function(){u(e);let n=l();return d(n.scrollToTop())}),v(1,"app-icon",6),a(2,"span",7),_(3),w(4,"translate"),p()()}i&2&&(r("@fadeAnimation",void 0),s(),F("rotate-90",!0),r("strokeWidth",2.5),s(2),P("",C(4,5,"fab.scrollTop")," "))}function oe(i,t){if(i&1){let e=h();a(0,"button",5),c("shortPress",function(){u(e);let n=l();return d(n.scrollToBottom())}),v(1,"app-icon",8),a(2,"span",7),_(3),w(4,"translate"),p()()}i&2&&(r("@fadeAnimation",void 0),s(),r("strokeWidth",2.5),s(2),O(C(4,3,"fab.scrollBottom")))}function ne(i,t){if(i&1){let e=h();a(0,"div",16)(1,"span",17),c("shortPress",function(){u(e);let n=l().$implicit,g=l(3);return d(g.handleAction(n.actionKey))}),_(2),w(3,"translate"),p(),a(4,"button",18),c("shortPress",function(){u(e);let n=l().$implicit,g=l(3);return d(g.handleAction(n.actionKey))}),v(5,"app-icon",19),a(6,"span",7),_(7),w(8,"translate"),p()()()}if(i&2){let e=l().$implicit;s(),r("ngClass",e.cssClass),s(),P(" ",C(3,5,e.label)," "),s(2),r("ngClass",e.cssClass),s(),r("name",e.iconName),s(2),O(C(8,7,e.label))}}function se(i,t){if(i&1&&(N(0),b(1,ne,9,9,"div",15),W()),i&2){let e=t.$implicit,o=l(3);s(),r("ngIf",!e.isPremium||o.subscriptionService.isPremium())}}function re(i,t){if(i&1&&(a(0,"div",13),b(1,se,2,1,"ng-container",14),p()),i&2){let e=l(2);r("@fabSlideUp",void 0),s(),r("ngForOf",e.actions)}}function ae(i,t){if(i&1){let e=h();a(0,"div",9),c("mouseenter",function(){u(e);let n=l();return d(n.handleFabMouseEnter())})("mouseleave",function(){u(e);let n=l();return d(n.handleFabMouseLeave())}),a(1,"button",10),c("click",function(){u(e);let n=l();return d(n.handleFabClick())}),v(2,"app-icon",11),a(3,"span",7),_(4,"Open creation menu"),p()(),b(5,re,2,2,"div",12),p()}if(i&2){let e=l();s(2),F("rotate-45",e.isFabActionsOpen()),s(3),r("ngIf",e.isFabActionsOpen())}}var Z=class i{workoutService=f(Q);subscriptionService=f(J);platformId=f(D);pausedSub;actions=[];checkForPausedSession=!0;actionClicked=new S;scrollToBottomDisabled=!1;scrollToTopDisabled=!1;showMainButton=!0;customBottomPositioning=void 0;virtualScrollViewport;isFabActionsOpen=$(!1);showBackToTopButton=y(!1);showBackToBottomButton=y(!1);isPausedSession=y(!1);showBackdrop=L(!0);ngOnInit(){this.checkForPausedSession&&(this.isPausedSession.set(this.workoutService.isPausedSession()),this.pausedSub=this.workoutService.pausedWorkoutDiscarded$.subscribe(()=>{this.isPausedSession.set(!1)}))}ngOnDestroy(){this.pausedSub?.unsubscribe()}onWindowScroll(){if(B(this.platformId)){let t=window.pageYOffset||document.documentElement.scrollTop,e=window.innerHeight,o=document.body.scrollHeight,n=100;this.showBackToTopButton.set(t>400),this.showBackToBottomButton.set(t+e<o-n)}}scrollToTop(){this.virtualScrollViewport?this.virtualScrollViewport.scrollToIndex(0,"smooth"):B(this.platformId)&&window.scrollTo({top:0,behavior:"smooth"})}scrollToBottom(){if(this.virtualScrollViewport){let t=this.virtualScrollViewport.getDataLength();this.virtualScrollViewport.scrollToIndex(t-1,"smooth")}else B(this.platformId)&&window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}handleFabClick(){this.isFabActionsOpen.update(t=>!t)}handleFabMouseEnter(){}handleFabMouseLeave(){}handleAction(t){this.actionClicked.emit(t),this.isFabActionsOpen.set(!1)}handleClose(){this.isFabActionsOpen()&&this.isFabActionsOpen.set(!1)}checkClassForPositioning(){return this.customBottomPositioning?`bottom-${this.customBottomPositioning}`:this.isPausedSession()?"bottom-36":"bottom-20"}ngAfterViewInit(){this.virtualScrollViewport&&(this.virtualScrollViewport.elementScrolled().subscribe(()=>{this.updateFabVisibility()}),this.updateFabVisibility())}updateFabVisibility(){if(!this.virtualScrollViewport)return;let t=this.virtualScrollViewport.measureScrollOffset("top"),e=this.virtualScrollViewport.measureScrollOffset("bottom");this.showBackToTopButton.set(t>50),this.showBackToBottomButton.set(e>50)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-fab-menu"]],hostBindings:function(e,o){e&1&&c("scroll",function(){return o.onWindowScroll()},I)},inputs:{actions:"actions",checkForPausedSession:"checkForPausedSession",scrollToBottomDisabled:"scrollToBottomDisabled",scrollToTopDisabled:"scrollToTopDisabled",showMainButton:"showMainButton",customBottomPositioning:"customBottomPositioning",virtualScrollViewport:"virtualScrollViewport",isFabActionsOpen:[1,"isFabActionsOpen"],showBackdrop:[1,"showBackdrop"]},outputs:{actionClicked:"actionClicked",isFabActionsOpen:"isFabActionsOpenChange"},decls:6,vars:5,consts:[["class","fixed inset-0 z-30 bg-black/30 backdrop-blur-sm transition-opacity duration-300 ease-in-out","aria-hidden","true",3,"click",4,"ngIf"],["appClickOutside","",1,"fixed","right-4","sm:right-10","z-40","flex","flex-col","items-center","gap-4","transition-all","duration-300",3,"clickOutside","ngClass"],["appPress","","type","button","class","bg-primary dark:bg-primary text-white rounded-full p-3 shadow-lg hover:bg-primary-dark dark:hover:bg-primary-light focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-focus dark:focus:ring-offset-gray-900 transition-opacity flex items-center",3,"shortPress",4,"ngIf"],["class","flex flex-col-reverse items-center gap-4",3,"mouseenter","mouseleave",4,"ngIf"],["aria-hidden","true",1,"fixed","inset-0","z-30","bg-black/30","backdrop-blur-sm","transition-opacity","duration-300","ease-in-out",3,"click"],["appPress","","type","button",1,"bg-primary","dark:bg-primary","text-white","rounded-full","p-3","shadow-lg","hover:bg-primary-dark","dark:hover:bg-primary-light","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-focus","dark:focus:ring-offset-gray-900","transition-opacity","flex","items-center",3,"shortPress"],["name","back",1,"w-6","h-6",3,"strokeWidth"],[1,"sr-only"],["name","chevron-down",1,"w-6","h-6",3,"strokeWidth"],[1,"flex","flex-col-reverse","items-center","gap-4",3,"mouseenter","mouseleave"],["appBumpClick","","type","button",1,"flex","h-14","w-14","items-center","justify-center","rounded-full","bg-primary","text-white","shadow-xl","transition-all","duration-300","hover:bg-primary-dark","hover:scale-105","focus:outline-none","focus:ring-2","focus:ring-primary-focus","focus:ring-offset-2","dark:ring-offset-gray-900",3,"click"],["name","plus",1,"h-8","w-8","transition-transform","duration-300"],["class","flex flex-col items-center gap-4",4,"ngIf"],[1,"flex","flex-col","items-center","gap-4"],[4,"ngFor","ngForOf"],["class","group relative flex items-center",4,"ngIf"],[1,"group","relative","flex","items-center"],["appPress","",1,"absolute","right-full","mr-4","sm:hidden","whitespace-nowrap","rounded-md","px-3","py-2","text-sm","font-semibold","text-white","group-hover:block","cursor-pointer",2,"margin-right","-10px",3,"shortPress","ngClass"],["appPress","","type","button",1,"flex","h-12","w-12","items-center","justify-center","rounded-full","text-white","shadow-lg","transition-transform","hover:scale-110","focus:outline-none","focus:ring-2","focus:ring-offset-2","dark:ring-offset-gray-900",3,"shortPress","ngClass"],[1,"h-7","w-7",3,"name"]],template:function(e,o){e&1&&(a(0,"div"),b(1,te,1,0,"div",0),a(2,"div",1),c("clickOutside",function(){return o.handleClose()}),b(3,ie,5,7,"button",2)(4,oe,5,5,"button",2)(5,ae,6,3,"div",3),p()()),e&2&&(s(),r("ngIf",o.isFabActionsOpen()&&o.showBackdrop()),s(),r("ngClass",o.checkClassForPositioning()),s(),r("ngIf",o.showBackToTopButton()&&!o.scrollToTopDisabled),s(),r("ngIf",o.showBackToBottomButton()&&!o.scrollToBottomDisabled),s(),r("ngIf",o.showMainButton))},dependencies:[z,Y,j,R,U,K,T,G,X,q],styles:["[_nghost-%COMP%]{display:block}"],data:{animation:[V("fabSlideUp",[x(":enter",[m({transform:"translateY(20%)",opacity:0}),k("200ms ease-out",m({transform:"translateY(0)",opacity:1}))]),x(":leave",[k("200ms ease-in",m({transform:"translateY(20%)",opacity:0}))])]),V("fadeAnimation",[x(":enter",[m({opacity:0}),k("200ms ease-in",m({opacity:1}))]),x(":leave",[k("200ms ease-out",m({opacity:0}))])])]}})};export{T as a,Z as b};
