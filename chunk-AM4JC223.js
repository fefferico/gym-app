import{c as S,d as C,f as m,g as A,h as y}from"./chunk-4PTIEP3X.js";import{Aa as w,Ga as i,Ha as c,Ia as l,Ja as d,Jb as B,Kb as K,Lb as L,Mb as N,Mc as R,Na as g,Nb as z,Oa as f,Q as u,Qa as I,Ra as v,Sa as r,U as b,V as h,Wb as $,bb as k,ca as E,cb as O,cc as F,db as V,ea as T,ia as M,la as H,ma as a,ua as D,za as s}from"./chunk-VREHKCX4.js";function j(n,e){n&1&&d(0,"div",8)}function Y(n,e){if(n&1&&d(0,"span",11),n&2){let t=e.ngIf,o=r(2).$implicit;i("innerHTML",t,M)("ngClass",o.iconClass||"w-5 h-5 mr-2")}}function q(n,e){if(n&1){let t=I();c(0,"button",9),v("click",function(_){b(t);let p=r().$implicit,x=r(3);return h(x.onItemClicked(_,p))}),s(1,Y,1,2,"span",10),k(2),l()}if(n&2){let t=r().$implicit,o=r(3);i("ngClass",t.buttonClass||"w-full text-left px-3 py-1.5 sm:px-4 sm:py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center text-sm"),a(),i("ngIf",o.getIconHtml(t)),a(),V(" ",t.label," ")}}function G(n,e){if(n&1&&(g(0),s(1,j,1,0,"div",6)(2,q,3,3,"button",7),f()),n&2){let t=e.$implicit;a(),i("ngIf",t.isDivider),a(),i("ngIf",!t.isDivider)}}function J(n,e){if(n&1&&(c(0,"div",4),s(1,G,3,2,"ng-container",5),l()),n&2){let t=r(2);i("@dropdownMenu",void 0)("ngClass",t.dropdownMenuClass),a(),i("ngForOf",t.items)}}function Q(n,e){if(n&1&&(c(0,"div"),s(1,J,2,3,"div",3),l()),n&2){let t=r();a(),i("ngIf",t.isVisible)}}function U(n,e){if(n&1&&d(0,"span",11),n&2){let t=e.ngIf,o=r(2).$implicit;i("innerHTML",t,M)("ngClass",o.iconClass||"w-5 h-5 mr-2")}}function W(n,e){if(n&1&&(c(0,"span"),k(1),l()),n&2){let t=r(2).$implicit;a(),O(t.label)}}function X(n,e){if(n&1){let t=I();c(0,"button",13),v("click",function(_){b(t);let p=r().$implicit,x=r(3);return h(x.onItemClicked(_,p))}),s(1,U,1,2,"span",10)(2,W,2,1,"span",14),l()}if(n&2){let t=r().$implicit,o=r(3);i("title",t.label)("ngClass",t.buttonClass||`flex-1 text-xs min-w-[60px] flex items-center justify-center p-1.5
                rounded-md transition-colors `),a(),i("ngIf",o.getIconHtml(t)),a(),i("ngIf",o.showLabelInCompact(t))}}function Z(n,e){if(n&1&&(g(0),s(1,X,3,4,"button",12),f()),n&2){let t=e.$implicit;a(),i("ngIf",!t.isDivider)}}function tt(n,e){if(n&1&&(c(0,"div",4),s(1,Z,2,1,"ng-container",5),l()),n&2){let t=r(2);i("@compactBar",void 0)("ngClass",t.compactBarClass),a(),i("ngForOf",t.items)}}function et(n,e){if(n&1&&(c(0,"div"),s(1,tt,2,3,"div",3),l()),n&2){let t=r();a(),i("ngIf",t.isVisible)}}var nt=S("dropdownMenu",[y(":enter",[m({opacity:0,transform:"scale(0.95) translateY(-10px)"}),C("100ms ease-out",m({opacity:1,transform:"scale(1) translateY(0)"}))]),y(":leave",[C("75ms ease-in",m({opacity:0,transform:"scale(0.95) translateY(-10px)"}))])]),it=S("compactBar",[A("void",m({height:"0px",opacity:0,overflow:"hidden",paddingTop:"0",paddingBottom:"0",marginTop:"0",marginBottom:"0"})),A("*",m({height:"*",opacity:1,overflow:"hidden",paddingTop:"0.5rem",paddingBottom:"0.5rem"})),y("void <=> *",C("200ms ease-in-out"))]),P=class n{sanitizer=u(F);elRef=u(T);items=[];isVisible=!1;displayMode="dropdown";dropdownMenuClass="origin-top-right absolute right-0 top-full mt-1 sm:mt-2 w-40 sm:w-48 rounded-md shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black dark:ring-gray-600 ring-opacity-5 focus:outline-none py-1 z-[60]";compactBarClass="flex flex-wrap gap-1.5 justify-center z-20 rounded-b-lg grid-cols-3";itemClick=new w;closeMenu=new w;_boundOnEnterKey=this.handleEnterKey.bind(this);ngOnChanges(e){e.isVisible&&(e.isVisible.currentValue===!0?document.addEventListener("keydown",this._boundOnEnterKey):document.removeEventListener("keydown",this._boundOnEnterKey))}ngOnDestroy(){document.removeEventListener("keydown",this._boundOnEnterKey)}onDocumentClick(e){this.isVisible&&!this.elRef.nativeElement.contains(e.target)&&this.closeMenu.emit()}handleEnterKey(e){if(e.key!=="Enter")return;e.preventDefault();let t=this.items.find(o=>!o.isDivider);t&&this.onItemClicked({stopPropagation:()=>{}},t)}onItemClicked(e,t){e.stopPropagation(),t.isDivider||(navigator.vibrate&&navigator.vibrate(50),this.itemClick.emit({actionKey:t.actionKey??"",data:t.data}),this.displayMode==="dropdown"&&this.closeMenu.emit())}sanitizeSvg(e){return e?this.sanitizer.bypassSecurityTrustHtml(e):null}showLabelInCompact(e){return!!e.label}iconRegistry=u(R);getIconHtml(e){let t=null;return e.iconName?t=this.iconRegistry.getIconString(e.iconName):e.iconSvg&&(t=e.iconSvg),t?this.sanitizer.bypassSecurityTrustHtml(t):null}getPippo(){return"pippo"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=D({type:n,selectors:[["app-action-menu"]],hostBindings:function(t,o){t&1&&v("click",function(p){return o.onDocumentClick(p)},H)},inputs:{items:"items",isVisible:"isVisible",displayMode:"displayMode",dropdownMenuClass:"dropdownMenuClass",compactBarClass:"compactBarClass"},outputs:{itemClick:"itemClick",closeMenu:"closeMenu"},features:[E],decls:4,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"hidden","dark:hover:text-gray-100"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngFor","ngForOf"],["class","my-0.5 sm:my-1 border-t border-gray-200 dark:border-gray-600",4,"ngIf"],["type","button","class","transition-colors duration-150 ease-in-out",3,"ngClass","click",4,"ngIf"],[1,"my-0.5","sm:my-1","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"transition-colors","duration-150","ease-in-out",3,"click","ngClass"],[3,"innerHTML","ngClass",4,"ngIf"],[3,"innerHTML","ngClass"],["type","button",3,"title","ngClass","click",4,"ngIf"],["type","button",3,"click","title","ngClass"],[4,"ngIf"]],template:function(t,o){t&1&&(g(0,0),s(1,Q,2,1,"div",1)(2,et,2,1,"div",1),f(),d(3,"div",2)),t&2&&(i("ngSwitch",o.displayMode),a(),i("ngSwitchCase","dropdown"),a(),i("ngSwitchCase","compact-bar"))},dependencies:[$,B,K,L,N,z],encapsulation:2,data:{animation:[nt,it]},changeDetection:0})};export{P as a};
