import{L as u,P as a,Y as n,a as t,b as s,k as l,yc as f}from"./chunk-WC2MP2WO.js";var c=class o{storageService=a(f);USER_PROFILE_KEY="fitTrackPro_userProfile";IS_WIP=!0;userProfileSubject;userProfile$;username=n(void 0);constructor(){let e=this.storageService.getItem(this.USER_PROFILE_KEY);this.userProfileSubject=new l(e),this.userProfile$=this.userProfileSubject.asObservable(),this.userProfile$.subscribe(r=>{this.username.set(r?.username)})}getProfile(){return this.userProfileSubject.getValue()}saveProfile(e){let r=this.getProfile()||{},i=t(t({},r),e);this.storageService.setItem(this.USER_PROFILE_KEY,i),this.userProfileSubject.next(i)}getUsername(){return this.userProfileSubject.getValue()?.username}updateUsername(e){let r=this.getProfile()||{};this.saveProfile(s(t({},r),{username:e}))}getMeasurements(){return this.userProfileSubject.getValue()?.measurements}updateMeasurements(e){let r=this.getProfile()||{},i=t(t({},r.measurements||{}),e);this.saveProfile(s(t({},r),{measurements:i}))}updateGender(e){let r=this.getProfile()||{};this.saveProfile(s(t({},r),{gender:e}))}getDataForBackup(){return this.getProfile()}replaceData(e){e?(this.storageService.setItem(this.USER_PROFILE_KEY,e),this.userProfileSubject.next(e)):(this.storageService.removeItem(this.USER_PROFILE_KEY),this.userProfileSubject.next(null))}clearUserProfile_DEV_ONLY(){this.replaceData(null),console.log("User profile data cleared.")}static \u0275fac=function(r){return new(r||o)};static \u0275prov=u({token:o,factory:o.\u0275fac,providedIn:"root"})};export{c as a};
