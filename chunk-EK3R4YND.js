import{a as R}from"./chunk-FTKB2W2W.js";import{a as O}from"./chunk-B3XDVUQA.js";import{Ca as p,Da as i,Db as M,Ea as n,F as I,Fa as d,H as k,Ja as A,Ka as f,La as c,Lb as T,N as v,Ob as V,S as x,Sa as w,T as y,Tc as K,Vc as P,Wa as o,Xa as m,Ya as S,Yb as B,Z as u,Za as D,_b as N,ia as r,kb as _,mb as b,ob as E,qa as L,va as g}from"./chunk-N6KWZS3F.js";import{g as C}from"./chunk-GAL4ENT6.js";function $(a,e){if(a&1){let t=A();i(0,"app-action-menu",26),f("itemClick",function(s){x(t);let h=c(2);return y(h.handleActionMenuItemClick(s))})("closeMenu",function(){x(t);let s=c(2);return y(s.onCloseActionMenu())}),n()}if(a&2){let t=c().ngIf,l=c();p("items",l.getLogDropdownActionItems(t))("isVisible",l.areActionsVisible(t.id))}}function q(a,e){if(a&1&&(i(0,"p",27),o(1),_(2,"date"),_(3,"date"),n()),a&2){let t=c().ngIf;r(),D(" ",b(2,2,t.startTime,"shortTime")," - ",b(3,5,t.endTime,"shortTime")," ")}}function z(a,e){if(a&1&&(i(0,"div",17),d(1,"app-icon",28),i(2,"div",19),o(3,"Location"),n(),i(4,"div",20),o(5),n()()),a&2){let t=c().ngIf;r(5),m(t.location)}}function G(a,e){if(a&1&&(i(0,"div",29)(1,"h3",30),o(2,"Notes"),n(),i(3,"p",31),o(4),n()()),a&2){let t=c().ngIf;r(4),m(t.notes)}}function H(a,e){if(a&1){let t=A();i(0,"div",2)(1,"header",3)(2,"button",4),f("click",function(){x(t);let s=c();return y(s.goBack())}),d(3,"app-icon",5),n(),i(4,"div",6)(5,"div",7)(6,"button",8),f("click",function(s){let h=x(t).ngIf,F=c();return y(F.toggleActions(h.id,s))}),d(7,"app-icon",9),n(),g(8,$,1,2,"app-action-menu",10),n()()(),i(9,"div",11)(10,"div",12)(11,"h1",13),o(12),n(),i(13,"p",14),o(14),_(15,"date"),n(),g(16,q,4,8,"p",15),n(),i(17,"div",16)(18,"div",17),d(19,"app-icon",18),i(20,"div",19),o(21,"Duration"),n(),i(22,"div",20),o(23),n()(),i(24,"div",17),d(25,"app-icon",21),i(26,"div",19),o(27,"Intensity"),n(),i(28,"div",20),o(29),n()(),g(30,z,6,1,"div",22),i(31,"div",17),d(32,"app-icon",23),i(33,"div",19),o(34,"Distance"),n(),i(35,"div",20),o(36),n()(),i(37,"div",17),d(38,"app-icon",24),i(39,"div",19),o(40,"Calories"),n(),i(41,"div",20),o(42),n()()(),g(43,G,5,1,"div",25),n()()}if(a&2){let t=e.ngIf,l=c();r(8),p("ngIf",l.areActionsVisible(t.id)),r(4),m(t.activityName),r(2),m(b(15,10,t.startTime,"fullDate")),r(2),p("ngIf",t.endTime),r(7),S("",t.durationMinutes," min"),r(6),m(t.intensity),r(),p("ngIf",t.location),r(6),m(t.distanceKm?t.distanceKm+" km":"N.A."),r(6),m(t.caloriesBurned?t.caloriesBurned+" kcal":"N.A."),r(),p("ngIf",t.notes)}}function J(a,e){a&1&&(i(0,"div",32)(1,"p",33),o(2,"Loading activity details..."),n()())}var j=class a{route=v(B);router=v(N);activityService=v(R);alertService=v(P);activityLog=u(null);baseActivity=u(null);activeLogIdActions=u(null);ngOnInit(){this.route.paramMap.pipe(I(e=>{let t=e.get("id");return t?this.activityService.getActivityLogById(t):[null]}),k(e=>{if(e){this.activityLog.set(e);let t=this.activityService.getActivityById(e.activityId);t&&this.baseActivity.set(t)}else this.activityLog.set(null),this.baseActivity.set(null)})).subscribe()}goBack(){this.router.navigate(["/history"])}editLog(e){this.router.navigate(["/activities/log/edit",e])}deleteLog(e){return C(this,null,function*(){let t=yield this.alertService.showConfirmationDialog("Delete Activity Log?",`Are you sure you want to delete this log for "${e.activityName}"? This cannot be undone.`,[{text:"Cancel",role:"cancel",data:!1},{text:"Delete",role:"confirm",data:!0,cssClass:"bg-red-500"}]);t&&t.data&&(this.activityService.deleteActivityLog(e.id),this.router.navigate(["/history"]))})}toggleActions(e,t){t.stopPropagation(),this.activeLogIdActions.update(l=>l===e?null:e)}areActionsVisible(e){return this.activeLogIdActions()===e}onCloseActionMenu(){this.activeLogIdActions.set(null)}getLogDropdownActionItems(e){return[{label:"EDIT",actionKey:"edit",iconSvg:"asdasd",iconName:"edit",iconClass:"w-8 h-8 mr-2",buttonClass:"w-full "+"rounded text-left px-4 py-2 font-medium text-gray-600 dark:text-gray-300 hover:bg-primary flex items-center text-sm hover:text-white dark:hover:text-gray-100",data:{log:e}},{isDivider:!0},{label:"DELETE",actionKey:"delete",iconName:"trash",iconClass:"w-8 h-8 mr-2",buttonClass:"w-full "+"rounded text-left px-4 py-2 font-medium text-gray-600 dark:text-gray-300 hover:bg-red-600 flex items-center text-sm hover:text-white",data:{log:e}}]}handleActionMenuItemClick(e){let t=e.data?.log;if(t){switch(e.actionKey){case"edit":this.editLog(t.id);break;case"delete":this.deleteLog(t);break}this.activeLogIdActions.set(null)}}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=L({type:a,selectors:[["app-activity-log-details"]],decls:3,vars:2,consts:[["loading",""],["class","container mx-auto max-w-2xl p-2 sm:p-4",4,"ngIf","ngIfElse"],[1,"container","mx-auto","max-w-2xl","p-2","sm:p-4"],[1,"flex","items-center","justify-between","p-2","mb-4"],[1,"text-gray-600","dark:text-gray-300","hover:text-primary","dark:hover:text-primary-light","p-2","rounded-full","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["name","back",1,"w-6","h-6"],[1,"flex","items-center","space-x-2","flex-shrink-0"],[1,"relative"],[1,"text-gray-500","dark:text-gray-400","hover:bg-gray-200","dark:hover:bg-gray-500","rounded-full","focus:outline-none","flex","items-center",3,"click"],["name","menu-action",1,"h-10","w-10"],["displayMode","dropdown",3,"items","isVisible","itemClick","closeMenu",4,"ngIf"],[1,"bg-white","dark:bg-gray-800","p-6","rounded-lg","shadow-md","space-y-4"],[1,"border-b","border-gray-200","dark:border-gray-700","pb-4"],[1,"text-3xl","font-bold","text-gray-800","dark:text-gray-200"],[1,"text-gray-500","dark:text-gray-400","mt-1"],["class","text-gray-600 dark:text-gray-300 font-semibold text-lg mt-2",4,"ngIf"],[1,"grid","grid-cols-2","sm:grid-cols-4","gap-4","text-center","pt-4"],[1,"p-4","bg-gray-50","dark:bg-gray-700/50","rounded-lg"],["name","clock",1,"w-8","h-8","mx-auto","text-primary","mb-2"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"text-2xl","font-semibold","text-black","dark:text-gray-200"],["name","flame",1,"w-8","h-8","mx-auto","text-primary","mb-2"],["class","p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",4,"ngIf"],["name","ruler",1,"w-8","h-8","mx-auto","text-primary","mb-2"],["name","calories",1,"w-8","h-8","mx-auto","text-primary","mb-2"],["class","pt-4 border-t border-gray-200 dark:border-gray-700",4,"ngIf"],["displayMode","dropdown",3,"itemClick","closeMenu","items","isVisible"],[1,"text-gray-600","dark:text-gray-300","font-semibold","text-lg","mt-2"],["name","map",1,"w-8","h-8","mx-auto","text-primary","mb-2"],[1,"pt-4","border-t","border-gray-200","dark:border-gray-700"],[1,"text-lg","font-semibold","mb-2"],[1,"text-gray-700","dark:text-gray-300","whitespace-pre-wrap"],[1,"text-center","p-20"],[1,"text-xl","text-gray-600","dark:text-gray-400"]],template:function(t,l){if(t&1&&g(0,H,44,13,"div",1)(1,J,3,0,"ng-template",null,0,E),t&2){let s=w(2);p("ngIf",l.activityLog())("ngIfElse",s)}},dependencies:[V,M,K,O,T],styles:["[_nghost-%COMP%]{display:block}"]})};export{j as ActivityLogDetailsComponent};
