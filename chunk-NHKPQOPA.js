import{K as u,L as v,P as s,X as a,Y as d,k as b,qb as p,yc as m}from"./chunk-DVB6BXOX.js";function g(n,e){let r=!e?.manualCleanup?e?.injector?.get(a)??s(a):null,l=y(e?.equal),o;e?.requireSync?o=d({kind:0},{equal:l}):o=d({kind:1,value:e?.initialValue},{equal:l});let c,f=n.subscribe({next:i=>o.set({kind:1,value:i}),error:i=>{o.set({kind:2,error:i}),c?.()},complete:()=>{c?.()}});if(e?.requireSync&&o().kind===0)throw new u(601,!1);return c=r?.onDestroy(f.unsubscribe.bind(f)),p(()=>{let i=o();switch(i.kind){case 1:return i.value;case 2:throw i.error;case 0:throw new u(601,!1)}},{equal:e?.equal})}function y(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}var h=class n{storageService=s(m);UNIT_STORAGE_KEY="fitTrackPro_weightUnit";KG_TO_LBS_FACTOR=2.20462;unitSubject=new b(this.loadUnitPreference());unit$=this.unitSubject.asObservable();currentUnit=g(this.unitSubject,{initialValue:"kg"});constructor(){}loadUnitPreference(){let e=this.storageService.getItem(this.UNIT_STORAGE_KEY);return e==="kg"||e==="lbs"?e:"kg"}setUnitPreference(e){e==="kg"||e==="lbs"?(this.storageService.setItem(this.UNIT_STORAGE_KEY,e),this.unitSubject.next(e),console.log("UnitsService: Unit preference set to",e)):console.warn("UnitsService: Attempted to set invalid unit preference:",e)}convertFromKg(e,t){if(e==null)return e;let r=t||this.currentUnit();return r==="kg"?e:r==="lbs"?Number.isFinite(e)?parseFloat((e*this.KG_TO_LBS_FACTOR).toFixed(2)):(console.warn("UnitsService: Invalid number passed to convertFromKg:",e),e):(console.warn("UnitsService: Attempted conversion to invalid target unit:",t),e)}convertToKg(e,t){if(e==null)return e;let r=t||this.currentUnit();return r==="kg"?e:r==="lbs"?Number.isFinite(e)?parseFloat((e/this.KG_TO_LBS_FACTOR).toFixed(2)):(console.warn("UnitsService: Invalid number passed to convertToKg:",e),e):(console.warn("UnitsService: Attempted conversion from invalid source unit:",t),e)}getUnitLabel(){return this.currentUnit()}getUnitSuffix(){return this.currentUnit()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"})};export{h as a};
