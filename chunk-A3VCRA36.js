import{a as Te,b as Ie,c as Ee,d as Me,e as Fe}from"./chunk-O2XJEK3K.js";import{a as De}from"./chunk-PANSGPAK.js";import"./chunk-IKG54NX3.js";import"./chunk-L57QO76B.js";import{a as Pe}from"./chunk-QIGV4TDV.js";import{Aa as d,Ab as J,Ac as Ce,Ba as o,Bb as K,Ca as n,Cb as Q,D as A,Da as p,H as B,Ha as _,Hb as X,Ia as y,J as R,Ja as m,Lb as ee,Mb as te,P as b,R as f,S as v,T as x,Tb as re,U as w,Ua as s,Va as I,Vb as ie,Wa as k,Xa as z,Xb as ne,Y as T,Yb as oe,ac as F,ba as G,cc as ae,da as W,dc as S,eb as Z,ec as le,fb as E,fc as de,g as P,gb as $,ha as a,hc as se,ic as me,jc as ce,kb as N,kc as ue,lb as q,lc as ge,mb as U,mc as pe,nc as he,o as O,oc as ye,pa as H,pc as fe,q as L,qb as M,qc as ve,sa as j,sc as be,ua as h,uc as xe,vc as _e,wb as Y,wc as ke,xc as we,zc as Se}from"./chunk-YSGTLCDK.js";var V=class i{transform(t,e=!1){if(t==null)return"";let r=Number(t);return e?`Day ${r}`:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][r]||`Day ${r}`}static \u0275fac=function(e){return new(e||i)};static \u0275pipe=j({name:"dayOfWeek",type:i,pure:!0})};var Ae=(i,t)=>({"bg-green-600 hover:bg-green-800":i,"bg-gray-600 hover:bg-gray-800":t}),Ne=(i,t)=>({"border-red-500 dark:border-red-400":i,"border-gray-300 dark:border-gray-500":t}),Le=i=>({"ring-2 ring-offset-1 ring-red-500 dark:ring-red-400":i}),Be=(i,t)=>({"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 placeholder-red-400":i,"rounded-r-md":t}),Re=(i,t,e)=>({"border-blue-300 dark:border-blue-500 bg-blue-50 dark:bg-blue-500 text-white hover:bg-blue-100 dark:hover:bg-blue-400":i,"border-green-500 dark:border-green-400 bg-green-50 dark:bg-green-700 text-green-700 dark:text-green-100 hover:bg-green-100 dark:hover:bg-green-600":t,"border-red-500 dark:border-red-400 bg-red-100 dark:bg-red-600 text-red-700 dark:text-red-200 hover:bg-red-200 dark:hover:bg-red-500":e});function Ge(i,t){i&1&&(x(),o(0,"svg",38),p(1,"path",39),n())}function We(i,t){i&1&&(x(),o(0,"svg",40),p(1,"path",41),n())}function He(i,t){if(i&1){let e=_();o(0,"button",42),y("click",function(){f(e);let l=m();return v(l.enableEditModeFromView())}),x(),o(1,"svg",14),p(2,"path",43),n(),s(3," EDIT "),n()}}function je(i,t){if(i&1&&(o(0,"div")(1,"label",44),s(2),n()()),i&2){let e,r=m();a(2),I((e=r.programForm.get("name"))==null?null:e.value)}}function ze(i,t){i&1&&(o(0,"span"),s(1,"Program name is required."),n())}function Ze(i,t){if(i&1&&(o(0,"div",48),h(1,ze,2,0,"span",18),n()),i&2){let e,r=m(2);a(),d("ngIf",(e=r.programForm.get("name"))==null||e.errors==null?null:e.errors.required)}}function $e(i,t){if(i&1&&(o(0,"div")(1,"label",45),s(2,"Program Name"),n(),p(3,"input",46),h(4,Ze,2,1,"div",47),n()),i&2){let e,r,l=m();a(3),d("ngClass",E(2,Ne,((e=l.programForm.get("name"))==null?null:e.invalid)&&((e=l.programForm.get("name"))==null?null:e.touched),!((e=l.programForm.get("name"))!=null&&e.invalid&&((e=l.programForm.get("name"))!=null&&e.touched)))),a(),d("ngIf",((r=l.programForm.get("name"))==null?null:r.invalid)&&(((r=l.programForm.get("name"))==null?null:r.dirty)||((r=l.programForm.get("name"))==null?null:r.touched)))}}function qe(i,t){if(i&1&&(o(0,"div"),p(1,"p",49),n()),i&2){let e=m();a(),d("innerHTML",e.sanitizedDescription,W)}}function Ue(i,t){i&1&&(o(0,"div")(1,"label",50),s(2,"Description (Optional)"),n(),p(3,"textarea",51),n())}function Ye(i,t){if(i&1){let e=_();o(0,"button",52),y("click",function(){f(e);let l=m();return v(l.addScheduledDay())}),s(1," + ADD DAY TO SCHEDULE "),n()}}function Je(i,t){i&1&&(o(0,"div",70),x(),o(1,"svg",71),p(2,"path",72),n()())}function Ke(i,t){if(i&1){let e=_();o(0,"button",73),y("click",function(){f(e);let l=m().index,c=m(2);return v(c.removeScheduledDay(l))}),x(),o(1,"svg",74),p(2,"path",75),n(),s(3," Remove Day "),n()}}function Qe(i,t){if(i&1&&(o(0,"option",76),s(1),n()),i&2){let e=t.$implicit;d("value",e.value),a(),I(e.label)}}function Xe(i,t){i&1&&(o(0,"div",48),s(1," Day is required. "),n())}function et(i,t){if(i&1){let e=_();o(0,"button",77),y("click",function(){f(e);let l=m().index,c=m(2);return v(c.openRoutineSelectionModal(l))}),s(1),n()}if(i&2){let e,r,l=m().index,c=m(2);d("ngClass",$(2,Re,!((e=c.getScheduleDayControl(l).get("routineId"))!=null&&e.value)&&!((e=c.getScheduleDayControl(l).get("routineId"))!=null&&e.invalid&&((e=c.getScheduleDayControl(l).get("routineId"))!=null&&e.touched||c.submitted)),(e=c.getScheduleDayControl(l).get("routineId"))==null?null:e.value,((e=c.getScheduleDayControl(l).get("routineId"))==null?null:e.invalid)&&(((e=c.getScheduleDayControl(l).get("routineId"))==null?null:e.touched)||c.submitted))),a(),k(" ",(r=c.getScheduleDayControl(l).get("routineId"))!=null&&r.value?"Change":"Select"," ")}}function tt(i,t){i&1&&(o(0,"div",48),s(1," Routine selection is required. "),n())}function rt(i,t){if(i&1&&(o(0,"div",55),h(1,Je,3,0,"div",56),o(2,"div",57)(3,"h4",58),s(4),N(5,"dayOfWeek"),n(),h(6,Ke,4,0,"button",59),n(),o(7,"div",60)(8,"div")(9,"label",61),s(10),n(),o(11,"select",62),h(12,Qe,2,2,"option",63),n(),h(13,Xe,2,0,"div",47),n(),o(14,"div")(15,"label",61),s(16,"Routine"),n(),o(17,"div",64),p(18,"input",65),h(19,et,2,6,"button",66),n(),h(20,tt,2,0,"div",47),n(),o(21,"div",67)(22,"label",61),s(23,"Time (Optional)"),n(),p(24,"input",68),n(),o(25,"div",67)(26,"label",61),s(27,"Notes for this Day (Optional)"),n(),p(28,"textarea",69),n()()()),i&2){let e,r,l,c,C,D,g=t.index,u=m(2);d("formGroupName",g)("cdkDragDisabled",u.isViewMode),a(),d("ngIf",!u.isViewMode),a(3),k(" ",U(5,21,(e=u.getScheduleDayControl(g).get("dayOfWeek"))==null?null:e.value,u.f.cycleLength.value>0)||"Scheduled Day "+(g+1)," "),a(2),d("ngIf",!u.isViewMode),a(3),d("for","dayOfWeek-"+g),a(),k(" ",u.f.cycleLength.value>0?"Cycle Day Number":"Day of Week"," "),a(),d("id","dayOfWeek-"+g),a(),d("ngForOf",u.currentDayOptions()),a(),d("ngIf",((r=u.getScheduleDayControl(g).get("dayOfWeek"))==null?null:r.invalid)&&((r=u.getScheduleDayControl(g).get("dayOfWeek"))==null?null:r.touched)),a(2),d("for","routineName-"+g),a(2),d("ngClass",Z(24,Le,((l=u.getScheduleDayControl(g).get("routineId"))==null?null:l.invalid)&&(((l=u.getScheduleDayControl(g).get("routineId"))==null?null:l.touched)||u.submitted))),a(),d("id","routineName-"+g)("value",((c=u.getScheduleDayControl(g).get("routineName"))==null?null:c.value)||((c=u.getScheduleDayControl(g).get("routineId"))!=null&&c.value?"Loading routine...":"No Routine Selected"))("ngClass",E(26,Be,((C=u.getScheduleDayControl(g).get("routineId"))==null?null:C.invalid)&&(((C=u.getScheduleDayControl(g).get("routineId"))==null?null:C.touched)||u.submitted),u.isViewMode)),a(),d("ngIf",!u.isViewMode),a(),d("ngIf",((D=u.getScheduleDayControl(g).get("routineId"))==null?null:D.invalid)&&(((D=u.getScheduleDayControl(g).get("routineId"))==null?null:D.touched)||u.submitted)),a(2),d("for","timeOfDay-"+g),a(2),d("id","timeOfDay-"+g),a(2),d("for","dayNotes-"+g),a(2),d("id","dayNotes-"+g)}}function it(i,t){if(i&1){let e=_();o(0,"div",53),y("cdkDropListDropped",function(l){f(e);let c=m();return v(c.onScheduleDrop(l))}),h(1,rt,29,29,"div",54),n()}if(i&2){let e=m();d("cdkDropListData",e.scheduleFormGroups),a(),d("ngForOf",e.scheduleFormArray.controls)}}function nt(i,t){if(i&1){let e=_();o(0,"button",80),y("click",function(){f(e);let l=m(2);return v(l.addScheduledDay())}),s(1," Add the first scheduled day "),n()}}function ot(i,t){if(i&1&&(o(0,"div",78)(1,"p"),s(2,"No days scheduled for this program yet."),n(),h(3,nt,2,0,"button",79),n()),i&2){let e=m();a(3),d("ngIf",!e.isViewMode)}}function at(i,t){if(i&1&&(o(0,"div",81)(1,"a",82),s(2," CANCEL "),n(),o(3,"button",83),s(4),n()()),i&2){let e=m();a(3),d("disabled",e.programForm.invalid&&(e.programForm.touched||e.programForm.dirty)),a(),k(" ",e.isNewMode?"CREATE PROGRAM":"SAVE CHANGES"," ")}}function lt(i,t){if(i&1){let e=_();o(0,"li",102),y("click",function(){let l=f(e).$implicit,c=m(2);return v(c.selectRoutineForDay(l))}),o(1,"div")(2,"span",103),s(3),n(),o(4,"span",104),s(5),N(6,"titlecase"),n()(),x(),o(7,"svg",105),p(8,"path",106),n()()}if(i&2){let e=t.$implicit;a(3),I(e.name),a(2),z("",q(6,3,e.goal)," - ",e.exercises.length," exercises")}}function dt(i,t){i&1&&(o(0,"li",107),s(1,"No routines match your search."),n())}function st(i,t){i&1&&(o(0,"li",107),s(1,"No routines available to select. Create some routines first!"),n())}function mt(i,t){if(i&1){let e=_();o(0,"div",84),y("click",function(){f(e);let l=m();return v(l.closeRoutineSelectionModal())}),o(1,"div",85),y("click",function(l){return f(e),v(l.stopPropagation())}),o(2,"div",86)(3,"div",87)(4,"div",88)(5,"div",89)(6,"h3",90),s(7,"Select a Routine"),n(),o(8,"button",91),y("click",function(){f(e);let l=m();return v(l.closeRoutineSelectionModal())}),x(),o(9,"svg",92),p(10,"path",93),n()()(),w(),o(11,"div",94)(12,"input",95),y("ngModelChange",function(l){f(e);let c=m();return v(c.modalSearchTerm.set(l))}),n()(),o(13,"div",96)(14,"ul",97),h(15,lt,9,5,"li",98)(16,dt,2,0,"li",99)(17,st,2,0,"li",99),n()()()()(),o(18,"div",100)(19,"button",101),y("click",function(){f(e);let l=m();return v(l.closeRoutineSelectionModal())}),s(20," Cancel "),n()()()()}if(i&2){let e=m();a(12),d("ngModel",e.modalSearchTerm()),a(3),d("ngForOf",e.filteredAvailableRoutines()),a(),d("ngIf",e.filteredAvailableRoutines().length===0&&e.availableRoutines.length>0),a(),d("ngIf",e.availableRoutines.length===0)}}var Ve=class i{fb=b(xe);router=b(ne);route=b(ie);trainingProgramService=b(De);workoutService=b(Se);spinnerService=b(Pe);alertService=b(we);toastService=b(Ce);cdr=b(Y);programForm;submitted=!1;isEditMode=!1;isNewMode=!1;isViewMode=!1;currentProgramId=null;currentProgram=null;isCurrentProgramActive=T(!1);routeSub;sanitizer=b(re);sanitizedDescription="";isRoutineModalOpen=T(!1);availableRoutines=[];modalSearchTerm=T("");targetScheduleIndexForRoutine=null;dayOfWeekOptions=[{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"},{value:0,label:"Sunday"}];cycleDayOptions=M(()=>{let t=this.programForm.get("cycleLength")?.value;return typeof t=="number"&&t>0?Array.from({length:t},(e,r)=>({value:r+1,label:`Day ${r+1}`})):[]});currentDayOptions=M(()=>this.programForm.get("cycleLength")?.value>0?this.cycleDayOptions():this.dayOfWeekOptions);filteredAvailableRoutines=M(()=>{let t=this.modalSearchTerm().toLowerCase();return t?this.availableRoutines.filter(e=>e.name.toLowerCase().includes(t)):this.availableRoutines});constructor(){this.programForm=this.fb.group({name:["",S.required],description:[""],programNotes:[""],startDate:[null],cycleLength:[null,[S.min(1)]],schedule:this.fb.array([])})}platformId=b(G);ngOnInit(){te(this.platformId)&&window.scrollTo(0,0),this.loadAvailableRoutines(),this.routeSub=this.route.data.pipe(B(t=>{let e=t.mode;return this.currentProgramId=this.route.snapshot.paramMap.get("programId"),this.submitted=!1,this.isNewMode=e==="new",this.isViewMode=e==="view"&&!!this.currentProgramId,this.isEditMode=e==="edit"&&!!this.currentProgramId,this.isNewMode?(this.programForm.reset({cycleLength:null,schedule:[]}),this.updateFormEnabledState(),O(null)):this.currentProgramId?this.trainingProgramService.getProgramById(this.currentProgramId):O(null)}),R(t=>{t?this.patchFormWithProgramData(t):!this.isNewMode&&this.currentProgramId&&(this.toastService.error(`Program with ID ${this.currentProgramId} not found.`,0,"Error"),this.router.navigate(["/training-programs"])),this.currentProgram=t,this.updateFormEnabledState();let e=t?.isActive??!1;this.isCurrentProgramActive.set(e)})).subscribe(),this.programForm.get("cycleLength")?.valueChanges.subscribe(t=>{this.scheduleFormArray.controls.forEach(e=>{e.get("dayOfWeek")?.setValue(this.currentDayOptions()[0]?.value||1)})})}get scheduleFormArray(){return this.programForm.get("schedule")}loadAvailableRoutines(){this.workoutService.routines$.pipe(A(1)).subscribe(t=>{this.availableRoutines=t.sort((e,r)=>e.name.localeCompare(r.name))})}patchFormWithProgramData(t){this.programForm.patchValue({name:t.name,description:t.description?this.updateSanitizedDescription(t.description):"",programNotes:t.programNotes,startDate:t.startDate?new Date(t.startDate).toISOString().split("T")[0]:null,cycleLength:t.cycleLength??null}),this.scheduleFormArray.clear(),t.schedule.forEach(e=>{this.scheduleFormArray.push(this.createScheduledDayGroup(e))}),this.updateFormEnabledState()}createScheduledDayGroup(t){let e=this.currentDayOptions()[0]?.value||1;return this.fb.group({id:[t?.id||F()],dayOfWeek:[t?.dayOfWeek??e,S.required],routineId:[t?.routineId??"",S.required],routineName:[t?.routineName??""],notes:[t?.notes??""],timeOfDay:[t?.timeOfDay??""]})}addScheduledDay(){this.isViewMode||(this.scheduleFormArray.push(this.createScheduledDayGroup()),this.cdr.detectChanges(),setTimeout(()=>{let t=document.querySelectorAll(".scheduled-day-card");t.length>0&&t[t.length-1].scrollIntoView({behavior:"smooth",block:"center"})},0))}removeScheduledDay(t){this.isViewMode||this.scheduleFormArray.removeAt(t)}get scheduleFormGroups(){return this.scheduleFormArray.controls}onScheduleDrop(t){this.isViewMode||(Te(this.scheduleFormArray.controls,t.previousIndex,t.currentIndex),this.scheduleFormArray.updateValueAndValidity())}openRoutineSelectionModal(t){this.isViewMode||(this.targetScheduleIndexForRoutine=t,this.modalSearchTerm.set(""),this.isRoutineModalOpen.set(!0))}closeRoutineSelectionModal(){this.isRoutineModalOpen.set(!1),this.targetScheduleIndexForRoutine=null}selectRoutineForDay(t){this.targetScheduleIndexForRoutine!==null&&this.scheduleFormArray.at(this.targetScheduleIndexForRoutine).patchValue({routineId:t.id,routineName:t.name}),this.closeRoutineSelectionModal()}updateFormEnabledState(){this.isViewMode?this.programForm.disable():this.programForm.enable()}enableEditModeFromView(){this.isViewMode&&this.currentProgramId&&this.router.navigate(["/training-programs/edit",this.currentProgramId])}onSubmit(){return P(this,null,function*(){if(this.submitted=!0,this.isViewMode)return;if(this.programForm.invalid){this.programForm.markAllAsTouched(),this.toastService.error("Please fill all required fields and ensure each scheduled day has a routine selected.",0,"Validation Error"),console.log("Form errors:",this.programForm.errors,this.scheduleFormArray.errors),this.scheduleFormArray.controls.forEach((r,l)=>{r.invalid&&console.log(`Schedule Day ${l+1} errors:`,r.errors)});return}let t=this.programForm.getRawValue(),e={id:this.currentProgramId||F(),name:t.name,description:t.description,programNotes:t.programNotes,startDate:t.startDate||null,cycleLength:t.cycleLength||null,schedule:t.schedule.map(r=>({id:r.id||F(),dayOfWeek:Number(r.dayOfWeek),routineId:r.routineId,routineName:r.routineName,notes:r.notes,timeOfDay:r.timeOfDay})),isActive:!1};try{if(this.spinnerService.show("Saving program..."),this.isNewMode)yield this.trainingProgramService.addProgram(e);else if(this.isEditMode&&this.currentProgramId){let r=yield L(this.trainingProgramService.getProgramById(this.currentProgramId).pipe(A(1)));e.isActive=r?.isActive??!1,yield this.trainingProgramService.updateProgram(e)}this.router.navigate(["/training-programs"])}catch(r){console.error("Error saving program:",r),this.toastService.error("Failed to save program.",0,"Save Error")}finally{this.spinnerService.hide()}})}deleteProgram(){return P(this,null,function*(){if(!this.currentProgramId){this.toastService.error("No program selected for deletion.",0,"Deletion Error");return}try{this.spinnerService.show("Deleting program..."),yield this.trainingProgramService.deleteProgram(this.currentProgramId),(this.router.url.includes(`/training-programs/edit/${this.currentProgramId}`)||this.router.url.includes(`/training-programs/view/${this.currentProgramId}`))&&this.router.navigate(["/training-programs"])}catch(t){console.error("Error during program deletion process in component:",t),this.toastService.error("An unexpected error occurred while deleting the program.",0,"Deletion Error")}finally{this.spinnerService.hide()}})}ngOnDestroy(){this.routeSub&&this.routeSub.unsubscribe()}get f(){return this.programForm.controls}getScheduleDayControl(t){return this.scheduleFormArray.at(t)}toggleActiveProgram(){return P(this,null,function*(){if(this.currentProgramId){if(this.isCurrentProgramActive()){let t=yield this.alertService.showConfirm("Deactivate Program?","Do you want to deactivate this program? No program will be active.","Deactivate");if(t&&t.data)try{this.spinnerService.show("Deactivating program..."),yield this.trainingProgramService.deactivateProgram(this.currentProgramId)}catch{this.toastService.error("Failed to deactivate.",0,"Error")}finally{this.spinnerService.hide()}return}try{this.spinnerService.show("Setting active program..."),yield this.trainingProgramService.setActiveProgram(this.currentProgramId)}catch{this.toastService.error("Failed to set active program.",0,"Error")}finally{this.spinnerService.hide()}}})}updateSanitizedDescription(t){this.sanitizedDescription=this.sanitizer.bypassSecurityTrustHtml(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=H({type:i,selectors:[["app-training-program-builder"]],decls:52,vars:20,consts:[[1,"container","mx-auto","p-2","sm:p-4"],[1,"mb-2","pb-4","border-b","border-gray-200","dark:border-gray-700"],[1,"flex","justify-between","items-center"],[1,"text-gray-600","dark:text-gray-300","hover:text-primary","dark:hover:text-primary-light","p-2","-ml-1",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-xl","sm:text-2xl","md:text-2xl","font-bold","text-gray-800","dark:text-gray-200","text-center","flex-grow","truncate","px-2"],[1,"w-10","h-10"],[1,"mt-4","flex","flex-wrap","gap-2","justify-center"],["type","button",1,"text-white","font-semibold","py-3","px-3","rounded-md","shadow-sm","text-m","flex","items-center",3,"click","ngClass"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","class","w-8 h-8 mr-1",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","class","w-8 h-8 mr-1 text-red-500",4,"ngIf"],["type","button","class","bg-yellow-500 hover:bg-yellow-800 text-white font-semibold py-3 px-3 rounded-md shadow-sm text-m flex items-center",3,"click",4,"ngIf"],["type","button",1,"bg-red-600","hover:bg-red-800","text-white","font-semibold","py-3","px-3","rounded-md","shadow-sm","text-m","flex","items-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor",1,"size-4","sm:size-5","mr-1"],["stroke-linecap","round","stroke-linejoin","round","d","m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"],[1,"space-y-6","mb-6",3,"ngSubmit","formGroup"],[1,"space-y-4","p-2","rounded-lg","shadow-sm"],[4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["for","startDate",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","date","id","startDate","formControlName","startDate",1,"mt-1","block","w-full","p-2","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:border-gray-600","dark:text-gray-300","dark:[color-scheme:dark]"],["for","cycleLength",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","flex","items-center"],[1,"ml-1","group","relative"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-4","h-4","text-gray-400","dark:text-gray-500","cursor-help"],["fill-rule","evenodd","d","M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM9 9a.75.75 0 0 0 0 1.5h.253a.25.25 0 0 1 .244.304l-.459 2.066A1.75 1.75 0 0 0 10.747 15H11a.75.75 0 0 0 0-1.5h-.253a.25.25 0 0 1-.244-.304l.459-2.066A1.75 1.75 0 0 0 9.253 9H9Z","clip-rule","evenodd"],[1,"absolute","left-1/2","-translate-x-1/2","bottom-full","mb-2","w-48","p-2","text-xs","text-white","bg-gray-700","dark:bg-gray-900","rounded-md","shadow-lg","opacity-0","group-hover:opacity-100","transition-opacity","pointer-events-none","z-10"],["type","number","id","cycleLength","formControlName","cycleLength","min","1","placeholder","e.g., 7 for weekly",1,"mt-1","block","w-full","p-2","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:border-gray-600"],["for","programNotes",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","programNotes","formControlName","programNotes","rows","2",1,"mt-1","block","w-full","p-2","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:border-gray-600"],[1,"p-2","shadow-md"],[1,"flex","justify-between","items-center","mb-1"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-300"],["type","button","class","bg-blue-500 hover:bg-blue-600 text-white text-sm font-medium py-1.5 px-3 rounded-md shadow-sm",3,"click",4,"ngIf"],["cdkDropList","","formArrayName","schedule","class","space-y-4",3,"cdkDropListData","cdkDropListDropped",4,"ngIf"],["class","text-center py-6 text-gray-500 dark:text-gray-400 border border-dashed dark:border-gray-700 rounded-md",4,"ngIf"],["class","pt-6 flex justify-end space-x-3",4,"ngIf"],["class","fixed inset-0 bg-gray-700 bg-opacity-75 transition-opacity overflow-y-auto h-full w-full z-[70] flex items-center justify-center p-4",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-8","h-8","mr-1"],["fill-rule","evenodd","d","M16.403 12.652a3 3 0 000-5.304 3 3 0 00-3.75-3.751 3 3 0 00-5.305 0 3 3 0 00-3.751 3.75 3 3 0 000 5.305 3 3 0 003.75 3.751 3 3 0 005.305 0 3 3 0 003.751-3.75Zm-2.546-4.46a.75.75 0 00-1.214-.883l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5Z","clip-rule","evenodd"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-8","h-8","mr-1","text-red-500"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16Zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5Z","clip-rule","evenodd"],["type","button",1,"bg-yellow-500","hover:bg-yellow-800","text-white","font-semibold","py-3","px-3","rounded-md","shadow-sm","text-m","flex","items-center",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"],[1,"block","text-xl","font-black","text-gray-700","dark:text-gray-300"],["for","programName",1,"block","text-m","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","programName","formControlName","name","placeholder","Program name",1,"mt-1","block","w-full","p-2","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:border-gray-500","dark:text-gray-200",3,"ngClass"],["class","text-red-500 dark:text-red-400 text-xs mt-1",4,"ngIf"],[1,"text-red-500","dark:text-red-400","text-xs","mt-1"],[1,"mt-1","block","w-full","shadow-sm","dark:text-gray-200",3,"innerHTML"],["for","description",1,"block","text-m","font-medium","text-gray-700","dark:text-gray-300"],["id","description","formControlName","description","rows","3","placeholder","Description (optional)",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","dark:bg-gray-600","dark:text-gray-200"],["type","button",1,"bg-blue-500","hover:bg-blue-600","text-white","text-sm","font-medium","py-1.5","px-3","rounded-md","shadow-sm",3,"click"],["cdkDropList","","formArrayName","schedule",1,"space-y-4",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","","class","scheduled-day-card p-3 border rounded-lg shadow-sm bg-gray-50 dark:bg-gray-600/70 dark:border-gray-600 relative",3,"formGroupName","cdkDragDisabled",4,"ngFor","ngForOf"],["cdkDrag","",1,"scheduled-day-card","p-3","border","rounded-lg","shadow-sm","bg-gray-50","dark:bg-gray-600/70","dark:border-gray-600","relative",3,"formGroupName","cdkDragDisabled"],["cdkDragHandle","","class","absolute top-2 right-2 cursor-grab p-1 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300","title","Drag to reorder day",4,"ngIf"],[1,"flex","justify-between","items-center","mb-1","mt-5"],[1,"text-md","font-medium","text-gray-800","dark:text-gray-100"],["type","button","class","text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 text-xs font-medium p-1 rounded hover:bg-red-100 dark:hover:bg-red-900/30",3,"click",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3","dark:text-gray-300"],[1,"block","text-xs","font-medium","text-gray-700","dark:text-gray-300",3,"for"],["formControlName","dayOfWeek",1,"mt-1","block","w-full","p-2","text-sm","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:border-gray-500","dark:text-gray-300",3,"id"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-1","flex","rounded-md","shadow-sm",3,"ngClass"],["type","text","readonly","",1,"flex-1","min-w-0","block","w-full","px-3","py-2","text-sm","rounded-none","rounded-l-md","border-gray-300","dark:border-gray-200","dark:bg-gray-400","cursor-default","focus:outline-none","focus:ring-0","focus:border-gray-300",3,"id","value","ngClass"],["type","button","class","inline-flex items-center px-3 py-2 border border-l-0 rounded-r-md text-sm transition-colors duration-150",3,"ngClass","click",4,"ngIf"],[1,"sm:col-span-2"],["type","text","formControlName","timeOfDay","placeholder","e.g., AM, PM, 08:00",1,"mt-1","block","w-full","p-2","text-sm","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:border-gray-500",3,"id"],["formControlName","notes","rows","2",1,"mt-1","block","w-full","p-2","text-sm","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:border-gray-500",3,"id"],["cdkDragHandle","","title","Drag to reorder day",1,"absolute","top-2","right-2","cursor-grab","p-1","text-gray-400","hover:text-gray-600","dark:text-gray-500","dark:hover:text-gray-300"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"w-5","h-5"],["d","M 7 17 L 7 3 M 4 6 L 7 3 L 10 6 M 17 7 L 17 21 M 14 18 L 17 21 L 20 18","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["type","button",1,"text-red-500","hover:text-red-700","dark:text-red-400","dark:hover:text-red-300","text-xs","font-medium","p-1","rounded","hover:bg-red-100","dark:hover:bg-red-900/30",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 16 16","fill","currentColor",1,"w-4","h-4","inline-block","mr-1"],["fill-rule","evenodd","d","M5 3.25A2.25 2.25 0 002.75 5.5v5A2.25 2.25 0 005 12.75h6a2.25 2.25 0 002.25-2.25v-5A2.25 2.25 0 0011 3.25H5Zm.97 3.97a.75.75 0 011.06 0L8 8.28l.97-.97a.75.75 0 111.06 1.06L9.06 9.25l.97.97a.75.75 0 11-1.06 1.06L8 10.43l-.97.97a.75.75 0 01-1.06-1.06L6.94 9.25l-.97-.97a.75.75 0 010-1.06Z","clip-rule","evenodd"],[3,"value"],["type","button",1,"inline-flex","items-center","px-3","py-2","border","border-l-0","rounded-r-md","text-sm","transition-colors","duration-150",3,"click","ngClass"],[1,"text-center","py-6","text-gray-500","dark:text-gray-400","border","border-dashed","dark:border-gray-700","rounded-md"],["type","button","class","mt-2 text-sm text-primary hover:underline",3,"click",4,"ngIf"],["type","button",1,"mt-2","text-sm","text-primary","hover:underline",3,"click"],[1,"pt-6","flex","justify-end","space-x-3"],["routerLink","/training-programs",1,"px-4","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","dark:text-gray-200","hover:bg-gray-50","dark:hover:bg-gray-700"],["type","submit",1,"px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-primary","hover:bg-primary-dark","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-dark","disabled:opacity-50",3,"disabled"],[1,"fixed","inset-0","bg-gray-700","bg-opacity-75","transition-opacity","overflow-y-auto","h-full","w-full","z-[70]","flex","items-center","justify-center","p-4",3,"click"],[1,"relative","transform","overflow-hidden","rounded-lg","bg-white","dark:bg-gray-700","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:max-w-2xl",3,"click"],[1,"bg-white","dark:bg-gray-600","px-4","pt-5","pb-4","sm:p-6","sm:pb-4","backdrop-blur-sm"],[1,"sm:flex","sm:items-start","w-full"],[1,"mt-3","text-center","sm:mt-0","sm:text-left","w-full"],[1,"flex","justify-between","items-center","pb-3"],["id","modal-title",1,"text-xl","font-semibold","leading-6","text-gray-900","dark:text-gray-100"],["type","button",1,"p-1","rounded-full","text-gray-400","hover:text-gray-600","dark:hover:text-gray-300","focus:outline-none",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"my-4"],["type","text","placeholder","Search routines...",1,"w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:text-gray-200",3,"ngModelChange","ngModel"],[1,"mt-2","max-h-80","overflow-y-auto","pr-2","custom-scrollbar"],[1,"space-y-1"],["class","p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md cursor-pointer transition-colors flex justify-between items-center",3,"click",4,"ngFor","ngForOf"],["class","text-gray-500 dark:text-gray-400 text-center p-4",4,"ngIf"],[1,"bg-gray-50","dark:bg-gray-600","px-4","py-3","sm:flex","sm:flex-row-reverse","sm:px-6"],["type","button",1,"mt-3","inline-flex","w-full","justify-center","rounded-md","bg-white","dark:bg-gray-700","px-3","py-2","text-sm","font-semibold","text-gray-900","dark:text-gray-200","shadow-sm","ring-1","ring-inset","ring-gray-300","dark:ring-gray-500","hover:bg-gray-50","dark:hover:bg-gray-500","sm:mt-0","sm:w-auto",3,"click"],[1,"p-3","hover:bg-gray-100","dark:hover:bg-gray-700","rounded-md","cursor-pointer","transition-colors","flex","justify-between","items-center",3,"click"],[1,"font-medium","text-gray-800","dark:text-gray-200"],[1,"block","text-xs","text-gray-500","dark:text-gray-400"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-5","h-5","text-primary","dark:text-primary-light"],["fill-rule","evenodd","d","M8.22 5.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 010-1.06Z","clip-rule","evenodd"],[1,"text-gray-500","dark:text-gray-400","text-center","p-4"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"header",1)(2,"div",2)(3,"button",3),x(),o(4,"svg",4),p(5,"path",5),n()(),w(),o(6,"h1",6),s(7),n(),p(8,"div",7),n(),o(9,"div",8)(10,"button",9),y("click",function(){return r.toggleActiveProgram()}),h(11,Ge,2,0,"svg",10)(12,We,2,0,"svg",11),s(13),n(),h(14,He,4,0,"button",12),o(15,"button",13),y("click",function(){return r.deleteProgram()}),x(),o(16,"svg",14),p(17,"path",15),n(),s(18," DELETE "),n()()(),w(),o(19,"form",16),y("ngSubmit",function(){return r.onSubmit()}),o(20,"section",17),h(21,je,3,1,"div",18)(22,$e,5,5,"div",18)(23,qe,2,1,"div",18)(24,Ue,4,0,"div",18),o(25,"div",19)(26,"div")(27,"label",20),s(28,"Start Date (Optional)"),n(),p(29,"input",21),n(),o(30,"div")(31,"label",22),s(32," Cycle Length (Optional) "),o(33,"span",23),x(),o(34,"svg",24),p(35,"path",25),n(),w(),o(36,"span",26),s(37," Leave blank for a weekly (7-day) schedule. Enter a number (e.g., 3) for a custom N-day cycle. 'Day of Week' selectors will update accordingly. "),n()()(),p(38,"input",27),n()(),o(39,"div")(40,"label",28),s(41,"General Program Notes (Optional)"),n(),p(42,"textarea",29),n()(),o(43,"section",30)(44,"div",31)(45,"h2",32),s(46,"Schedule"),n(),h(47,Ye,2,0,"button",33),n(),h(48,it,2,2,"div",34)(49,ot,4,1,"div",35),n(),h(50,at,5,2,"div",36),n(),h(51,mt,21,4,"div",37),n()),e&2&&(a(3),d("routerLink","/training-programs"),a(4),k(" ",r.isNewMode?"":r.isEditMode?"EDIT: "+((r.currentProgram==null?null:r.currentProgram.name)||"Program"):r.currentProgram==null?null:r.currentProgram.name," "),a(3),d("ngClass",E(17,Ae,!r.isCurrentProgramActive(),r.isCurrentProgramActive())),a(),d("ngIf",!r.isCurrentProgramActive()),a(),d("ngIf",r.isCurrentProgramActive()),a(),k(" ",r.isCurrentProgramActive()?"DEACTIVATE":"ACTIVATE"," "),a(),d("ngIf",r.isViewMode),a(5),d("formGroup",r.programForm),a(2),d("ngIf",r.isViewMode),a(),d("ngIf",r.isEditMode||r.isNewMode),a(),d("ngIf",r.isViewMode),a(),d("ngIf",r.isEditMode||r.isNewMode),a(23),d("ngIf",!r.isViewMode),a(),d("ngIf",r.scheduleFormArray.length>0),a(),d("ngIf",r.scheduleFormArray.length===0),a(),d("ngIf",!r.isViewMode),a(),d("ngIf",r.isRoutineModalOpen()))},dependencies:[ee,J,K,Q,X,ke,me,fe,ve,ae,ce,ye,le,de,be,ue,he,ge,pe,oe,Fe,Me,Ee,Ie,V,_e,se],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:.5rem;box-shadow:0 5px 5px -3px #0000001a,0 8px 10px 1px #00000012,0 3px 14px 2px #0000000f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.2;border:2px dashed #9ca3af;background-color:#f3f4f6;transition:transform .25s cubic-bezier(0,0,.2,1);border-radius:.5rem}.dark[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{border-color:#4b5563;background-color:#374151}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.scheduled-day-card.cdk-drop-list-dragging[_ngcontent-%COMP%]   .scheduled-day-card[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#9ca3af;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}.dark[_ngcontent-%COMP%]   .custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4b5563}.dark[_ngcontent-%COMP%]   .custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}"]})};export{Ve as TrainingProgramBuilderComponent};
