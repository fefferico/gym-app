import{c as v,d as l,f as s,h as m}from"./chunk-4PTIEP3X.js";import{Aa as I,Ga as o,Ha as d,Ia as p,Ja as u,Kb as V,Lb as K,Mb as N,Na as f,Nb as L,Nc as R,Oa as y,Ob as $,Pc as Y,Q as g,Qa as k,Ra as x,Sa as r,U as h,V as M,Xb as z,bb as A,ca as E,cb as H,db as O,dc as F,ea as D,ia as w,la as T,ma as a,ua as B,za as c}from"./chunk-G5RFLJOB.js";import{g as S}from"./chunk-GAL4ENT6.js";function j(e,n){e&1&&u(0,"div",8)}function q(e,n){if(e&1&&u(0,"span",11),e&2){let t=n.ngIf,i=r(2).$implicit;o("innerHTML",t,w)("ngClass",i.iconClass||"w-5 h-5 mr-2")}}function G(e,n){if(e&1){let t=k();d(0,"button",9),x("click",function(C){h(t);let _=r().$implicit,b=r(3);return M(b.onItemClicked(C,_))}),c(1,q,1,2,"span",10),A(2),p()}if(e&2){let t=r().$implicit,i=r(3);o("ngClass",t.buttonClass||"w-full text-left px-3 py-1.5 sm:px-4 sm:py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center text-sm"),a(),o("ngIf",i.getIconHtml(t)),a(),O(" ",t.label," ")}}function J(e,n){if(e&1&&(f(0),c(1,j,1,0,"div",6)(2,G,3,3,"button",7),y()),e&2){let t=n.$implicit;a(),o("ngIf",t.isDivider),a(),o("ngIf",!t.isDivider)}}function Q(e,n){if(e&1&&(d(0,"div",4),c(1,J,3,2,"ng-container",5),p()),e&2){let t=r(2);o("@dropdownMenu",void 0)("ngClass",t.dropdownMenuClass),a(),o("ngForOf",t.items)}}function U(e,n){if(e&1&&(d(0,"div"),c(1,Q,2,3,"div",3),p()),e&2){let t=r();a(),o("ngIf",t.isVisible)}}function W(e,n){e&1&&u(0,"div")}function X(e,n){e&1&&u(0,"div",14)}function Z(e,n){if(e&1&&u(0,"span",11),e&2){let t=n.ngIf,i=r(2).$implicit;o("innerHTML",t,w)("ngClass",i.iconClass||"w-6 h-6 mr-3")}}function tt(e,n){if(e&1&&(d(0,"span",17),A(1),p()),e&2){let t=r(2).$implicit;a(),H(t.label)}}function et(e,n){if(e&1){let t=k();d(0,"button",15),x("click",function(C){h(t);let _=r().$implicit,b=r(3);return M(b.onItemClicked(C,_))}),c(1,Z,1,2,"span",10)(2,tt,2,1,"span",16),p()}if(e&2){let t=r().$implicit,i=r(3);o("title",t.label)("ngClass",t.buttonClass||"w-full text-left p-2 text-gray-700 dark:text-gray-200 hover:bg-gray-500/10 dark:hover:bg-gray-500/20 flex items-center text-base rounded-md"),a(),o("ngIf",i.getIconHtml(t)),a(),o("ngIf",i.showLabelInCompact(t))}}function nt(e,n){if(e&1&&(f(0),c(1,X,1,0,"div",12)(2,et,3,4,"button",13),y()),e&2){let t=n.$implicit;a(),o("ngIf",t.isDivider),a(),o("ngIf",!t.isDivider)}}function it(e,n){if(e&1&&(d(0,"div",4),c(1,nt,3,2,"ng-container",5),p()),e&2){let t=r(2);o("@compactBar",void 0)("ngClass",t.compactBarClass),a(),o("ngForOf",t.items)}}function ot(e,n){if(e&1&&(d(0,"div"),c(1,it,2,3,"div",3),p()),e&2){let t=r();a(),o("ngIf",t.isVisible)}}var at=v("modalOverlay",[m(":enter",[s({opacity:0}),l("200ms ease-out",s({opacity:1}))]),m(":leave",[l("150ms ease-in",s({opacity:0}))])]),rt=v("modalContent",[m(":enter",[s({transform:"translateY(100%)"}),l("200ms ease-out",s({transform:"translateY(0)"}))]),m(":leave",[l("150ms ease-in",s({transform:"translateY(100%)"}))])]),st=v("dropdownMenu",[m(":enter",[s({opacity:0,transform:"scale(0.95) translateY(-10px)"}),l("100ms ease-out",s({opacity:1,transform:"scale(1) translateY(0)"}))]),m(":leave",[l("75ms ease-in",s({opacity:0,transform:"scale(0.95) translateY(-10px)"}))])]),ct=v("compactBar",[m(":enter",[s({opacity:0}),l("200ms ease-out",s({opacity:1}))]),m(":leave",[l("150ms ease-in",s({opacity:0}))])]),P=class e{sanitizer=g(F);elRef=g(D);iconRegistry=g(R);alertService=g(Y);items=[];isVisible=!1;displayMode="dropdown";modalTitle="Actions";dropdownMenuClass="origin-top-right absolute right-0 top-full mt-1 sm:mt-2 w-48 rounded-md shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black dark:ring-gray-600 ring-opacity-5 focus:outline-none py-1 z-[60]";compactBarClass="flex flex-wrap gap-1.5 justify-center z-20 rounded-b-lg";customButtonDivCssClass="grid grid-cols-2";itemClick=new I;closeMenu=new I;_boundOnEnterKey=this.handleEnterKey.bind(this);ngOnChanges(n){if(n.isVisible){let t=n.isVisible.currentValue;t&&this.displayMode==="modal"&&setTimeout(()=>this.presentAsAlert(),0),t&&this.displayMode!=="modal"?document.addEventListener("keydown",this._boundOnEnterKey):document.removeEventListener("keydown",this._boundOnEnterKey)}}ngOnDestroy(){document.removeEventListener("keydown",this._boundOnEnterKey)}presentAsAlert(){return S(this,null,function*(){let n=this.items.filter(i=>!i.isDivider).map(i=>({text:i.label||"",role:i.actionKey||"",icon:i.iconName,iconClass:i.iconClass,overrideCssClass:`justify-start text-xl ${i.buttonClass||""}`,data:i.data})),t=yield this.alertService.present({header:this.modalTitle,buttons:n,backdropDismiss:!0,customButtonDivCssClass:this.customButtonDivCssClass?this.customButtonDivCssClass:"grid grid-cols-2"});t&&t.role!=="backdrop"&&t.role!=="cancel"&&this.itemClick.emit({actionKey:t.role,data:t.data}),this.closeMenu.emit()})}onDocumentClick(n){this.displayMode==="dropdown"&&this.isVisible&&!this.elRef.nativeElement.contains(n.target)&&this.closeMenu.emit()}handleEnterKey(n){if(n.key==="Enter"){n.preventDefault();let t=this.items.find(i=>!i.isDivider);t&&this.onItemClicked({stopPropagation:()=>{}},t)}}onItemClicked(n,t){n.stopPropagation(),t.isDivider||(navigator.vibrate&&navigator.vibrate(50),this.itemClick.emit({actionKey:t.actionKey??"",data:t.data}),this.displayMode==="dropdown"&&this.closeMenu.emit())}getIconHtml(n){let t=null;return n.iconName?t=this.iconRegistry.getIconString(n.iconName):n.iconSvg&&(t=n.iconSvg),t?this.sanitizer.bypassSecurityTrustHtml(t):null}showLabelInCompact(n){return!!n.label}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=B({type:e,selectors:[["app-action-menu"]],hostBindings:function(t,i){t&1&&x("click",function(_){return i.onDocumentClick(_)},T)},inputs:{items:"items",isVisible:"isVisible",displayMode:"displayMode",modalTitle:"modalTitle",dropdownMenuClass:"dropdownMenuClass",compactBarClass:"compactBarClass",customButtonDivCssClass:"customButtonDivCssClass"},outputs:{itemClick:"itemClick",closeMenu:"closeMenu"},features:[E],decls:5,vars:4,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"hidden","dark:hover:text-gray-100"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngFor","ngForOf"],["class","my-0.5 sm:my-1 border-t border-gray-200 dark:border-gray-600",4,"ngIf"],["type","button","class","transition-colors duration-150 ease-in-out",3,"ngClass","click",4,"ngIf"],[1,"my-0.5","sm:my-1","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"transition-colors","duration-150","ease-in-out",3,"click","ngClass"],[3,"innerHTML","ngClass",4,"ngIf"],[3,"innerHTML","ngClass"],["class","my-1 border-t border-gray-200 dark:border-gray-600",4,"ngIf"],["type","button","class","transition-colors duration-150 ease-in-out",3,"title","ngClass","click",4,"ngIf"],[1,"my-1","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"transition-colors","duration-150","ease-in-out",3,"click","title","ngClass"],["class","truncate",4,"ngIf"],[1,"truncate"]],template:function(t,i){t&1&&(f(0,0),c(1,U,2,1,"div",1)(2,W,1,0,"div",1)(3,ot,2,1,"div",1),y(),u(4,"div",2)),t&2&&(o("ngSwitch",i.displayMode),a(),o("ngSwitchCase","dropdown"),a(),o("ngSwitchCase","modal"),a(),o("ngSwitchCase","compact"))},dependencies:[z,V,K,N,L,$],encapsulation:2,data:{animation:[st,ct,at,rt]},changeDetection:0})};export{P as a};
