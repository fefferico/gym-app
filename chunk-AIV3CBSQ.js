import{a as J,b as dt,c as st,d as mt,f as pt}from"./chunk-RLU3CBCQ.js";import{a as Y}from"./chunk-YXXW2ICV.js";import{a as lt}from"./chunk-FO5K3T2Q.js";import{a as at}from"./chunk-BDULS4R7.js";import{a as ot}from"./chunk-TJFALCZN.js";import{f as Z,h as tt,i as O,k as rt,m as it,n as nt}from"./chunk-56NPLE7C.js";import{s as et}from"./chunk-V7LSVLV3.js";import{Ab as N,B as oe,Dc as L,Ec as Be,Fc as Te,G as le,Gb as ye,Gc as V,Hc as De,I as de,Ic as Ee,Ja as d,Ka as l,Kb as ve,La as o,Lb as he,Lc as Fe,Ma as _,Mb as xe,Mc as Ve,Na as j,Nc as Me,O as B,Oa as z,Oc as Ne,Qa as P,Ra as w,Rc as Ae,Sa as m,Sb as fe,Sc as Oe,T as b,Tc as We,U as k,Ub as be,Uc as Le,V as $,Vc as Re,W as se,Wc as Ge,Xb as ke,Xc as He,Za as q,Zb as we,Zc as $e,_ as D,_a as ge,ad as je,bb as u,bd as ze,cb as h,cd as qe,da as me,db as C,dd as Ke,eb as re,fa as pe,fb as _e,fd as Ue,gd as Ye,hc as Ce,i as te,id as Ze,ja as n,jc as Se,jd as Je,kd as Qe,l as H,lc as Pe,ld as Xe,mb as K,mc as Ie,nb as W,ob as ie,ra as ce,sb as p,tb as c,ua as ue,ub as M,wa as v,wb as U,y as ae,z as R}from"./chunk-D5SNA2MW.js";import{a as X,b as ee,g as A}from"./chunk-GAL4ENT6.js";var Q=class r{transform(t,e=!1){if(t==null)return"";let i=Number(t);return e?`Day ${i}`:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][i]||`Day ${i}`}static \u0275fac=function(e){return new(e||r)};static \u0275pipe=ue({name:"dayOfWeek",type:r,pure:!0})};var ct=(r,t)=>({"text-primary dark:text-primary-light font-semibold":r,"text-gray-700 dark:text-gray-300":t}),vt=(r,t)=>({"border-red-500 dark:border-red-400":r,"border-gray-300 dark:border-gray-500":t}),ht=(r,t)=>({"bg-primary text-white focus:ring-primary-dark":r,"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500 focus:ring-gray-400":t}),gt=r=>({"mt-1":r}),xt=r=>({"ring-2 ring-offset-1 ring-red-500 dark:ring-red-400":r}),ft=(r,t)=>({"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 placeholder-red-400":r,"rounded-r-md":t}),_t=(r,t,e)=>({"border-blue-300 dark:border-blue-500 bg-blue-50 dark:bg-blue-500 text-white hover:bg-blue-100 dark:hover:bg-blue-400":r,"border-green-500 dark:border-green-400 bg-green-50 dark:bg-green-700 text-green-700 dark:text-green-100 hover:bg-green-100 dark:hover:bg-green-600":t,"border-red-500 dark:border-red-400 bg-red-100 dark:bg-red-600 text-red-700 dark:text-red-200 hover:bg-red-200 dark:hover:bg-red-500":e});function bt(r,t){if(r&1){let e=P();l(0,"app-action-menu",38),w("itemClick",function(a){b(e);let s=m(2);return k(s.handleActionMenuItemClick(a))})("closeMenu",function(){b(e);let a=m(2);return k(a.onCloseActionMenu())}),o()}if(r&2){let e=m().ngIf,i=m();d("items",i.getProgramDropdownActionItems(e.id,"dropdown"))("isVisible",i.areActionsVisible(e.id))}}function kt(r,t){if(r&1){let e=P();l(0,"div",33)(1,"div",34)(2,"button",35),w("click",function(a){let s=b(e).ngIf,g=m();return k(g.toggleActions(s.id,a))}),_(3,"app-icon",36),o(),v(4,bt,1,2,"app-action-menu",37),o()()}if(r&2){let e=t.ngIf,i=m();n(4),d("ngIf",i.areActionsVisible(e.id))}}function wt(r,t){if(r&1&&(l(0,"div")(1,"label",39),u(2),o()()),r&2){let e,i=m();n(2),h((e=i.programForm.get("name"))==null?null:e.value)}}function Ct(r,t){r&1&&(l(0,"div")(1,"div",40),$(),l(2,"svg",41),_(3,"path",42),o(),se(),l(4,"span",43),u(5),p(6,"translate"),o()()()),r&2&&(n(5),h(c(6,1,"programBuilder.active")))}function St(r,t){if(r&1&&(l(0,"div",46)(1,"div",47)(2,"h3",48),u(3),p(4,"translate"),o(),l(5,"span",49),u(6),o()(),l(7,"div",50),_(8,"div",51),o()()),r&2){let e,i=t.ngIf,a=m(2);n(3),C(" ",c(4,5,((e=a.currentProgram())==null?null:e.programType)==="linear"?"programBuilder.progress.overallWorkout":"programBuilder.progress.currentCycle")," "),n(3),re(" ",i.completedCount," / ",i.totalCount," "),n(2),ge("width",i.percentage,"%")}}function Pt(r,t){if(r&1&&(l(0,"div",44),v(1,St,9,7,"div",45),o()),r&2){let e=m();n(),d("ngIf",e.programProgress())}}function It(r,t){if(r&1&&(_(0,"div",55),p(1,"translate"),p(2,"translate")),r&2){let e=t.$implicit;d("ngClass",e.isCompleted?"bg-primary":"bg-gray-200 dark:bg-gray-700")("title",e.name+(e.isCompleted?c(1,2,"programBuilder.progress.weekCompleted"):c(2,4,"programBuilder.progress.weekIncomplete")))}}function Bt(r,t){if(r&1&&(l(0,"div",46)(1,"h3",48),u(2),p(3,"translate"),o(),l(4,"div",53),v(5,It,3,6,"div",54),o()()),r&2){let e=t.ngIf;n(2),C("",c(3,2,"programBuilder.progress.overallWeeks")," "),n(3),d("ngForOf",e)}}function Tt(r,t){if(r&1&&_(0,"div",58),r&2){let e=t.$implicit;d("ngClass",e.isCompleted?"bg-green-500":"bg-gray-200 dark:bg-gray-700")}}function Dt(r,t){if(r&1&&(l(0,"div",46)(1,"div",47)(2,"h3",48),u(3),p(4,"translate"),l(5,"span",56),u(6),o()(),l(7,"span",49),u(8),p(9,"translate"),o()(),l(10,"div",53),v(11,Tt,1,1,"div",57),o()()),r&2){let e=t.ngIf;n(3),C(" ",c(4,6,"programBuilder.progress.currentWeek")," "),n(3),C("(",e.weekName,")"),n(2),_e(" ",e.completedCount," / ",e.totalCount," ",c(9,8,"programBuilder.progress.workouts")," "),n(3),d("ngForOf",e.segments)}}function Et(r,t){if(r&1&&(l(0,"div",52),v(1,Bt,6,4,"div",45)(2,Dt,12,10,"div",45),o()),r&2){let e=m();n(),d("ngIf",e.overallWeekProgress()),n(),d("ngIf",e.currentWeekProgress())}}function Ft(r,t){r&1&&(l(0,"span"),u(1),p(2,"translate"),o()),r&2&&(n(),h(c(2,1,"programBuilder.form.nameRequired")))}function Vt(r,t){if(r&1&&(l(0,"div",62),v(1,Ft,3,3,"span",13),o()),r&2){let e,i=m(2);n(),d("ngIf",(e=i.programForm.get("name"))==null||e.errors==null?null:e.errors.required)}}function Mt(r,t){if(r&1&&(l(0,"div")(1,"label",59),u(2),p(3,"translate"),o(),_(4,"input",60),p(5,"translate"),v(6,Vt,2,1,"div",61),o()),r&2){let e,i,a=m();n(2),h(c(3,4,"programBuilder.form.nameLabel")),n(2),d("placeholder",c(5,6,"programBuilder.form.namePlaceholder"))("ngClass",W(8,vt,((e=a.programForm.get("name"))==null?null:e.invalid)&&((e=a.programForm.get("name"))==null?null:e.touched),!((e=a.programForm.get("name"))!=null&&e.invalid&&((e=a.programForm.get("name"))!=null&&e.touched)))),n(2),d("ngIf",((i=a.programForm.get("name"))==null?null:i.invalid)&&(((i=a.programForm.get("name"))==null?null:i.dirty)||((i=a.programForm.get("name"))==null?null:i.touched)))}}function Nt(r,t){if(r&1&&(l(0,"div"),_(1,"p",63),o()),r&2){let e=m();n(),d("innerHTML",e.sanitizedDescription,pe)}}function At(r,t){r&1&&(l(0,"div")(1,"label",64),u(2),p(3,"translate"),o(),_(4,"textarea",65),p(5,"translate"),o()),r&2&&(n(2),h(c(3,2,"programBuilder.form.descriptionLabel")),n(2),d("placeholder",c(5,4,"programBuilder.form.descriptionPlaceholder")))}function Ot(r,t){if(r&1){let e=P();l(0,"button",70),w("click",function(){let a=b(e).$implicit,s=m(2);return k(s.toggleGoal(a))}),u(1),p(2,"titlecase"),o()}if(r&2){let e=t.$implicit,i=m(2);d("disabled",i.isViewMode)("ngClass",W(5,ht,e&&e.value!==void 0&&i.selectedGoals().includes(e.value),e&&e.value!==void 0&&!i.selectedGoals().includes(e.value))),n(),C(" ",c(2,3,e.label)," ")}}function Wt(r,t){if(r&1&&(l(0,"div",66)(1,"label",67),u(2),p(3,"translate"),o(),l(4,"div",68),v(5,Ot,3,8,"button",69),o()()),r&2){let e=m();n(2),h(c(3,2,"programBuilder.form.goalsLabel")),n(3),d("ngForOf",e.programGoals)}}function Lt(r,t){r&1&&(l(0,"div")(1,"label",71),u(2),p(3,"translate"),o(),_(4,"input",72),o()),r&2&&(n(2),h(c(3,1,"programBuilder.form.startDateLabel")))}function Rt(r,t){r&1&&(l(0,"div",73)(1,"label",22),_(2,"input",74),l(3,"span",75),u(4),p(5,"translate"),o()(),l(6,"p",76),u(7),p(8,"translate"),o()()),r&2&&(n(4),h(c(5,2,"programBuilder.form.repeatWeeks")),n(3),C(" ",c(8,4,"programBuilder.form.repeatWeeksHint")," "))}function Gt(r,t){if(r&1&&(l(0,"div")(1,"label",77),u(2),p(3,"translate"),l(4,"span",78),_(5,"app-icon",79),o()(),_(6,"input",80),p(7,"translate"),l(8,"p",76),u(9),p(10,"translate"),o()()),r&2){let e=m();n(2),C(" ",c(3,4,"programBuilder.form.cycleLengthLabel")," "),n(3),d("appTooltip",e.infoTooltipString),n(),d("placeholder",c(7,6,"programBuilder.form.cycleLengthPlaceholder")),n(3),C(" ",c(10,8,"programBuilder.form.cycleLengthHint")," ")}}function Ht(r,t){r&1&&(l(0,"p",81),u(1),p(2,"translate"),o()),r&2&&(n(),C(" ",c(2,1,"programBuilder.form.editWarning")," "))}function $t(r,t){r&1&&(l(0,"div")(1,"label",82),u(2),p(3,"translate"),o(),_(4,"textarea",83),o()),r&2&&(n(2),h(c(3,1,"programBuilder.form.notesLabel")))}function jt(r,t){if(r&1){let e=P();l(0,"button",90),w("shortPress",function(){b(e);let a=m(3);return k(a.addScheduledDay())}),_(1,"app-icon",91),l(2,"span",78),u(3),p(4,"translate"),o()()}r&2&&(n(3),h(c(4,1,"programBuilder.schedule.addDay")))}function zt(r,t){r&1&&(l(0,"div",106),_(1,"app-icon",107),o())}function qt(r,t){if(r&1){let e=P();l(0,"button",108),w("shortPress",function(){b(e);let a=m().index,s=m(4);return k(s.removeScheduledDay(a))}),_(1,"app-icon",109),l(2,"span"),u(3,"REMOVE DAY"),o()()}}function Kt(r,t){if(r&1&&(l(0,"option",118),u(1),o()),r&2){let e=t.$implicit;d("value",e.value),n(),h(e.label)}}function Ut(r,t){r&1&&(l(0,"div",62),u(1),p(2,"translate"),o()),r&2&&(n(),C(" ",c(2,1,"programBuilder.schedule.dayRequired")," "))}function Yt(r,t){if(r&1){let e=P();l(0,"button",119),w("shortPress",function(){b(e);let a=m(2).index,s=m(4);return k(s.openRoutineSelectionModal(a))}),_(1,"app-icon",120),l(2,"span",78),u(3),p(4,"translate"),o()()}if(r&2){let e,i,a=m(2).index,s=m(4);d("ngClass",ie(4,_t,!((e=s.getScheduleDayControl(a).get("routineId"))!=null&&e.value)&&!((e=s.getScheduleDayControl(a).get("routineId"))!=null&&e.invalid&&((e=s.getScheduleDayControl(a).get("routineId"))!=null&&e.touched||s.submitted)),(e=s.getScheduleDayControl(a).get("routineId"))==null?null:e.value,((e=s.getScheduleDayControl(a).get("routineId"))==null?null:e.invalid)&&(((e=s.getScheduleDayControl(a).get("routineId"))==null?null:e.touched)||s.submitted))),n(3),C(" ",c(4,2,(i=s.getScheduleDayControl(a).get("routineId"))!=null&&i.value?"programBuilder.schedule.change":"programBuilder.schedule.select")," ")}}function Zt(r,t){r&1&&(l(0,"div",62),u(1),p(2,"translate"),o()),r&2&&(n(),C(" ",c(2,1,"programBuilder.schedule.routineRequired")," "))}function Jt(r,t){if(r&1&&(l(0,"div",121)(1,"label",111),u(2),p(3,"translate"),o(),_(4,"input",122),p(5,"translate"),o()),r&2){let e=m(2).index;n(),d("for","timeOfDay-"+e),n(),h(c(3,4,"programBuilder.schedule.timeLabel")),n(2),d("id","timeOfDay-"+e)("placeholder",c(5,6,"programBuilder.schedule.timePlaceholder"))}}function Qt(r,t){if(r&1&&(l(0,"div",121)(1,"label",111),u(2),p(3,"translate"),o(),_(4,"textarea",123),o()),r&2){let e=m(2).index;n(),d("for","dayNotes-"+e),n(),h(c(3,3,"programBuilder.schedule.notesLabel")),n(2),d("id","dayNotes-"+e)}}function Xt(r,t){if(r&1&&(l(0,"div")(1,"div",110)(2,"div")(3,"label",111),u(4),p(5,"translate"),p(6,"translate"),o(),l(7,"select",112),v(8,Kt,2,2,"option",113),o(),v(9,Ut,3,3,"div",61),o(),l(10,"div")(11,"label",111),u(12),p(13,"translate"),o(),l(14,"div",114),_(15,"input",115),p(16,"translate"),p(17,"translate"),v(18,Yt,5,8,"button",116),o(),v(19,Zt,3,3,"div",61),o(),v(20,Jt,6,8,"div",117)(21,Qt,5,5,"div",117),o()()),r&2){let e,i,a,s,g,y,S,x=m().index,f=m(4);n(3),d("for","dayOfWeek-"+x),n(),C(" ",f.f.cycleLength.value>0?c(5,15,"programBuilder.schedule.cycleDayLabel"):c(6,17,"programBuilder.schedule.dayOfWeekLabel")," "),n(3),d("id","dayOfWeek-"+x),n(),d("ngForOf",f.currentDayOptions()),n(),d("ngIf",((e=f.getScheduleDayControl(x).get("dayOfWeek"))==null?null:e.invalid)&&((e=f.getScheduleDayControl(x).get("dayOfWeek"))==null?null:e.touched)),n(2),d("for","routineName-"+x),n(),h(c(13,19,"programBuilder.schedule.routineLabel")),n(2),d("ngClass",K(25,xt,((i=f.getScheduleDayControl(x).get("routineId"))==null?null:i.invalid)&&(((i=f.getScheduleDayControl(x).get("routineId"))==null?null:i.touched)||f.submitted))),n(),d("id","routineName-"+x)("value",((a=f.getScheduleDayControl(x).get("routineName"))==null?null:a.value)||((a=f.getScheduleDayControl(x).get("routineId"))!=null&&a.value?c(16,21,"programBuilder.schedule.loadingRoutine"):c(17,23,"programBuilder.schedule.noRoutine")))("ngClass",W(27,ft,((s=f.getScheduleDayControl(x).get("routineId"))==null?null:s.invalid)&&(((s=f.getScheduleDayControl(x).get("routineId"))==null?null:s.touched)||f.submitted),f.isViewMode)),n(3),d("ngIf",!f.isViewMode),n(),d("ngIf",((g=f.getScheduleDayControl(x).get("routineId"))==null?null:g.invalid)&&(((g=f.getScheduleDayControl(x).get("routineId"))==null?null:g.touched)||f.submitted)),n(),d("ngIf",((y=f.programForm.get("timeOfDay"))==null?null:y.value)||f.isEditableMode()),n(),d("ngIf",((S=f.programForm.get("notes"))==null?null:S.value)||f.isEditableMode())}}function er(r,t){if(r&1&&(l(0,"div",124)(1,"span",125),u(2),p(3,"translate"),o()()),r&2){let e,i=m().$implicit;n(2),h(((e=i.get("routineName"))==null?null:e.value)||c(3,1,"programBuilder.schedule.noRoutine"))}}function tr(r,t){if(r&1){let e=P();l(0,"div",94)(1,"div",95)(2,"div",96),v(3,zt,2,0,"div",97),l(4,"button",98),w("click",function(){let a,s=b(e).$implicit,g=m(4);return k(g.toggleDay((a=s.get("id"))==null?null:a.value))}),_(5,"app-icon",99),o()(),v(6,qt,4,0,"button",100),o(),l(7,"div",101)(8,"h4",102)(9,"label",103),u(10,"Day Name"),o(),_(11,"input",104),p(12,"translate"),o()(),v(13,Xt,22,30,"div",13)(14,er,4,3,"div",105),o()}if(r&2){let e,i,a,s=t.$implicit,g=t.index,y=m(4);d("formGroupName",g)("cdkDragDisabled",y.isViewMode),n(3),d("ngIf",!y.isViewMode),n(2),d("name",y.isDayExpanded((e=s.get("id"))==null?null:e.value)?"chevron-down":"chevron-right"),n(),d("ngIf",!y.isViewMode),n(),d("ngClass",K(13,gt,y.isEditableMode())),n(2),d("for","dayName-cycled-"+g),n(2),d("id","dayName-cycled-"+g)("placeholder",c(12,11,"programBuilder.schedule.dayNamePlaceholder")),n(2),d("ngIf",y.isDayExpanded((i=s.get("id"))==null?null:i.value)),n(),d("ngIf",!y.isDayExpanded((a=s.get("id"))==null?null:a.value))}}function rr(r,t){if(r&1){let e=P();l(0,"div",92),w("cdkDropListDropped",function(a){b(e);let s=m(3);return k(s.onScheduleDrop(a))}),v(1,tr,15,15,"div",93),o()}if(r&2){let e=m(3);d("cdkDropListData",e.scheduleFormGroups),n(),d("ngForOf",e.scheduleFormArray.controls)}}function ir(r,t){if(r&1){let e=P();l(0,"button",128),w("click",function(){b(e);let a=m(4);return k(a.addScheduledDay())}),u(1),p(2,"translate"),o()}r&2&&(n(),C(" ",c(2,1,"programBuilder.schedule.addFirstDay")," "))}function nr(r,t){if(r&1&&(l(0,"div",126)(1,"p"),u(2),p(3,"translate"),o(),v(4,ir,3,3,"button",127),o()),r&2){let e=m(3);n(2),h(c(3,2,"programBuilder.schedule.noDays")),n(2),d("ngIf",!e.isViewMode)}}function ar(r,t){if(r&1){let e=P();l(0,"button",90),w("shortPress",function(){b(e);let a=m(4);return k(a.addScheduledDay())}),_(1,"app-icon",91),l(2,"span",78),u(3),p(4,"translate"),o()()}r&2&&(n(3),h(c(4,1,"programBuilder.schedule.addDay")))}function or(r,t){if(r&1&&(l(0,"div",129),v(1,ar,5,3,"button",87),o()),r&2){let e=m(3);n(),d("ngIf",!e.isViewMode)}}function lr(r,t){if(r&1&&(l(0,"section",12)(1,"div",85)(2,"h2",86),u(3),p(4,"translate"),o(),v(5,jt,5,3,"button",87),o(),v(6,rr,2,2,"div",88)(7,nr,5,4,"div",89)(8,or,2,1,"ng-template",null,0,U),o()),r&2){let e=q(9),i=m(2);n(3),h(c(4,5,"programBuilder.schedule.title")),n(2),d("ngIf",!i.isViewMode),n(),d("ngIf",i.scheduleFormArray.length>0),n(),d("ngIf",i.scheduleFormArray.length===0)("ngIfElse",e)}}function dr(r,t){if(r&1){let e=P();l(0,"button",133),w("shortPress",function(){b(e);let a=m(3);return k(a.addWeek())}),_(1,"app-icon",91),l(2,"span",78),u(3),p(4,"translate"),o()()}r&2&&(n(3),h(c(4,1,"programBuilder.weeks.addWeek")))}function sr(r,t){r&1&&(l(0,"div",144),$(),l(1,"svg",145),_(2,"path",146),o()())}function mr(r,t){if(r&1){let e=P();l(0,"button",147),w("shortPress",function(){b(e);let a=m().index,s=m(3);return k(s.removeWeek(a))}),_(1,"app-icon",109),u(2),p(3,"translate"),o()}r&2&&(n(2),C("",c(3,1,"programBuilder.weeks.removeWeek")," "))}function pr(r,t){r&1&&(l(0,"div",106),_(1,"app-icon",107),o())}function cr(r,t){if(r&1){let e=P();l(0,"button",153),w("shortPress",function(){b(e);let a=m().index,s=m(2).index,g=m(3);return k(g.removeScheduledDay(a,s))}),_(1,"app-icon",154),o()}}function ur(r,t){if(r&1&&(l(0,"option",118),u(1),o()),r&2){let e=t.$implicit;d("value",e.value),n(),C(" ",e.label)}}function gr(r,t){if(r&1){let e=P();l(0,"button",160),w("shortPress",function(){b(e);let a=m(2).index,s=m(2).index,g=m(3);return k(g.openRoutineSelectionModal(s,a))}),_(1,"app-icon",161),u(2),p(3,"translate"),o()}if(r&2){let e,i,a=m(2).index,s=m(2).index,g=m(3);d("ngClass",ie(4,_t,!((e=g.getWeekScheduleDayControl(s,a).get("routineName"))!=null&&e.value)&&!((e=g.getWeekScheduleDayControl(s,a).get("routineName"))!=null&&e.invalid&&((e=g.getWeekScheduleDayControl(s,a).get("routineName"))!=null&&e.touched||g.submitted)),(e=g.getWeekScheduleDayControl(s,a).get("routineName"))==null?null:e.value,((e=g.getWeekScheduleDayControl(s,a).get("routineName"))==null?null:e.invalid)&&(((e=g.getWeekScheduleDayControl(s,a).get("routineName"))==null?null:e.touched)||g.submitted))),n(2),C(" ",c(3,2,(i=g.getWeekScheduleDayControl(s,a).get("routineName"))!=null&&i.value?"programBuilder.schedule.change":"programBuilder.schedule.select")," ")}}function _r(r,t){if(r&1&&(l(0,"div")(1,"div",110)(2,"div")(3,"label",111),u(4),p(5,"translate"),o(),l(6,"select",155),v(7,ur,2,2,"option",113),o()(),l(8,"div")(9,"label",111),u(10),p(11,"translate"),o(),l(12,"div",156),_(13,"input",157),p(14,"translate"),v(15,gr,4,8,"button",158),o()(),l(16,"div",121)(17,"label",111),u(18),p(19,"translate"),o(),_(20,"textarea",159),o()()()),r&2){let e,i=m().index,a=m(2).index,s=m(3);n(3),d("for","dayOfWeek-"+a+"-"+i),n(),h(c(5,12,"programBuilder.schedule.dayOfWeekLabel")),n(2),d("id","dayOfWeek-"+a+"-"+i),n(),d("ngForOf",s.dayOfWeekOptions),n(2),d("for","routineName-"+a+"-"+i),n(),h(c(11,14,"programBuilder.schedule.routineLabel")),n(3),d("id","routineName-"+a+"-"+i)("value",((e=s.getWeekScheduleDayControl(a,i).get("routineName"))==null?null:e.value)||c(14,16,"programBuilder.schedule.noRoutine")),n(2),d("ngIf",!s.isViewMode),n(2),d("for","dayNotes-"+a+"-"+i),n(),h(c(19,18,"programBuilder.schedule.notesLabel")),n(2),d("id","dayNotes-"+a+"-"+i)}}function yr(r,t){if(r&1&&(l(0,"div",124)(1,"span",125),u(2),p(3,"translate"),o()()),r&2){let e,i=m().$implicit;n(2),h(((e=i.get("routineName"))==null?null:e.value)||c(3,1,"programBuilder.schedule.noRoutine"))}}function vr(r,t){if(r&1){let e=P();l(0,"div",151)(1,"div",95)(2,"div",96),v(3,pr,2,0,"div",97),l(4,"button",98),w("click",function(){let a,s=b(e).$implicit,g=m(5);return k(g.toggleDay((a=s.get("id"))==null?null:a.value))}),_(5,"app-icon",99),o()(),v(6,cr,2,0,"button",152),o(),l(7,"div",101)(8,"h4",102)(9,"label",103),u(10,"Day Name"),o(),_(11,"input",104),p(12,"translate"),o()(),v(13,_r,21,20,"div",13)(14,yr,4,3,"div",105),o()}if(r&2){let e,i,a,s=t.$implicit,g=t.index,y=m(5);d("formGroupName",g)("cdkDragDisabled",y.isViewMode),n(3),d("ngIf",!y.isViewMode),n(2),d("name",y.isDayExpanded((e=s.get("id"))==null?null:e.value)?"chevron-down":"chevron-right"),n(),d("ngIf",!y.isViewMode),n(),d("ngClass",K(13,gt,y.isEditableMode())),n(2),d("for","dayName-"+g),n(2),d("id","dayName-"+g)("placeholder",c(12,11,"programBuilder.schedule.dayNamePlaceholder")),n(2),d("ngIf",y.isDayExpanded((i=s.get("id"))==null?null:i.value)),n(),d("ngIf",!y.isDayExpanded((a=s.get("id"))==null?null:a.value))}}function hr(r,t){if(r&1){let e=P();l(0,"button",90),w("shortPress",function(){b(e);let a=m(3).index,s=m(3);return k(s.addScheduledDay(a))}),_(1,"app-icon",91),l(2,"span",78),u(3),p(4,"translate"),o()()}r&2&&(n(3),h(c(4,1,"programBuilder.weeks.addDayToWeek")))}function xr(r,t){if(r&1&&(l(0,"div",162),v(1,hr,5,3,"button",87),o()),r&2){let e=m(5);n(),d("ngIf",!e.isViewMode)}}function fr(r,t){r&1&&(l(0,"div",163),u(1),p(2,"translate"),o()),r&2&&(n(),C("",c(2,1,"programBuilder.weeks.emptyWeek")," "))}function br(r,t){if(r&1){let e=P();l(0,"div")(1,"div",92),w("cdkDropListDropped",function(a){b(e);let s=m().index,g=m(3);return k(g.onDayDropInWeek(a,s))}),v(2,vr,15,15,"div",148),o(),v(3,xr,2,1,"div",149)(4,fr,3,3,"div",150),o()}if(r&2){let e=m().index,i=m(3);n(),d("cdkDropListData",i.getWeekScheduleGroups(e)),n(),d("ngForOf",i.getWeekScheduleGroups(e)),n(),d("ngIf",i.getWeekScheduleGroups(e).length<7),n(),d("ngIf",i.getWeekScheduleGroups(e).length===0)}}function kr(r,t){if(r&1&&(l(0,"li",168)(1,"span",56),u(2),p(3,"dayOfWeek"),o(),l(4,"span",169),u(5),p(6,"translate"),o()()),r&2){let e,i,a=t.$implicit;n(2),C("",((e=a.get("dayName"))==null?null:e.value)||M(3,2,(e=a.get("dayOfWeek"))==null?null:e.value,!1),":"),n(3),h(((i=a.get("routineName"))==null?null:i.value)||c(6,5,"programBuilder.schedule.noRoutine"))}}function wr(r,t){r&1&&(l(0,"li",170),u(1),p(2,"translate"),o()),r&2&&(n(),C(" ",c(2,1,"programBuilder.weeks.emptyWeek")," "))}function Cr(r,t){if(r&1&&(l(0,"div",164)(1,"ul",165),v(2,kr,7,7,"li",166)(3,wr,3,3,"li",167),o()()),r&2){let e=m().index,i=m(3);n(2),d("ngForOf",i.getWeekScheduleGroups(e)),n(),d("ngIf",i.getWeekScheduleGroups(e).length===0)}}function Sr(r,t){if(r&1){let e=P();l(0,"div",134)(1,"div",135)(2,"div",136),v(3,sr,3,0,"div",137),l(4,"button",138),w("click",function(){let a,s=b(e).$implicit,g=m(3);return k(g.toggleWeek((a=s.get("id"))==null?null:a.value))}),_(5,"app-icon",139),o()(),l(6,"div",140)(7,"label",103),u(8,"Week Name"),o(),_(9,"input",141),p(10,"translate"),o(),v(11,mr,4,3,"button",142),o(),v(12,br,5,4,"div",13)(13,Cr,4,2,"div",143),o()}if(r&2){let e,i,a,s=t.$implicit,g=t.index,y=m(3);d("formGroupName",g)("cdkDragDisabled",y.isViewMode),n(3),d("ngIf",!y.isViewMode),n(2),d("name",y.isWeekExpanded((e=s.get("id"))==null?null:e.value)?"chevron-down":"chevron-right"),n(2),d("for","weekName-"+g),n(2),d("id","weekName-"+g)("placeholder",c(10,10,"programBuilder.weeks.weekNamePlaceholder")),n(2),d("ngIf",!y.isViewMode),n(),d("ngIf",y.isWeekExpanded((i=s.get("id"))==null?null:i.value)),n(),d("ngIf",!y.isWeekExpanded((a=s.get("id"))==null?null:a.value))}}function Pr(r,t){if(r&1){let e=P();l(0,"button",128),w("click",function(){b(e);let a=m(4);return k(a.addWeek())}),u(1),p(2,"translate"),o()}r&2&&(n(),C(" ",c(2,1,"programBuilder.weeks.addFirstWeek")," "))}function Ir(r,t){if(r&1&&(l(0,"div",126)(1,"p"),u(2),p(3,"translate"),o(),v(4,Pr,3,3,"button",127),o()),r&2){let e=m(3);n(2),h(c(3,2,"programBuilder.weeks.noWeeks")),n(2),d("ngIf",!e.isViewMode)}}function Br(r,t){if(r&1){let e=P();l(0,"button",133),w("shortPress",function(){b(e);let a=m(4);return k(a.addWeek())}),_(1,"app-icon",171),u(2),p(3,"translate"),o()}r&2&&(n(2),C("",c(3,1,"programBuilder.weeks.addWeek")," "))}function Tr(r,t){if(r&1&&(l(0,"div",129),v(1,Br,4,3,"button",130),o()),r&2){let e=m(3);n(),d("ngIf",!e.isViewMode)}}function Dr(r,t){if(r&1){let e=P();l(0,"section",12)(1,"div",85)(2,"h2",86),u(3),p(4,"translate"),o(),v(5,dr,5,3,"button",130),o(),l(6,"div",131),w("cdkDropListDropped",function(a){b(e);let s=m(2);return k(s.onWeekDrop(a))}),v(7,Sr,14,12,"div",132),o(),v(8,Ir,5,4,"div",89)(9,Tr,2,1,"ng-template",null,1,U),o()}if(r&2){let e=q(10),i=m(2);n(3),h(c(4,5,"programBuilder.weeks.title")),n(2),d("ngIf",!i.isViewMode),n(2),d("ngForOf",i.weeksFormArray.controls),n(),d("ngIf",i.weeksFormArray.length===0)("ngIfElse",e)}}function Er(r,t){if(r&1&&(j(0),v(1,lr,10,7,"section",84)(2,Dr,11,7,"section",84),z()),r&2){let e,i,a=m();n(),d("ngIf",((e=a.programForm.get("programType"))==null?null:e.value)==="cycled"),n(),d("ngIf",((i=a.programForm.get("programType"))==null?null:i.value)==="linear")}}function Fr(r,t){r&1&&_(0,"app-icon",177)}function Vr(r,t){r&1&&_(0,"app-icon",178)}function Mr(r,t){if(r&1){let e=P();l(0,"div",172)(1,"button",173),w("shortPress",function(){b(e);let a=m();return k(a.navigateToPrograms())}),_(2,"app-icon",109),u(3),p(4,"translate"),o(),l(5,"button",174),w("shortPress",function(){b(e);let a=m();return k(a.onSubmit())}),v(6,Fr,1,0,"app-icon",175)(7,Vr,1,0,"app-icon",176),l(8,"span",78),u(9),p(10,"translate"),o()()()}if(r&2){let e=m();n(3),C(" ",c(4,5,"programBuilder.actions.cancel")," "),n(2),d("disabled",e.programForm.invalid),n(),d("ngIf",e.isNewMode),n(),d("ngIf",!e.isNewMode),n(2),C(" ",c(10,7,e.isNewMode?"programBuilder.actions.createProgram":"programBuilder.actions.saveChanges")," ")}}function Nr(r,t){if(r&1){let e=P();l(0,"li",195),w("click",function(){let a=b(e).$implicit,s=m(2);return k(s.selectRoutineForDay(a))}),l(1,"div",196)(2,"span",125),u(3),o(),l(4,"span",197),u(5),p(6,"titlecase"),o()(),$(),l(7,"svg",198),_(8,"path",199),o()()}if(r&2){let e=t.$implicit;n(3),h(e.name),n(2),re("",c(6,3,e.goal)," - ",e.exercises.length," exercises")}}function Ar(r,t){r&1&&(l(0,"li",200),u(1),p(2,"translate"),o()),r&2&&(n(),h(c(2,1,"programBuilder.modal.noMatches")))}function Or(r,t){r&1&&(l(0,"li",200),u(1),p(2,"translate"),o()),r&2&&(n(),h(c(2,1,"programBuilder.modal.noRoutines")))}function Wr(r,t){if(r&1){let e=P();l(0,"div",179),w("click",function(){b(e);let a=m();return k(a.closeRoutineSelectionModal())}),l(1,"div",180),w("click",function(a){return b(e),k(a.stopPropagation())}),l(2,"div",181)(3,"div",182)(4,"div",183)(5,"div",184)(6,"h3",185),u(7),p(8,"translate"),o(),l(9,"button",186),w("click",function(){b(e);let a=m();return k(a.closeRoutineSelectionModal())}),_(10,"app-icon",187),o()(),l(11,"div",188)(12,"input",189),p(13,"translate"),w("ngModelChange",function(a){b(e);let s=m();return k(s.modalSearchTerm.set(a))}),o()(),l(14,"div",190)(15,"ul",46),v(16,Nr,9,5,"li",191)(17,Ar,3,3,"li",192)(18,Or,3,3,"li",192),o()()()()(),l(19,"div",193)(20,"button",194),w("click",function(){b(e);let a=m();return k(a.closeRoutineSelectionModal())}),u(21),p(22,"translate"),o()()()()}if(r&2){let e=m();n(7),h(c(8,7,"programBuilder.modal.selectRoutineTitle")),n(5),d("placeholder",c(13,9,"programBuilder.modal.searchPlaceholder"))("ngModel",e.modalSearchTerm()),n(4),d("ngForOf",e.filteredAvailableRoutines()),n(),d("ngIf",e.filteredAvailableRoutines().length===0&&e.availableRoutines.length>0),n(),d("ngIf",e.availableRoutines.length===0),n(3),C(" ",c(22,11,"programBuilder.actions.cancel")," ")}}function Lr(r,t){if(r&1){let e=P();j(0),l(1,"td",218),u(2),p(3,"date"),o(),l(4,"td",218),u(5),p(6,"date"),o(),l(7,"td",218),u(8),p(9,"titlecase"),o(),l(10,"td",218),u(11),p(12,"date"),o(),l(13,"td",219)(14,"div",220)(15,"button",221),p(16,"translate"),w("click",function(){b(e);let a=m().$implicit,s=m(3);return k(s.editHistoryEntry(a))}),_(17,"app-icon",222),o(),l(18,"button",223),p(19,"translate"),w("click",function(){b(e);let a=m().$implicit,s=m(3);return k(s.removeProgramHistoryEntry(a.id))}),_(20,"app-icon",224),o()()(),z()}if(r&2){let e=m().$implicit;n(2),h(e.startDate&&e.startDate!=="-"?M(3,6,e.startDate,"dd/MM/yy"):"-"),n(3),h(e.endDate&&e.endDate!=="-"?M(6,9,e.endDate,"dd/MM/yy"):"-"),n(3),h(c(9,12,e.status)),n(3),h(e.date&&e.date!=="-"?M(12,14,e.date,"dd/MM/yy HH:mm"):"-"),n(4),d("title",c(16,17,"programBuilder.modal.editEntry")),n(3),d("title",c(19,19,"programBuilder.modal.deleteEntry"))}}function Rr(r,t){if(r&1&&(l(0,"option",118),u(1),p(2,"titlecase"),o()),r&2){let e=t.$implicit;d("value",e),n(),h(c(2,2,e))}}function Gr(r,t){if(r&1){let e=P();j(0),l(1,"td",225),_(2,"input",226),o(),l(3,"td",225),_(4,"input",227),o(),l(5,"td",225)(6,"select",228),w("change",function(){let a;b(e);let s=m(4);return k(((a=s.historyEditForm.get("status"))==null?null:a.value)==="active"?s.forceEndDateToNull():s.enableEndDate())}),v(7,Rr,3,4,"option",113),o()(),l(8,"td",229),u(9),p(10,"translate"),o(),l(11,"td",230)(12,"div",231)(13,"button",232),p(14,"translate"),_(15,"app-icon",233),o(),l(16,"button",221),p(17,"translate"),w("click",function(){b(e);let a=m(4);return k(a.cancelEditHistoryEntry())}),_(18,"app-icon",234),o()()(),z()}if(r&2){let e=m(4);n(7),d("ngForOf",e.statusOptions),n(2),C("",c(10,5,"programBuilder.modal.editing"),"... "),n(4),d("disabled",e.historyEditForm.invalid)("title",c(14,7,"programBuilder.modal.saveChanges")),n(3),d("title",c(17,9,"programBuilder.modal.cancelEdit"))}}function Hr(r,t){if(r&1&&(l(0,"tr"),v(1,Lr,21,21,"ng-container",13)(2,Gr,19,11,"ng-container",13),o()),r&2){let e=t.$implicit,i=m(3);n(),d("ngIf",i.editingHistoryEntryId()!==e.id),n(),d("ngIf",i.editingHistoryEntryId()===e.id)}}function $r(r,t){if(r&1){let e=P();l(0,"div")(1,"div",237)(2,"div",238),u(3),p(4,"translate"),o(),l(5,"div",239),u(6),p(7,"titlecase"),o(),l(8,"div",238),u(9),p(10,"translate"),o(),l(11,"div",240),u(12),p(13,"date"),o(),l(14,"div",238),u(15),p(16,"translate"),o(),l(17,"div",240),u(18),p(19,"date"),o(),l(20,"div",238),u(21),p(22,"translate"),o(),l(23,"div",241),u(24),p(25,"date"),o()(),l(26,"div",242)(27,"button",243),w("click",function(){b(e);let a=m().$implicit,s=m(3);return k(s.editHistoryEntry(a))}),_(28,"app-icon",244),u(29),p(30,"translate"),o(),l(31,"button",245),w("click",function(){b(e);let a=m().$implicit,s=m(3);return k(s.removeProgramHistoryEntry(a.id))}),_(32,"app-icon",246),u(33),p(34,"translate"),o()()()}if(r&2){let e=m().$implicit;n(3),h(c(4,10,"programBuilder.modal.historyTable.status")),n(3),C("",c(7,12,e.status)," "),n(3),C("",c(10,14,"programBuilder.modal.historyTable.start")," "),n(3),h(e.startDate&&e.startDate!=="-"?M(13,16,e.startDate,"MMM d, yyyy"):"-"),n(3),h(c(16,19,"programBuilder.modal.historyTable.end")),n(3),h(e.endDate&&e.endDate!=="-"?M(19,21,e.endDate,"MMM d, yyyy"):"-"),n(3),h(c(22,24,"programBuilder.modal.historyTable.logged")),n(3),h(e.date&&e.date!=="-"?M(25,26,e.date,"MMM d, yyyy HH:mm"):"-"),n(5),C(" ",c(30,29,"programBuilder.actions.edit")," "),n(4),C(" ",c(34,31,"programBuilder.actions.delete")," ")}}function jr(r,t){if(r&1&&(l(0,"option",118),u(1),p(2,"titlecase"),o()),r&2){let e=t.$implicit;d("value",e),n(),h(c(2,2,e))}}function zr(r,t){if(r&1){let e=P();l(0,"div",247)(1,"div")(2,"label",248),u(3),p(4,"translate"),o(),l(5,"select",249),w("change",function(){let a;b(e);let s=m(4);return k(((a=s.historyEditForm.get("status"))==null?null:a.value)==="active"?s.forceEndDateToNull():s.enableEndDate())}),v(6,jr,3,4,"option",113),o()(),l(7,"div")(8,"label",248),u(9),p(10,"translate"),o(),_(11,"input",250),o(),l(12,"div")(13,"label",248),u(14),p(15,"translate"),o(),_(16,"input",251),o(),l(17,"div",242)(18,"button",252),w("click",function(){b(e);let a=m(4);return k(a.cancelEditHistoryEntry())}),u(19),p(20,"translate"),o(),l(21,"button",253),_(22,"app-icon",254),u(23),p(24,"translate"),o()()()}if(r&2){let e=m(4);n(3),h(c(4,7,"programBuilder.modal.historyTable.status")),n(3),d("ngForOf",e.statusOptions),n(3),h(c(10,9,"programBuilder.modal.historyTable.start")),n(5),h(c(15,11,"programBuilder.modal.historyTable.end")),n(5),C(" ",c(20,13,"programBuilder.actions.cancel")," "),n(2),d("disabled",e.historyEditForm.invalid),n(2),C(" ",c(24,15,"programBuilder.actions.saveChanges")," ")}}function qr(r,t){if(r&1&&(l(0,"div",235),v(1,$r,35,33,"div",13)(2,zr,25,17,"div",236),o()),r&2){let e=t.$implicit,i=m(3);n(),d("ngIf",i.editingHistoryEntryId()!==e.id),n(),d("ngIf",i.editingHistoryEntryId()===e.id)}}function Kr(r,t){if(r&1){let e=P();l(0,"div")(1,"form",210),w("ngSubmit",function(){b(e);let a=m(2);return k(a.saveHistoryEntry())}),l(2,"table",211)(3,"thead")(4,"tr")(5,"th",212),u(6),p(7,"translate"),o(),l(8,"th",212),u(9),p(10,"translate"),o(),l(11,"th",212),u(12),p(13,"translate"),o(),l(14,"th",212),u(15),p(16,"translate"),o(),l(17,"th",213),u(18),p(19,"translate"),o()()(),l(20,"tbody",214),v(21,Hr,3,2,"tr",215),o()(),l(22,"div",216),v(23,qr,3,2,"div",217),o()()()}if(r&2){let e,i,a=m(2);n(),d("formGroup",a.historyEditForm),n(5),C(" ",c(7,8,"programBuilder.modal.historyTable.start")),n(3),C(" ",c(10,10,"programBuilder.modal.historyTable.end")),n(3),C(" ",c(13,12,"programBuilder.modal.historyTable.status")),n(3),C(" ",c(16,14,"programBuilder.modal.historyTable.logged")),n(3),C(" ",c(19,16,"programBuilder.modal.historyTable.actions")),n(3),d("ngForOf",(e=a.currentProgram())==null?null:e.history),n(2),d("ngForOf",(i=a.currentProgram())==null?null:i.history)}}function Ur(r,t){r&1&&(l(0,"div",255),u(1),p(2,"translate"),o()),r&2&&(n(),C(" ",c(2,1,"programBuilder.modal.noHistory")," "))}function Yr(r,t){if(r&1){let e=P();l(0,"div",201)(1,"div",202),w("click",function(a){return b(e),k(a.stopPropagation())}),l(2,"div",203)(3,"h2",204),u(4),p(5,"translate"),o(),l(6,"button",205),w("click",function(){b(e);let a=m();return k(a.closeProgramHistoryModal())}),_(7,"app-icon",187),o()(),l(8,"div",206),v(9,Kr,24,18,"div",207)(10,Ur,3,3,"ng-template",null,2,U),o(),l(12,"div",208)(13,"button",209),w("click",function(){b(e);let a=m();return k(a.closeProgramHistoryModal())}),_(14,"app-icon",109),u(15),p(16,"translate"),o()()()()}if(r&2){let e,i=q(11),a=m();n(4),h(c(5,4,"programBuilder.modal.historyTitle")),n(5),d("ngIf",(e=a.currentProgram())==null||e.history==null?null:e.history.length)("ngIfElse",i),n(6),C(" ",c(16,6,"programBuilder.modal.close")," ")}}var ut=class r{fb=B(je);router=B(Pe);route=B(Se);trainingProgramService=B(nt);workoutService=B(it);spinnerService=B(ot);alertService=B(Xe);toastService=B(Ye);cdr=B(ye);trackingService=B(rt);translate=B(Ze);programForm;submitted=!1;isEditMode=!1;isNewMode=!1;isViewMode=!1;isEditableMode=N(()=>this.isEditMode||this.isNewMode);currentProgramId=null;currentProgram=D(null);isCurrentProgramActive=D(!1);routeSub;sanitizer=B(Ce);sanitizedDescription="";exerciseInfoTooltipString=this.translate.instant("workoutBuilder.exerciseInfoTooltip");infoTooltipString=this.translate.instant("programBuilder.form.cycleLengthHint");isRoutineModalOpen=D(!1);availableRoutines=[];modalSearchTerm=D("");targetScheduleIndexForRoutine=null;targetIndicesForRoutine=null;dayOfWeekOptions=[{value:1,label:this.translate.instant("dates.days.monday")},{value:2,label:this.translate.instant("dates.days.tuesday")},{value:3,label:this.translate.instant("dates.days.wednesday")},{value:4,label:this.translate.instant("dates.days.thursday")},{value:5,label:this.translate.instant("dates.days.friday")},{value:6,label:this.translate.instant("dates.days.saturday")},{value:0,label:this.translate.instant("dates.days.sunday")}];cycleLengthSignal=D(null);cycleDayOptions=N(()=>{let t=this.cycleLengthSignal();return t&&t>0?Array.from({length:t},(e,i)=>({value:i+1,label:`Day ${i+1}`})):[]});currentDayOptions=N(()=>{let t=this.cycleLengthSignal();return t&&t>0?this.cycleDayOptions():this.dayOfWeekOptions});filteredAvailableRoutines=N(()=>{let t=this.modalSearchTerm().toLowerCase();return t?this.availableRoutines.filter(e=>e.name.toLowerCase().includes(t)):this.availableRoutines});selectedGoals=D([]);programGoals=[{value:"hypertrophy",label:this.translate.instant("workoutBuilder.goals.hypertrophy")},{value:"strength",label:this.translate.instant("workoutBuilder.goals.strength")},{value:"tabata",label:this.translate.instant("workoutBuilder.goals.tabata")},{value:"muscular endurance",label:this.translate.instant("workoutBuilder.goals.muscularEndurance")},{value:"cardiovascular endurance",label:this.translate.instant("workoutBuilder.goals.cardiovascularEndurance")},{value:"fat loss / body composition",label:this.translate.instant("workoutBuilder.goals.fatLoss")},{value:"mobility & flexibility",label:this.translate.instant("workoutBuilder.goals.mobility")},{value:"power / explosiveness",label:this.translate.instant("workoutBuilder.goals.power")},{value:"speed & agility",label:this.translate.instant("workoutBuilder.goals.speed")},{value:"balance & coordination",label:this.translate.instant("workoutBuilder.goals.balance")},{value:"skill acquisition",label:this.translate.instant("workoutBuilder.goals.skill")},{value:"rehabilitation / injury prevention",label:this.translate.instant("workoutBuilder.goals.rehabilitation")},{value:"mental health / stress relief",label:this.translate.instant("workoutBuilder.goals.mentalHealth")},{value:"general health & longevity",label:this.translate.instant("workoutBuilder.goals.generalHealth")},{value:"sport-specific performance",label:this.translate.instant("workoutBuilder.goals.sportSpecific")},{value:"maintenance",label:this.translate.instant("workoutBuilder.goals.maintenance")},{value:"rest",label:this.translate.instant("workoutBuilder.goals.rest")},{value:"custom",label:this.translate.instant("workoutBuilder.goals.custom")}];historyEditForm;editingHistoryEntryId=D(null);statusOptions=["active","completed","archived","cancelled"];expandedWeekIds=D(new Set);expandedDayIds=D(new Set);constructor(){this.programForm=this.fb.group({name:["",V.required],programType:[null,V.required],goals:[""],description:[""],programNotes:[""],startDate:[null],cycleLength:[null,[V.min(1)]],iterationId:[null],isRepeating:[!1],schedule:this.fb.array([]),weeks:this.fb.array([])}),this.historyEditForm=this.fb.group({id:[null],startDate:[null],endDate:[""],status:["",V.required]})}platformId=B(me);programProgress=N(()=>{let t=this.currentProgram(),e=this.allWorkoutLogs();if(!t||!t.isActive||!t.startDate)return{completedCount:0,totalCount:0,percentage:0};let i=0,a=0,s=O(t.startDate);if(t.programType==="linear"&&t.weeks?.length){a=t.weeks.reduce((x,f)=>x+f.schedule.length,0);let y=e.filter(x=>x.programId===t.id&&O(x.date)>=s&&t.iterationId===x.iterationId);i=new Set(y.map(x=>`${x.date}-${x.routineId}`)).size}else if(t.programType==="cycled"&&t.schedule.length>0){let y=t.cycleLength||7;a=t.schedule.length;let S=Z(new Date,s);if(S>=0){let x=Math.floor(S/y),f=Y(s,x*y),F=e.filter(I=>{let E=O(I.date);return I.programId===t.id&&E>=f});i=new Set(F.map(I=>`${I.date}-${I.routineId}`)).size}}if(a===0)return{completedCount:0,totalCount:0,percentage:0};i=Math.min(i,a);let g=Math.round(i/a*100);return{completedCount:i,totalCount:a,percentage:g}});overallWeekProgress=N(()=>{let t=this.currentProgram(),e=this.allWorkoutLogs();if(t?.programType!=="linear"||!t.isActive||!t.startDate||!t.weeks?.length)return[];let i=O(t.startDate),a=new Set(e.filter(s=>s.programId===t.id&&t.iterationId===s.iterationId).map(s=>`${s.date}-${s.routineId}`));return t.weeks.map(s=>{let g=s.schedule.every(y=>{let S=(s.weekNumber-1)*7+(y.dayOfWeek-tt(i)+7)%7,x=Y(i,S),f=et(x,"yyyy-MM-dd");return a.has(`${f}-${y.routineId}`)});return{weekNumber:s.weekNumber,name:s.name,isCompleted:g}})});currentWeekProgress=N(()=>{let t=this.currentProgram(),e=this.allWorkoutLogs();if(t?.programType!=="linear"||!t.isActive||!t.startDate||!t.weeks?.length)return null;let i=new Date,a=O(t.startDate);if(i<a)return null;let s=Z(i,a),g=Math.floor(s/7),y=t.weeks[g];if(!y)return null;let S=y.schedule.length;if(S===0)return null;let x=Y(a,g*7),f=e.filter(E=>{if(E.programId!==t.id)return!1;let G=O(E.date),ne=Z(G,x);return ne>=0&&ne<7&&t.iterationId===E.iterationId}),F=new Set(f.map(E=>E.routineId)),T=0,I=y.schedule.map(E=>{let G=F.has(E.routineId);return G&&T++,{isCompleted:G}});return{weekName:y.name,completedCount:T,totalCount:S,segments:I}});allWorkoutLogs=D([]);workoutLogsSubscription;ngOnInit(){we(this.platformId)&&window.scrollTo(0,0),this.loadAvailableRoutines(),this.workoutLogsSubscription=this.trackingService.workoutLogs$.subscribe(t=>this.allWorkoutLogs.set(t)),this.routeSub=this.route.data.pipe(le(t=>{let e=t.mode;return this.currentProgramId=this.route.snapshot.paramMap.get("programId"),this.submitted=!1,this.isNewMode=e==="new",this.isViewMode=e==="view"&&!!this.currentProgramId,this.isEditMode=e==="edit"&&!!this.currentProgramId,this.isNewMode?(this.programForm.reset({programType:null,cycleLength:null,schedule:[]}),this.updateFormEnabledState(),te(null)):this.currentProgramId?this.trainingProgramService.getProgramById(this.currentProgramId):te(null)}),de(t=>{t?(this.currentProgram.set(t),this.patchFormWithProgramData(t)):!this.isNewMode&&this.currentProgramId&&(this.toastService.error(`Program with ID ${this.currentProgramId} not found.`,0,"Error"),this.router.navigate(["/training-programs"])),this.currentProgram.set(t),this.updateFormEnabledState();let e=t?.isActive??!1;this.isCurrentProgramActive.set(e)})).subscribe(),this.programForm.get("cycleLength")?.valueChanges.subscribe(t=>{let e=parseInt(t,10);this.cycleLengthSignal.set(isNaN(e)?null:e),!isNaN(e)&&e>0&&this.scheduleFormArray.controls.forEach(i=>{let a=i.get("dayOfWeek");a&&a.value>e&&a.setValue(1)})}),this.programForm.get("programType")?.valueChanges.subscribe(t=>{this.handleProgramTypeChange(t)})}handleProgramTypeChange(t){let e=this.programForm.get("isRepeating");t==="linear"?(this.scheduleFormArray.clear(),this.programForm.get("cycleLength")?.setValue(null),this.programForm.get("cycleLength")?.disable(),e?.enable(),this.weeksFormArray.length===0&&!this.isViewMode&&this.addWeek()):(this.weeksFormArray.clear(),this.programForm.get("cycleLength")?.enable(),e?.setValue(!1),e?.disable())}get scheduleFormArray(){return this.programForm.get("schedule")}get weeksFormArray(){return this.programForm.get("weeks")}getWeekScheduleGroups(t){return this.weeksFormArray.at(t).get("schedule").controls}createWeekGroup(t){let e=this.fb.group({id:[t?.id||L()],weekNumber:[t?.weekNumber??this.weeksFormArray.length+1],name:[t?.name??`${this.translate.instant("programBuilder.weeks.weekLabel")}${this.weeksFormArray.length+1}`,V.required],schedule:this.fb.array([])});return t?.schedule?.forEach(i=>{e.get("schedule").push(this.createScheduledDayGroup(i))}),e}addWeek(){let t=this.createWeekGroup();this.weeksFormArray.push(t),this.expandedWeekIds.update(e=>{let i=new Set(e);return i.add(t.get("id")?.value),i}),this.cdr.detectChanges(),setTimeout(()=>{},50)}removeWeek(t){this.weeksFormArray.removeAt(t)}loadAvailableRoutines(){this.workoutService.routines$.pipe(R(1)).subscribe(t=>{this.availableRoutines=t.sort((e,i)=>e.name.localeCompare(i.name))})}patchFormWithProgramData(t){let e=t.programType||"cycled";this.programForm.patchValue({name:t.name,description:t.description?this.updateSanitizedDescription(t.description):"",programNotes:t.programNotes,startDate:t.startDate?new Date(t.startDate).toISOString().split("T")[0]:null,cycleLength:t.cycleLength??null,iterationId:t.iterationId??null,programType:t.programType||"cycled",isRepeating:t.isRepeating??!1}),this.cycleLengthSignal.set(t.cycleLength??null);let i=new Set,a=new Set;if(e==="linear"&&t.weeks?(this.weeksFormArray.clear(),t.weeks.forEach(s=>{let g=this.createWeekGroup(s);this.weeksFormArray.push(g),i.add(g.value.id),g.get("schedule").controls.forEach(y=>{a.add(y.value.id)})})):(this.scheduleFormArray.clear(),t.schedule.forEach(s=>{let g=this.createScheduledDayGroup(s);this.scheduleFormArray.push(g),a.add(g.value.id)})),this.expandedWeekIds.set(i),this.expandedDayIds.set(a),this.handleProgramTypeChange(e),this.updateFormEnabledState(),t.goals?.length){let s=new Set(t.goals.filter(g=>g!=null));this.programGoals.filter(g=>g.value!=null&&s.has(g.value)).forEach(g=>{this.toggleGoal(g)})}}createScheduledDayGroup(t){let e=this.currentDayOptions()[0]?.value??1,i=t?.dayOfWeek??e,a=this.programForm.get("programType")?.value,s=this.programForm.get("cycleLength")?.value,g=a==="cycled"&&s>0,y="";g?y=`Day ${i}`:y=this.dayOfWeekOptions.find(x=>x.value===i)?.label||"";let S=this.fb.group({id:[t?.id||L()],dayOfWeek:[i,V.required],dayName:[t?.dayName||y,V.required],routineId:[t?.routineId??"",V.required],routineName:[t?.routineName??""],notes:[t?.notes??""],timeOfDay:[t?.timeOfDay??""],programId:[t?.programId??this.currentProgramId],isUnscheduled:[t?.isUnscheduled||!1]});return this.isEditableMode()&&a==="cycled"&&S.get("dayOfWeek")?.valueChanges.pipe(ae(400),oe()).subscribe(x=>{let f=S.get("dayName")?.value,F=this.currentDayOptions().find(I=>I.value===x),T=F?F.label:`Day ${x}`;f!==T&&this.toastService.info(`Reminder: Day name is "${f}". You might want to update it to match the new selection of "${T} or to give it a proper name".`,6e3,"Check Day Name",!1)}),S}addScheduledDay(t){if(this.isViewMode)return;let e=parseInt(this.programForm.get("cycleLength")?.value,10),i=!e||e===7,a=this.programForm.get("programType")?.value,s=null;if(a==="linear"&&t!==void 0){let g=this.weeksFormArray.at(t).get("schedule");if(g.length>=7){this.toastService.info("All 7 days of this week have been scheduled.",3e3);return}let y=new Set(g.controls.map(f=>f.get("dayOfWeek")?.value)),S=[1,2,3,4,5,6,0],x=1;for(let f of S)if(!y.has(f)){x=f;break}s=this.createScheduledDayGroup({dayOfWeek:x}),g.push(s)}else if(i){if(this.scheduleFormArray.length>=7){this.toastService.info("All 7 days of the week have been scheduled.",3e3);return}let g=new Set(this.scheduleFormArray.controls.map(x=>x.get("dayOfWeek")?.value)),y=[1,2,3,4,5,6,0],S=1;for(let x of y)if(!g.has(x)){S=x;break}s=this.createScheduledDayGroup({dayOfWeek:S}),this.scheduleFormArray.push(s)}else{if(this.scheduleFormArray.length>=e){this.toastService.info(`All ${e} days of the cycle have been scheduled.`,3e3);return}let g=new Set(this.scheduleFormArray.controls.map(S=>S.get("dayOfWeek")?.value)),y=1;for(let S=1;S<=e;S++)if(!g.has(S)){y=S;break}s=this.createScheduledDayGroup({dayOfWeek:y}),this.scheduleFormArray.push(s)}s&&this.expandedDayIds.update(g=>{let y=new Set(g);return y.add(s.get("id")?.value),y}),this.cdr.detectChanges(),setTimeout(()=>{let g=document.querySelectorAll(".scheduled-day-card");g.length>0&&g[g.length-1].scrollIntoView({behavior:"smooth",block:"center"})},50)}removeScheduledDay(t,e){if(this.isViewMode)return;this.programForm.get("programType")?.value==="linear"&&e!==void 0?this.weeksFormArray.at(e).get("schedule").removeAt(t):this.scheduleFormArray.removeAt(t)}get scheduleFormGroups(){return this.scheduleFormArray.controls}onScheduleDrop(t){this.isViewMode||(J(this.scheduleFormArray.controls,t.previousIndex,t.currentIndex),this.scheduleFormArray.updateValueAndValidity())}openRoutineSelectionModal(t,e){this.isViewMode||(e!==void 0?this.targetIndicesForRoutine={weekIndex:t,dayIndex:e}:this.targetIndicesForRoutine={dayIndex:t},this.modalSearchTerm.set(""),this.isRoutineModalOpen.set(!0))}closeRoutineSelectionModal(){this.isRoutineModalOpen.set(!1),this.targetScheduleIndexForRoutine=null}selectRoutineForDay(t){if(this.targetIndicesForRoutine){let e,{weekIndex:i,dayIndex:a}=this.targetIndicesForRoutine;i!==void 0?e=this.getWeekScheduleDayControl(i,a):e=this.scheduleFormArray.at(a),e?.patchValue({routineId:t.id,routineName:t.name})}this.closeRoutineSelectionModal()}updateFormEnabledState(){this.isViewMode?this.programForm.disable():this.programForm.enable()}enableEditModeFromView(){this.isViewMode&&this.currentProgramId&&this.router.navigate(["/training-programs/edit",this.currentProgramId])}onSubmit(){return A(this,null,function*(){if(this.submitted=!0,this.isViewMode)return;let t=this.programForm.getRawValue();if(t.programType==="linear"){if(!t.weeks||t.weeks.length===0){this.toastService.error("Linear programs must have at least one week.",0,"Validation Error");return}if(t.weeks.some(s=>!s.schedule||s.schedule.length===0)){this.toastService.error("Please add routines to every week or remove any empty weeks.",0,"Validation Error");return}}else if(t.programType==="cycled"&&(!t.schedule||t.schedule.length===0)){this.toastService.error("Please add at least one scheduled day to the program.",0,"Validation Error");return}if(this.programForm.invalid){this.programForm.markAllAsTouched(),this.toastService.error("Please fill all required fields, including selecting a routine for each scheduled day.",0,"Validation Error");return}let e=this.currentProgramId||L(),i={id:e,name:t.name,programType:t.programType,goals:this.selectedGoals(),description:t.description,programNotes:t.programNotes,startDate:t.startDate||null,iterationId:t.iterationId||null,cycleLength:t.programType==="cycled"&&t.cycleLength||null,isRepeating:t.programType==="linear"?t.isRepeating:!1,schedule:t.schedule.map(a=>({id:a.id||L(),dayOfWeek:Number(a.dayOfWeek),dayName:a.dayName||"",routineId:a.routineId,routineName:a.routineName,programId:e,notes:a.notes,timeOfDay:a.timeOfDay,isUnscheduled:a.isUnscheduled||!1,iterationId:t.iterationId||null})),weeks:t.programType==="linear"?t.weeks.map((a,s)=>ee(X({},a),{schedule:a.schedule.map(g=>({id:g.id||L(),dayOfWeek:Number(g.dayOfWeek),dayName:g.dayName||"",routineId:g.routineId,weekNumber:s+1,routineName:g.routineName,programId:e,notes:g.notes,timeOfDay:g.timeOfDay,isUnscheduled:g.isUnscheduled||!1,iterationId:t.iterationId||null}))})):[],isActive:this.currentProgram()?.isActive??!1};try{if(this.spinnerService.show("Saving program..."),this.isNewMode){let a=yield this.trainingProgramService.addProgram(i);this.isNewMode=!1,this.isEditMode=!0,this.currentProgramId=a.id,this.toastService.success(`Program "${a.name}" created.`,3e3,"Program Created"),this.currentProgram.set(a),this.router.navigate([`/training-programs/edit/${this.currentProgram()?.id}`])}else if(this.isEditMode&&this.currentProgramId){let a=yield H(this.trainingProgramService.getProgramById(this.currentProgramId).pipe(R(1)));i.isActive=a?.isActive??!1,yield this.trainingProgramService.updateProgram(i),this.toastService.success("Program saved successfully",0,"Success",!1),this.currentProgram.set(a)}}catch(a){console.error("Error saving program:",a),this.toastService.error("Failed to save program",0,"Save Error")}finally{this.spinnerService.hide()}})}deleteProgram(){return A(this,null,function*(){if(!this.currentProgramId){this.toastService.error(this.translate.instant("programBuilder.toasts.deleteError"),0,this.translate.instant("programBuilder.toasts.deleteErrorTitle"));return}try{this.spinnerService.show(this.translate.instant("programBuilder.alerts.deleting")),yield this.trainingProgramService.deleteProgram(this.currentProgramId),(this.router.url.includes("/training-programs/new")||this.router.url.includes(`/training-programs/edit/${this.currentProgramId}`)||this.router.url.includes(`/training-programs/view/${this.currentProgramId}`))&&this.router.navigate(["/training-programs"])}catch(t){console.error("Error during program deletion process in component:",t),this.toastService.error(this.translate.instant("programBuilder.toasts.deleteUnexpectedError"),0,this.translate.instant("programBuilder.toasts.deleteErrorTitle"))}finally{this.spinnerService.hide()}})}ngOnDestroy(){this.routeSub&&this.routeSub.unsubscribe(),this.workoutLogsSubscription?.unsubscribe()}get f(){return this.programForm.controls}getScheduleDayControl(t){return this.scheduleFormArray.at(t)}getWeekScheduleDayControl(t,e){return this.weeksFormArray.at(t).get("schedule").at(e)}completeProgram(){return A(this,null,function*(){if(this.currentProgramId&&this.isCurrentProgramActive())try{let t=yield this.alertService.showConfirmationDialog("Finish Program","Are you sure you want to mark this program as completed?",[{text:"Cancel",role:"cancel",cssClass:"bg-gray-400 hover:bg-gray-600",icon:"cancel"},{text:"Finish Program",role:"confirm",cssClass:"bg-primary hover:bg-primary-dark",icon:"done"}]);if(!t||t.role!=="confirm")return;this.spinnerService.show("Completing program..."),yield this.trainingProgramService.toggleProgramActivation(this.currentProgramId,"completed")}catch{this.toastService.error("Failed to complete program",0,"Error")}finally{this.spinnerService.hide()}})}toggleActiveProgram(){return A(this,null,function*(){if(this.currentProgramId){if(this.isCurrentProgramActive()){let t=yield this.alertService.showConfirmationDialog("Program is currently active.","What would you like to do?",[{text:"Deactivate",role:"deactivate",data:"deactivate",icon:"deactivate"},{text:"Complete",role:"complete",data:"complete",icon:"goal",cssClass:"bg-green-500 hover:bg-green-600"},{text:"Cancel",role:"cancel",data:"cancel",icon:"cancel"}]);if(!t||!t.data||t.data==="cancel"){this.spinnerService.hide();return}if(t.data==="complete"){try{this.spinnerService.show("Completing program..."),yield this.trainingProgramService.toggleProgramActivation(this.currentProgramId,"completed"),this.toastService.success("Program is now completed")}catch{this.toastService.error("Failed to complete program",0,"Error")}finally{this.spinnerService.hide()}return}else try{this.spinnerService.show("Deactivating program..."),yield this.trainingProgramService.deactivateProgram(this.currentProgramId,"cancelled"),this.toastService.success("Program is now deactivated")}catch{this.toastService.error("Failed to deactivate",0,"Error")}finally{this.spinnerService.hide()}return}try{this.spinnerService.show("Setting active program..."),yield this.trainingProgramService.toggleProgramActivation(this.currentProgramId,"active"),this.toastService.success("Program is now active")}catch{this.toastService.error("Failed to set active program",0,"Error")}finally{this.spinnerService.hide()}}})}toggleProgramHistory(){let t=this.currentProgram()!==null&&this.currentProgram()!==void 0?this.currentProgram():null;if(!t||!t.history||t&&t.history&&t.history.length===0){this.toastService.info("No history available for this program.",3e3);return}this.isProgramHistoryModalOpen.set(!0)}isProgramHistoryModalOpen=D(!1);closeProgramHistoryModal(){this.isProgramHistoryModalOpen.set(!1),this.editingHistoryEntryId.set(null)}updateSanitizedDescription(t){this.sanitizedDescription=this.sanitizer.bypassSecurityTrustHtml(t)}toggleGoal(t){this.selectedGoals.update(e=>{let i=new Set(e);return t!==void 0&&t.value!==void 0&&(i.has(t.value)?i.delete(t.value):i.add(t.value)),Array.from(i)})}getProgramDropdownActionItems(t,e){let i="rounded text-left px-3 py-1.5 sm:px-4 sm:py-2 font-medium text-gray-600 dark:text-gray-300 hover:bg-primary flex items-center text-sm hover:text-white dark:hover:text-gray-100 dark:hover:text-white",a="rounded text-left px-3 py-1.5 sm:px-4 sm:py-2 font-medium text-gray-600 dark:text-gray-300 hover:bg-red-600 flex items-center text-sm hover:text-gray-100 hover:animate-pulse",s="rounded text-left px-3 py-1.5 sm:px-4 sm:py-2 font-medium text-gray-600 dark:text-gray-300 hover:bg-green-600 flex items-center text-sm hover:text-gray-100",g="rounded text-left px-3 py-1.5 sm:px-4 sm:py-2 font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-500 flex items-center text-sm hover:text-gray-100",y=this.currentProgram,S={label:"trainingPrograms.actions.edit",actionKey:"edit",iconName:"edit",iconClass:"w-8 h-8 mr-2",buttonClass:(e==="dropdown"?"w-full ":"")+i,data:{programId:t}},x={label:"trainingPrograms.actions.activate",actionKey:"activate",iconName:"activate",iconClass:"w-8 h-8 mr-2",buttonClass:(e==="dropdown"?"w-full ":"")+s,data:{programId:t}},f={label:"trainingPrograms.actions.history",actionKey:"history",iconName:"clock",iconClass:"w-8 h-8 mr-2",buttonClass:(e==="dropdown"?"w-full ":"")+i,data:{programId:t}},F={label:"trainingPrograms.actions.finish",actionKey:"finish",iconName:"goal",iconClass:"w-8 h-8 mr-2",buttonClass:(e==="dropdown"?"w-full ":"")+i,data:{programId:t}},T={label:"trainingPrograms.actions.deactivate",actionKey:"deactivate",iconName:"deactivate",iconClass:"w-7 h-7 mr-2",buttonClass:(e==="dropdown"?"w-full ":"")+g,data:{programId:t}},I=[];return this.currentProgram()?.isActive?(I.push(F),I.push(T)):I.push(x),I.push(f),this.isViewMode&&I.push(S),I.push({isDivider:!0}),I.push({label:"trainingPrograms.actions.delete",actionKey:"delete",iconName:"trash",iconClass:"w-8 h-8 mr-2",buttonClass:(e==="dropdown"?"w-full ":"")+a,data:{programId:t}}),I}handleActionMenuItemClick(t,e){if(t.data?.programId)switch(t.actionKey){case"activate":this.toggleActiveProgram();break;case"deactivate":this.toggleActiveProgram();break;case"finish":this.completeProgram();break;case"history":this.toggleProgramHistory();break;case"edit":this.enableEditModeFromView();break;case"delete":this.deleteProgram();break}}activeProgramIdActions=D(null);toggleActions(t,e){e.stopPropagation(),this.activeProgramIdActions.update(i=>i===t?null:t)}areActionsVisible(t){return this.activeProgramIdActions()===t}onCloseActionMenu(){this.activeProgramIdActions.set(null)}navigateToPrograms(){this.router.navigate(["/training-programs"])}removeProgramHistoryEntry(t){return A(this,null,function*(){if(!this.currentProgramId||!t){this.toastService.error("Missing program or history entry ID.",0,"Error");return}try{this.spinnerService.show("Removing history entry..."),yield this.trainingProgramService.removeProgramHistoryEntry(this.currentProgramId,t),this.toastService.success("History entry removed.",0,"Success");let e=yield H(this.trainingProgramService.getProgramById(this.currentProgramId).pipe(R(1)));this.currentProgram.set(e),e&&this.patchFormWithProgramData(e)}catch{this.toastService.error("Failed to remove history entry.",0,"Error")}finally{this.spinnerService.hide()}})}editHistoryEntry(t){this.editingHistoryEntryId.set(t.id),this.historyEditForm.patchValue({id:t.id,startDate:t.startDate&&t.startDate!=="-"?new Date(t.startDate).toISOString().split("T")[0]:"",endDate:t.endDate&&t.endDate!=="-"?new Date(t.endDate).toISOString().split("T")[0]:"",status:t.status})}cancelEditHistoryEntry(){this.editingHistoryEntryId.set(null)}saveHistoryEntry(){return A(this,null,function*(){if(this.historyEditForm.invalid){this.toastService.error("Please ensure all fields are valid.",0,"Validation Error");return}if(!this.currentProgramId)return;let t=this.historyEditForm.getRawValue(),e=ee(X({},t),{programId:this.currentProgramId,endDate:t.endDate||"-",date:new Date().toISOString()});try{this.spinnerService.show("Updating history..."),yield this.trainingProgramService.updateProgramHistory(this.currentProgramId,e);let i=yield H(this.trainingProgramService.getProgramById(this.currentProgramId).pipe(R(1)));this.currentProgram.set(i),this.editingHistoryEntryId.set(null)}catch{this.toastService.error("Failed to save history entry.",0,"Save Error")}finally{this.spinnerService.hide()}})}forceEndDateToNull(){this.historyEditForm.get("endDate")?.setValue(null),this.historyEditForm.get("endDate")?.disable()}enableEndDate(){this.historyEditForm.get("endDate")?.enable()}onWeekDrop(t){this.isViewMode||(J(this.weeksFormArray.controls,t.previousIndex,t.currentIndex),this.weeksFormArray.controls.forEach((e,i)=>{e.get("weekNumber")?.setValue(i+1)}),this.weeksFormArray.updateValueAndValidity())}onDayDropInWeek(t,e){if(this.isViewMode)return;let i=this.weeksFormArray.at(e).get("schedule");J(i.controls,t.previousIndex,t.currentIndex),i.updateValueAndValidity()}toggleWeek(t){this.expandedWeekIds.update(e=>{let i=new Set(e);return i.has(t)?i.delete(t):i.add(t),i})}isWeekExpanded(t){return this.expandedWeekIds().has(t)}toggleDay(t){this.expandedDayIds.update(e=>{let i=new Set(e);return i.has(t)?i.delete(t):i.add(t),i})}isDayExpanded(t){return this.expandedDayIds().has(t)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=ce({type:r,selectors:[["app-training-program-builder"]],decls:49,vars:40,consts:[["addDayToSchedule",""],["addWeekButton",""],["noHistory",""],[1,"container","mx-auto"],[1,"flex","items-center","justify-between","p-2"],[1,"flex","justify-between","items-center"],[1,"text-gray-600","dark:text-gray-300","hover:text-primary","dark:hover:text-primary-light","p-2","-ml-1",3,"routerLink"],["name","back",1,"w-6","h-6"],[1,"w-10","h-10"],[1,"flex","items-center","space-x-2","flex-shrink-0"],["class","",4,"ngIf"],[1,"space-y-6","mb-6",3,"formGroup"],[1,"space-y-4","p-2","rounded-md"],[4,"ngIf"],["class","pt-2",4,"ngIf"],["class","pt-4 space-y-4",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"md:col-span-2"],[1,"block","text-m","font-medium","text-gray-700","dark:text-gray-300","mb-2"],[1,"p-2","bg-gray-100","dark:bg-gray-700","rounded-md"],[1,"flex","items-center","space-x-4"],[1,"flex","items-center","space-x-2","cursor-pointer"],["type","radio","formControlName","programType","value","cycled",1,"form-radio","h-4","w-4","text-primary","focus:ring-primary-dark","dark:bg-gray-600","dark:border-gray-500"],[3,"ngClass"],["type","radio","formControlName","programType","value","linear",1,"form-radio","h-4","w-4","text-primary","focus:ring-primary-dark","dark:bg-gray-600","dark:border-gray-500"],["class","mt-3 pl-6",4,"ngIf"],["for","iterationId",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","iterationId","formControlName","iterationId","placeholder","",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","dark:bg-gray-600","dark:text-gray-200"],["class","mt-1 text-xs text-red dark:text-primary-light",4,"ngIf"],["class","pt-6 px-2 flex justify-end space-x-3",4,"ngIf"],["class","fixed inset-0 bg-gray-700 bg-opacity-75 transition-opacity overflow-y-auto h-full w-full z-[70] flex items-center justify-center p-4",3,"click",4,"ngIf"],["class","fixed inset-0 bg-gray-700 bg-opacity-75 z-[80] flex items-center justify-center p-4 backdrop-blur-sm",4,"ngIf"],[1,""],[1,"relative"],[1,"text-gray-500","dark:text-gray-400","hover:bg-gray-200","dark:hover:bg-gray-500","rounded-full","focus:outline-none","flex","items-center",3,"click"],["name","menu-action",1,"h-10","w-10"],["displayMode","dropdown",3,"items","isVisible","itemClick","closeMenu",4,"ngIf"],["displayMode","dropdown",3,"itemClick","closeMenu","items","isVisible"],[1,"block","text-xl","font-black","text-gray-700","dark:text-gray-300"],[1,"flex","max-w-[100px]","px-3","py-1.5","text-xs","font-semibold","rounded-full","transition-colors","duration-200","ease-in-out","focus:outline-none","focus:ring-2","focus:ring-offset-2","dark:focus:ring-offset-green-800","bg-green-600","text-white","hover:bg-green-300","dark:bg-green-600","dark:hover:bg-green-500","focus:ring-green-400"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-5","h-5","ml-1"],["fill-rule","evenodd","d","M16.403 12.652a3 3 0 000-5.304 3 3 0 00-3.75-3.751 3 3 0 00-5.305 0 3 3 0 00-3.751 3.75 3 3 0 000 5.305 3 3 0 003.75 3.751 3 3 0 005.305 0 3 3 0 003.751-3.75Zm-2.546-4.46a.75.75 0 00-1.214-.883l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5Z","clip-rule","evenodd"],[1,"text-2xs","sm:text-xs","font-semibold","px-1.5","sm:px-2.5","py-0.5"],[1,"pt-2"],["class","space-y-1",4,"ngIf"],[1,"space-y-1"],[1,"flex","justify-between","items-baseline"],[1,"text-sm","font-medium","text-gray-600","dark:text-gray-300"],[1,"text-sm","font-semibold","text-primary","dark:text-primary-light"],[1,"w-full","bg-gray-200","rounded-full","h-2.5","dark:bg-gray-700"],[1,"bg-primary","h-2.5","rounded-full","transition-all","duration-500","ease-out"],[1,"pt-4","space-y-4"],[1,"flex","w-full","h-4","rounded-md","overflow-hidden","border","border-gray-300","dark:border-gray-600"],["class","flex-1 border-r border-gray-300 dark:border-gray-600 last:border-r-0 transition-colors duration-300",3,"ngClass","title",4,"ngFor","ngForOf"],[1,"flex-1","border-r","border-gray-300","dark:border-gray-600","last:border-r-0","transition-colors","duration-300",3,"ngClass","title"],[1,"font-semibold"],["class","flex-1 border-r border-gray-300 dark:border-gray-600 last:border-r-0 transition-colors duration-300",3,"ngClass",4,"ngFor","ngForOf"],[1,"flex-1","border-r","border-gray-300","dark:border-gray-600","last:border-r-0","transition-colors","duration-300",3,"ngClass"],["for","programName",1,"block","text-m","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","programName","formControlName","name",1,"mt-1","block","w-full","p-2","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:border-gray-500","dark:text-gray-200",3,"placeholder","ngClass"],["class","text-red-500 dark:text-red-400 text-xs mt-1",4,"ngIf"],[1,"text-red-500","dark:text-red-400","text-xs","mt-1"],[1,"mt-1","block","w-full","dark:text-gray-200",3,"innerHTML"],["for","description",1,"block","text-m","font-medium","text-gray-700","dark:text-gray-300"],["id","description","formControlName","description","rows","3",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","dark:bg-gray-600","dark:text-gray-200",3,"placeholder"],[1,"mt-4"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],[1,"flex","flex-wrap","gap-2"],["type","button","class","px-3 py-1.5 text-xs font-semibold rounded-full transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800",3,"disabled","ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"px-3","py-1.5","text-xs","font-semibold","rounded-full","transition-colors","duration-200","ease-in-out","focus:outline-none","focus:ring-2","focus:ring-offset-2","dark:focus:ring-offset-gray-800",3,"click","disabled","ngClass"],["for","startDate",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","date","id","startDate","formControlName","startDate",1,"mt-1","block","w-full","p-2","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:border-gray-600","dark:text-gray-300","dark:[color-scheme:dark]"],[1,"mt-3","pl-6"],["type","checkbox","formControlName","isRepeating",1,"form-checkbox","h-4","w-4","rounded","text-primary","focus:ring-primary-dark","dark:bg-gray-600","dark:border-gray-500"],[1,"text-sm","text-gray-700","dark:text-gray-300"],[1,"mt-1","text-xs","text-gray-500","dark:text-gray-400"],["for","cycleLength",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","flex","items-center"],[1,"ml-1"],["name","info",1,"h-4","w-4","text-gray-400","dark:text-gray-500","cursor-help",3,"appTooltip"],["type","number","id","cycleLength","formControlName","cycleLength","min","1",1,"mt-1","block","w-full","p-2","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:border-gray-600","dark:text-gray-300","dark:[color-scheme:dark]",3,"placeholder"],[1,"mt-1","text-xs","text-red","dark:text-primary-light"],["for","programNotes",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","programNotes","formControlName","programNotes","rows","3",1,"mt-1","block","w-full","p-2","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:border-gray-600","dark:text-gray-300","dark:[color-scheme:dark]"],["class","space-y-4 p-2 rounded-md",4,"ngIf"],[1,"flex","justify-between","items-center","mb-1"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-300"],["type","button","appPress","","class","flex items-center justify-center bg-blue-500 hover:bg-blue-600 text-white text-sm font-medium py-1.5 px-3 rounded-md shadow-sm",3,"shortPress",4,"ngIf"],["cdkDropList","","formArrayName","schedule","class","space-y-4",3,"cdkDropListData","cdkDropListDropped",4,"ngIf"],["class","text-center py-6 text-gray-500 dark:text-gray-400 border border-dashed dark:border-gray-700 rounded-md",4,"ngIf","ngIfElse"],["type","button","appPress","",1,"flex","items-center","justify-center","bg-blue-500","hover:bg-blue-600","text-white","text-sm","font-medium","py-1.5","px-3","rounded-md","shadow-sm",3,"shortPress"],["name","create",1,"h-4","w-4"],["cdkDropList","","formArrayName","schedule",1,"space-y-4",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","","class","scheduled-day-card p-3 border rounded-md shadow-sm bg-gray-50 dark:bg-gray-600/70 dark:border-gray-600 relative",3,"formGroupName","cdkDragDisabled",4,"ngFor","ngForOf"],["cdkDrag","",1,"scheduled-day-card","p-3","border","rounded-md","shadow-sm","bg-gray-50","dark:bg-gray-600/70","dark:border-gray-600","relative",3,"formGroupName","cdkDragDisabled"],[1,"flex","justify-between","items-start"],[1,"flex","items-center","flex-shrink-0"],["cdkDragHandle","","class","p-1 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 flex-shrink-0 cursor-grab","title","Drag to reorder day",4,"ngIf"],["type","button",1,"p-1","-ml-1","rounded-full","hover:bg-gray-200","dark:hover:bg-gray-500","focus:outline-none",3,"click"],[1,"w-5","h-5","text-gray-500","dark:text-gray-400",3,"name"],["type","button","appPress","","title","Remove DAY","class","flex px-1 items-center hover:text-red-700 dark:hover:text-red-300 rounded-md hover:bg-red-100 dark:hover:bg-red-900/30 disabled:opacity-50 bg-red-500 text-white text-sm font-medium",3,"shortPress",4,"ngIf"],[1,"flex","justify-between","items-center","mb-2",3,"ngClass"],[1,"text-md","font-medium","text-gray-800","dark:text-gray-100"],[1,"sr-only",3,"for"],["type","text","formControlName","dayName",1,"text-lg","font-bold","bg-transparent","border-0","border-b-2","border-gray-300","dark:border-gray-500","focus:ring-0","focus:border-primary","dark:text-gray-100","p-1","w-full","sm:w-1/2",3,"id","placeholder"],["class","mt-2 text-sm",4,"ngIf"],["cdkDragHandle","","title","Drag to reorder day",1,"p-1","text-gray-400","hover:text-gray-600","dark:text-gray-500","dark:hover:text-gray-300","flex-shrink-0","cursor-grab"],["name","drag"],["type","button","appPress","","title","Remove DAY",1,"flex","px-1","items-center","hover:text-red-700","dark:hover:text-red-300","rounded-md","hover:bg-red-100","dark:hover:bg-red-900/30","disabled:opacity-50","bg-red-500","text-white","text-sm","font-medium",3,"shortPress"],["name","cancel",1,"h-5","w-5","mr-1"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3","dark:text-gray-300"],[1,"block","text-xs","font-medium","text-gray-700","dark:text-gray-300",3,"for"],["formControlName","dayOfWeek",1,"mt-1","block","w-full","p-2","text-sm","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:border-gray-500","dark:text-gray-300",3,"id"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-1","flex","rounded-md","shadow-sm",3,"ngClass"],["type","text","readonly","",1,"flex-1","min-w-0","block","w-full","px-3","py-2","text-sm","rounded-none","rounded-l-md","border-gray-300","dark:border-gray-200","dark:bg-gray-400","cursor-default","focus:outline-none","focus:ring-0","focus:border-gray-300","dark:text-gray-800","font-medium",3,"id","value","ngClass"],["type","button","appPress","","class","inline-flex items-center px-3 py-2 border border-l-0 rounded-r-md text-sm font-medium transition-colors duration-150",3,"ngClass","shortPress",4,"ngIf"],["class","sm:col-span-2",4,"ngIf"],[3,"value"],["type","button","appPress","",1,"inline-flex","items-center","px-3","py-2","border","border-l-0","rounded-r-md","text-sm","font-medium","transition-colors","duration-150",3,"shortPress","ngClass"],["name","change",1,"h-4","w-4"],[1,"sm:col-span-2"],["type","text","formControlName","timeOfDay",1,"mt-1","block","w-full","p-2","text-sm","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:border-gray-500",3,"id","placeholder"],["formControlName","notes","rows","2",1,"mt-1","block","w-full","p-2","text-sm","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:border-gray-500",3,"id"],[1,"mt-2","text-sm"],[1,"font-medium","text-gray-800","dark:text-gray-200"],[1,"text-center","py-6","text-gray-500","dark:text-gray-400","border","border-dashed","dark:border-gray-700","rounded-md"],["type","button","class","mt-2 text-sm text-primary hover:underline",3,"click",4,"ngIf"],["type","button",1,"mt-2","text-sm","text-primary","hover:underline",3,"click"],[1,"flex","justify-center","mt-2"],["type","button","appPress","","class","flex items-center justify-center bg-green-500 hover:bg-green-600 text-white text-sm font-medium py-1.5 px-3 rounded-md shadow-sm",3,"shortPress",4,"ngIf"],["cdkDropList","","formArrayName","weeks",1,"space-y-6","mt-4",3,"cdkDropListDropped"],["cdkDrag","","class","p-4 border-2 border-dashed dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-800/50",3,"formGroupName","cdkDragDisabled",4,"ngFor","ngForOf"],["type","button","appPress","",1,"flex","items-center","justify-center","bg-green-500","hover:bg-green-600","text-white","text-sm","font-medium","py-1.5","px-3","rounded-md","shadow-sm",3,"shortPress"],["cdkDrag","",1,"p-4","border-2","border-dashed","dark:border-gray-600","rounded-lg","bg-gray-50","dark:bg-gray-800/50",3,"formGroupName","cdkDragDisabled"],[1,"flex","justify-between","items-center","mb-3"],[1,"flex","items-center"],["cdkDragHandle","","class","p-1 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 flex-shrink-0 cursor-move","title","Drag to reorder week",4,"ngIf"],["type","button",1,"p-1","rounded-full","hover:bg-gray-200","dark:hover:bg-gray-600","focus:outline-none",3,"click"],[1,"w-6","h-6","text-gray-500","dark:text-gray-400",3,"name"],[1,"flex-grow","mx-2"],["type","text","formControlName","name",1,"text-lg","font-bold","bg-transparent","border-0","border-b-2","border-gray-300","dark:border-gray-500","focus:ring-0","focus:border-primary","dark:text-gray-100","p-1","w-full","sm:w-1/2",3,"id","placeholder"],["type","button","appPress","","title","Remove WEEK","class","flex items-center p-1 hover:text-red-700 dark:hover:text-red-300 rounded-md hover:bg-red-100 dark:hover:bg-red-900/30 disabled:opacity-50 bg-red-500 text-white",3,"shortPress",4,"ngIf"],["class","mt-2 pl-4 border-l-2 border-gray-200 dark:border-gray-600",4,"ngIf"],["cdkDragHandle","","title","Drag to reorder week",1,"p-1","text-gray-400","hover:text-gray-600","dark:text-gray-500","dark:hover:text-gray-300","flex-shrink-0","cursor-move"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"w-6","h-6"],["d","M10 4h4v4h-4zM4 10h4v4H4zM10 10h4v4h-4zM16 10h4v4h-4zM10 16h4v4h-4z"],["type","button","appPress","","title","Remove WEEK",1,"flex","items-center","p-1","hover:text-red-700","dark:hover:text-red-300","rounded-md","hover:bg-red-100","dark:hover:bg-red-900/30","disabled:opacity-50","bg-red-500","text-white",3,"shortPress"],["cdkDrag","","class","scheduled-day-card p-3 border rounded-md shadow-sm bg-white dark:bg-gray-600/70 dark:border-gray-600 relative",3,"formGroupName","cdkDragDisabled",4,"ngFor","ngForOf"],["class","text-center mt-4",4,"ngIf"],["class","text-center text-sm text-gray-500 dark:text-gray-400 py-4",4,"ngIf"],["cdkDrag","",1,"scheduled-day-card","p-3","border","rounded-md","shadow-sm","bg-white","dark:bg-gray-600/70","dark:border-gray-600","relative",3,"formGroupName","cdkDragDisabled"],["type","button","appPress","","title","Remove DAY","class","flex p-1 items-center hover:text-red-700 dark:hover:text-red-300 rounded-full hover:bg-red-100 dark:hover:bg-red-900/30 disabled:opacity-50 bg-red-500 text-white",3,"shortPress",4,"ngIf"],["type","button","appPress","","title","Remove DAY",1,"flex","p-1","items-center","hover:text-red-700","dark:hover:text-red-300","rounded-full","hover:bg-red-100","dark:hover:bg-red-900/30","disabled:opacity-50","bg-red-500","text-white",3,"shortPress"],["name","cancel",1,"h-5","w-5"],["formControlName","dayOfWeek",1,"mt-1","block","w-full","p-2","text-sm","border","rounded-md","shadow-sm","dark:bg-gray-700","dark:border-gray-500",3,"id"],[1,"mt-1","flex","rounded-md","shadow-sm"],["type","text","readonly","",1,"flex-1","block","w-full","px-3","py-2","text-sm","rounded-l-md","dark:bg-gray-400","cursor-default","dark:text-gray-800","font-medium",3,"id","value"],["type","button","appPress","","class","inline-flex items-center px-3 py-2 border border-l-0 rounded-r-md text-sm transition-colors duration-150 border-green-500 dark:border-green-400 bg-green-50 dark:bg-green-700 text-green-700 dark:text-green-100 hover:bg-green-100 dark:hover:bg-green-600 font-medium ",3,"ngClass","shortPress",4,"ngIf"],["formControlName","notes","rows","2",1,"mt-1","block","w-full","p-2","text-sm","border","rounded-md","shadow-sm","dark:bg-gray-700","dark:border-gray-500",3,"id"],["type","button","appPress","",1,"inline-flex","items-center","px-3","py-2","border","border-l-0","rounded-r-md","text-sm","transition-colors","duration-150","border-green-500","dark:border-green-400","bg-green-50","dark:bg-green-700","text-green-700","dark:text-green-100","hover:bg-green-100","dark:hover:bg-green-600","font-medium",3,"shortPress","ngClass"],["name","change",1,"h-5","w-5","mr-1"],[1,"text-center","mt-4"],[1,"text-center","text-sm","text-gray-500","dark:text-gray-400","py-4"],[1,"mt-2","pl-4","border-l-2","border-gray-200","dark:border-gray-600"],[1,"list-none","space-y-1"],["class","text-sm text-gray-600 dark:text-gray-300",4,"ngFor","ngForOf"],["class","text-sm text-gray-500 italic",4,"ngIf"],[1,"text-sm","text-gray-600","dark:text-gray-300"],[1,"italic","ml-2"],[1,"text-sm","text-gray-500","italic"],["name","create",1,"h-7","w-7","mr-1"],[1,"pt-6","px-2","flex","justify-end","space-x-3"],["appPress","",1,"flex","items-center","px-4","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","dark:text-gray-200","hover:bg-gray-50","dark:hover:bg-gray-700",3,"shortPress"],["type","submit","appPress","",1,"flex","items-center","justify-center","px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-primary","hover:bg-primary-dark","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-dark","disabled:opacity-50",3,"shortPress","disabled"],["name","create","class","h-5 w-5",4,"ngIf"],["name","save","class","h-5 w-5",4,"ngIf"],["name","create",1,"h-5","w-5"],["name","save",1,"h-5","w-5"],[1,"fixed","inset-0","bg-gray-700","bg-opacity-75","transition-opacity","overflow-y-auto","h-full","w-full","z-[70]","flex","items-center","justify-center","p-4",3,"click"],[1,"relative","transform","overflow-hidden","rounded-md","bg-white","dark:bg-gray-700","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:max-w-2xl",3,"click"],[1,"bg-white","dark:bg-gray-600","px-4","pt-5","pb-4","sm:p-6","sm:pb-4","backdrop-blur-sm"],[1,"sm:flex","sm:items-start","w-full"],[1,"mt-3","text-center","sm:mt-0","sm:text-left","w-full"],[1,"flex","justify-between","items-center","pb-3"],["id","modal-title",1,"text-xl","font-semibold","leading-6","text-gray-900","dark:text-gray-100"],["type","button",1,"p-1","rounded-full","text-gray-400","hover:text-gray-600","dark:hover:text-gray-300","focus:outline-none",3,"click"],["name","cancel",1,"h-6","w-6"],[1,"my-4"],["type","text",1,"w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:text-gray-200",3,"ngModelChange","placeholder","ngModel"],[1,"mt-2","max-h-80","overflow-y-auto","pr-2","custom-scrollbar"],["class","p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md cursor-pointer transition-colors flex justify-between items-center",3,"click",4,"ngFor","ngForOf"],["class","text-gray-500 dark:text-gray-400 text-center p-4",4,"ngIf"],[1,"bg-gray-50","dark:bg-gray-600","px-4","py-3","sm:flex","sm:flex-row-reverse","sm:px-6"],["type","button",1,"mt-3","inline-flex","w-full","justify-center","rounded-md","bg-white","dark:bg-gray-700","px-3","py-2","text-sm","font-semibold","text-gray-900","dark:text-gray-200","shadow-sm","ring-1","ring-inset","ring-gray-300","dark:ring-gray-500","hover:bg-gray-50","dark:hover:bg-gray-500","sm:mt-0","sm:w-auto",3,"click"],[1,"p-3","hover:bg-gray-100","dark:hover:bg-gray-700","rounded-md","cursor-pointer","transition-colors","flex","justify-between","items-center",3,"click"],[1,"text-left"],[1,"block","text-xs","text-gray-500","dark:text-gray-400"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-5","h-5","text-primary","dark:text-primary-light"],["fill-rule","evenodd","d","M8.22 5.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 010-1.06Z","clip-rule","evenodd"],[1,"text-gray-500","dark:text-gray-400","text-center","p-4"],[1,"fixed","inset-0","bg-gray-700","bg-opacity-75","z-[80]","flex","items-center","justify-center","p-4","backdrop-blur-sm"],[1,"relative","bg-white","dark:bg-gray-800","rounded-md","shadow-xl","w-full","max-w-3xl","h-full","max-h-[90vh]","flex","flex-col",3,"click"],[1,"flex","justify-between","items-center","px-4","py-3","border-b","dark:border-gray-700","flex-shrink-0"],[1,"text-lg","font-bold","text-gray-900","dark:text-gray-100"],["type","button",1,"p-1","rounded-full","text-gray-400","hover:text-gray-600","dark:hover:text-gray-300",3,"click"],[1,"p-4","overflow-y-auto","flex-grow"],[4,"ngIf","ngIfElse"],[1,"px-4","py-3","border-t","dark:border-gray-700","flex","justify-end","flex-shrink-0"],["type","button",1,"px-4","py-2","rounded-md","bg-primary","text-white","hover:bg-primary-dark","flex","items-center",3,"click"],[3,"ngSubmit","formGroup"],[1,"min-w-full","divide-y","divide-gray-200","dark:divide-gray-700","hidden","sm:table"],[1,"px-4","py-2","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-400"],[1,"px-4","py-2","text-center","text-xs","font-medium","text-gray-500","dark:text-gray-400"],[1,"divide-y","divide-gray-200","dark:divide-gray-700"],[4,"ngFor","ngForOf"],[1,"space-y-4","sm:hidden"],["class","p-3 border rounded-md dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50",4,"ngFor","ngForOf"],[1,"px-4","py-3","text-sm","text-gray-700","dark:text-gray-200"],[1,"px-4","py-3"],[1,"flex","items-center","space-x-2","justify-center"],["type","button",1,"p-1.5","text-gray-500","dark:text-gray-400","hover:bg-gray-200","dark:hover:bg-gray-500","rounded-md","flex","items-center",3,"click","title"],["name","edit",1,"w-8","h-8"],["type","button",1,"p-1.5","text-red-500","dark:text-red-400","hover:bg-red-100","dark:hover:bg-red-900/50","rounded-md",3,"click","title"],["name","trash",1,"w-8","h-8"],[1,"px-2","py-2"],["type","date","formControlName","startDate",1,"w-full","p-1.5","text-sm","border","rounded-md","shadow-sm","dark:bg-gray-700","dark:border-gray-600","dark:text-gray-300","dark:[color-scheme:dark]"],["type","date","formControlName","endDate",1,"w-full","p-1.5","text-sm","border","rounded-md","shadow-sm","dark:bg-gray-700","dark:border-gray-600","dark:text-gray-300","dark:[color-scheme:dark]"],["formControlName","status",1,"w-full","p-1.5","text-sm","border","rounded-md","shadow-sm","dark:bg-gray-700","dark:border-gray-600","dark:text-gray-300",3,"change"],[1,"px-4","py-2","text-sm","text-gray-500","dark:text-gray-400","italic"],[1,"px-4","py-2"],[1,"flex","items-center","space-x-2"],["type","submit",1,"p-1.5","text-green-600","dark:text-green-400","hover:bg-green-100","dark:hover:bg-green-900/50","rounded-md","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled","title"],["name","save",1,"w-8","h-8"],["name","cancel",1,"w-8","h-8"],[1,"p-3","border","rounded-md","dark:border-gray-700","bg-gray-50","dark:bg-gray-700/50"],["class","space-y-3",4,"ngIf"],[1,"grid","grid-cols-2","gap-x-3","gap-y-2"],[1,"text-xs","font-medium","text-gray-500","dark:text-gray-400"],[1,"font-semibold","dark:text-gray-100"],[1,"dark:text-gray-300"],[1,"dark:text-gray-300","text-xs"],[1,"flex","justify-end","items-center","space-x-2","mt-3","pt-3","border-t","dark:border-gray-600"],["type","button",1,"flex","items-center","text-sm","px-3","py-1.5","rounded-md","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-600",3,"click"],["name","edit",1,"w-8","h-8","mr-1"],["type","button",1,"flex","items-center","text-sm","px-3","py-1.5","rounded-md","text-red-600","dark:text-red-400","hover:bg-red-100","dark:hover:bg-red-900/50",3,"click"],["name","trash",1,"w-8","h-8","mr-1"],[1,"space-y-3"],[1,"block","text-xs","font-medium","text-gray-500","dark:text-gray-400","mb-1"],["formControlName","status",1,"w-full","p-2","text-sm","border","rounded-md","shadow-sm","dark:bg-gray-600","dark:border-gray-500","dark:text-gray-200",3,"change"],["type","date","formControlName","startDate",1,"w-full","p-2","text-sm","border","rounded-md","shadow-sm","dark:bg-gray-600","dark:border-gray-500","dark:text-gray-200","dark:[color-scheme:dark]"],["type","date","formControlName","endDate",1,"w-full","p-2","text-sm","border","rounded-md","shadow-sm","dark:bg-gray-600","dark:border-gray-500","dark:text-gray-200","dark:[color-scheme:dark]"],["type","button",1,"flex","items-center","text-sm","px-3","py-1.5","rounded-md","text-gray-600","dark:text-gray-300","bg-gray-200","hover:bg-gray-300","dark:bg-gray-600","dark:hover:bg-gray-500",3,"click"],["type","submit",1,"flex","items-center","text-sm","px-3","py-1.5","rounded-md","text-white","bg-green-600","hover:bg-green-700","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["name","save",1,"w-8","h-8","mr-1"],[1,"text-center","text-gray-500","dark:text-gray-400","py-6"]],template:function(e,i){if(e&1&&(l(0,"div",3)(1,"header",4)(2,"div",5)(3,"button",6),_(4,"app-icon",7),o(),_(5,"div",8),o(),l(6,"div",9),v(7,kt,5,1,"div",10),o()(),l(8,"form",11)(9,"section",12),v(10,wt,3,1,"div",13)(11,Ct,7,3,"div",13)(12,Pt,2,1,"div",14)(13,Et,3,2,"div",15)(14,Mt,7,11,"div",13)(15,Nt,2,1,"div",13)(16,At,6,6,"div",13)(17,Wt,6,4,"div",16),l(18,"div",17),v(19,Lt,5,3,"div",13),l(20,"div",18)(21,"label",19),u(22),p(23,"translate"),o(),l(24,"div",20)(25,"div",21)(26,"label",22),_(27,"input",23),l(28,"span",24),u(29),p(30,"translate"),o()(),l(31,"label",22),_(32,"input",25),l(33,"span",24),u(34),p(35,"translate"),o()()(),v(36,Rt,9,6,"div",26),o()(),v(37,Gt,11,10,"div",13),l(38,"div")(39,"label",27),u(40),p(41,"translate"),o(),_(42,"input",28),v(43,Ht,3,3,"p",29),o()(),v(44,$t,5,3,"div",13),o(),v(45,Er,3,2,"ng-container",13)(46,Mr,11,9,"div",30),o(),v(47,Wr,23,13,"div",31)(48,Yr,17,8,"div",32),o()),e&2){let a,s,g,y,S,x,f,F,T,I,E;n(3),d("routerLink","/training-programs"),n(4),d("ngIf",i.currentProgram()),n(),d("formGroup",i.programForm),n(2),d("ngIf",i.isViewMode),n(),d("ngIf",(a=i.currentProgram())==null?null:a.isActive),n(),d("ngIf",i.isViewMode&&((s=i.currentProgram())==null?null:s.isActive)),n(),d("ngIf",i.isViewMode&&((g=i.currentProgram())==null?null:g.programType)==="linear"&&((g=i.currentProgram())==null?null:g.isActive)),n(),d("ngIf",i.isEditableMode()),n(),d("ngIf",i.isViewMode),n(),d("ngIf",i.isEditableMode()),n(),d("ngIf",i.isViewMode&&((y=i.currentProgram())==null?null:y.goals)||i.isEditableMode()),n(2),d("ngIf",((S=i.programForm.get("startDate"))==null?null:S.value)||i.isEditableMode()),n(3),h(c(23,26,"programBuilder.form.structureLabel")),n(6),d("ngClass",W(34,ct,((x=i.programForm.get("programType"))==null?null:x.value)==="cycled",((x=i.programForm.get("programType"))==null?null:x.value)!=="cycled")),n(),h(c(30,28,"programBuilder.form.repeatingCycle")),n(4),d("ngClass",W(37,ct,((f=i.programForm.get("programType"))==null?null:f.value)==="linear",((f=i.programForm.get("programType"))==null?null:f.value)!=="linear")),n(),h(c(35,30,"programBuilder.form.weekByWeek")),n(2),d("ngIf",((F=i.programForm.get("programType"))==null?null:F.value)==="linear"),n(),d("ngIf",(((T=i.programForm.get("cycleLength"))==null?null:T.value)||i.isEditableMode())&&((T=i.programForm.get("programType"))==null?null:T.value)==="cycled"),n(3),h(c(41,32,"programBuilder.form.iterationLabel")),n(3),d("ngIf",i.isEditableMode()),n(),d("ngIf",((I=i.programForm.get("programNotes"))==null?null:I.value)||i.isEditableMode()),n(),d("ngIf",(E=i.programForm.get("programType"))==null?null:E.value),n(),d("ngIf",!i.isViewMode),n(),d("ngIf",i.isRoutineModalOpen()),n(),d("ngIf",i.isProgramHistoryModalOpen())}},dependencies:[ke,ve,he,xe,qe,Ve,Ge,He,Te,Me,Be,Re,Ne,De,Ee,$e,Ae,Le,Oe,We,Ie,pt,mt,st,dt,ze,Fe,lt,Ke,at,Ue,Qe,fe,be,Q,Je],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:.5rem;box-shadow:0 5px 5px -3px #0000001a,0 8px 10px 1px #00000012,0 3px 14px 2px #0000000f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.2;border:2px dashed #9ca3af;background-color:#f3f4f6;transition:transform .25s cubic-bezier(0,0,.2,1);border-radius:.5rem}.dark[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{border-color:#4b5563;background-color:#374151}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.scheduled-day-card.cdk-drop-list-dragging[_ngcontent-%COMP%]   .scheduled-day-card[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#9ca3af;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}.dark[_ngcontent-%COMP%]   .custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4b5563}.dark[_ngcontent-%COMP%]   .custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}"]})};export{ut as TrainingProgramBuilderComponent};
