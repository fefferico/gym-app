import{a as O}from"./chunk-QBJGFNKQ.js";import{a as P}from"./chunk-F4EI2BYW.js";import"./chunk-YAHOZYMW.js";import{$a as _,Fa as d,G as C,Ga as i,Ha as n,Hb as E,I,Ia as m,Jc as N,Kc as K,Ma as h,Na as f,Oa as c,P as p,Pb as M,Sb as V,T as g,U as v,Va as L,Za as a,_ as x,_a as y,ac as T,cc as B,la as l,nb as w,pb as D,rb as S,ua as k,za as u}from"./chunk-3G6ZOTTQ.js";import{g as A}from"./chunk-GAL4ENT6.js";function F(o,e){if(o&1){let t=h();i(0,"app-action-menu",23),f("itemClick",function(s){g(t);let b=c(2);return v(b.handleActionMenuItemClick(s))})("closeMenu",function(){g(t);let s=c(2);return v(s.onCloseActionMenu())}),n()}if(o&2){let t=c().ngIf,r=c();d("items",r.getLogDropdownActionItems(t))("isVisible",r.areActionsVisible(t.id))}}function $(o,e){if(o&1&&(i(0,"div",16),m(1,"app-icon",24),i(2,"div",18),a(3,"Distance"),n(),i(4,"div",19),a(5),n()()),o&2){let t=c().ngIf;l(5),_("",t.distanceKm," km")}}function q(o,e){if(o&1&&(i(0,"div",16),m(1,"app-icon",25),i(2,"div",18),a(3,"Calories"),n(),i(4,"div",19),a(5),n()()),o&2){let t=c().ngIf;l(5),_("",t.caloriesBurned," kcal")}}function z(o,e){if(o&1&&(i(0,"div",26)(1,"h3",27),a(2,"Notes"),n(),i(3,"p",28),a(4),n()()),o&2){let t=c().ngIf;l(4),y(t.notes)}}function G(o,e){if(o&1){let t=h();i(0,"div",2)(1,"header",3)(2,"button",4),f("click",function(){g(t);let s=c();return v(s.goBack())}),m(3,"app-icon",5),n(),i(4,"div",6)(5,"div",7)(6,"button",8),f("click",function(s){let b=g(t).ngIf,j=c();return v(j.toggleActions(b.id,s))}),m(7,"app-icon",9),n(),u(8,F,1,2,"app-action-menu",10),n()()(),i(9,"div",11)(10,"div",12)(11,"h1",13),a(12),n(),i(13,"p",14),a(14),w(15,"date"),n()(),i(16,"div",15)(17,"div",16),m(18,"app-icon",17),i(19,"div",18),a(20,"Duration"),n(),i(21,"div",19),a(22),n()(),i(23,"div",16),m(24,"app-icon",20),i(25,"div",18),a(26,"Intensity"),n(),i(27,"div",19),a(28),n()(),u(29,$,6,1,"div",21)(30,q,6,1,"div",21),n(),u(31,z,5,1,"div",22),n()()}if(o&2){let t=e.ngIf,r=c();l(8),d("ngIf",r.areActionsVisible(t.id)),l(4),y(t.activityName),l(2),y(D(15,8,t.startTime,"fullDate")),l(8),_("",t.durationMinutes," min"),l(6),y(t.intensity),l(),d("ngIf",t.distanceKm),l(),d("ngIf",t.caloriesBurned),l(),d("ngIf",t.notes)}}function H(o,e){o&1&&(i(0,"div",29)(1,"p",30),a(2,"Loading activity details..."),n()())}var R=class o{route=p(T);router=p(B);activityService=p(O);alertService=p(K);activityLog=x(null);baseActivity=x(null);activeLogIdActions=x(null);ngOnInit(){this.route.paramMap.pipe(C(e=>{let t=e.get("id");return t?this.activityService.getActivityLogById(t):[null]}),I(e=>{if(e){this.activityLog.set(e);let t=this.activityService.getActivityById(e.activityId);t&&this.baseActivity.set(t)}else this.activityLog.set(null),this.baseActivity.set(null)})).subscribe()}goBack(){this.router.navigate(["/history"])}editLog(e){this.router.navigate(["/activities/log/edit",e])}deleteLog(e){return A(this,null,function*(){let t=yield this.alertService.showConfirmationDialog("Delete Activity Log?",`Are you sure you want to delete this log for "${e.activityName}"? This cannot be undone.`,[{text:"Cancel",role:"cancel",data:!1},{text:"Delete",role:"confirm",data:!0,cssClass:"bg-red-500"}]);t&&t.data&&(this.activityService.deleteActivityLog(e.id),this.router.navigate(["/history"]))})}toggleActions(e,t){t.stopPropagation(),this.activeLogIdActions.update(r=>r===e?null:e)}areActionsVisible(e){return this.activeLogIdActions()===e}onCloseActionMenu(){this.activeLogIdActions.set(null)}getLogDropdownActionItems(e){return[{label:"EDIT",actionKey:"edit",iconSvg:"asdasd",iconName:"edit",buttonClass:"w-full "+"rounded text-left px-4 py-2 font-medium text-gray-600 dark:text-gray-300 hover:bg-primary flex items-center text-sm hover:text-white dark:hover:text-gray-100",data:{log:e}},{isDivider:!0},{label:"DELETE",actionKey:"delete",iconName:"trash",buttonClass:"w-full "+"rounded text-left px-4 py-2 font-medium text-gray-600 dark:text-gray-300 hover:bg-red-600 flex items-center text-sm hover:text-white",data:{log:e}}]}handleActionMenuItemClick(e){let t=e.data?.log;if(t){switch(e.actionKey){case"edit":this.editLog(t.id);break;case"delete":this.deleteLog(t);break}this.activeLogIdActions.set(null)}}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=k({type:o,selectors:[["app-activity-log-details"]],decls:3,vars:2,consts:[["loading",""],["class","container mx-auto max-w-2xl p-2 sm:p-4",4,"ngIf","ngIfElse"],[1,"container","mx-auto","max-w-2xl","p-2","sm:p-4"],[1,"flex","items-center","justify-between","p-2","mb-4"],[1,"text-gray-600","dark:text-gray-300","hover:text-primary","dark:hover:text-primary-light","p-2","rounded-full","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["name","back",1,"w-6","h-6"],[1,"flex","items-center","space-x-2","flex-shrink-0"],[1,"relative"],[1,"p-1.5","text-gray-500","dark:text-gray-400","hover:bg-gray-200","dark:hover:bg-gray-700","rounded-full","focus:outline-none",3,"click"],["name","menu_action",1,"h-5","w-5"],["displayMode","dropdown",3,"items","isVisible","itemClick","closeMenu",4,"ngIf"],[1,"bg-white","dark:bg-gray-800","p-6","rounded-lg","shadow-md","space-y-4"],[1,"border-b","border-gray-200","dark:border-gray-700","pb-4"],[1,"text-3xl","font-bold","text-gray-800","dark:text-gray-200"],[1,"text-gray-500","dark:text-gray-400","mt-1"],[1,"grid","grid-cols-2","sm:grid-cols-4","gap-4","text-center","pt-4"],[1,"p-4","bg-gray-50","dark:bg-gray-700/50","rounded-lg"],["name","clock",1,"w-8","h-8","mx-auto","text-primary","mb-2"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"text-2xl","font-semibold"],["name","flame",1,"w-8","h-8","mx-auto","text-primary","mb-2"],["class","p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",4,"ngIf"],["class","pt-4 border-t border-gray-200 dark:border-gray-700",4,"ngIf"],["displayMode","dropdown",3,"itemClick","closeMenu","items","isVisible"],["name","ruler",1,"w-8","h-8","mx-auto","text-primary","mb-2"],["name","calories",1,"w-8","h-8","mx-auto","text-primary","mb-2"],[1,"pt-4","border-t","border-gray-200","dark:border-gray-700"],[1,"text-lg","font-semibold","mb-2"],[1,"text-gray-700","dark:text-gray-300","whitespace-pre-wrap"],[1,"text-center","p-20"],[1,"text-xl","text-gray-600","dark:text-gray-400"]],template:function(t,r){if(t&1&&u(0,G,32,11,"div",1)(1,H,3,0,"ng-template",null,0,S),t&2){let s=L(2);d("ngIf",r.activityLog())("ngIfElse",s)}},dependencies:[V,E,M,N,P],styles:["[_nghost-%COMP%]{display:block}"]})};export{R as ActivityLogDetailsComponent};
