import{a as K}from"./chunk-Y3JI4C22.js";import{f as q}from"./chunk-DAZZTWEH.js";import{f as R,g as U,q as z}from"./chunk-N53IRCP5.js";import{Bb as V,Ca as s,Cb as W,Da as a,Db as $,Ea as p,Fa as v,Ga as E,Ha as A,Ja as w,Ka as c,La as l,N as d,Ob as L,Pb as x,Rc as Y,S as g,T as b,Tc as j,Ua as F,Wa as f,Xa as H,Ya as N,Z as h,aa as O,ca as P,ec as S,fc as k,ga as B,ha as D,ia as r,ic as m,kc as y,qa as M,sa as I,va as _,wa as C}from"./chunk-SYEUE52G.js";function se(n,t){let e=U(),o=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,i=R(n,t?.in),u=i.getDay(),J=(u<o?-7:0)+6-(u-o);return i.setDate(i.getDate()+J),i.setHours(23,59,59,999),i}function ce(n,t,e){return K(n,-t,e)}var T=class n{elementRef=d(O);clickOutside=new C;onDocumentClick(t){let e=t.target;e instanceof Node&&!this.elementRef.nativeElement.contains(e)&&this.clickOutside.emit(t)}static \u0275fac=function(e){return new(e||n)};static \u0275dir=I({type:n,selectors:[["","appClickOutside",""]],hostBindings:function(e,o){e&1&&c("click",function(u){return o.onDocumentClick(u)},D)},outputs:{clickOutside:"clickOutside"}})};function X(n,t){if(n&1){let e=w();a(0,"button",7),c("shortPress",function(){g(e);let i=l();return b(i.scrollToTop())}),v(1,"app-icon",8),a(2,"span",5),f(3,"Back to Top"),p()()}n&2&&(s("@fadeAnimation",void 0),r(),F("rotate-90",!0),s("strokeWidth",2.5))}function Z(n,t){if(n&1){let e=w();a(0,"button",7),c("shortPress",function(){g(e);let i=l();return b(i.scrollToBottom())}),v(1,"app-icon",9),a(2,"span",5),f(3,"Back to Bottom"),p()()}n&2&&(s("@fadeAnimation",void 0),r(),s("strokeWidth",2.5))}function ee(n,t){if(n&1){let e=w();a(0,"div",13)(1,"span",14),c("shortPress",function(){g(e);let i=l().$implicit,u=l(2);return b(u.handleAction(i.actionKey))}),f(2),p(),a(3,"button",15),c("shortPress",function(){g(e);let i=l().$implicit,u=l(2);return b(u.handleAction(i.actionKey))}),v(4,"app-icon",16),a(5,"span",5),f(6),p()()()}if(n&2){let e=l().$implicit;r(),s("ngClass",e.cssClass),r(),N(" ",e.label," "),r(),s("ngClass",e.cssClass),r(),s("name",e.iconName),r(2),H(e.label)}}function te(n,t){if(n&1&&(E(0),_(1,ee,7,5,"div",12),A()),n&2){let e=t.$implicit,o=l(2);r(),s("ngIf",!e.isPremium||o.subscriptionService.isPremium())}}function oe(n,t){if(n&1&&(a(0,"div",10),_(1,te,2,1,"ng-container",11),p()),n&2){let e=l();s("@fabSlideUp",void 0),r(),s("ngForOf",e.actions)}}var G=class n{workoutService=d(q);subscriptionService=d(z);platformId=d(P);pausedSub;actions=[];checkForPausedSession=!0;actionClicked=new C;scrollToBottomDisabled=!1;scrollToTopDisabled=!1;customBottomPositioning=void 0;isFabActionsOpen=h(!1);showBackToTopButton=h(!1);showBackToBottomButton=h(!1);isPausedSession=h(!1);ngOnInit(){this.checkForPausedSession&&(this.isPausedSession.set(this.workoutService.isPausedSession()),this.pausedSub=this.workoutService.pausedWorkoutDiscarded$.subscribe(()=>{this.isPausedSession.set(!1)}))}ngOnDestroy(){this.pausedSub?.unsubscribe()}onWindowScroll(){if(x(this.platformId)){let t=window.pageYOffset||document.documentElement.scrollTop,e=window.innerHeight,o=document.body.scrollHeight,i=100;this.showBackToTopButton.set(t>400),this.showBackToBottomButton.set(t+e<o-i)}}scrollToTop(){x(this.platformId)&&window.scrollTo({top:0,behavior:"smooth"})}scrollToBottom(){x(this.platformId)&&window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}handleFabClick(){this.isFabActionsOpen.update(t=>!t)}handleFabMouseEnter(){}handleFabMouseLeave(){}handleAction(t){this.actionClicked.emit(t),this.isFabActionsOpen.set(!1)}handleClose(){this.isFabActionsOpen()&&this.isFabActionsOpen.set(!1)}checkClassForPositioning(){return this.customBottomPositioning?`bottom-${this.customBottomPositioning}`:this.isPausedSession()?"bottom-36":"bottom-20"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-fab-menu"]],hostBindings:function(e,o){e&1&&c("scroll",function(){return o.onWindowScroll()},B)},inputs:{actions:"actions",checkForPausedSession:"checkForPausedSession",scrollToBottomDisabled:"scrollToBottomDisabled",scrollToTopDisabled:"scrollToTopDisabled",customBottomPositioning:"customBottomPositioning"},outputs:{actionClicked:"actionClicked"},decls:9,vars:6,consts:[["appClickOutside","",1,"fixed","right-4","sm:right-10","z-40","flex","flex-col","items-center","gap-4","transition-all","duration-300",3,"clickOutside","ngClass"],["appPress","","type","button","class","bg-primary dark:bg-primary text-white rounded-full p-3 shadow-lg hover:bg-primary-dark dark:hover:bg-primary-light focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-focus dark:focus:ring-offset-gray-900 transition-opacity flex items-center",3,"shortPress",4,"ngIf"],[1,"flex","flex-col-reverse","items-center","gap-4",3,"mouseenter","mouseleave"],["type","button",1,"flex","h-14","w-14","items-center","justify-center","rounded-full","bg-primary","text-white","shadow-xl","transition-all","duration-300","hover:bg-primary-dark","hover:scale-105","focus:outline-none","focus:ring-2","focus:ring-primary-focus","focus:ring-offset-2","dark:ring-offset-gray-900",3,"click"],["name","plus",1,"h-8","w-8","transition-transform","duration-300"],[1,"sr-only"],["class","flex flex-col items-center gap-4",4,"ngIf"],["appPress","","type","button",1,"bg-primary","dark:bg-primary","text-white","rounded-full","p-3","shadow-lg","hover:bg-primary-dark","dark:hover:bg-primary-light","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-focus","dark:focus:ring-offset-gray-900","transition-opacity","flex","items-center",3,"shortPress"],["name","back",1,"w-6","h-6",3,"strokeWidth"],["name","chevron-down",1,"w-6","h-6",3,"strokeWidth"],[1,"flex","flex-col","items-center","gap-4"],[4,"ngFor","ngForOf"],["class","group relative flex items-center",4,"ngIf"],[1,"group","relative","flex","items-center"],["appPress","",1,"absolute","right-full","mr-4","sm:hidden","whitespace-nowrap","rounded-md","px-3","py-2","text-sm","font-semibold","text-white","group-hover:block","cursor-pointer",2,"margin-right","-10px",3,"shortPress","ngClass"],["appPress","","type","button",1,"flex","h-12","w-12","items-center","justify-center","rounded-full","text-white","shadow-lg","transition-transform","hover:scale-110","focus:outline-none","focus:ring-2","focus:ring-offset-2","dark:ring-offset-gray-900",3,"shortPress","ngClass"],[1,"h-7","w-7",3,"name"]],template:function(e,o){e&1&&(a(0,"div",0),c("clickOutside",function(){return o.handleClose()}),_(1,X,4,4,"button",1)(2,Z,4,2,"button",1),a(3,"div",2),c("mouseenter",function(){return o.handleFabMouseEnter()})("mouseleave",function(){return o.handleFabMouseLeave()}),a(4,"button",3),c("click",function(){return o.handleFabClick()}),v(5,"app-icon",4),a(6,"span",5),f(7,"Open creation menu"),p()(),_(8,oe,2,2,"div",6),p()()),e&2&&(s("ngClass",o.checkClassForPositioning()),r(),s("ngIf",o.showBackToTopButton()&&!o.scrollToTopDisabled),r(),s("ngIf",o.showBackToBottomButton()&&!o.scrollToBottomDisabled),r(3),F("rotate-45",o.isFabActionsOpen()),r(3),s("ngIf",o.isFabActionsOpen()))},dependencies:[L,V,W,$,j,Y,T],styles:["[_nghost-%COMP%]{display:block}"],data:{animation:[S("fabSlideUp",[y(":enter",[m({transform:"translateY(20%)",opacity:0}),k("200ms ease-out",m({transform:"translateY(0)",opacity:1}))]),y(":leave",[k("200ms ease-in",m({transform:"translateY(20%)",opacity:0}))])]),S("fadeAnimation",[y(":enter",[m({opacity:0}),k("200ms ease-in",m({opacity:1}))]),y(":leave",[k("200ms ease-out",m({opacity:0}))])])]}})};export{se as a,ce as b,T as c,G as d};
