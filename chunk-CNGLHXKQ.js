import{b as re,c as V,d as ne,e as y,f as g,g as S,i as ae}from"./chunk-RFUJLGWY.js";import{A as C,E as J,G,Kc as Z,L as K,Lc as ee,Mc as te,P as A,e as R,gc as Y,k as P,n as E,o as v,p as z}from"./chunk-3G6ZOTTQ.js";import{a as f,b as p,g as D}from"./chunk-GAL4ENT6.js";function B(n,...t){let e=y.bind(null,n||t.find(r=>typeof r=="object"));return t.map(e)}function U(n){let t=g(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function w(n,t){let e=g(n,t?.in);return e.setHours(0,0,0,0),e}function H(n,t,e){let[r,a]=B(e?.in,n,t),o=w(r),i=w(a),s=+o-U(o),d=+i-U(i);return Math.round((s-d)/ne)}function x(n,t,e){let[r,a]=B(e?.in,n,t),o=oe(r,a),i=Math.abs(H(r,a));r.setDate(r.getDate()-o*i);let s=+(oe(r,a)===-o),d=o*(i-s);return d===0?0:d}function oe(n,t){let e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}var Ne={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ie=(n,t,e)=>{let r,a=Ne[n];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+r:r+" ago":r};function _(n){return(t={})=>{let e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}var Le={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Fe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ye={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},se={date:_({formats:Le,defaultWidth:"full"}),time:_({formats:Fe,defaultWidth:"full"}),dateTime:_({formats:Ye,defaultWidth:"full"})};var Re={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},de=(n,t,e,r)=>Re[n];function N(n){return(t,e)=>{let r=e?.context?String(e.context):"standalone",a;if(r==="formatting"&&n.formattingValues){let i=n.defaultFormattingWidth||n.defaultWidth,s=e?.width?String(e.width):i;a=n.formattingValues[s]||n.formattingValues[i]}else{let i=n.defaultWidth,s=e?.width?String(e.width):n.defaultWidth;a=n.values[s]||n.values[i]}let o=n.argumentCallback?n.argumentCallback(t):t;return a[o]}}var Ee={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ce={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ve={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},He={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},je={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},qe=(n,t)=>{let e=Number(n),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},ce={ordinalNumber:qe,era:N({values:Ee,defaultWidth:"wide"}),quarter:N({values:Ce,defaultWidth:"wide",argumentCallback:n=>n-1}),month:N({values:Ve,defaultWidth:"wide"}),day:N({values:He,defaultWidth:"wide"}),dayPeriod:N({values:_e,defaultWidth:"wide",formattingValues:je,defaultFormattingWidth:"wide"})};function L(n){return(t,e={})=>{let r=e.width,a=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=t.match(a);if(!o)return null;let i=o[0],s=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(s)?Ge(s,c=>c.test(i)):$e(s,c=>c.test(i)),l;l=n.valueCallback?n.valueCallback(d):d,l=e.valueCallback?e.valueCallback(l):l;let u=t.slice(i.length);return{value:l,rest:u}}}function $e(n,t){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function Ge(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function ue(n){return(t,e={})=>{let r=t.match(n.matchPattern);if(!r)return null;let a=r[0],o=t.match(n.parsePattern);if(!o)return null;let i=n.valueCallback?n.valueCallback(o[0]):o[0];i=e.valueCallback?e.valueCallback(i):i;let s=t.slice(a.length);return{value:i,rest:s}}}var Ue=/^(\d+)(th|st|nd|rd)?/i,Qe=/\d+/i,Xe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ze={any:[/^b/i,/^(a|c)/i]},Je={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ke={any:[/1/i,/2/i,/3/i,/4/i]},Ze={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},et={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},nt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},at={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},le={ordinalNumber:ue({matchPattern:Ue,parsePattern:Qe,valueCallback:n=>parseInt(n,10)}),era:L({matchPatterns:Xe,defaultMatchWidth:"wide",parsePatterns:ze,defaultParseWidth:"any"}),quarter:L({matchPatterns:Je,defaultMatchWidth:"wide",parsePatterns:Ke,defaultParseWidth:"any",valueCallback:n=>n+1}),month:L({matchPatterns:Ze,defaultMatchWidth:"wide",parsePatterns:et,defaultParseWidth:"any"}),day:L({matchPatterns:tt,defaultMatchWidth:"wide",parsePatterns:rt,defaultParseWidth:"any"}),dayPeriod:L({matchPatterns:nt,defaultMatchWidth:"any",parsePatterns:at,defaultParseWidth:"any"})};var Q={code:"en-US",formatDistance:ie,formatLong:se,formatRelative:de,localize:ce,match:le,options:{weekStartsOn:0,firstWeekContainsDate:1}};var ot={};function W(){return ot}function me(n,t){let e=g(n,t?.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function ge(n,t){let e=g(n,t?.in);return H(e,me(e))+1}function k(n,t){let e=W(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,a=g(n,t?.in),o=a.getDay(),i=(o<r?7:0)+o-r;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function T(n,t){return k(n,p(f({},t),{weekStartsOn:1}))}function j(n,t){let e=g(n,t?.in),r=e.getFullYear(),a=y(e,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);let o=T(a),i=y(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);let s=T(i);return e.getTime()>=o.getTime()?r+1:e.getTime()>=s.getTime()?r:r-1}function fe(n,t){let e=j(n,t),r=y(t?.in||n,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),T(r)}function he(n,t){let e=g(n,t?.in),r=+T(e)-+fe(e);return Math.round(r/V)+1}function q(n,t){let e=g(n,t?.in),r=e.getFullYear(),a=W(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,i=y(t?.in||n,0);i.setFullYear(r+1,0,o),i.setHours(0,0,0,0);let s=k(i,t),d=y(t?.in||n,0);d.setFullYear(r,0,o),d.setHours(0,0,0,0);let l=k(d,t);return+e>=+s?r+1:+e>=+l?r:r-1}function pe(n,t){let e=W(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,a=q(n,t),o=y(t?.in||n,0);return o.setFullYear(a,0,r),o.setHours(0,0,0,0),k(o,t)}function ye(n,t){let e=g(n,t?.in),r=+k(e,t)-+pe(e,t);return Math.round(r/V)+1}function m(n,t){let e=n<0?"-":"",r=Math.abs(n).toString().padStart(t,"0");return e+r}var O={y(n,t){let e=n.getFullYear(),r=e>0?e:1-e;return m(t==="yy"?r%100:r,t.length)},M(n,t){let e=n.getMonth();return t==="M"?String(e+1):m(e+1,2)},d(n,t){return m(n.getDate(),t.length)},a(n,t){let e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(n,t){return m(n.getHours()%12||12,t.length)},H(n,t){return m(n.getHours(),t.length)},m(n,t){return m(n.getMinutes(),t.length)},s(n,t){return m(n.getSeconds(),t.length)},S(n,t){let e=t.length,r=n.getMilliseconds(),a=Math.trunc(r*Math.pow(10,e-3));return m(a,t.length)}};var F={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},X={G:function(n,t,e){let r=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"});case"GGGGG":return e.era(r,{width:"narrow"});case"GGGG":default:return e.era(r,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){let r=n.getFullYear(),a=r>0?r:1-r;return e.ordinalNumber(a,{unit:"year"})}return O.y(n,t)},Y:function(n,t,e,r){let a=q(n,r),o=a>0?a:1-a;if(t==="YY"){let i=o%100;return m(i,2)}return t==="Yo"?e.ordinalNumber(o,{unit:"year"}):m(o,t.length)},R:function(n,t){let e=j(n);return m(e,t.length)},u:function(n,t){let e=n.getFullYear();return m(e,t.length)},Q:function(n,t,e){let r=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return m(r,2);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,t,e){let r=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return m(r,2);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,t,e){let r=n.getMonth();switch(t){case"M":case"MM":return O.M(n,t);case"Mo":return e.ordinalNumber(r+1,{unit:"month"});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(r,{width:"wide",context:"formatting"})}},L:function(n,t,e){let r=n.getMonth();switch(t){case"L":return String(r+1);case"LL":return m(r+1,2);case"Lo":return e.ordinalNumber(r+1,{unit:"month"});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(r,{width:"wide",context:"standalone"})}},w:function(n,t,e,r){let a=ye(n,r);return t==="wo"?e.ordinalNumber(a,{unit:"week"}):m(a,t.length)},I:function(n,t,e){let r=he(n);return t==="Io"?e.ordinalNumber(r,{unit:"week"}):m(r,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):O.d(n,t)},D:function(n,t,e){let r=ge(n);return t==="Do"?e.ordinalNumber(r,{unit:"dayOfYear"}):m(r,t.length)},E:function(n,t,e){let r=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"});case"EEEE":default:return e.day(r,{width:"wide",context:"formatting"})}},e:function(n,t,e,r){let a=n.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return m(o,2);case"eo":return e.ordinalNumber(o,{unit:"day"});case"eee":return e.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(a,{width:"short",context:"formatting"});case"eeee":default:return e.day(a,{width:"wide",context:"formatting"})}},c:function(n,t,e,r){let a=n.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return m(o,t.length);case"co":return e.ordinalNumber(o,{unit:"day"});case"ccc":return e.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(a,{width:"narrow",context:"standalone"});case"cccccc":return e.day(a,{width:"short",context:"standalone"});case"cccc":default:return e.day(a,{width:"wide",context:"standalone"})}},i:function(n,t,e){let r=n.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return m(a,t.length);case"io":return e.ordinalNumber(a,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(r,{width:"short",context:"formatting"});case"iiii":default:return e.day(r,{width:"wide",context:"formatting"})}},a:function(n,t,e){let a=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(n,t,e){let r=n.getHours(),a;switch(r===12?a=F.noon:r===0?a=F.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(n,t,e){let r=n.getHours(),a;switch(r>=17?a=F.evening:r>=12?a=F.afternoon:r>=4?a=F.morning:a=F.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let r=n.getHours()%12;return r===0&&(r=12),e.ordinalNumber(r,{unit:"hour"})}return O.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):O.H(n,t)},K:function(n,t,e){let r=n.getHours()%12;return t==="Ko"?e.ordinalNumber(r,{unit:"hour"}):m(r,t.length)},k:function(n,t,e){let r=n.getHours();return r===0&&(r=24),t==="ko"?e.ordinalNumber(r,{unit:"hour"}):m(r,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):O.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):O.s(n,t)},S:function(n,t){return O.S(n,t)},X:function(n,t,e){let r=n.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return we(r);case"XXXX":case"XX":return M(r);case"XXXXX":case"XXX":default:return M(r,":")}},x:function(n,t,e){let r=n.getTimezoneOffset();switch(t){case"x":return we(r);case"xxxx":case"xx":return M(r);case"xxxxx":case"xxx":default:return M(r,":")}},O:function(n,t,e){let r=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+be(r,":");case"OOOO":default:return"GMT"+M(r,":")}},z:function(n,t,e){let r=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+be(r,":");case"zzzz":default:return"GMT"+M(r,":")}},t:function(n,t,e){let r=Math.trunc(+n/1e3);return m(r,t.length)},T:function(n,t,e){return m(+n,t.length)}};function be(n,t=""){let e=n>0?"-":"+",r=Math.abs(n),a=Math.trunc(r/60),o=r%60;return o===0?e+String(a):e+String(a)+t+m(o,2)}function we(n,t){return n%60===0?(n>0?"-":"+")+m(Math.abs(n)/60,2):M(n,t)}function M(n,t=""){let e=n>0?"-":"+",r=Math.abs(n),a=m(Math.trunc(r/60),2),o=m(r%60,2);return e+a+t+o}var ve=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},De=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},it=(n,t)=>{let e=n.match(/(P+)(p+)?/)||[],r=e[1],a=e[2];if(!a)return ve(n,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",ve(r,t)).replace("{{time}}",De(a,t))},ke={p:De,P:it};var st=/^D+$/,dt=/^Y+$/,ct=["D","DD","YY","YYYY"];function Oe(n){return st.test(n)}function Pe(n){return dt.test(n)}function Se(n,t,e){let r=ut(n,t,e);if(console.warn(r),ct.includes(n))throw new RangeError(r)}function ut(n,t,e){let r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${r} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function We(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Ie(n){return!(!We(n)&&typeof n!="number"||isNaN(+g(n)))}var lt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,gt=/^'([^]*?)'?$/,ft=/''/g,ht=/[a-zA-Z]/;function xe(n,t,e){let r=W(),a=e?.locale??r.locale??Q,o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=g(n,e?.in);if(!Ie(s))throw new RangeError("Invalid time value");let d=t.match(mt).map(u=>{let c=u[0];if(c==="p"||c==="P"){let h=ke[c];return h(u,a.formatLong)}return u}).join("").match(lt).map(u=>{if(u==="''")return{isToken:!1,value:"'"};let c=u[0];if(c==="'")return{isToken:!1,value:pt(u)};if(X[c])return{isToken:!0,value:u};if(c.match(ht))throw new RangeError("Format string contains an unescaped latin alphabet character `"+c+"`");return{isToken:!1,value:u}});a.localize.preprocessor&&(d=a.localize.preprocessor(s,d));let l={firstWeekContainsDate:o,weekStartsOn:i,locale:a};return d.map(u=>{if(!u.isToken)return u.value;let c=u.value;(!e?.useAdditionalWeekYearTokens&&Pe(c)||!e?.useAdditionalDayOfYearTokens&&Oe(c))&&Se(c,t,String(n));let h=X[c[0]];return h(s,c,a.localize,l)}).join("")}function pt(n){let t=n.match(gt);return t?t[1].replace(ft,"'"):n}function I(n,t){return g(n,t?.in).getDay()}function Te(n,t){let[e,r]=B(n,t.start,t.end);return{start:e,end:r}}function Me(n,t){let{start:e,end:r}=Te(t?.in,n),a=+e>+r,o=a?+e:+r,i=a?r:e;i.setHours(0,0,0,0);let s=t?.step??1;if(!s)return[];s<0&&(s=-s,a=!a);let d=[];for(;+i<=o;)d.push(y(e,i)),i.setDate(i.getDate()+s),i.setHours(0,0,0,0);return a?d.reverse():d}var Ae=[{id:"7fefb7b9-040f-4043-a1ad-9e9540cb744a",name:"Tonificazione 3",goals:["skill acquisition","power / explosiveness","tabata","muscular endurance","fat loss / body composition"],description:"",programNotes:void 0,startDate:"2025-07-01",cycleLength:void 0,schedule:[{id:"444d2b71-464d-4bbc-8870-761746a90b8d",dayOfWeek:2,routineId:"toning-3-giorno-1",routineName:"Toning 3 - Day 1",notes:"",timeOfDay:"",programId:"7fefb7b9-040f-4043-a1ad-9e9540cb744a"},{id:"15374416-5f25-4f1f-ada7-ebf9aa263df7",dayOfWeek:4,routineId:"toning-3-giorno-2",routineName:"Toning 3 - Day 2",notes:"",timeOfDay:"",programId:"7fefb7b9-040f-4043-a1ad-9e9540cb744a"}],programType:"cycled",isActive:!0},{id:"prog-beginner-3day-v1",name:"Beginner Full-Body Foundation",goals:["strength","hypertrophy","beginner","muscle building"],description:"A 3-day per week program perfect for those new to weight training. You will alternate between two full-body workouts (A and B) to build a solid foundation of strength and muscle across your entire body.",programNotes:"Focus on proper form before increasing weight. The goal is consistency. In week 2, you will perform B-A-B.",startDate:void 0,cycleLength:14,schedule:[{id:"sch-beg-1",dayOfWeek:1,routineId:"beginner-workout-v1-a",routineName:"Beginner Weight Training - Workout A (V1)",notes:"Workout A",timeOfDay:"",programId:"prog-beginner-3day-v1"},{id:"sch-beg-2",dayOfWeek:3,routineId:"beginner-workout-v1-b",routineName:"Beginner Weight Training - Workout B (V1)",notes:"Workout B",timeOfDay:"",programId:"prog-beginner-3day-v1"},{id:"sch-beg-3",dayOfWeek:5,routineId:"beginner-workout-v1-a",routineName:"Beginner Weight Training - Workout A (V1)",notes:"Workout A",timeOfDay:"",programId:"prog-beginner-3day-v1"}],programType:"cycled",isActive:!1},{id:"prog-hypertrophy-4day-v1",name:"Classic Upper/Lower Hypertrophy",goals:["hypertrophy","strength","muscle building"],description:"A classic 4-day upper/lower split designed to maximize muscle growth (hypertrophy). Each major muscle group is trained twice a week with a focus on volume and intensity to stimulate growth.",programNotes:"Ensure you are eating in a caloric surplus to support muscle growth. Rest days on Wednesday, Saturday, and Sunday are crucial for recovery.",startDate:void 0,cycleLength:7,schedule:[{id:"sch-hyper-1",dayOfWeek:1,routineId:"muscle-building-v1-upper-a",routineName:"Muscle Building - Upper Body A (V1)",notes:"Upper Body - Chest & Back focus",timeOfDay:"",programId:"prog-hypertrophy-4day-v1"},{id:"sch-hyper-2",dayOfWeek:2,routineId:"muscle-building-v1-lower-a",routineName:"Muscle Building - Lower Body A (V1)",notes:"Lower Body - Hamstring & Glute focus",timeOfDay:"",programId:"prog-hypertrophy-4day-v1"},{id:"sch-hyper-3",dayOfWeek:4,routineId:"muscle-building-v1-upper-b",routineName:"Muscle Building - Upper Body B (V1)",notes:"Upper Body - Shoulders & Arms focus",timeOfDay:"",programId:"prog-hypertrophy-4day-v1"},{id:"sch-hyper-4",dayOfWeek:5,routineId:"muscle-building-v1-lower-b",routineName:"Muscle Building - Lower Body B (V1)",notes:"Lower Body - Squat pattern focus",timeOfDay:"",programId:"prog-hypertrophy-4day-v1"}],programType:"cycled",isActive:!1},{id:"prog-gpp-kettlebell-3day",name:"Functional Kettlebell GPP",goals:["GPP","functional strength","muscular endurance","power / explosiveness"],description:"A 3-day program focused on building General Physical Preparedness (GPP). It combines intense, kettlebell-centric workouts for the upper body with a heavy leg day to forge well-rounded functional strength and conditioning.",programNotes:"These workouts are intense. Do not be afraid to use a lighter kettlebell to maintain form, especially on the arm and shoulder days.",startDate:void 0,cycleLength:7,schedule:[{id:"sch-gpp-1",dayOfWeek:1,routineId:"f4f6e3c1-4b7e-4b1e-8c3b-2f1a6e9a0b1d",routineName:"Build 3-Dimensional Shoulders",notes:"Focus on shoulder stability and endurance.",timeOfDay:"",programId:"prog-gpp-kettlebell-3day"},{id:"sch-gpp-2",dayOfWeek:3,routineId:"muscle-building-v1-lower-b",routineName:"Muscle Building - Lower Body B (V1)",notes:"Strength and power for the lower body.",timeOfDay:"",programId:"prog-gpp-kettlebell-3day"},{id:"sch-gpp-3",dayOfWeek:5,routineId:"b3c4d5e6-1",routineName:"50 Rep Kettlebell Arm Blaster",notes:"High-volume arm workout for muscular endurance.",timeOfDay:"",programId:"prog-gpp-kettlebell-3day"}],programType:"cycled",isActive:!1},{id:"prog-fatloss-5day-hiit",name:"High-Intensity Fat Loss Circuit",goals:["fat loss / body composition","muscular endurance","cardio","tabata"],description:"A 5-day high-frequency program designed for maximum fat loss and metabolic conditioning. It alternates total-body toning days with brutally intense Tabata circuits to keep your metabolism elevated all week.",programNotes:"Recovery is key. Ensure adequate sleep and nutrition to handle the high frequency of this program. The Tabata days are meant to be performed with maximum intensity.",startDate:void 0,cycleLength:7,schedule:[{id:"sch-fatloss-1",dayOfWeek:1,routineId:"toning-3-giorno-1",routineName:"Toning 3 - Day 1",timeOfDay:"",programId:"prog-fatloss-5day-hiit"},{id:"sch-fatloss-2",dayOfWeek:2,routineId:"a2b3c4d5-1",routineName:"BRUTALLY Intense 4 Minute Kettlebell Fat Loss Routine",timeOfDay:"",programId:"prog-fatloss-5day-hiit"},{id:"sch-fatloss-3",dayOfWeek:3,routineId:"toning-3-giorno-2",routineName:"Toning 3 - Day 2",timeOfDay:"",programId:"prog-fatloss-5day-hiit"},{id:"sch-fatloss-4",dayOfWeek:4,routineId:"a2b3c4d5-1",routineName:"BRUTALLY Intense 4 Minute Kettlebell Fat Loss Routine",timeOfDay:"",programId:"prog-fatloss-5day-hiit"},{id:"sch-fatloss-5",dayOfWeek:5,routineId:"toning-3-giorno-1",routineName:"Toning 3 - Day 1",timeOfDay:"",programId:"prog-fatloss-5day-hiit"}],programType:"cycled",isActive:!1},{id:"prog-advanced-hypertrophy-4day",name:"Advanced Hypertrophy (Superset Focus)",goals:["hypertrophy","advanced","muscular endurance"],description:"An advanced 4-day upper/lower split for experienced lifters. This program utilizes supersets to increase workout density, intensity, and metabolic stress, helping to push past plateaus and stimulate new muscle growth.",programNotes:"This is a high-volume, high-intensity program. It is not recommended for beginners. Ensure your recovery and nutrition are dialed in.",startDate:void 0,cycleLength:7,schedule:[{id:"sch-advhyper-1",dayOfWeek:2,routineId:"muscle-building-v4-upper-a",routineName:"Muscle Building - Upper Body A (V4)",timeOfDay:"",programId:"prog-advanced-hypertrophy-4day"},{id:"sch-advhyper-2",dayOfWeek:3,routineId:"muscle-building-v4-lower-a",routineName:"Muscle Building - Lower Body A (V4)",timeOfDay:"",programId:"prog-advanced-hypertrophy-4day"},{id:"sch-advhyper-3",dayOfWeek:5,routineId:"muscle-building-v4-upper-b",routineName:"Muscle Building - Upper Body B (V4)",timeOfDay:"",programId:"prog-advanced-hypertrophy-4day"},{id:"sch-advhyper-4",dayOfWeek:6,routineId:"muscle-building-v4-lower-b",routineName:"Muscle Building - Lower Body B (V4)",timeOfDay:"",programId:"prog-advanced-hypertrophy-4day"}],programType:"cycled",isActive:!1},{id:"prog-strength-5x5-inspired-3day",name:"Starting Strength Inspired (3-Day)",goals:["strength","beginner","muscle building"],description:"Inspired by classic 3-day full-body programs like 5x5, this schedule uses two alternating workouts to drive progress on core compound lifts. While it uses a 3x10 rep scheme from the base routines, the focus is on linear progression: consistently adding a small amount of weight to the bar each week.",programNotes:"Alternate Workout A and B every time you train. Week 1 is A-B-A. Week 2 will be B-A-B. Your number one goal is to add a little weight to your main lifts each session.",startDate:void 0,cycleLength:14,schedule:[{id:"sch-5x5-1",dayOfWeek:1,routineId:"beginner-workout-v1-a",routineName:"Beginner Weight Training - Workout A (V1)",timeOfDay:"",programId:"prog-strength-5x5-inspired-3day"},{id:"sch-5x5-2",dayOfWeek:3,routineId:"beginner-workout-v1-b",routineName:"Beginner Weight Training - Workout B (V1)",timeOfDay:"",programId:"prog-strength-5x5-inspired-3day"},{id:"sch-5x5-3",dayOfWeek:5,routineId:"beginner-workout-v1-a",routineName:"Beginner Weight Training - Workout A (V1)",timeOfDay:"",programId:"prog-strength-5x5-inspired-3day"}],programType:"cycled",isActive:!1},{id:"prog-strength-531-inspired-4day",name:"5/3/1 Structure Inspired (4-Day)",goals:["strength","hypertrophy","intermediate"],description:"This program is structured like Jim Wendler's 5/3/1, dedicating each day to one main compound lift followed by accessory work. While it doesn't use the specific 5/3/1 percentage and rep schemes, it follows the proven principle of focusing your energy on one heavy lift per session for consistent strength gains.",programNotes:"The main lift is the first exercise of each routine. Focus on progressive overload on this lift over a 4-6 week cycle.",startDate:void 0,cycleLength:7,schedule:[{id:"sch-531-1",dayOfWeek:1,routineId:"wendler-531-day1-ohp",routineName:"5/3/1 - Overhead Press Day",notes:"Main Lift: Overhead Press",timeOfDay:"",programId:"prog-strength-531-inspired-4day"},{id:"sch-531-2",dayOfWeek:2,routineId:"wendler-531-day2-deadlift",routineName:"5/3/1 - Deadlift Day",notes:"Main Lift: Deadlift",timeOfDay:"",programId:"prog-strength-531-inspired-4day"},{id:"sch-531-3",dayOfWeek:4,routineId:"wendler-531-day3-bench",routineName:"5/3/1 - Bench Press Day",notes:"Main Lift: Bench Press",timeOfDay:"",programId:"prog-strength-531-inspired-4day"},{id:"sch-531-4",dayOfWeek:5,routineId:"wendler-531-day4-squat",routineName:"5/3/1 - Squat Day",notes:"Main Lift: Squat",timeOfDay:"",programId:"prog-strength-531-inspired-4day"}],programType:"cycled",isActive:!1},{id:"prog-athletic-performance-4day",name:"Athletic Performance (4-Day)",goals:["power / explosiveness","GPP","functional strength","strength"],description:"A 4-day program for athletes looking to improve overall performance. It balances two heavy strength days with two days focused on explosive power, conditioning, and functional movement patterns using kettlebells and high-intensity circuits.",programNotes:"The goal on strength days is moving heavy weight with good form. The goal on conditioning days is high work-rate and intensity.",startDate:void 0,cycleLength:7,schedule:[{id:"sch-ath-1",dayOfWeek:1,routineId:"muscle-building-v2-lower-b",routineName:"Muscle Building - Lower Body B (V2)",notes:"Maximal Strength & Power",timeOfDay:"",programId:"prog-athletic-performance-4day"},{id:"sch-ath-2",dayOfWeek:2,routineId:"muscle-building-v2-upper-a",routineName:"Muscle Building - Upper Body A (V2)",notes:"Upper Body Strength",timeOfDay:"",programId:"prog-athletic-performance-4day"},{id:"sch-ath-3",dayOfWeek:4,routineId:"f4f6e3c1-4b7e-4b1e-8c3b-2f1a6e9a0b1d",routineName:"Build 3-Dimensional Shoulders",notes:"Kettlebell Power & Conditioning",timeOfDay:"",programId:"prog-athletic-performance-4day"},{id:"sch-ath-4",dayOfWeek:5,routineId:"toning-3-giorno-2",routineName:"Toning 3 - Day 2",notes:"General Physical Preparedness (GPP)",timeOfDay:"",programId:"prog-athletic-performance-4day"}],programType:"cycled",isActive:!1},{id:"prog-time-crunched-3day",name:"Time-Crunched Pro (3-Day)",goals:["GPP","muscular endurance","hypertrophy"],description:"A 3-day program for busy individuals who want maximum results in minimum time. It uses a full-body approach with a mix of heavy lifting and higher-rep toning work to cover all bases efficiently.",programNotes:"Focus on keeping rest periods strict to get the workout done in a timely manner.",startDate:void 0,cycleLength:7,schedule:[{id:"sch-tc-1",dayOfWeek:1,routineId:"beginner-workout-v2-a",routineName:"Beginner Weight Training - Workout A (V2)",timeOfDay:"",programId:"prog-time-crunched-3day"},{id:"sch-tc-2",dayOfWeek:3,routineId:"beginner-workout-v2-b",routineName:"Beginner Weight Training - Workout B (V2)",timeOfDay:"",programId:"prog-time-crunched-3day"},{id:"sch-tc-3",dayOfWeek:5,routineId:"toning-3-giorno-1",routineName:"Toning 3 - Day 1",timeOfDay:"",programId:"prog-time-crunched-3day"}],programType:"cycled",isActive:!1},{id:"prog-bodybuilding-5day-split",name:"Advanced Bodybuilding Split (5-Day)",goals:["hypertrophy","muscle building","advanced"],description:"A high-volume, 5-day split for the serious bodybuilder. This program follows an Upper/Lower split for four days and adds a fifth day dedicated to blasting the arms for maximum growth.",programNotes:"This is an advanced program. Ensure your nutrition, sleep, and recovery are optimal to handle the volume.",startDate:void 0,cycleLength:7,schedule:[{id:"sch-bb-1",dayOfWeek:1,routineId:"muscle-building-v3-upper-a",routineName:"Muscle Building - Upper Body A (V3)",notes:"Upper Body Volume",timeOfDay:"",programId:"prog-bodybuilding-5day-split"},{id:"sch-bb-2",dayOfWeek:2,routineId:"muscle-building-v3-lower-a",routineName:"Muscle Building - Lower Body A (V3)",notes:"Lower Body Volume",timeOfDay:"",programId:"prog-bodybuilding-5day-split"},{id:"sch-bb-3",dayOfWeek:4,routineId:"muscle-building-v3-upper-b",routineName:"Muscle Building - Upper Body B (V3)",notes:"Upper Body Strength",timeOfDay:"",programId:"prog-bodybuilding-5day-split"},{id:"sch-bb-4",dayOfWeek:5,routineId:"muscle-building-v3-lower-b",routineName:"Muscle Building - Lower Body B (V3)",notes:"Lower Body Strength",timeOfDay:"",programId:"prog-bodybuilding-5day-split"},{id:"sch-bb-5",dayOfWeek:6,routineId:"b3c4d5e6-1",routineName:"50 Rep Kettlebell Arm Blaster",notes:"Arm Specialization Day",timeOfDay:"",programId:"prog-bodybuilding-5day-split"}],programType:"cycled",isActive:!1},{id:"prog-strength-5x5-classic-3day",name:"Classic 5x5 Strength Program",goals:["strength","muscle building","beginner","powerlifting"],description:"A classic and highly effective 3-day strength program for beginners. This program is built on the principle of linear progression, focusing on getting stronger in the most important compound lifts by alternating two full-body workouts (A and B).",programNotes:"The schedule is 3 non-consecutive days a week (e.g., Mon/Wed/Fri). You alternate workouts each session. Week 1: A, B, A. Week 2: B, A, B. Your primary goal is to add a small amount of weight to each exercise in every workout.",startDate:void 0,cycleLength:14,schedule:[{id:"sch-5x5-classic-1",dayOfWeek:1,routineId:"5x5-workout-a",routineName:"5x5 Strength - Workout A",timeOfDay:"",programId:"prog-strength-5x5-classic-3day"},{id:"sch-5x5-classic-2",dayOfWeek:3,routineId:"5x5-workout-b",routineName:"5x5 Strength - Workout B",timeOfDay:"",programId:"prog-strength-5x5-classic-3day"},{id:"sch-5x5-classic-3",dayOfWeek:5,routineId:"5x5-workout-a",routineName:"5x5 Strength - Workout A",timeOfDay:"",programId:"prog-strength-5x5-classic-3day"}],programType:"cycled",isActive:!1}];var Be=class n{storageService=A(ee);workoutService=A(re);alertService=A(Z);toastService=A(te);trackingService=A(ae);PROGRAMS_STORAGE_KEY="fitTrackPro_trainingPrograms";programsSubject=new R(this._loadProgramsFromStorage());programs$=this.programsSubject.asObservable();isLoadingProgramsSubject=new R(!0);isLoadingPrograms$=this.isLoadingProgramsSubject.asObservable();constructor(){this.isLoadingProgramsSubject.next(!0);let t=this._loadProgramsFromStorage();this.programsSubject=new R(t),this.programs$=this.programsSubject.asObservable().pipe(J(1)),this._seedAndMergeProgramsFromStaticData(t)}_loadProgramsFromStorage(){let t=this.storageService.getItem(this.PROGRAMS_STORAGE_KEY);return t||[]}_saveProgramsToStorage(t){this.storageService.setItem(this.PROGRAMS_STORAGE_KEY,t),this.programsSubject.next([...t])}_seedAndMergeProgramsFromStaticData(t){try{let e=Ae.map(o=>p(f({},o),{programType:!o.programType||o.programType==="cycled"?"cycled":"linear"})),r=new Set(t.map(o=>o.id)),a=e.filter(o=>!r.has(o.id));if(a.length>0){console.log(`Seeding ${a.length} new training programs from static data`);let o=[...t,...a];this._saveProgramsToStorage(o)}else console.log("No new training programs to seed. All default programs are present in storage")}catch(e){console.error("Failed to process or seed training programs from static data:",e)}finally{this.isLoadingProgramsSubject.next(!1)}}getAllPrograms(){return this.programs$}getProgramsByRoutineId(t){return t?this.programs$.pipe(v(e=>e.filter(r=>r.schedule.some(a=>a.routineId===t)))):P([])}getProgramById(t){return this.programs$.pipe(v(e=>{let r=e.find(a=>a.id===t);if(r&&Array.isArray(r.history)){let a=[...r.history].sort((o,i)=>(i.date?new Date(i.date).getTime():0)-(o.date?new Date(o.date).getTime():0));return p(f({},r),{history:a})}return r}))}addProgram(t){return D(this,null,function*(){let e=this.programsSubject.getValue(),r=p(f({},t),{id:Y(),isActive:!1,schedule:t.schedule.map(o=>p(f({},o),{id:Y()}))}),a=[...e,r];return this._saveProgramsToStorage(a),this.toastService.success(`Program "${r.name}" created.`,3e3,"Program Created"),r})}updateProgram(t){return D(this,null,function*(){let e=this.programsSubject.getValue(),r=e.findIndex(a=>a.id===t.id);if(r>-1){let a=t.schedule.map(s=>p(f({},s),{id:s.id||Y()})),o=p(f({},t),{schedule:a}),i=[...e];return i[r]=o,this._saveProgramsToStorage(i),this.toastService.success(`Program "${o.name}" updated.`,3e3,"Program Updated"),o}this.toastService.error(`Program with ID ${t.id} not found.`,0,"Update Error")})}deleteProgram(t){return D(this,null,function*(){let e=yield E(this.getProgramById(t).pipe(C(1)));if(!e){this.toastService.error("Program not found",0,"Delete Error");return}let r=yield this.alertService.showConfirmationDialog("Delete Program",`Are you sure you want to delete the program "${e.name}"? This action cannot be undone.`,[{text:"Cancel",role:"cancel",data:!1,cssClass:"bg-gray-400 hover:bg-gray-600",icon:"cancel"},{text:"Delete Program",role:"confirm",data:!0,cssClass:"bg-primary hover:bg-primary-dark",icon:"done"}]);if(r&&r.data){let o=this.programsSubject.getValue().filter(i=>i.id!==t);this._saveProgramsToStorage(o),this.toastService.info(`Program "${e.name}" deleted.`,3e3,"Program Deleted")}})}toggleProgramActivation(t,e="completed"){return D(this,null,function*(){let a=this.programsSubject.getValue().find(s=>s.id===t);if(!a){this.toastService.error("Program not found to update",0,"Update Error");return}let o=new Date().toISOString();this.updateProgramHistory(t,e,o);let i=this.programsSubject.getValue().map(s=>s.id===t?p(f({},s),{isActive:!s.isActive,startDate:e==="active"?o:s.startDate,endDate:e==="completed"||e==="cancelled"?o:"-"}):s);if(this._saveProgramsToStorage(i),!a.isActive)this.toastService.success(`Program "${a.name}" is now active.`,3e3,"Program Activated");else{let s="";switch(e){case"completed":s=`Program "${a.name}" marked as completed.`;break;case"archived":s=`Program "${a.name}" archived.`;break;case"cancelled":s=`Program "${a.name}" cancelled.`;break;default:s=`Program "${a.name}" deactivated.`;break}this.toastService.info(s,3e3,"Program Status Updated")}})}deactivateAllPrograms(){return D(this,null,function*(){let t=this.programsSubject.getValue();if(t.length>0){let e=t.map(r=>p(f({},r),{isActive:!1}));this._saveProgramsToStorage(e)}})}deactivateProgram(t,e="completed"){return D(this,null,function*(){let a=this.programsSubject.getValue().find(i=>i.id===t);if(!a){this.toastService.error("Program not found to deactivate",0,"Deactivation Error");return}if(!a.isActive){this.toastService.info(`Program "${a.name}" is already inactive.`,3e3,"Already Inactive");return}this.updateProgramHistory(t,e);let o=this.programsSubject.getValue().map(i=>i.id===t?p(f({},i),{isActive:!1}):i);this._saveProgramsToStorage(o),this.toastService.info(`Program "${a.name}" has been deactivated.`,3e3,"Program Deactivated")})}getActiveProgram(){return this.programs$.pipe(v(t=>t.find(e=>e.isActive)))}getActivePrograms(){return this.programs$.pipe(v(t=>t.filter(e=>e.isActive)))}getDataForBackup(){return this.programsSubject.getValue()}mergeData(t){if(!Array.isArray(t)){console.error("TrainingProgramService: Imported data for programs is not an array."),this.toastService.error("Import failed: Invalid program data file.",0,"Import Error");return}let e=this.programsSubject.getValue(),r=new Map(e.map(s=>[s.id,s])),a=0,o=0;t.forEach(s=>{if(!s.id||!s.name){console.warn("Skipping invalid program during import:",s);return}r.has(s.id)?a++:o++,r.set(s.id,s)});let i=Array.from(r.values());this._saveProgramsToStorage(i),console.log(`TrainingProgramService: Merged imported data. Updated: ${a}, Added: ${o}`),this.toastService.success(`Import complete. ${a} programs updated, ${o} added.`,6e3,"Programs Merged")}findRoutineForDayInProgram(t,e){if(!e||!e.startDate||e.programType==="linear"&&(!e.weeks||e.weeks.length===0)||e.programType!=="linear"&&(!e.schedule||e.schedule.length===0))return null;let r=S(e.startDate),a=w(t);if(a<w(r))return null;let o;if(e.programType==="linear"){let i=x(a,w(r)),s=Math.floor(i/7),d=e.weeks?.[s];if(d){let l=I(t);o=d.schedule.find(u=>u.dayOfWeek===l)}}else{let i=e.cycleLength??7;if(i===7){let s=I(t);o=e.schedule.find(d=>d.dayOfWeek===s)}else{let d=x(a,w(r))%i+1;o=e.schedule.find(l=>l.dayOfWeek===d)}}if(o){let i=this.workoutService.getRoutineByIdSync(o.routineId);if(i)return{routine:i,scheduledDayInfo:o}}return null}getRoutineForDay(t){return this.getActiveProgram().pipe(G(e=>{if(!e)return P(null);let r;if(e.cycleLength&&e.cycleLength>0&&e.startDate){let o=new Date(e.startDate),i=Math.abs(t.getTime()-o.getTime()),d=Math.floor(i/(1e3*60*60*24))%e.cycleLength+1;r=l=>l.dayOfWeek===Number(d)}else{let o=I(t);r=i=>i.dayOfWeek===Number(o)}let a=e.schedule.find(r);return a?this.workoutService.getRoutineById(a.routineId).pipe(v(o=>o?{routine:o,scheduledDayInfo:a}:(console.warn(`Routine with ID ${a.routineId} not found for scheduled day`),null))):P(null)}))}getScheduledRoutinesForDateRange(t,e){return this.getActiveProgram().pipe(G(r=>{if(!r||!r.schedule||r.schedule.length===0)return P([]);let a=[],o=new Date(t);for(;o<=e;){let i,s=new Date(o);if(r.cycleLength&&r.cycleLength>0&&r.startDate){let l=new Date(r.startDate),u=Math.abs(s.getTime()-l.getTime()),c=s>=l?Math.floor(u/(1e3*60*60*24)):-1;if(c>=0){let h=c%r.cycleLength+1;i=b=>b.dayOfWeek===h}else i=()=>!1}else{let l=I(s);i=u=>u.dayOfWeek===l}let d=r.schedule.find(i);d&&a.push(this.workoutService.getRoutineById(d.routineId).pipe(v(l=>l?{date:s,routine:l,scheduledDayInfo:d}:null))),o.setDate(o.getDate()+1)}return a.length===0?P([]):z(a).pipe(v(i=>i.filter(s=>s!==null)))}))}getScheduledRoutinesForDateRangeByProgramId(t,e,r){return this.getProgramById(t).pipe(v(a=>{if(!a||!a.schedule?.length&&!a.weeks?.length)return[];let o=Me({start:e,end:r}),i=[],s=a.startDate?S(a.startDate):new Date(1970,0,1);if(a.programType==="linear"&&a.weeks?.length)o.forEach(d=>{if(d<s)return;let l=x(d,s);if(l<0)return;let u=Math.floor(l/7),c=a.weeks[u];if(c){let h=I(d),b=c.schedule.find($=>$.dayOfWeek===h);b&&i.push({date:d,scheduledDayInfo:b})}});else if(a.programType==="cycled"&&a.schedule?.length){let d=a.cycleLength&&a.cycleLength>0?a.cycleLength:7,l=new Map;a.schedule.forEach(u=>{let c=u.dayOfWeek;l.set(c,u)}),o.forEach(u=>{if(u<s)return;let c;if(d===7){let h=I(u);c=l.get(h)}else{let b=x(u,s)%d+1;c=l.get(b)}c&&i.push({date:u,scheduledDayInfo:c})})}return i}))}updateProgramHistory(t,e,r,a){return D(this,null,function*(){let o=this.programsSubject.getValue(),i=o.findIndex(c=>c.id===t);if(i===-1){this.toastService.error("Program not found to update history",0,"Update Error");return}let s=o[i],d=Array.isArray(s.history)?[...s.history]:[],l;if(typeof e=="object"&&e.id){let c=d.findIndex(h=>h.id===e.id);if(c!==-1){d[c]=f(f({},d[c]),e);let h=d.some(b=>b.status==="active");l=p(f({},s),{history:d,isActive:h}),this.toastService.success("History entry updated.",3e3,"History Updated")}else{this.toastService.error("History entry not found to update.",0,"Update Error");return}}else if(typeof e=="string"){let c=e;if(!s.startDate&&c!=="active"){this.toastService.error("Program does not have a 'starting date'",0,"Finish Error");return}let h=new Date().toISOString(),b=d.findIndex($=>$.status==="active");b!==-1?d[b]=p(f({},d[b]),{endDate:a||(c==="active"?"-":h),status:c,date:new Date().toISOString()}):d.push({endDate:a||(c==="active"?"-":h),programId:s.id,id:Y(),startDate:r||s.startDate,date:new Date().toISOString(),status:c}),l=p(f({},s),{history:d})}else{console.error("Invalid call to updateProgramHistory");return}let u=[...o];u[i]=l,this._saveProgramsToStorage(u)})}removeProgramHistoryEntry(t,e){return D(this,null,function*(){let r=this.programsSubject.getValue(),a=r.find(l=>l.id===t);if(!a){this.toastService.error("Program not found",0,"Remove History Error");return}let o=(a.history||[]).filter(l=>l.id!==e),i=a.isActive;if(a.history&&a.history.length>0){let l=a.history.find(u=>u.id===e);l&&l.status==="active"&&(i=!1)}let s=p(f({},a),{history:o,isActive:i}),d=r.map(l=>l.id===t?s:l);this._saveProgramsToStorage(d),this.toastService.success("History entry removed.",3e3,"History Updated")})}checkAndHandleProgramCompletion(t,e){return D(this,null,function*(){let r=yield E(this.getProgramById(t));if(!r||!r.isActive||r.programType!=="linear"||!r.weeks?.length)return!1;let o=r.weeks.reduce((u,c)=>u.weekNumber>c.weekNumber?u:c).schedule.reduce((u,c)=>u.dayOfWeek>c.dayOfWeek?u:c);if(e.routineId!==o.routineId)return!1;let i=new Set(r.weeks.flatMap(u=>u.schedule.map(c=>c.routineId))),s=yield E(this.trackingService.getWorkoutLogsByProgramIdForDateRange(r.id,S(r.startDate),new Date)),d=new Set(s.map(u=>u.routineId));return[...i].every(u=>d.has(u))?(console.log(`Program "${r.name}" completed!`),yield this.toggleProgramActivation(r.id,"completed"),!0):!1})}getWeekNameForLog(t){return t.programId?this.getProgramById(t.programId).pipe(C(1),v(e=>{if(!e||e.programType!=="linear"||!e.startDate||!e.weeks||e.weeks.length===0)return null;try{let r=w(S(t.date)),a=w(S(e.startDate));if(r<a)return null;let o=x(r,a),i=Math.floor(o/7),s=e.weeks[i];return s?s.name:null}catch(r){return console.error("Error calculating week name for log:",t,r),null}})):P(null)}getDayOfWeekForLog(t){return t.programId?this.getProgramById(t.programId).pipe(C(1),v(e=>{if(!e||!e.startDate)return null;try{let r=w(S(t.date)),a=w(S(e.startDate));if(r<a)return null;if(e.programType==="linear"||e.programType==="cycled"&&(e.cycleLength===7||!e.cycleLength)){let o=I(r),i=xe(r,"EEEE");return{dayNumber:o,dayName:i}}if(e.programType==="cycled"&&e.cycleLength&&e.cycleLength!==7){let i=x(r,a)%e.cycleLength+1,s=`Day ${i}`;return{dayNumber:i,dayName:s}}return null}catch(r){return console.error("Error calculating day of week for log:",t,r),null}})):P(null)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};export{W as a,k as b,B as c,w as d,H as e,Ie as f,x as g,Me as h,ye as i,xe as j,I as k,Be as l};
