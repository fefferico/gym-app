import{u as S}from"./chunk-N5ZWVAHT.js";import{M as D,za as P}from"./chunk-KKCDOSIA.js";import{g as O}from"./chunk-GAL4ENT6.js";var v=class p{transform(o,t="dd/MM/yy HH:mm"){if(o==null||!isFinite(o))return"";try{let e=new Date(o);return S(e,t)}catch(e){return console.error(`Error formatting date from milliseconds value: ${o}`,e),"Invalid Date"}}static \u0275fac=function(t){return new(t||p)};static \u0275pipe=P({name:"millisecondsDate",type:p,pure:!0})};var N=class p{audioCtx=null;constructor(){}playSound(o){return O(this,null,function*(){if(this.initializeAudioContext(),!this.audioCtx)return;this.audioCtx.state==="suspended"&&this.audioCtx.resume();let t=this.audioCtx.currentTime,e=this.audioCtx.createOscillator(),i=this.audioCtx.createGain(),s=this.audioCtx.createGain(),r=this.audioCtx.createGain(),a=this.audioCtx.createOscillator(),n=this.audioCtx.createOscillator(),u=this.audioCtx.createOscillator(),E=this.audioCtx.createOscillator();switch(o){case"countdown":e.type="sine",e.frequency.setValueAtTime(880,t),i.gain.setValueAtTime(2,t),i.gain.exponentialRampToValueAtTime(1e-4,t+.15),e.connect(i),i.connect(this.audioCtx.destination),e.start(t),e.stop(t+.15);break;case"end":s.gain.setValueAtTime(.8,t),s.gain.exponentialRampToValueAtTime(1e-4,t+2),a.type="sine",a.frequency.setValueAtTime(110,t),n.type="sine",n.frequency.setValueAtTime(220,t),u.type="sine",u.frequency.setValueAtTime(330,t),a.connect(s),n.connect(s),u.connect(s),s.connect(this.audioCtx.destination),a.start(t),a.stop(t+2),n.start(t),n.stop(t+2),u.start(t),u.stop(t+2);break;case"error":e.type="sawtooth",e.frequency.setValueAtTime(600,t),e.frequency.linearRampToValueAtTime(300,t+.25),i.gain.setValueAtTime(.4,t),i.gain.exponentialRampToValueAtTime(1e-4,t+.25),e.connect(i),i.connect(this.audioCtx.destination),e.start(t),e.stop(t+.25);break;case"correct":i.gain.setValueAtTime(.5,t),i.gain.exponentialRampToValueAtTime(1e-4,t+.7),a.type="sine",a.frequency.setValueAtTime(784,t),n.type="sine",n.frequency.setValueAtTime(1568,t),r.gain.setValueAtTime(.5,t),a.connect(i),n.connect(r),r.connect(i),i.connect(this.audioCtx.destination),a.start(t),a.stop(t+.7),n.start(t),n.stop(t+.7);break;case"untoggle":i.gain.setValueAtTime(.3,t),i.gain.exponentialRampToValueAtTime(1e-4,t+1),e.type="triangle",e.frequency.setValueAtTime(120,t),e.connect(i),i.connect(this.audioCtx.destination),e.start(t),e.stop(t+.1);break;case"whoosh":let y=.3;i.gain.setValueAtTime(1,t),i.gain.exponentialRampToValueAtTime(1e-4,t+y);let d=this.audioCtx.createBiquadFilter();d.type="bandpass",d.Q.value=15,d.frequency.setValueAtTime(4e3,t),d.frequency.exponentialRampToValueAtTime(100,t+y);let R=this.audioCtx.sampleRate*y,b=this.audioCtx.createBuffer(1,R,this.audioCtx.sampleRate),F=b.getChannelData(0);for(let l=0;l<R;l++)F[l]=Math.random()*2-1;let C=this.audioCtx.createBufferSource();C.buffer=b,C.connect(d),d.connect(i),i.connect(this.audioCtx.destination),C.start(t),C.stop(t+y);break;case"tada":s.gain.setValueAtTime(.6,t),s.gain.exponentialRampToValueAtTime(1e-4,t+1.2),s.connect(this.audioCtx.destination),a.type="triangle",a.frequency.setValueAtTime(523.25,t),a.connect(s),a.start(t),a.stop(t+.15),n.type="triangle",n.frequency.setValueAtTime(783.99,t+.15),n.connect(s),n.start(t+.15),n.stop(t+.3),u.type="triangle",u.frequency.setValueAtTime(1046.5,t+.3),u.connect(s),u.start(t+.3),u.stop(t+5);break;case"tatatada":s.gain.setValueAtTime(.6,t),s.gain.exponentialRampToValueAtTime(1e-4,t+3.5),s.connect(this.audioCtx.destination);let z=261.63,I=392,M=523.25,B=783.99,T=.15,q=.1,c=t,w=(l,G,x)=>{if(!this.audioCtx)return;let g=this.audioCtx.createOscillator(),A=this.audioCtx.createGain();g.type="triangle",g.frequency.setValueAtTime(l,x),A.gain.setValueAtTime(0,x),A.gain.linearRampToValueAtTime(1,x+.01),A.gain.exponentialRampToValueAtTime(1e-4,x+G),g.connect(A),A.connect(s),g.start(x),g.stop(x+G)};w(z,T,c),c+=T+q,w(I,T,c),c+=T+q,w(M,T,c),c+=T+q;let k=2,f=this.audioCtx.createOscillator(),h=this.audioCtx.createGain();f.type="triangle",f.frequency.setValueAtTime(B,c),h.gain.setValueAtTime(0,c),h.gain.linearRampToValueAtTime(1,c+.05),h.gain.exponentialRampToValueAtTime(1e-4,c+k+.5),f.connect(h),h.connect(s),f.start(c),f.stop(c+k+.5);break;case"magic":{this.playMagicRestoreSound();break}case"pop":{this.playPopSound();break}case"referee":let V=.4,m=this.audioCtx.createGain();m.gain.setValueAtTime(0,t),m.gain.linearRampToValueAtTime(.8,t+.05),m.gain.setValueAtTime(.8,t+V-.05),m.gain.linearRampToValueAtTime(1e-4,t+V),m.connect(this.audioCtx.destination),a.type="triangle",a.frequency.setValueAtTime(3e3,t),a.connect(m),n.type="triangle",n.frequency.setValueAtTime(3080,t),n.connect(m),a.start(t),a.stop(t+V),n.start(t),n.stop(t+V);break;case"tick":{e.type="square";let l=.018;e.frequency.setValueAtTime(3500,t),e.frequency.exponentialRampToValueAtTime(800,t+l),i.gain.setValueAtTime(1,t),i.gain.exponentialRampToValueAtTime(1e-4,t+l),e.connect(i),i.connect(this.audioCtx.destination),e.start(t),e.stop(t+l);break}}})}initializeAudioContext(){if(!this.audioCtx)try{this.audioCtx=new(window.AudioContext||window.webkitAudioContext)}catch{console.error("Web Audio API is not supported in this browser")}}playMagicRestoreSound(){if(this.initializeAudioContext(),!this.audioCtx)return;let o=this.audioCtx.currentTime,t=[622.25,783.99,932.33],e=this.audioCtx.createGain();e.gain.setValueAtTime(.3,o),e.connect(this.audioCtx.destination),t.forEach((i,s)=>{if(!this.audioCtx)return;let r=this.audioCtx.createOscillator(),a=this.audioCtx.createGain();r.type="sine",r.frequency.setValueAtTime(i,o),r.connect(a),a.connect(e);let n=o+s*.08;a.gain.setValueAtTime(0,n),a.gain.linearRampToValueAtTime(.4,n+.05),a.gain.exponentialRampToValueAtTime(1e-4,n+1.5),r.start(n),r.stop(n+1.5)})}playPopSound(){if(this.initializeAudioContext(),!this.audioCtx)return;let o=this.audioCtx.currentTime,t=this.audioCtx.createOscillator(),e=this.audioCtx.createGain();t.type="sine";let i=880,s=150,r=.1;t.frequency.setValueAtTime(i,o),t.frequency.exponentialRampToValueAtTime(s,o+r),e.gain.setValueAtTime(.8,o),e.gain.exponentialRampToValueAtTime(1e-4,o+.2),t.connect(e),e.connect(this.audioCtx.destination),t.start(o),t.stop(o+.25)}static \u0275fac=function(t){return new(t||p)};static \u0275prov=D({token:p,factory:p.\u0275fac,providedIn:"root"})};export{v as a,N as b};
