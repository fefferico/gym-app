import{B as k,E as D,H as B,I as j,O as K,U as G,d as C,f as F,h as _,j as I,l as V,q as x,v as R,y as w}from"./chunk-HCPWZBZ7.js";import{a as P,v as U}from"./chunk-CHWLR2DY.js";import{K as M,O as p,X as O,l as y,md as A,od as N,rd as W}from"./chunk-C2TXFJXN.js";import{a as E,g as T}from"./chunk-GAL4ENT6.js";var H=class ${unitsService=p(j);translate=p(N);appSettingsService=p(P);injector=p(O);_exerciseService;get exerciseService(){return this._exerciseService||(this._exerciseService=this.injector.get(G)),this._exerciseService}alertService=p(W);subscriptionService=p(U);ROUTINES_STORAGE_KEY="fitTrackPro_routines";PAUSED_WORKOUT_KEY="fitTrackPro_pausedWorkoutState";PAUSED_STATE_VERSION="1.2";toastService=p(A);progressiveOverloadService=p(B);formatMetricForLogged(e,r){switch(r){case"weight":if(e.type==="bodyweight")return"Bodyweight";if(e.type==="exact")return`${e.value}`;if(e.type==="percentage_1rm")return`${e.percentage}% 1RM`;if(e.type==="range")return`${e.min}-${e.max} kg`;break;case"reps":if(e.type==="exact")return`${e.value}`;if(e.type==="range")return`${e.min}-${e.max}`;break;case"duration":if(e.type==="exact")return`${e.seconds}`;if(e.type==="range")return`${e.minSeconds}-${e.maxSeconds}`;break;case"distance":if(e.type==="exact")return`${e.value}`;if(e.type==="range")return`${e.min}-${e.max}`;break;case"rest":if(e.type==="exact")return`${e.seconds}`;if(e.type==="range")return`${e.minSeconds}-${e.maxSeconds}`;break;default:return e.value?e.value.toString():"-"}return"-"}formatMetricTarget(e,r,n=!1){if(!e)return"-";if(n)return this.formatMetricForLogged(e,r);switch(r){case"weight":if(e.type==="bodyweight")return"Bodyweight";if(e.type==="exact")return`${e.value}`;if(e.type==="percentage_1rm")return`${e.percentage}% 1RM`;if(e.type==="range")return`${e.min}-${e.max}`;break;case"reps":if(e.type==="exact")return`${e.value}`;if(e.type==="range")return`${e.min}-${e.max}`;if(e.type==="max")return"Max reps";if(e.type==="amrap")return"AMRAP";break;case"duration":if(e.type==="exact")return`${e.seconds}`;if(e.type==="range")return`${e.minSeconds}-${e.maxSeconds}`;break;case"distance":if(e.type==="exact")return`${e.value}`;if(e.type==="range")return`${e.min}-${e.max}`;break;case"rest":if(e.type==="exact")return`${e.seconds}`;if(e.type==="range")return`${e.minSeconds}-${e.maxSeconds}`;break;default:return e.value?e.value.toString():"-"}return"-"}getRepsValue(e){if(e){if(e&&e.type==="exact")return e.value;if(e&&e.type==="range")return Math.floor((e.min+e.max)/2);if(e&&e.type==="min_plus")return e.value}}getWeightValue(e){if(e){if(e&&e.type==="exact")return e.value;if(e&&e.type==="range")return Math.floor((e.min+e.max)/2)}}getDurationValue(e){if(e){if(e&&e.type==="exact")return e.seconds;if(e&&e.type==="range")return Math.floor((e.minSeconds+e.maxSeconds)/2)}}getRestValue(e){if(e){if(e&&e.type==="exact")return e.seconds;if(e&&e.type==="range")return Math.floor((e.minSeconds+e.maxSeconds)/2)}}getDistanceValue(e){if(e){if(e&&e.type==="exact")return e.value;if(e&&e.type==="range")return Math.floor((e.min+e.max)/2)}}isTargetVisible(e,r){switch(r){case"reps":return this.isRepsTargetVisible(e);case"weight":return this.isWeightTargetVisible(e);case"duration":return this.isDurationTargetVisible(e);case"distance":return this.isDistanceTargetVisible(e);case"rest":return this.isRestTargetVisible(e);default:return!1}}isWeightTargetVisible(e){if(!e||typeof e!="object"||!("type"in e))return!1;switch(e.type){case"exact":return typeof e.value=="number"&&e.value>0;case"range":return typeof e.min=="number"&&typeof e.max=="number"&&(e.min>0||e.max>0);case"bodyweight":return!0;case"percentage_1rm":return typeof e.percentage=="number"&&e.percentage>0;default:return!1}}isRepsTargetVisible(e){if(!e||typeof e!="object"||!("type"in e))return!1;switch(e.type){case"exact":case"min_plus":return typeof e.value=="number"&&e.value>0;case"range":return typeof e.min=="number"&&typeof e.max=="number"&&(e.min>0||e.max>0);case"amrap":case"max":case"max_fraction":return!0;default:return!1}}isDurationTargetVisible(e){if(!e||typeof e!="object"||!("type"in e))return!1;switch(e.type){case"exact":return typeof e.seconds=="number"&&e.seconds>0;case"range":return typeof e.minSeconds=="number"&&typeof e.maxSeconds=="number"&&(e.minSeconds>0||e.maxSeconds>0);default:return!1}}isDistanceTargetVisible(e){if(!e||typeof e!="object"||!("type"in e))return!1;switch(e.type){case"exact":return typeof e.value=="number"&&e.value>0;case"range":return typeof e.min=="number"&&typeof e.max=="number"&&(e.min>0||e.max>0);default:return!1}}isRestTargetVisible(e){if(!e||typeof e!="object"||!("type"in e))return!1;switch(e.type){case"exact":return typeof e.seconds=="number"&&e.seconds>0;case"range":return typeof e.minSeconds=="number"&&typeof e.maxSeconds=="number"&&(e.minSeconds>0||e.maxSeconds>0);default:return!1}}getSetTargetDisplay(e,r){if(!e)return"";let n=-1,o=-1,t=-1;switch(r){case"reps":if(e.targetReps){if(e.targetReps.type==="range")n=e.targetReps.min,o=e.targetReps.max;else if(e.targetReps.type==="exact"||e.targetReps.type==="min_plus")t=e.targetReps.value;else if(e.targetReps.type==="amrap"||e.targetReps.type==="max")return"Max"}break;case"weight":if(e.targetWeight)if(e.targetWeight.type==="range")n=e.targetWeight.min,o=e.targetWeight.max;else if(e.targetWeight.type==="exact")t=e.targetWeight.value;else{if(e.targetWeight.type==="bodyweight")return"Bodyweight";if(e.targetWeight.type==="percentage_1rm")return`${e.targetWeight.percentage}% 1RM`}break;case"duration":if(e.targetDuration){if(e.targetDuration.type==="range")n=e.targetDuration.minSeconds,o=e.targetDuration.maxSeconds;else if(e.targetDuration.type==="exact")t=e.targetDuration.seconds;else if(e.targetDuration.type==="to_failure")return"To Failure"}break;case"distance":e.targetDistance&&(e.targetDistance.type==="range"?(n=e.targetDistance.min,o=e.targetDistance.max):e.targetDistance.type==="exact"&&(t=e.targetDistance.value));break;case"rest":e.targetRest&&(e.targetRest.type==="range"?(n=e.targetRest.minSeconds,o=e.targetRest.maxSeconds):e.targetRest.type==="exact"&&(t=e.targetRest.seconds));break;case"tempo":return e.targetTempo||"";default:break}return n>=0&&o>=0?n===o?n.toString():`${n}-${o}`:n>=0?`${n}+`:t>=0?t.toString():""}getSetWeightDisplay(e,r){let n=e.weightLogged,o=n??e.targetWeight;return r?.category==="cardio"||r?.category==="stretching"?o!=null&&o>0?`${o} ${this.unitsService.getWeightUnitSuffix()}`:this.translate.instant("workoutService.display.weightNotApplicable"):r?.category==="bodyweight-calisthenics"?o!=null&&o>0?`${o} ${this.unitsService.getWeightUnitSuffix()}`:this.translate.instant("workoutService.display.bodyweight"):o!=null&&o>0?`${o} ${this.unitsService.getWeightUnitSuffix()}`:o===0?this.translate.instant("workoutService.display.noAddedWeight"):this.translate.instant("workoutService.display.userDefined")}checkIfMetricIsVisible(e,r,n=!1){if(!e)return!1;let o=t=>{let s=!1,a=!1;switch(r){case"duration":let i=n?t?.durationLogged:t?.targetDuration;s=this.isDurationTargetVisible(i);break;case"weight":let f=n?t?.weightLogged:t?.targetWeight;s=this.isWeightTargetVisible(f);break;case"reps":let u=n?t?.repsLogged:t?.targetReps;s=this.isRepsTargetVisible(u);break;case"distance":let c=n?t?.distanceLogged:t?.targetDistance;s=this.isDistanceTargetVisible(c);break;case"rest":let d=n?t?.restLogged:t?.targetRest;s=this.isRestTargetVisible(d);break;default:return!1}if(this.isLoggedSet(t))switch(r){case"duration":a=this.isDurationTargetVisible(t?.durationLogged);break;case"weight":a=this.isWeightTargetVisible(t?.weightLogged);break;case"reps":a=this.isRepsTargetVisible(t?.repsLogged);break;case"distance":a=this.isDistanceTargetVisible(t?.distanceLogged);break;case"rest":a=this.isRestTargetVisible(t?.restLogged);break;default:a=!1}return s||a};if(typeof e.get=="function"){let t=typeof e.getRawValue=="function"?e.getRawValue():e.value;return t&&Array.isArray(t.sets)?t.sets.some(o):o(t)}return e.sets&&Array.isArray(e.sets)?e.sets.some(o):o(e)}getVisibleExerciseColumns(e,r,n=!1){let o=e.exercises[r];if(!o||o.sets?.length===0)return{weight:!1,reps:!1,distance:!1,duration:!1,tempo:!1,rest:!1};let t=E({},o),s=E({},K(o)),a={};return n?a={weight:s.sets.some(i=>i.targetWeight)||s.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("weight")),reps:s.sets.some(i=>i.targetReps)||s.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("reps")),distance:s.sets.some(i=>i.targetDistance)||s.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("distance")),duration:s.sets.some(i=>i.targetDuration)||s.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("duration")),rest:s.sets.some(i=>i.targetRest)||s.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("rest")),tempo:s.sets.some(i=>i.targetTempo)||s.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("tempo"))}:a={weight:t.sets.some(i=>i.targetWeight)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("weight")),reps:t.sets.some(i=>i.targetReps)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("reps")),distance:t.sets.some(i=>i.targetDistance)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("distance")),duration:t.sets.some(i=>i.targetDuration)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("duration")),rest:t.sets.some(i=>i.targetRest)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("rest")),tempo:t.sets.some(i=>i.targetTempo)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("tempo"))},a}getVisibleSetColumns(e,r,n){let t=e.exercises[r]?.sets[n];if(!t)return{weight:!1,reps:!1,distance:!1,duration:!1,tempo:!1};let s;if(this.isLoggedSet(t))s={weight:!!t.fieldOrder?.includes("weight"),reps:!!t.fieldOrder?.includes("reps"),distance:!!t.fieldOrder?.includes("distance"),duration:!!t.fieldOrder?.includes("duration"),tempo:!!(t.targetTempo?.trim()||t.fieldOrder?.includes("tempo")),rest:!!t.fieldOrder?.includes("rest")};else{let a=t;s={weight:!!(a.targetWeight||a.fieldOrder?.includes("weight")),reps:!!(a.targetReps||a.fieldOrder?.includes("reps")),distance:!!(a.targetDistance||a.fieldOrder?.includes("distance")),duration:!!(a.targetDuration||a.fieldOrder?.includes("duration")),tempo:!!(a.targetTempo?.trim()||a.fieldOrder?.includes("tempo")),rest:!!(a.targetRest||a.fieldOrder?.includes("rest"))}}return s}promptAddField(e,r,n,o=!1){return T(this,null,function*(){let{hidden:t}=this.getFieldsForSet(e,r,n);if(t.length===0)return this.toastService.info(this.translate.instant("toasts.allMetricsAdded")),null;let s=!!e.exercises[r].supersetId,a;if(s){let m=["weight","reps"];if(a=t.filter(v=>m.includes(v)),a.every(v=>!m.includes(v)))return this.toastService.info("Only 'Weight' and 'Reps' can be added to sets within a superset."),null}let i=a||t,f=this.appSettingsService.getSettings();if(o&&f.enableTrueGymMode){let q=(yield y(this.exerciseService.getExerciseById(e.exercises[r].exerciseId)))?.category==="cardio"?["duration","distance"]:["weight","reps"];i=i.filter(J=>q.includes(J))}if(i.length===0)return this.toastService.info(this.translate.instant("toasts.trueGymModeNoMetrics")),null;let u=i.map(m=>({text:this.translate.instant("metrics."+m),role:"add",data:m,icon:m}));u.push({text:this.translate.instant("common.cancel"),role:"cancel",data:null,icon:"cancel"});let c=yield this.alertService.showConfirmationDialog(this.translate.instant("workoutBuilder.prompts.addField.title"),this.translate.instant("workoutBuilder.prompts.addField.message",{setNumber:n+1}),u,{showCloseButton:!0});if(!c||!c.data)return null;let d=c.data,S=this.translate.instant("metrics."+d),h=this.translate.instant("workoutBuilder.prompts.setTarget.title",{field:S}),l=0;switch(d){case"weight":h+=` (${this.unitsService.getWeightUnitSuffix()})`,l=10;break;case"reps":l=8;break;case"duration":h+=" (s)",l=60;break;case"rest":h+=" (s)",l=60;break;case"distance":h+=` (${this.unitsService.getDistanceMeasureUnitSuffix()})`,l=1;break;case"tempo":l="2-0-1-0";break}let L=d!=="tempo"?{min:"0",step:"any"}:{},g=yield this.alertService.showPromptDialog(this.translate.instant("workoutBuilder.prompts.setTarget.title",{field:S}),this.translate.instant("workoutBuilder.prompts.setTarget.message",{setNumber:n+1}),[{name:"targetValue",type:d==="tempo"?"text":"number",label:this.translate.instant("metrics."+d),value:l,attributes:L}],this.translate.instant("workoutBuilder.prompts.setTarget.applyButton"));if(!g||g.targetValue===null||g.targetValue===void 0)return null;let b=g.targetValue;return Array.isArray(b)&&(b=b[0]??0),this.addFieldToSet(e,r,n,d,b)})}defaultHiddenFields(){return{visible:[],hidden:this.getDefaultFields()}}getRepsAndWeightFields(){return["reps","weight"]}getDefaultFields(){return["weight","reps","distance","duration","tempo","rest"]}getFieldsForSet(e,r,n){let o=this.getDefaultFields(),t=this.getVisibleSetColumns(e,r,n),s=o.filter(i=>t[i]),a=o.filter(i=>!s.includes(i));return{visible:s,hidden:a}}addFieldToSet(e,r,n,o,t){let s=JSON.parse(JSON.stringify(e)),a=s.exercises[r].sets[n];if(!a.fieldOrder){let{visible:i}=this.getFieldsForSet(e,r,n);a.fieldOrder=i}switch(a.fieldOrder.includes(o)||a.fieldOrder.push(o),o){case"weight":{let i;typeof t=="number"?i=R(t):typeof t=="string"&&!isNaN(Number(t))?i=R(Number(t)):typeof t=="object"&&t&&"type"in t?i=t:i=R(0),a.targetWeight=i,this.isLoggedRoutine(e)&&(a.weightLogged=i,delete a.targetWeight);break}case"reps":{let i;typeof t=="number"?i=x(t):typeof t=="string"&&!isNaN(Number(t))?i=x(Number(t)):typeof t=="object"&&t&&"type"in t?i=t:i=x(0),a.targetReps=i,this.isLoggedRoutine(e)&&(a.repsLogged=i,delete a.targetReps);break}case"distance":{let i;typeof t=="number"?i=k(t):typeof t=="string"&&!isNaN(Number(t))?i=k(Number(t)):typeof t=="object"&&t&&"type"in t?i=t:i=k(0),a.targetDistance=i,this.isLoggedRoutine(e)&&(a.distanceLogged=i,delete a.targetDistance);break}case"duration":{let i;typeof t=="number"?i=w(t):typeof t=="string"&&!isNaN(Number(t))?i=w(Number(t)):typeof t=="object"&&t&&"type"in t?i=t:i=w(0),a.targetDuration=i,this.isLoggedRoutine(e)&&(a.durationLogged=i,delete a.targetDuration);break}case"rest":{let i;typeof t=="number"?i=D(t):typeof t=="string"&&!isNaN(Number(t))?i=D(Number(t)):typeof t=="object"&&t&&"type"in t?i=t:i=D(0),a.targetRest=i,this.isLoggedRoutine(e)&&(a.restLogged=i,delete a.targetRest);break}case"tempo":{let i=typeof t=="string"?t:"";a.targetTempo=i,this.isLoggedRoutine(e)&&(a.tempoLogged=i);break}default:{o in a&&(a[o]=t);break}}return s}promptRemoveField(e,r,n,o=!1){return T(this,null,function*(){let t=this.getVisibleSetColumns(e,r,n),s=Object.keys(t).filter(l=>t[l]),a=this.appSettingsService.getSettings();if(o&&(s=s.filter(l=>l!=="rest"),a.enableTrueGymMode)){let g=(yield y(this.exerciseService.getExerciseById(e.exercises[r].exerciseId)))?.category==="cardio"?["duration","distance"]:["weight","reps"];s=s.filter(b=>g.includes(b))}if(s.length===0){let l=yield y(this.translate.get("workoutService.alerts.removeField.noFieldsToast"));return this.toastService.info(l),e}if(s.length===1){let l=yield y(this.translate.get("workoutService.alerts.removeField.atLeastOneMetric"));return this.toastService.info(l),e}let f=["workoutService.alerts.removeField.title","workoutService.alerts.removeField.message","common.cancel",...s.map(l=>`metrics.${l}`)],u=yield y(this.translate.get(f)),c=s.map(l=>({text:u[`metrics.${l}`],role:"remove",data:l,icon:l,cssClass:"bg-red-500 hover:bg-red-600"}));c.push({text:u["common.cancel"],role:"cancel",data:null,icon:"cancel"});let d=yield this.alertService.showConfirmationDialog(u["workoutService.alerts.removeField.title"],u["workoutService.alerts.removeField.message"],c,{showCloseButton:!0});if(!d||!d.data)return null;let S=d.data;return this.removeMetricFromSet(e,r,n,S)})}removeMetricFromSet(e,r,n,o){let t=JSON.parse(JSON.stringify(e)),s=t.exercises[r].sets[n];return this.isLoggedRoutine(t)?s[`${o}Logged`]=void 0:(s[`target${o.charAt(0).toUpperCase()+o.slice(1)}`]=void 0,s[`target${o.charAt(0).toUpperCase()+o.slice(1)}Min`]=void 0,s[`target${o.charAt(0).toUpperCase()+o.slice(1)}Max`]=void 0,s[`${o}Used`]=void 0,s[`${o}Achieved`]=void 0,s[`${o}AfterSet`]=void 0),s.fieldOrder&&(s.fieldOrder=s.fieldOrder.filter(a=>a!==o)),this.toastService.info(this.translate.instant("toasts.fieldRemovedFromSet",{fieldToRemove:this.translate.instant(`metrics.${o}`).toUpperCase(),setIndex:n+1})),t}getSetFieldOrder(e,r,n){let t=e?.exercises?.[r]?.sets?.[n];return t&&Array.isArray(t.fieldOrder)?t.fieldOrder:null}isLoggedSet(e){return e&&e.workoutLogId&&(typeof e.repsLogged<"u"||typeof e.weightLogged<"u"||typeof e.durationLogged<"u"||typeof e.distanceLogged<"u"||typeof e.tempoLogged<"u")}getSetFieldValue(e,r){if(!e)return"-";if(this.isLoggedSet(e))switch(r){case"reps":return(this.getRepsValue(e.repsLogged)??"-").toString();case"weight":return e.weightLogged!=null?(this.getWeightValue(e.weightLogged)??"-").toString():"-";case"distance":return(this.getDistanceValue(e.distanceLogged)??"-").toString();case"duration":return e.durationLogged!==void 0&&e.durationLogged!==null&&this.getDurationValue(e.durationLogged)!==void 0?this.formatSecondsToTime(this.getDurationValue(e.durationLogged).toString()):"-";case"rest":return e.restLogged!==void 0&&e.restLogged!==null&&this.getRestValue(e.restLogged)!==void 0?this.formatSecondsToTime(this.getRestValue(e.restLogged).toString()):"-";case"tempo":return e.tempoLogged||"-";default:return"-"}else{let n=e;switch(r){case"reps":return n.targetReps&&n.targetReps.type==="range"?Math.floor((n.targetReps.min+n.targetReps.max)/2).toString():(this.getRepsValue(n.targetReps)??"-").toString();case"weight":return n.targetWeight&&n.targetWeight.type==="range"?Math.floor((n.targetWeight.min+n.targetWeight.max)/2).toString():(this.getWeightValue(n.targetWeight)??"-").toString();case"distance":return n.targetDistance&&n.targetDistance.type==="range"?Math.floor((n.targetDistance.min+n.targetDistance.max)/2).toString():(this.getDistanceValue(n.targetDistance)??"-").toString();case"duration":return n.targetDuration&&n.targetDuration.type==="range"?Math.floor((n.targetDuration.minSeconds+n.targetDuration.maxSeconds)/2).toString():(this.getDurationValue(n.targetDuration)??"-").toString();case"rest":return n.targetRest&&n.targetRest.type==="range"?Math.floor((n.targetRest.minSeconds+n.targetRest.maxSeconds)/2).toString():(this.getRestValue(n.targetRest)??"-").toString();case"tempo":return n.targetTempo||"-";default:return"-"}}}_formatSingleSecondValue(e){let r;if(typeof e=="number")r=e;else{let t=e.trim().toLowerCase();if(t.includes(":")){let s=t.split(":");if(s.length===2){let a=parseFloat(s[0]),i=parseFloat(s[1]);if(!isNaN(a)&&!isNaN(i))r=a*60+i;else return""}else return""}else if(t.includes("m")||t.includes("minute")){let s=parseFloat(t.replace(/m|minute|minutes/g,""));if(!isNaN(s))r=s*60;else return""}else if(t.includes("s")||t.includes("second")){let s=parseFloat(t.replace(/s|second|seconds/g,""));if(!isNaN(s))r=s;else return""}else if(r=parseFloat(t),isNaN(r))return""}let n=String(Math.floor(r/60)).padStart(2,"0"),o=String(r%60).padStart(2,"0");return`${n}:${o}`}formatSecondsToTime(e){if(e==null||e==="")return"";if(typeof e=="string"&&e.includes("-")){let[r,n]=e.split("-"),o=this._formatSingleSecondValue(r),t=this._formatSingleSecondValue(n);return`${o}-${t}`}return this._formatSingleSecondValue(e)}getAvailableRepsSchemes(e){return C.filter(n=>e==="builder"?n.availableInBuilder:n.availableInPlayer).map(n=>({type:n.type,label:this.translate.instant(n.labelKey)}))}getAvailableWeightSchemes(e){return F.filter(r=>e==="builder"?r.availableInBuilder:r.availableInPlayer).map(r=>({type:r.type,label:this.translate.instant(r.labelKey)}))}repsTargetAsString(e){if(!e)return"";switch(e.type){case"exact":return`${e.value}`;case"range":return`${e.min}-${e.max}`;case"amrap":return"AMRAP";case"min_plus":return`${e.value}+`;default:return""}}weightTargetAsString(e){if(!e)return"";switch(e.type){case"exact":return`${e.value}`;case"range":return`${e.min}-${e.max}`;case"bodyweight":return this.translate.instant("weightSchemes.bodyweight");case"percentage_1rm":return`${e.percentage}% 1RM`;default:return""}}getAvailableDurationSchemes(e){return _.filter(r=>e==="builder"?r.availableInBuilder:r.availableInPlayer).map(r=>({type:r.type,label:this.translate.instant(r.labelKey)}))}durationTargetAsString(e){if(!e)return"";switch(e.type){case"exact":return`${e.seconds}`;case"range":return`${e.minSeconds}-${e.maxSeconds}`;case"to_failure":return this.translate.instant("durationSchemes.toFailure");default:return""}}getAvailableDistanceSchemes(e){return I.filter(r=>e==="builder"?r.availableInBuilder:r.availableInPlayer).map(r=>({type:r.type,label:this.translate.instant(r.labelKey)}))}distanceTargetAsString(e){if(!e)return"";switch(e.type){case"exact":return`${e.value}`;case"range":return`${e.min}-${e.max}`;default:return""}}getAvailableRestSchemes(e){return V.filter(r=>e==="builder"?r.availableInBuilder:r.availableInPlayer).map(r=>({type:r.type,label:this.translate.instant(r.labelKey)}))}restTargetAsString(e){if(!e)return"";switch(e.type){case"exact":return`${e.seconds}`;case"range":return`${e.minSeconds}-${e.maxSeconds}`;default:return""}}showSchemeModal(e,r,n){return T(this,null,function*(){let o=n.map(u=>{let c="pin";return u.type.includes("range")&&(c="range"),u.type.includes("percentage")&&(c="percentage"),u.type.includes("max")&&(c="max_performance"),u.type.includes("fraction")&&(c="fraction"),u.type.includes("amrap")&&(c="repeat"),u.type.includes("min_plus")&&(c="plus-circle"),u.type.includes("bodyweight")&&(c="weight"),{text:this.translate.instant(u.labelKey),role:"select",data:u.type,icon:c}}),t=yield this.alertService.showConfirmationDialog(this.translate.instant("schemes.titles.selectType",{metric:this.translate.instant(`metrics.${e}`)}),"",o,{customButtonDivCssClass:"grid grid-cols-2 gap-3",showCloseButton:!0});if(!t||!t.data)return null;let s=t.data,a=null,i=[],f=`schemes.titles.set${s.charAt(0).toUpperCase()+s.slice(1)}`;switch(s){case"exact":case"exact":case"exact":i.push({name:"value",type:"number",label:this.translate.instant(`metrics.${e}`),value:r?.value??8,attributes:{min:0,required:!0}});break;case"exact":case"exact":i.push({name:"seconds",type:"number",label:this.translate.instant(`metrics.${e}`),value:r?.value??30,attributes:{min:0,required:!0}});break;case"min_plus":i.push({name:"min",type:"number",label:this.translate.instant("common.atLeast"),value:r?.min??5,attributes:{min:0,required:!0}});break;case"max_fraction":i.push({name:"divisor",type:"number",label:this.translate.instant("common.fractionOfMax"),value:r?.divisor??2,attributes:{min:1,required:!0}});break;case"range":case"range":case"range":case"range":case"range":i.push({name:"min",type:"number",label:this.translate.instant("common.min"),value:r?.min??8,attributes:{min:0,required:!0}},{name:"max",type:"number",label:this.translate.instant("common.max"),value:r?.max??12,attributes:{min:0,required:!0}});break;case"percentage_1rm":i.push({name:"percentage",type:"number",label:"% 1RM",value:r?.percentage??80,attributes:{min:1,max:150,required:!0}});break}if(i.length>0){let u=yield this.alertService.showPromptDialog(this.translate.instant(f),"",i);if(!u)return null;switch(e){case"reps":switch(s){case"exact":a={type:s,value:Number(u.value)};break;case"range":a={type:s,min:Number(u.min),max:Number(u.max)};break;case"min_plus":a={type:s,value:Number(u.min)};break;case"max_fraction":a={type:s,divisor:Number(u.divisor)};break}break;case"weight":switch(s){case"exact":a={type:s,value:Number(u.value)};break;case"range":a={type:s,min:Number(u.min),max:Number(u.max)};break;case"percentage_1rm":a={type:s,percentage:Number(u.percentage)};break}break;case"duration":switch(s){case"exact":a={type:s,seconds:Number(u.value)};break;case"range":a={type:s,minSeconds:Number(u.min),maxSeconds:Number(u.max)};break;case"to_failure":a={type:s};break}break;case"rest":switch(s){case"exact":a={type:s,seconds:Number(u.value)};break;case"range":a={type:s,minSeconds:Number(u.min),maxSeconds:Number(u.max)};break}break;case"distance":switch(s){case"exact":a={type:s,value:Number(u.value)};break;case"range":a={type:s,min:Number(u.min),max:Number(u.max)};break}break}}else a={type:s};return a?{role:"confirm",data:a}:null})}isLoggedRoutine(e){return"workoutLogId"in e}static \u0275fac=function(r){return new(r||$)};static \u0275prov=M({token:$,factory:$.\u0275fac,providedIn:"root"})};export{H as a};
