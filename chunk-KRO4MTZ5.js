import{I as u,M as a,V as n,a as t,b as i,j as l,qc as f}from"./chunk-54C4F6AJ.js";var c=class o{storageService=a(f);USER_PROFILE_KEY="fitTrackPro_userProfile";userProfileSubject;userProfile$;username=n(void 0);constructor(){let e=this.storageService.getItem(this.USER_PROFILE_KEY);this.userProfileSubject=new l(e),this.userProfile$=this.userProfileSubject.asObservable(),this.userProfile$.subscribe(r=>{this.username.set(r?.username)})}getProfile(){return this.userProfileSubject.getValue()}saveProfile(e){let r=this.getProfile()||{},s=t(t({},r),e);this.storageService.setItem(this.USER_PROFILE_KEY,s),this.userProfileSubject.next(s)}getUsername(){return this.userProfileSubject.getValue()?.username}updateUsername(e){let r=this.getProfile()||{};this.saveProfile(i(t({},r),{username:e}))}getMeasurements(){return this.userProfileSubject.getValue()?.measurements}updateMeasurements(e){let r=this.getProfile()||{},s=t(t({},r.measurements||{}),e);this.saveProfile(i(t({},r),{measurements:s}))}updateGender(e){let r=this.getProfile()||{};this.saveProfile(i(t({},r),{gender:e}))}getDataForBackup(){return this.getProfile()}replaceData(e){e?(this.storageService.setItem(this.USER_PROFILE_KEY,e),this.userProfileSubject.next(e)):(this.storageService.removeItem(this.USER_PROFILE_KEY),this.userProfileSubject.next(null))}clearUserProfile_DEV_ONLY(){this.replaceData(null),console.log("User profile data cleared.")}static \u0275fac=function(r){return new(r||o)};static \u0275prov=u({token:o,factory:o.\u0275fac,providedIn:"root"})};export{c as a};
