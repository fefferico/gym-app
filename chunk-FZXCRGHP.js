import{C as k,F as P,I as B,J as j,b as F,ba as U,d as _,da as K,f as C,h as I,j as V,la as G,o as T,t as R,w as x,z as w}from"./chunk-W24MXVHW.js";import{L as O,P as p,Y as A,k as v,pd as M,rd as N,ud as W}from"./chunk-4G4FKAW4.js";import{a as L,g as S}from"./chunk-GAL4ENT6.js";var H=class D{unitsService=p(j);translate=p(N);appSettingsService=p(B);injector=p(A);_exerciseService;get exerciseService(){return this._exerciseService||(this._exerciseService=this.injector.get(G)),this._exerciseService}alertService=p(W);subscriptionService=p(U);ROUTINES_STORAGE_KEY="fitTrackPro_routines";PAUSED_WORKOUT_KEY="fitTrackPro_pausedWorkoutState";PAUSED_STATE_VERSION="1.2";toastService=p(M);progressiveOverloadService=p(P);formatMetricForLogged(e,s){switch(s){case"weight":if(e.type==="bodyweight")return"Bodyweight";if(e.type==="exact")return`${e.value}`;if(e.type==="percentage_1rm")return`${e.percentage}% 1RM`;if(e.type==="range")return`${e.min}-${e.max} kg`;break;case"reps":if(e.type==="exact")return`${e.value}`;if(e.type==="range")return`${e.min}-${e.max}`;break;case"duration":if(e.type==="exact")return`${e.seconds}`;if(e.type==="range")return`${e.minSeconds}-${e.maxSeconds}`;break;case"distance":if(e.type==="exact")return`${e.value}`;if(e.type==="range")return`${e.min}-${e.max}`;break;case"rest":if(e.type==="exact")return`${e.seconds}`;if(e.type==="range")return`${e.minSeconds}-${e.maxSeconds}`;break;default:return e.value?e.value.toString():"-"}return"-"}formatMetricTarget(e,s,n=!1){if(!e)return"-";if(n)return this.formatMetricForLogged(e,s);switch(s){case"weight":if(e.type==="bodyweight")return"Bodyweight";if(e.type==="exact")return`${e.value}`;if(e.type==="percentage_1rm")return`${e.percentage}% 1RM`;if(e.type==="range")return`${e.min}-${e.max}`;break;case"reps":if(e.type==="exact")return`${e.value}`;if(e.type==="range")return`${e.min}-${e.max}`;if(e.type==="max")return"Max reps";if(e.type==="amrap")return"AMRAP";break;case"duration":if(e.type==="exact")return`${e.seconds}`;if(e.type==="range")return`${e.minSeconds}-${e.maxSeconds}`;break;case"distance":if(e.type==="exact")return`${e.value}`;if(e.type==="range")return`${e.min}-${e.max}`;break;case"rest":if(e.type==="exact")return`${e.seconds}`;if(e.type==="range")return`${e.minSeconds}-${e.maxSeconds}`;break;default:return e.value?e.value.toString():"-"}return"-"}getRepsValue(e){if(e){if(e&&e.type==="exact")return e.value;if(e&&e.type==="range")return Math.floor((e.min+e.max)/2);if(e&&e.type==="min_plus")return e.value}}getWeightValue(e){if(e){if(e&&e.type==="exact")return e.value;if(e&&e.type==="range")return Math.floor((e.min+e.max)/2)}}getDurationValue(e){if(e){if(e&&e.type==="exact")return e.seconds;if(e&&e.type==="range")return Math.floor((e.minSeconds+e.maxSeconds)/2)}}getRestValue(e){if(e){if(e&&e.type==="exact")return e.seconds;if(e&&e.type==="range")return Math.floor((e.minSeconds+e.maxSeconds)/2)}}getDistanceValue(e){if(e){if(e&&e.type==="exact")return e.value;if(e&&e.type==="range")return Math.floor((e.min+e.max)/2)}}isTargetVisible(e,s){switch(s){case"reps":return this.isRepsTargetVisible(e);case"weight":return this.isWeightTargetVisible(e);case"duration":return this.isDurationTargetVisible(e);case"distance":return this.isDistanceTargetVisible(e);case"rest":return this.isRestTargetVisible(e);default:return!1}}isWeightTargetVisible(e){if(!e||typeof e!="object"||!("type"in e))return!1;switch(e.type){case"exact":return typeof e.value=="number"&&e.value>0;case"range":return typeof e.min=="number"&&typeof e.max=="number"&&(e.min>0||e.max>0);case"bodyweight":return!0;case"percentage_1rm":return typeof e.percentage=="number"&&e.percentage>0;default:return!1}}isRepsTargetVisible(e){if(!e||typeof e!="object"||!("type"in e))return!1;switch(e.type){case"exact":case"min_plus":return typeof e.value=="number"&&e.value>0;case"range":return typeof e.min=="number"&&typeof e.max=="number"&&(e.min>0||e.max>0);case"amrap":case"max":case"max_fraction":return!0;default:return!1}}isDurationTargetVisible(e){if(!e||typeof e!="object"||!("type"in e))return!1;switch(e.type){case"exact":return typeof e.seconds=="number"&&e.seconds>0;case"range":return typeof e.minSeconds=="number"&&typeof e.maxSeconds=="number"&&(e.minSeconds>0||e.maxSeconds>0);default:return!1}}isDistanceTargetVisible(e){if(!e||typeof e!="object"||!("type"in e))return!1;switch(e.type){case"exact":return typeof e.value=="number"&&e.value>0;case"range":return typeof e.min=="number"&&typeof e.max=="number"&&(e.min>0||e.max>0);default:return!1}}isRestTargetVisible(e){if(!e||typeof e!="object"||!("type"in e))return!1;switch(e.type){case"exact":return typeof e.seconds=="number"&&e.seconds>0;case"range":return typeof e.minSeconds=="number"&&typeof e.maxSeconds=="number"&&(e.minSeconds>0||e.maxSeconds>0);default:return!1}}getSetTargetDisplay(e,s){if(!e)return"";let n=-1,o=-1,t=-1;switch(s){case"reps":if(e.targetReps){if(e.targetReps.type==="range")n=e.targetReps.min,o=e.targetReps.max;else if(e.targetReps.type==="exact"||e.targetReps.type==="min_plus")t=e.targetReps.value;else if(e.targetReps.type==="amrap"||e.targetReps.type==="max")return"Max"}break;case"weight":if(e.targetWeight)if(e.targetWeight.type==="range")n=e.targetWeight.min,o=e.targetWeight.max;else if(e.targetWeight.type==="exact")t=e.targetWeight.value;else{if(e.targetWeight.type==="bodyweight")return"Bodyweight";if(e.targetWeight.type==="percentage_1rm")return`${e.targetWeight.percentage}% 1RM`}break;case"duration":if(e.targetDuration){if(e.targetDuration.type==="range")n=e.targetDuration.minSeconds,o=e.targetDuration.maxSeconds;else if(e.targetDuration.type==="exact")t=e.targetDuration.seconds;else if(e.targetDuration.type==="to_failure")return"To Failure"}break;case"distance":e.targetDistance&&(e.targetDistance.type==="range"?(n=e.targetDistance.min,o=e.targetDistance.max):e.targetDistance.type==="exact"&&(t=e.targetDistance.value));break;case"rest":e.targetRest&&(e.targetRest.type==="range"?(n=e.targetRest.minSeconds,o=e.targetRest.maxSeconds):e.targetRest.type==="exact"&&(t=e.targetRest.seconds));break;case"tempo":return e.targetTempo||"";default:break}return n>=0&&o>=0?n===o?n.toString():`${n}-${o}`:n>=0?`${n}+`:t>=0?t.toString():""}getSetWeightDisplay(e,s){let n=e.weightLogged,o=n!=null?this.getWeightValue(n):this.getWeightValue(e.targetWeight);return s?.categories?.find(t=>t==="cardio")||s?.categories?.find(t=>t==="stretching")?o!=null&&o>0?`${o} ${this.unitsService.getWeightUnitSuffix()}`:this.translate.instant("workoutService.display.weightNotApplicable"):s?.categories?.find(t=>t==="bodyweightCalisthenics")?o!=null&&o>0?`${o} ${this.unitsService.getWeightUnitSuffix()}`:this.translate.instant("workoutService.display.bodyweight"):o!=null&&o>0?`${o} ${this.unitsService.getWeightUnitSuffix()}`:o===0?this.translate.instant("workoutService.display.noAddedWeight"):this.translate.instant("workoutService.display.userDefined")}checkIfMetricIsVisible(e,s,n=!1){if(!e)return!1;let o=t=>{let r=!1,a=!1;switch(s){case"duration":let i=n?t?.durationLogged:t?.targetDuration;r=this.isDurationTargetVisible(i);break;case"weight":let f=n?t?.weightLogged:t?.targetWeight;r=this.isWeightTargetVisible(f);break;case"reps":let u=n?t?.repsLogged:t?.targetReps;r=this.isRepsTargetVisible(u);break;case"distance":let c=n?t?.distanceLogged:t?.targetDistance;r=this.isDistanceTargetVisible(c);break;case"rest":let d=n?t?.restLogged:t?.targetRest;r=this.isRestTargetVisible(d);break;default:return!1}if(this.isLoggedSet(t))switch(s){case"duration":a=this.isDurationTargetVisible(t?.durationLogged);break;case"weight":a=this.isWeightTargetVisible(t?.weightLogged);break;case"reps":a=this.isRepsTargetVisible(t?.repsLogged);break;case"distance":a=this.isDistanceTargetVisible(t?.distanceLogged);break;case"rest":a=this.isRestTargetVisible(t?.restLogged);break;default:a=!1}return r||a};if(typeof e.get=="function"){let t=typeof e.getRawValue=="function"?e.getRawValue():e.value;return t&&Array.isArray(t.sets)?t.sets.some(o):o(t)}return e.sets&&Array.isArray(e.sets)?e.sets.some(o):o(e)}getVisibleExerciseColumns(e,s,n=!1){let o=e.exercises[s];if(!o||o.sets?.length===0)return{weight:!1,reps:!1,distance:!1,duration:!1,tempo:!1,rest:!1};let t=L({},o),r=L({},K(o)),a={};return n?a={weight:r.sets.some(i=>i.targetWeight)||r.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("weight")),reps:r.sets.some(i=>i.targetReps)||r.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("reps")),distance:r.sets.some(i=>i.targetDistance)||r.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("distance")),duration:r.sets.some(i=>i.targetDuration)||r.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("duration")),rest:r.sets.some(i=>i.targetRest)||r.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("rest")),tempo:r.sets.some(i=>i.targetTempo)||r.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("tempo"))}:a={weight:t.sets.some(i=>i.targetWeight)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("weight")),reps:t.sets.some(i=>i.targetReps)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("reps")),distance:t.sets.some(i=>i.targetDistance)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("distance")),duration:t.sets.some(i=>i.targetDuration)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("duration")),rest:t.sets.some(i=>i.targetRest)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("rest")),tempo:t.sets.some(i=>i.targetTempo)||t.sets.some(i=>i.fieldOrder&&i.fieldOrder.includes("tempo"))},a}getVisibleSetColumns(e,s,n){let t=e.exercises[s]?.sets[n];if(!t)return{weight:!1,reps:!1,distance:!1,duration:!1,tempo:!1};let r;if(this.isLoggedSet(t))r={weight:!!t.fieldOrder?.includes("weight"),reps:!!t.fieldOrder?.includes("reps"),distance:!!t.fieldOrder?.includes("distance"),duration:!!t.fieldOrder?.includes("duration"),tempo:!!(t.targetTempo?.trim()||t.fieldOrder?.includes("tempo")),rest:!!t.fieldOrder?.includes("rest")};else{let a=t;r={weight:!!(a.targetWeight||a.fieldOrder?.includes("weight")),reps:!!(a.targetReps||a.fieldOrder?.includes("reps")),distance:!!(a.targetDistance||a.fieldOrder?.includes("distance")),duration:!!(a.targetDuration||a.fieldOrder?.includes("duration")),tempo:!!(a.targetTempo?.trim()||a.fieldOrder?.includes("tempo")),rest:!!(a.targetRest||a.fieldOrder?.includes("rest"))}}return r}promptAddField(e,s,n,o=!1){return S(this,null,function*(){let{visible:t,hidden:r}=this.getFieldsForSet(e,s,n);if(r.length===0)return this.toastService.info(this.translate.instant("toasts.allMetricsAdded")),null;let a=!!e.exercises[s].supersetId,i;if(a){let b=["weight","reps"];if(i=r.filter(E=>b.includes(E)),i.every(E=>!b.includes(E)))return this.toastService.info("Only 'Weight' and 'Reps' can be added to sets within a superset."),null}let f=i||r,u=this.appSettingsService.getSettings();if(f.length===0)return this.toastService.info(this.translate.instant("toasts.trueGymModeNoMetrics")),null;let c=f.map(b=>({text:this.translate.instant("metrics."+b),role:"add",data:b,icon:b}));c.push({text:this.translate.instant("common.cancel"),role:"cancel",data:null,icon:"cancel"});let d=yield this.alertService.showConfirmationDialog(this.translate.instant("workoutBuilder.prompts.addField.title"),this.translate.instant("workoutBuilder.prompts.addField.message",{setNumber:n+1}),c,{showCloseButton:!0});if(!d||!d.data)return null;let m=d.data,$=this.translate.instant("metrics."+m),l=this.translate.instant("workoutBuilder.prompts.setTarget.title",{field:$}),g=0;switch(m){case"weight":l+=` (${this.unitsService.getWeightUnitSuffix()})`,g=10;break;case"reps":g=8;break;case"duration":l+=" (s)",g=60;break;case"rest":l+=" (s)",g=60;break;case"distance":l+=` (${this.unitsService.getDistanceMeasureUnitSuffix()})`,g=1;break;case"tempo":g="2-0-1-0";break}let q=m!=="tempo"?{min:"0",step:"any"}:{},h=yield this.alertService.showPromptDialog(this.translate.instant("workoutBuilder.prompts.setTarget.title",{field:$}),this.translate.instant("workoutBuilder.prompts.setTarget.message",{setNumber:n+1}),[{name:"targetValue",type:m==="tempo"?"text":"number",label:this.translate.instant("metrics."+m),value:g,attributes:q}],this.translate.instant("workoutBuilder.prompts.setTarget.applyButton"));if(!h||h.targetValue===null||h.targetValue===void 0)return null;let y=h.targetValue;return Array.isArray(y)&&(y=y[0]??0),this.addFieldToSet(e,s,n,m,y)})}defaultHiddenFields(){return{visible:[],hidden:this.getDefaultFields()}}getRepsAndWeightFields(){return["reps","weight"]}getDefaultFields(){return["weight","reps","distance","duration","tempo","rest"]}getFieldsForSet(e,s,n){let o=this.getDefaultFields(),t=this.getVisibleSetColumns(e,s,n),r=o.filter(i=>t[i]),a=o.filter(i=>!r.includes(i));return{visible:r,hidden:a}}addFieldToSet(e,s,n,o,t){let r=JSON.parse(JSON.stringify(e)),a=r.exercises[s].sets[n];if(!a.fieldOrder){let{visible:i}=this.getFieldsForSet(e,s,n);a.fieldOrder=i}switch(a.fieldOrder.includes(o)||a.fieldOrder.push(o),o){case"weight":{let i;typeof t=="number"?i=R(t):typeof t=="string"&&!isNaN(Number(t))?i=R(Number(t)):typeof t=="object"&&t&&"type"in t?i=t:i=R(0),a.targetWeight=i,this.isLoggedRoutine(e)&&(a.weightLogged=i,delete a.targetWeight);break}case"reps":{let i;typeof t=="number"?i=T(t):typeof t=="string"&&!isNaN(Number(t))?i=T(Number(t)):typeof t=="object"&&t&&"type"in t?i=t:i=T(0),a.targetReps=i,this.isLoggedRoutine(e)&&(a.repsLogged=i,delete a.targetReps);break}case"distance":{let i;typeof t=="number"?i=w(t):typeof t=="string"&&!isNaN(Number(t))?i=w(Number(t)):typeof t=="object"&&t&&"type"in t?i=t:i=w(0),a.targetDistance=i,this.isLoggedRoutine(e)&&(a.distanceLogged=i,delete a.targetDistance);break}case"duration":{let i;typeof t=="number"?i=x(t):typeof t=="string"&&!isNaN(Number(t))?i=x(Number(t)):typeof t=="object"&&t&&"type"in t?i=t:i=x(0),a.targetDuration=i,this.isLoggedRoutine(e)&&(a.durationLogged=i,delete a.targetDuration);break}case"rest":{let i;typeof t=="number"?i=k(t):typeof t=="string"&&!isNaN(Number(t))?i=k(Number(t)):typeof t=="object"&&t&&"type"in t?i=t:i=k(0),a.targetRest=i,this.isLoggedRoutine(e)&&(a.restLogged=i,delete a.targetRest);break}case"tempo":{let i=typeof t=="string"?t:"";a.targetTempo=i,this.isLoggedRoutine(e)&&(a.tempoLogged=i);break}default:{o in a&&(a[o]=t);break}}return r}promptRemoveField(e,s,n,o=!1){return S(this,null,function*(){let t=this.getVisibleSetColumns(e,s,n),r=Object.keys(t).filter(l=>t[l]),a=this.appSettingsService.getSettings();if(o&&(r=r.filter(l=>l!=="rest")),r.length===0){let l=yield v(this.translate.get("workoutService.alerts.removeField.noFieldsToast"));return this.toastService.info(l),e}if(r.length===1){let l=yield v(this.translate.get("workoutService.alerts.removeField.atLeastOneMetric"));return this.toastService.info(l),e}let f=["workoutService.alerts.removeField.title","workoutService.alerts.removeField.message","common.cancel",...r.map(l=>`metrics.${l}`)],u=yield v(this.translate.get(f)),c=r.map(l=>({text:u[`metrics.${l}`],role:"remove",data:l,icon:l,cssClass:"bg-red-500 hover:bg-red-600"}));c.push({text:u["common.cancel"],role:"cancel",data:null,icon:"cancel"});let d=yield this.alertService.showConfirmationDialog(u["workoutService.alerts.removeField.title"],u["workoutService.alerts.removeField.message"],c,{showCloseButton:!0});if(!d||!d.data)return null;let m=d.data;return this.removeMetricFromSet(e,s,n,m)})}removeMetricFromSet(e,s,n,o){let t=JSON.parse(JSON.stringify(e)),r=t.exercises[s].sets[n];return this.isLoggedRoutine(t)?r[`${o}Logged`]=void 0:(r[`target${o.charAt(0).toUpperCase()+o.slice(1)}`]=void 0,r[`target${o.charAt(0).toUpperCase()+o.slice(1)}Min`]=void 0,r[`target${o.charAt(0).toUpperCase()+o.slice(1)}Max`]=void 0,r[`${o}Used`]=void 0,r[`${o}Achieved`]=void 0,r[`${o}AfterSet`]=void 0),r.fieldOrder&&(r.fieldOrder=r.fieldOrder.filter(a=>a!==o)),this.toastService.info(this.translate.instant("toasts.fieldRemovedFromSet",{fieldToRemove:this.translate.instant(`metrics.${o}`).toUpperCase(),setIndex:n+1})),t}getSetFieldOrder(e,s,n){let t=e?.exercises?.[s]?.sets?.[n];return t&&Array.isArray(t.fieldOrder)?t.fieldOrder:null}isLoggedSet(e){return e&&e.workoutLogId&&(typeof e.repsLogged<"u"||typeof e.weightLogged<"u"||typeof e.durationLogged<"u"||typeof e.distanceLogged<"u"||typeof e.tempoLogged<"u")}getSetFieldValue(e,s){if(!e)return"-";if(this.isLoggedSet(e))switch(s){case"reps":return(this.getRepsValue(e.repsLogged)??"-").toString();case"weight":return e.weightLogged!=null?(this.getWeightValue(e.weightLogged)??"-").toString():"-";case"distance":return(this.getDistanceValue(e.distanceLogged)??"-").toString();case"duration":return e.durationLogged!==void 0&&e.durationLogged!==null&&this.getDurationValue(e.durationLogged)!==void 0?this.formatSecondsToTime(this.getDurationValue(e.durationLogged).toString()):"-";case"rest":return e.restLogged!==void 0&&e.restLogged!==null&&this.getRestValue(e.restLogged)!==void 0?this.formatSecondsToTime(this.getRestValue(e.restLogged).toString()):"-";case"tempo":return e.tempoLogged||"-";default:return"-"}else{let n=e;switch(s){case"reps":return n.targetReps&&n.targetReps.type==="range"?Math.floor((n.targetReps.min+n.targetReps.max)/2).toString():(this.getRepsValue(n.targetReps)??"-").toString();case"weight":return n.targetWeight&&n.targetWeight.type==="range"?Math.floor((n.targetWeight.min+n.targetWeight.max)/2).toString():(this.getWeightValue(n.targetWeight)??"-").toString();case"distance":return n.targetDistance&&n.targetDistance.type==="range"?Math.floor((n.targetDistance.min+n.targetDistance.max)/2).toString():(this.getDistanceValue(n.targetDistance)??"-").toString();case"duration":return n.targetDuration&&n.targetDuration.type==="range"?Math.floor((n.targetDuration.minSeconds+n.targetDuration.maxSeconds)/2).toString():(this.getDurationValue(n.targetDuration)??"-").toString();case"rest":return n.targetRest&&n.targetRest.type==="range"?Math.floor((n.targetRest.minSeconds+n.targetRest.maxSeconds)/2).toString():(this.getRestValue(n.targetRest)??"-").toString();case"tempo":return n.targetTempo||"-";default:return"-"}}}_formatSingleSecondValue(e){let s;if(typeof e=="number")s=e;else{let t=e.trim().toLowerCase();if(t.includes(":")){let r=t.split(":");if(r.length===2){let a=parseFloat(r[0]),i=parseFloat(r[1]);if(!isNaN(a)&&!isNaN(i))s=a*60+i;else return""}else return""}else if(t.includes("m")||t.includes("minute")){let r=parseFloat(t.replace(/m|minute|minutes/g,""));if(!isNaN(r))s=r*60;else return""}else if(t.includes("s")||t.includes("second")){let r=parseFloat(t.replace(/s|second|seconds/g,""));if(!isNaN(r))s=r;else return""}else if(s=parseFloat(t),isNaN(s))return""}let n=String(Math.floor(s/60)).padStart(2,"0"),o=String(s%60).padStart(2,"0");return`${n}:${o}`}formatSecondsToTime(e){if(e==null||e==="")return"";if(typeof e=="string"&&e.includes("-")){let[s,n]=e.split("-"),o=this._formatSingleSecondValue(s),t=this._formatSingleSecondValue(n);return`${o}-${t}`}return this._formatSingleSecondValue(e)}getAvailableRepsSchemes(e){return F.filter(n=>e==="builder"?n.availableInBuilder:n.availableInPlayer).map(n=>({type:n.type,label:this.translate.instant(n.labelKey)}))}getAvailableWeightSchemes(e){return _.filter(s=>e==="builder"?s.availableInBuilder:s.availableInPlayer).map(s=>({type:s.type,label:this.translate.instant(s.labelKey)}))}repsTargetAsString(e){if(!e)return"";switch(e.type){case"exact":return`${e.value}`;case"range":return`${e.min}-${e.max}`;case"amrap":return"AMRAP";case"min_plus":return`${e.value}+`;default:return""}}weightTargetAsString(e){if(!e)return"";switch(e.type){case"exact":return`${e.value}`;case"range":return`${e.min}-${e.max}`;case"bodyweight":return this.translate.instant("weightSchemes.bodyweight");case"percentage_1rm":return`${e.percentage}% 1RM`;default:return""}}getAvailableDurationSchemes(e){return C.filter(s=>e==="builder"?s.availableInBuilder:s.availableInPlayer).map(s=>({type:s.type,label:this.translate.instant(s.labelKey)}))}durationTargetAsString(e){if(!e)return"";switch(e.type){case"exact":return`${e.seconds}`;case"range":return`${e.minSeconds}-${e.maxSeconds}`;case"to_failure":return this.translate.instant("durationSchemes.toFailure");default:return""}}getAvailableDistanceSchemes(e){return I.filter(s=>e==="builder"?s.availableInBuilder:s.availableInPlayer).map(s=>({type:s.type,label:this.translate.instant(s.labelKey)}))}distanceTargetAsString(e){if(!e)return"";switch(e.type){case"exact":return`${e.value}`;case"range":return`${e.min}-${e.max}`;default:return""}}getAvailableRestSchemes(e){return V.filter(s=>e==="builder"?s.availableInBuilder:s.availableInPlayer).map(s=>({type:s.type,label:this.translate.instant(s.labelKey)}))}restTargetAsString(e){if(!e)return"";switch(e.type){case"exact":return`${e.seconds}`;case"range":return`${e.minSeconds}-${e.maxSeconds}`;default:return""}}showSchemeModal(e,s,n){return S(this,null,function*(){let o=n.map(u=>{let c="pin";return u.type.includes("range")&&(c="range"),u.type.includes("percentage")&&(c="percentage"),u.type.includes("max")&&(c="max_performance"),u.type.includes("fraction")&&(c="fraction"),u.type.includes("amrap")&&(c="repeat"),u.type.includes("min_plus")&&(c="plus-circle"),u.type.includes("bodyweight")&&(c="weight"),{text:this.translate.instant(u.labelKey),role:"select",data:u.type,icon:c}}),t=yield this.alertService.showConfirmationDialog(this.translate.instant("schemes.titles.selectType",{metric:this.translate.instant(`metrics.${e}`)}),"",o,{customButtonDivCssClass:o.length>1?"grid grid-cols-2 gap-3":"grid grid-cols-1 gap-3",showCloseButton:!0});if(!t||!t.data)return null;let r=t.data,a=null,i=[],f=`schemes.titles.set${r.charAt(0).toUpperCase()+r.slice(1)}`;switch(r){case"exact":case"exact":case"exact":i.push({name:"value",type:"number",label:this.translate.instant(`metrics.${e}`),value:s?.value??8,attributes:{min:0,required:!0}});break;case"exact":case"exact":i.push({name:"seconds",type:"number",label:this.translate.instant(`metrics.${e}`),value:s?.value??30,attributes:{min:0,required:!0}});break;case"min_plus":i.push({name:"min",type:"number",label:this.translate.instant("common.atLeast"),value:s?.min??5,attributes:{min:0,required:!0}});break;case"max_fraction":i.push({name:"divisor",type:"number",label:this.translate.instant("common.fractionOfMax"),value:s?.divisor??2,attributes:{min:1,required:!0}});break;case"range":case"range":case"range":case"range":case"range":i.push({name:"min",type:"number",label:this.translate.instant("common.min"),value:s?.min??8,attributes:{min:0,required:!0}},{name:"max",type:"number",label:this.translate.instant("common.max"),value:s?.max??12,attributes:{min:0,required:!0}});break;case"percentage_1rm":i.push({name:"percentage",type:"number",label:"% 1RM",value:s?.percentage??80,attributes:{min:1,max:150,required:!0}});break}if(i.length>0){let u=yield this.alertService.showPromptDialog(this.translate.instant(f),"",i);if(!u)return null;switch(e){case"reps":switch(r){case"exact":a={type:r,value:Number(u.value)};break;case"range":a={type:r,min:Number(u.min),max:Number(u.max)};break;case"min_plus":a={type:r,value:Number(u.min)};break;case"max_fraction":a={type:r,divisor:Number(u.divisor)};break}break;case"weight":switch(r){case"exact":a={type:r,value:Number(u.value)};break;case"range":a={type:r,min:Number(u.min),max:Number(u.max)};break;case"percentage_1rm":a={type:r,percentage:Number(u.percentage)};break}break;case"duration":switch(r){case"exact":a={type:r,seconds:Number(u.value)};break;case"range":a={type:r,minSeconds:Number(u.min),maxSeconds:Number(u.max)};break;case"to_failure":a={type:r};break}break;case"rest":switch(r){case"exact":a={type:r,seconds:Number(u.value)};break;case"range":a={type:r,minSeconds:Number(u.min),maxSeconds:Number(u.max)};break}break;case"distance":switch(r){case"exact":a={type:r,value:Number(u.value)};break;case"range":a={type:r,min:Number(u.min),max:Number(u.max)};break}break}}else a={type:r};return a?{role:"confirm",data:a}:null})}isLoggedRoutine(e){return"workoutLogId"in e}static \u0275fac=function(s){return new(s||D)};static \u0275prov=O({token:D,factory:D.\u0275fac,providedIn:"root"})};export{H as a};
