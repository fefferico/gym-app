import{Fb as n,I as a,L as c,M as f,T as m,V as l,_ as d,a as t,b as o,j as u,nb as h,sc as P}from"./chunk-7QGOEQQV.js";var p=class i{storageService=f(P);USER_PROFILE_KEY="fitTrackPro_userProfile";userProfileSubject;userProfile$;username=l(void 0);constructor(){let e=this.storageService.getItem(this.USER_PROFILE_KEY);this.userProfileSubject=new u(e),this.userProfile$=this.userProfileSubject.asObservable(),this.userProfile$.subscribe(r=>{this.username.set(r?.username)})}getProfile(){return this.userProfileSubject.getValue()}saveProfile(e){let r=this.getProfile()||{},s=t(t({},r),e);this.storageService.setItem(this.USER_PROFILE_KEY,s),this.userProfileSubject.next(s)}getUsername(){return this.userProfileSubject.getValue()?.username}updateUsername(e){let r=this.getProfile()||{};this.saveProfile(o(t({},r),{username:e}))}getMeasurements(){return this.userProfileSubject.getValue()?.measurements}updateMeasurements(e){let r=this.getProfile()||{},s=t(t({},r.measurements||{}),e);this.saveProfile(o(t({},r),{measurements:s}))}updateGender(e){let r=this.getProfile()||{};this.saveProfile(o(t({},r),{gender:e}))}getDataForBackup(){return this.getProfile()}replaceData(e){e?(this.storageService.setItem(this.USER_PROFILE_KEY,e),this.userProfileSubject.next(e)):(this.storageService.removeItem(this.USER_PROFILE_KEY),this.userProfileSubject.next(null))}clearUserProfile_DEV_ONLY(){this.replaceData(null),console.log("User profile data cleared.")}static \u0275fac=function(r){return new(r||i)};static \u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})};var v=class i{constructor(e,r){this.document=e;this.platformId=r;n(this.platformId)&&this.isDarkTheme.set(this.getInitialThemeFromBrowser()),h(()=>{let s=this.isDarkTheme();n(this.platformId)&&(localStorage.setItem(this.THEME_KEY,s?"dark":"light"),s?this.document.documentElement.classList.add("dark"):this.document.documentElement.classList.remove("dark"))})}THEME_KEY="fitTrackPro-theme";isDarkTheme=l(!1);getInitialThemeFromBrowser(){let e=localStorage.getItem(this.THEME_KEY);return e?e==="dark":window.matchMedia?.("(prefers-color-scheme: dark)").matches??!1}toggleTheme(){n(this.platformId)?this.isDarkTheme.update(e=>!e):console.warn("ThemeService: toggleTheme called in non-browser environment. No action taken.")}static \u0275fac=function(r){return new(r||i)(c(m),c(d))};static \u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})};export{p as a,v as b};
