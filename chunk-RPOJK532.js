import{D as Ae,E as We,I as De,K as Re,M as Ue}from"./chunk-FBGJZ6Z3.js";import{a as Oe}from"./chunk-B4CCJ5S2.js";import{a as z}from"./chunk-3ULMHI74.js";import{b as $e}from"./chunk-HYIRKSK5.js";import"./chunk-EPJRL2JM.js";import{I as Be,J as K,ba as Ve,ga as B,ia as Ne}from"./chunk-JGSRKTYF.js";import{A as oe,Bc as R,Bd as j,Cb as m,Cc as xe,Cd as Y,Da as x,Db as p,Dd as H,Gb as te,H as X,Hc as U,I as le,Ic as P,Kb as O,Lc as q,Mc as L,Na as s,Nc as M,Oa as o,Pa as n,Q as b,Qa as g,Ua as I,V as h,Va as F,W as C,Wb as A,Wc as ve,Xa as w,Xb as W,Xc as be,Ya as k,Yb as ue,Yc as y,Za as c,Zb as ge,Zc as _e,_c as he,a as re,aa as T,cd as Ce,dd as ke,eb as Z,ed as Ee,fb as pe,gb as ee,ha as me,hc as D,hd as we,i as ne,ib as l,id as Se,jb as u,jc as ye,jd as Ge,kb as v,kd as Te,lb as E,ld as Ie,mb as se,md as Fe,n as ae,na as r,nd as qe,td as Pe,ub as de,vd as Me,ya as N,yb as ce,yd as $,zc as fe,zd as Le}from"./chunk-YUKJKFDZ.js";import{a as S,b as G,g as ie}from"./chunk-GAL4ENT6.js";function ze(a,t){if(a&1&&(o(0,"option",19),l(1),n()),a&2){let e=t.$implicit;s("value",e),r(),u(e)}}function Je(a,t){if(a&1&&(o(0,"div")(1,"p")(2,"strong"),l(3),m(4,"translate"),n(),l(5),n()()),a&2){let e=c().$implicit,i=c(3);r(3),v("",p(4,3,"personalGym.list.weight"),":"),r(2),E(" ",e.weight," ",i.unitService.getWeightUnitSuffix())}}function Qe(a,t){if(a&1&&(o(0,"div")(1,"p")(2,"strong"),l(3),m(4,"translate"),n(),l(5),n()()),a&2){let e=c().$implicit,i=c(3);r(3),v("",p(4,4,"personalGym.list.range"),":"),r(2),se(" ",e.minweight," - ",e.maxweight," ",i.unitService.getWeightUnitSuffix())}}function Xe(a,t){if(a&1&&(o(0,"div")(1,"p")(2,"strong"),l(3),m(4,"translate"),n(),l(5),n()()),a&2){let e=c().$implicit,i=c(3);r(3),v("",p(4,3,"personalGym.list.weight"),":"),r(2),E(" ",e.weight," ",i.unitService.getWeightUnitSuffix())}}function Ze(a,t){if(a&1&&(o(0,"div")(1,"p")(2,"strong"),l(3),m(4,"translate"),n(),l(5),n()()),a&2){let e=c().$implicit;r(3),v("",p(4,2,"personalGym.list.type"),":"),r(2),v(" ",e.bandType)}}function et(a,t){if(a&1&&(o(0,"div")(1,"p")(2,"strong"),l(3),n(),l(4),n()()),a&2){let e=t.$implicit;r(3),v("",e.key,":"),r(),v(" ",e.value)}}function tt(a,t){if(a&1&&(o(0,"div"),x(1,et,5,2,"div",34),n()),a&2){let e=c().$implicit;r(),s("ngForOf",e.properties)}}function it(a,t){if(a&1){let e=w();o(0,"app-action-menu",35),k("itemClick",function(d){h(e);let f=c(4);return C(f.handleActionMenuItemClick(d))})("closeMenu",function(){h(e);let d=c(4);return C(d.onCloseActionMenu())}),n()}if(a&2){let e=c().$implicit,i=c(3);s("modalTitle","")("displayMode",i.menuModeDropdown?"dropdown":"modal")("items",i.getGymActionItems(e.id,i.menuModeDropdown?"dropdown":"modal"))("isVisible",i.areActionsVisible(e.id))}}function rt(a,t){if(a&1){let e=w();o(0,"app-action-menu",36),k("itemClick",function(d){h(e);let f=c(4);return C(f.handleActionMenuItemClick(d))})("closeMenu",function(){h(e);let d=c(4);return C(d.onCloseActionMenu())}),n()}if(a&2){let e=c().$implicit,i=c(3);s("items",i.getGymActionItems(e.id,"compact"))("isVisible",i.areActionsVisible(e.id))}}function nt(a,t){if(a&1){let e=w();o(0,"div",23),k("click",function(d){let f=h(e).$implicit,_=c(3);return C(_.toggleActions(f.id,d))}),o(1,"div")(2,"h2",24),l(3),n(),o(4,"p",25),l(5),n(),o(6,"div",26)(7,"p")(8,"strong"),l(9),m(10,"translate"),n(),l(11),n(),x(12,Je,6,5,"div",27)(13,Qe,6,6,"div",27)(14,Xe,6,5,"div",27)(15,Ze,6,4,"div",27)(16,tt,2,1,"div",27),n()(),o(17,"div",28)(18,"div",29)(19,"button",30),k("click",function(d){let f=h(e).$implicit,_=c(3);return C(_.toggleActions(f.id,d))}),g(20,"app-icon",31),n(),x(21,it,1,4,"app-action-menu",32),n()(),x(22,rt,1,2,"app-action-menu",33),n()}if(a&2){let e=t.$implicit,i=c(3);r(3),u(e.name),r(2),v(" ",i.isCustom(e)?e.customCategoryName:e.category," "),r(4),v("",p(10,11,"personalGym.list.quantity"),":"),r(2),v(" ",e.quantity),r(),s("ngIf",i.isFixedWeight(e)),r(),s("ngIf",i.isAdjustableWeight(e)),r(),s("ngIf",i.isWeightPlate(e)),r(),s("ngIf",i.isBand(e)),r(),s("ngIf",i.isCustom(e)),r(5),s("ngIf",i.areActionsVisible(e.id)&&(i.menuModeDropdown||i.menuModeModal)),r(),s("ngIf",i.areActionsVisible(e.id)&&i.menuModeCompact)}}function at(a,t){if(a&1&&(o(0,"div",21),x(1,nt,23,13,"div",22),n()),a&2){let e=c(2);r(),s("ngForOf",e.filteredEquipment())("ngForTrackBy",e.trackById)}}function ot(a,t){if(a&1&&(o(0,"div"),x(1,at,2,2,"div",20),n()),a&2){let e=c(),i=Z(28);r(),s("ngIf",e.filteredEquipment().length>0)("ngIfElse",i)}}function lt(a,t){if(a&1){let e=w();o(0,"div",37)(1,"h3",38),l(2),m(3,"translate"),n(),o(4,"p",39),l(5),m(6,"translate"),n(),o(7,"button",40),k("click",function(){h(e);let d=c();return C(d.navigateToForm())}),g(8,"app-icon",41),l(9),m(10,"translate"),n()()}a&2&&(r(2),u(p(3,3,"personalGym.list.noEquipmentTitle")),r(3),u(p(6,5,"personalGym.list.noEquipmentMessage")),r(4),v(" ",p(10,7,"personalGym.list.addFirstItem")," "))}function mt(a,t){a&1&&(o(0,"div",42)(1,"h3",38),l(2),m(3,"translate"),n(),o(4,"p",43),l(5),m(6,"translate"),n()()),a&2&&(r(2),u(p(3,2,"personalGym.list.noMatchTitle")),r(3),u(p(6,4,"personalGym.list.noMatchMessage")))}var J=class a{router=b(R);personalGymService=b(z);unitService=b(K);subscriptionService=b(Ve);platformId=b(me);appSettingsService=b(Be);allEquipment=T([]);translate=b(j);menuModeDropdown=!1;menuModeCompact=!1;menuModeModal=!1;searchTerm=T("");selectedCategory=T(null);categories=Object.values(B);filteredEquipment=O(()=>{let t=this.allEquipment(),e=this.searchTerm().toLowerCase(),i=this.selectedCategory();return i&&(t=t.filter(d=>d.category===i)),e&&(t=t.filter(d=>d.name.toLowerCase().includes(e)||d.brand&&d.brand.toLowerCase().includes(e))),t});ngOnInit(){this.personalGymService.getAllEquipment().subscribe(t=>{this.allEquipment.set(t)}),this.subscriptionService.canAccess("personal_gym")||this.subscriptionService.showUpgradeModal().then(()=>{this.router.navigate(["profile"])}),this.menuModeDropdown=this.appSettingsService.isMenuModeDropdown(),this.menuModeCompact=this.appSettingsService.isMenuModeCompact(),this.menuModeModal=this.appSettingsService.isMenuModeModal()}onSearchChange(t){this.searchTerm.set(t.target.value)}onCategoryChange(t){let e=t.target.value;this.selectedCategory.set(e)}clearFilters(){this.searchTerm.set(""),this.selectedCategory.set(null);let t=document.getElementById("search-term");t&&(t.value="");let e=document.getElementById("category-filter");e&&(e.value="")}trackById(t,e){return e.id}navigateToForm(t){let e=t?["/personal-gym/edit",t]:["/personal-gym/new"];this.router.navigate(e)}deleteEquipment(t,e){return ie(this,null,function*(){e?.stopPropagation(),yield this.personalGymService.deleteEquipment(t)})}isFixedWeight(t){return"weightType"in t&&t.weightType==="fixed"}isAdjustableWeight(t){return"weightType"in t&&t.weightType==="adjustable"}isWeightPlate(t){return t.category==="plate"}isBand(t){return t.category==="band"}isCustom(t){return t.category==="custom"}scrollToTop(){ye(this.platformId)&&window.scrollTo({top:0,behavior:"smooth"})}activeEquipmentIdActions=T(null);toggleActions(t,e){e.stopPropagation(),this.activeEquipmentIdActions.update(i=>i===t?null:t)}areActionsVisible(t){return this.activeEquipmentIdActions()===t}onCloseActionMenu(){this.activeEquipmentIdActions.set(null)}getGymActionItems(t,e){let i="rounded text-left px-3 py-1.5 sm:px-4 sm:py-2 font-medium text-gray-600 dark:text-gray-300 hover:bg-primary flex items-center text-sm hover:text-white dark:hover:text-gray-100 dark:hover:text-white",d="rounded text-left px-3 py-1.5 sm:px-4 sm:py-2 font-medium text-gray-600 dark:text-gray-300 hover:bg-red-600 flex items-center text-sm hover:text-gray-100 hover:animate-pulse",f=this.allEquipment().find(Q=>Q.id===t),_=[G(S({},De),{data:{equipmentId:t}}),G(S({},Re),{data:{equipmentId:t}})];return f?.isHidden?_.push(G(S({},We),{data:{equipmentId:t}})):_.push(G(S({},Ae),{data:{equipmentId:t}})),_.push(G(S({},Ue),{data:{equipmentId:t}})),_}handleActionMenuItemClick(t,e){let i=t.data?.equipmentId;if(i){switch(t.actionKey){case"view":this.navigateToForm(i);break;case"edit":this.navigateToForm(i);break;case"delete":this.deleteEquipment(i);break;case"hide":this.hideEquipment(i);break;case"unhide":this.unhideEquipment(i);break}this.activeEquipmentIdActions.set(null)}}hideEquipment(t){this.personalGymService.hideEquipment(t).subscribe(),this.activeEquipmentIdActions.set(null)}unhideEquipment(t){this.personalGymService.unhideEquipment(t).subscribe(),this.activeEquipmentIdActions.set(null)}fabMenuItems=[{actionKey:"add_equipment",label:"personalGym.list.createEquipment",iconName:"plus-circle",cssClass:"bg-primary"}];onFabAction(t){t==="add_equipment"&&this.navigateToForm()}filtersVisible=T(!1);toggleFiltersVisibility(){this.filtersVisible.update(t=>!t)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=N({type:a,selectors:[["app-personal-gym-list"]],decls:30,vars:27,consts:[["noEquipmentState",""],["noFilterResultsState",""],[1,"container","mx-auto","p-2","sm:p-4"],[1,"flex","justify-between","items-center","pb-2"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-200"],["type","button",1,"rounded-md","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-primary","dark:focus:ring-primary-light","transition-all","duration-300","ease-in-out",3,"click"],["name","filter",1,"w-10","h-10","transition-transform","duration-300"],[1,"overflow-hidden","transition-all","duration-500","ease-in-out"],[1,"p-4","bg-white","dark:bg-gray-700","rounded-md","shadow-md","border","dark:border-gray-600","mt-2"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-300","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["type","text","id","search-term",1,"block","w-full","p-2","border","rounded-md","dark:bg-gray-600","dark:border-gray-500","dark:text-gray-200",3,"input","placeholder","value"],["id","category-filter",1,"block","w-full","p-2","border","rounded-md","dark:bg-gray-600","dark:border-gray-500","dark:text-gray-200",3,"change","value"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"px-4","py-2","bg-gray-200","dark:bg-gray-600","text-gray-700","dark:text-gray-200","rounded-md","hover:bg-gray-300","dark:hover:bg-gray-500","inline-flex","items-center","justify-center",3,"click"],["name","trash",1,"h-6","w-6","mr-1"],[4,"ngIf","ngIfElse"],[3,"actionClicked","actions"],[3,"value"],["class","grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4",4,"ngIf","ngIfElse"],[1,"grid","grid-cols-2","md:grid-cols-2","lg:grid-cols-3","gap-4"],["class","bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-xl transition-shadow cursor-pointer p-4 flex flex-col justify-between relative",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-md","hover:shadow-xl","transition-shadow","cursor-pointer","p-4","flex","flex-col","justify-between","relative",3,"click"],[1,"text-lg","font-bold","text-primary","dark:text-primary-light"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"text-sm","text-gray-600","dark:text-gray-300","mt-2"],[4,"ngIf"],[1,"absolute","top-2","right-2"],[1,"relative"],[1,"text-gray-500","dark:text-gray-400","hover:bg-gray-200","dark:hover:bg-gray-500","rounded-full","focus:outline-none","flex","items-center",3,"click"],["name","menu-action",1,"h-10","w-10"],["class","action-menu-container",3,"modalTitle","displayMode","items","isVisible","itemClick","closeMenu",4,"ngIf"],["displayMode","compact",3,"items","isVisible","itemClick","closeMenu",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"action-menu-container",3,"itemClick","closeMenu","modalTitle","displayMode","items","isVisible"],["displayMode","compact",3,"itemClick","closeMenu","items","isVisible"],[1,"text-center","py-12","px-6","bg-white","dark:bg-gray-700","rounded-md","shadow-md","justify-center"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-300"],[1,"text-gray-500","dark:text-gray-400","mt-2","mb-6"],[1,"bg-primary","hover:bg-primary-dark","text-white","font-semibold","py-2","px-6","rounded-md","inline-flex","items-center",3,"click"],["name","plus-circle",1,"w-6","h-6","mr-1"],[1,"text-center","py-12","px-6","bg-white","dark:bg-gray-700","rounded-md","shadow-md"],[1,"text-gray-500","dark:text-gray-400","mt-2"]],template:function(e,i){if(e&1){let d=w();o(0,"div",2)(1,"header",3)(2,"h1",4),l(3),m(4,"translate"),n(),o(5,"button",5),k("click",function(){return h(d),C(i.toggleFiltersVisibility())}),g(6,"app-icon",6),n()(),o(7,"div",7)(8,"section",8)(9,"h2",9),l(10),m(11,"translate"),n(),o(12,"div",10)(13,"input",11),m(14,"translate"),k("input",function(_){return h(d),C(i.onSearchChange(_))}),n(),o(15,"select",12),k("change",function(_){return h(d),C(i.onCategoryChange(_))}),o(16,"option",13),l(17),m(18,"translate"),n(),x(19,ze,2,2,"option",14),n(),o(20,"button",15),k("click",function(){return h(d),C(i.clearFilters())}),g(21,"app-icon",16),l(22),m(23,"translate"),n()()()(),x(24,ot,2,2,"div",17)(25,lt,11,9,"ng-template",null,0,te)(27,mt,7,6,"ng-template",null,1,te),n(),o(29,"app-fab-menu",18),k("actionClicked",function(_){return h(d),C(i.onFabAction(_))}),n()}if(e&2){let d=Z(26);r(3),u(p(4,17,"personalGym.list.title")),r(3),ee("rotate-180",i.filtersVisible()===!0),r(),pe("max-height",i.filtersVisible()?"1000px":"0px"),ee("mb-6",i.filtersVisible()),r(3),u(p(11,19,"routineList.filters.title")),r(3),s("placeholder",p(14,21,"personalGym.list.searchPlaceholder"))("value",i.searchTerm()),r(2),s("value",i.selectedCategory()||""),r(2),u(p(18,23,"personalGym.list.allCategories")),r(2),s("ngForOf",i.categories),r(3),v(" ",p(23,25,"personalGym.list.clearFilters")," "),r(2),s("ngIf",i.allEquipment().length>0)("ngIfElse",d),r(5),s("actions",i.fabMenuItems)}},dependencies:[D,A,W,$,Oe,H,$e,Y],encapsulation:2,data:{animation:[U("fabSlideUp",[M(":enter",[q({opacity:0,transform:"translateY(200%)"}),P("250ms ease-out",q({opacity:1,transform:"translateY(0)"}))]),M(":leave",[P("200ms ease-in",q({opacity:0,transform:"translateY(100%)"}))])]),U("slideInOutActions",[L("void",q({height:"0px",opacity:0,overflow:"hidden",paddingTop:"0",paddingBottom:"0",marginTop:"0",marginBottom:"0"})),L("*",q({height:"*",opacity:1,paddingTop:"0.5rem",paddingBottom:"0.5rem"})),M("void <=> *",P("200ms ease-in-out"))]),U("dropdownMenu",[L("void",q({opacity:0,transform:"scale(0.75) translateY(-10px)",transformOrigin:"top right"})),L("*",q({opacity:1,transform:"scale(1) translateY(0)",transformOrigin:"top right"})),M("void => *",[P("150ms cubic-bezier(0.25, 0.8, 0.25, 1)")]),M("* => void",[P("100ms cubic-bezier(0.25, 0.8, 0.25, 1)")])])]}})};var pt=()=>["/personal-gym"],st=(a,t,e,i)=>[a,t,e,i];function dt(a,t){if(a&1&&(o(0,"option",26),l(1),n()),a&2){let e=t.$implicit;s("value",e.id),r(),v(" ",e.name," ")}}function ct(a,t){if(a&1&&(o(0,"label",32),g(1,"input",33),o(2,"span",34),l(3),m(4,"translate"),n()()),a&2){let e=t.$implicit;r(),s("value",e),r(2),u(p(4,2,"personalGym.form.weightTypes."+e))}}function ut(a,t){if(a&1&&(o(0,"div")(1,"label",35),l(2),m(3,"translate"),n(),g(4,"input",36),n()),a&2){let e=c(2);r(2),E("",p(3,2,"personalGym.form.weightLabel")," (",e.unitService.getWeightUnitSuffix(),")")}}function gt(a,t){if(a&1&&(o(0,"div",37)(1,"div")(2,"label",38),l(3),m(4,"translate"),n(),g(5,"input",39),n(),o(6,"div")(7,"label",40),l(8),m(9,"translate"),n(),g(10,"input",41),n(),o(11,"div")(12,"label",42),l(13),m(14,"translate"),n(),g(15,"input",43),n()()),a&2){let e=c(2);r(3),E("",p(4,6,"personalGym.form.minWeightLabel")," (",e.unitService.getWeightUnitSuffix(),")"),r(5),E("",p(9,8,"personalGym.form.maxWeightLabel")," (",e.unitService.getWeightUnitSuffix(),")"),r(5),E("",p(14,10,"personalGym.form.stepLabel")," (",e.unitService.getWeightUnitSuffix(),")")}}function yt(a,t){if(a&1&&(I(0),o(1,"div",27)(2,"label",28),l(3),m(4,"translate"),n(),o(5,"div",29),x(6,ct,5,4,"label",30),n(),x(7,ut,5,4,"div",19)(8,gt,16,12,"div",31),n(),F()),a&2){let e,i,d=c();r(3),u(p(4,4,"personalGym.form.weightTypeLabel")),r(3),s("ngForOf",d.weightTypes),r(),s("ngIf",((e=d.equipmentForm.get("weightType"))==null?null:e.value)==="fixed"),r(),s("ngIf",((i=d.equipmentForm.get("weightType"))==null?null:i.value)==="adjustable")}}function ft(a,t){a&1&&(o(0,"span",55),l(1),m(2,"translate"),n()),a&2&&(r(),u(p(2,1,"personalGym.form.colorAutomatic")))}function xt(a,t){a&1&&(o(0,"span",55),l(1),m(2,"translate"),n()),a&2&&(r(),u(p(2,1,"personalGym.form.colorCustom")))}function vt(a,t){if(a&1&&(I(0),o(1,"div",44)(2,"div")(3,"label",35),l(4),m(5,"translate"),n(),g(6,"input",36),n(),o(7,"div",45)(8,"label",46),l(9),m(10,"translate"),n(),o(11,"label",47),g(12,"input",48)(13,"span",49),n()(),o(14,"div")(15,"label",50),l(16),m(17,"translate"),x(18,ft,3,3,"span",51)(19,xt,3,3,"span",51),n(),o(20,"div",52),g(21,"input",53)(22,"input",54),n()()(),F()),a&2){let e,i,d=c();r(4),E("",p(5,6,"personalGym.form.weightLabel")," (",d.unitService.getWeightUnitSuffix(),")"),r(5),u(p(10,8,"personalGym.form.isOlympicLabel")),r(7),v(" ",p(17,10,"personalGym.form.colorLabel")," "),r(2),s("ngIf",(e=d.equipmentForm.get("isOlympic"))==null?null:e.value),r(),s("ngIf",!((i=d.equipmentForm.get("isOlympic"))!=null&&i.value))}}function bt(a,t){if(a&1&&(o(0,"option",26),l(1),m(2,"translate"),n()),a&2){let e=t.$implicit;s("value",e),r(),v("",p(2,2,"personalGym.form.barTypes."+e)," ")}}function _t(a,t){if(a&1&&(I(0),o(1,"div",56)(2,"div")(3,"label",35),l(4),m(5,"translate"),n(),g(6,"input",36),n(),o(7,"div")(8,"label",57),l(9),m(10,"translate"),n(),o(11,"select",58),x(12,bt,3,4,"option",10),n()()(),F()),a&2){let e=c();r(4),E("",p(5,4,"personalGym.form.barWeightLabel")," (",e.unitService.getWeightUnitSuffix(),")"),r(5),u(p(10,6,"personalGym.form.barTypeLabel")),r(3),s("ngForOf",e.barTypes)}}function ht(a,t){if(a&1&&(o(0,"option",26),l(1),m(2,"translate"),n()),a&2){let e=t.$implicit;s("value",e),r(),v("",p(2,2,"personalGym.form.bandTypes."+e)," ")}}function Ct(a,t){if(a&1&&(o(0,"option",26),l(1),m(2,"translate"),n()),a&2){let e=t.$implicit;s("value",e),r(),u(p(2,2,"personalGym.form.resistanceLevels."+e))}}function kt(a,t){if(a&1&&(I(0),o(1,"div",59)(2,"div")(3,"label",60),l(4),m(5,"translate"),n(),o(6,"select",61),x(7,ht,3,4,"option",10),n()(),o(8,"div")(9,"label",62),l(10),m(11,"translate"),n(),o(12,"select",63),x(13,Ct,3,4,"option",10),n()(),o(14,"div")(15,"label",64),l(16),m(17,"translate"),n(),g(18,"input",65),n(),o(19,"div")(20,"label",50),l(21),m(22,"translate"),n(),g(23,"input",66),n(),o(24,"div")(25,"label",67),l(26),m(27,"translate"),n(),g(28,"input",68),n()(),F()),a&2){let e=c();r(4),u(p(5,9,"personalGym.form.bandTypeLabel")),r(3),s("ngForOf",e.bandTypes),r(3),u(p(11,11,"personalGym.form.resistanceLevelLabel")),r(3),s("ngForOf",e.resistanceLevels),r(3),E("",p(17,13,"personalGym.form.resistanceLabel")," (",e.unitService.getWeightUnitSuffix(),")"),r(5),u(p(22,15,"personalGym.form.colorLabel")),r(5),E("",p(27,17,"personalGym.form.lengthLabel")," (",e.unitService.getMeasureUnitSuffix(),")")}}function Et(a,t){if(a&1&&(o(0,"option",26),l(1),m(2,"translate"),n()),a&2){let e=t.$implicit;s("value",e),r(),u(p(2,2,"personalGym.form.machineLoadTypes."+e))}}function wt(a,t){if(a&1&&(I(0),o(1,"div",56)(2,"div")(3,"label",69),l(4),m(5,"translate"),n(),o(6,"select",70),x(7,Et,3,4,"option",10),n()(),o(8,"div")(9,"label",71),l(10),m(11,"translate"),n(),g(12,"input",72),n()(),F()),a&2){let e=c();r(4),u(p(5,4,"personalGym.form.loadTypeLabel")),r(3),s("ngForOf",e.machineLoadTypes),r(3),E("",p(11,6,"personalGym.form.maxLoadLabel")," (",e.unitService.getWeightUnitSuffix(),")")}}function St(a,t){if(a&1){let e=w();o(0,"div",79),g(1,"input",80),m(2,"translate"),g(3,"input",81),m(4,"translate"),o(5,"button",82),k("click",function(){let d=h(e).index,f=c(2);return C(f.removeCustomProperty(d))}),g(6,"app-icon",83),n()()}if(a&2){let e=t.index,i=c(2);s("formGroupName",e),r(),s("placeholder",p(2,3,"personalGym.form.propKeyPlaceholder")),r(2),s("placeholder",p(4,5,"personalGym.form.propValuePlaceholder")+" "+i.unitService.getWeightUnitSuffix())}}function Gt(a,t){if(a&1){let e=w();I(0),o(1,"div",27)(2,"div")(3,"label",73),l(4),m(5,"translate"),n(),g(6,"input",74),m(7,"translate"),n(),o(8,"div",75)(9,"h3",76),l(10),m(11,"translate"),n(),x(12,St,7,7,"div",77),o(13,"button",78),k("click",function(){h(e);let d=c();return C(d.addCustomProperty())}),l(14),m(15,"translate"),n()()(),F()}if(a&2){let e=c();r(4),u(p(5,5,"personalGym.form.customTypeLabel")),r(2),s("placeholder",p(7,7,"personalGym.form.customTypePlaceholder")),r(4),u(p(11,9,"personalGym.form.customPropsLabel")),r(2),s("ngForOf",e.customProperties.controls),r(2),u(p(15,11,"personalGym.form.addProperty"))}}var V=class a{fb=b(Pe);router=b(R);route=b(fe);personalGymService=b(z);equipmentService=b(Ne);toastService=b(Le);unitService=b(K);translate=b(j);equipmentForm;isEditMode=T(!1);editingEquipmentId=null;pageTitle=O(()=>this.isEditMode()?this.translate.instant("personalGym.form.editTitle"):this.translate.instant("personalGym.form.addTitle"));subscriptions=new re;hydratedCategories=this.equipmentService.getEquipmentHydratedCategories();categoriesEnum=B;categories=Object.values(B);weightTypes=["fixed","adjustable"];bandTypes=["loop","mini-loop","handled","therapy"];machineLoadTypes=["stack","plate-loaded","bodyweight"];barTypes=["olympic","standard","ez-curl","hex","swiss","custom"];resistanceLevels=["extra-light","light","medium","heavy","extra-heavy"];OLYMPIC_COLORS_KG={25:"#ff0000",20:"#0000ff",15:"#ffff00",10:"#00ff00",5:"#fafafa",2.5:"#ff0000",2:"#0000ff",1.5:"#ffff00",1:"#00ff00",.5:"#fafafa"};OLYMPIC_COLORS_LB={55:"#ff0000",45:"#0000ff",35:"#ffff00",25:"#00ff00",10:"#fafafa",5:"#424242",2.5:"#424242"};constructor(){this.equipmentForm=this.fb.group({name:["",y.required],category:[null,y.required],quantity:[1,[y.required,y.min(1)]],brand:[""],notes:[""],unit:[this.unitService.getWeightUnitSuffix()]})}ngOnInit(){let t=this.route.paramMap.pipe(le(i=>(this.editingEquipmentId=i.get("id"),this.editingEquipmentId?(this.isEditMode.set(!0),this.personalGymService.getEquipmentById(this.editingEquipmentId)):ne(null))),oe(1)).subscribe(i=>{i&&this.patchFormForEditing(i)});this.subscriptions.add(t);let e=this.equipmentForm.get("category")?.valueChanges.subscribe(i=>{this.updateFormForCategory(i)});this.subscriptions.add(e)}ngOnDestroy(){this.subscriptions.unsubscribe()}updateFormForCategory(t){switch(["weightType","weight","minweight","maxweight","increment","barType","bandType","resistanceLevel","resistance","color","length","loadType","maxLoad","customCategoryName","properties","isOlympic"].forEach(i=>this.removeControl(i)),t){case"dumbbell":case"kettlebell":case"macebell":case"club":if(this.addControl("weightType","fixed",y.required),!this.subscriptions.closed){let i=this.equipmentForm.get("weightType")?.valueChanges.subscribe(d=>{this.updateFormForWeightType(d)});i&&this.subscriptions.add(i)}this.updateFormForWeightType("fixed");break;case"plate":this.addControl("weight",null,[y.required,y.min(0)]),this.addControl("isOlympic",!0),this.addControl("color",this.getOlympicPlateColor(0)),this.setupPlateColorSubscription();break;case"barbell":this.addControl("weight",null,[y.required,y.min(0)]),this.addControl("barType","olympic");break;case"band":this.addControl("bandType","loop",y.required),this.addControl("resistanceLevel","medium"),this.addControl("resistance",null,[y.min(0)]),this.addControl("color",""),this.addControl("length",null,[y.min(0)]);break;case"machine":this.addControl("loadType","stack",y.required),this.addControl("maxLoad",null,y.min(0));break;case"custom":this.addControl("customCategoryName","",y.required),this.addControl("properties",this.fb.array([]));break}}updateFormForWeightType(t){this.removeControl("weight"),this.removeControl("minweight"),this.removeControl("maxweight"),this.removeControl("increment"),t==="fixed"?this.addControl("weight",null,[y.required,y.min(0)]):t==="adjustable"&&(this.addControl("minweight",null,[y.required,y.min(0)]),this.addControl("maxweight",null,[y.required,y.min(0)]),this.addControl("increment",null,[y.required,y.min(.1)]))}patchFormForEditing(t){if(this.updateFormForCategory(t.category),this.equipmentForm.patchValue(t),t.category==="custom"){let e=this.equipmentForm.get("properties");e.clear(),t.properties.forEach(i=>{e.push(this.fb.group({key:[i.key,y.required],value:[i.value,y.required]}))})}}addControl(t,e,i){this.equipmentForm.addControl(t,this.fb.control(e,i))}removeControl(t){this.equipmentForm.get(t)&&this.equipmentForm.removeControl(t)}get customProperties(){return this.equipmentForm.get("properties")}addCustomProperty(){this.customProperties.push(this.fb.group({key:["",y.required],value:["",y.required]}))}removeCustomProperty(t){this.customProperties.removeAt(t)}onSubmit(){if(this.equipmentForm.invalid){this.toastService.error(this.translate.instant("personalGym.form.toasts.invalidForm"),0,"Invalid Form"),this.equipmentForm.markAllAsTouched();return}let t=this.equipmentForm.getRawValue();if(this.isEditMode()&&this.editingEquipmentId){let e=G(S({},t),{id:this.editingEquipmentId});this.personalGymService.updateEquipment(e)}else this.personalGymService.addEquipment(t);this.router.navigate(["/personal-gym"])}setupPlateColorSubscription(){let t=this.equipmentForm.get("isOlympic")?.valueChanges.pipe(X(this.equipmentForm.get("isOlympic")?.value)),e=this.equipmentForm.get("weight")?.valueChanges.pipe(X(this.equipmentForm.get("weight")?.value)),i=this.equipmentForm.get("color");if(t&&e&&i){let d=ae([t,e]).subscribe(([f,_])=>{if(f){let Q=this.getOlympicPlateColor(_||0);i.setValue(Q),i.disable()}else i.enable()});this.subscriptions.add(d)}}getOlympicPlateColor(t){return(this.unitService.getWeightUnitSuffix()==="kg"?this.OLYMPIC_COLORS_KG:this.OLYMPIC_COLORS_LB)[t]||"#424242"}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=N({type:a,selectors:[["app-personal-gym-form"]],decls:51,vars:43,consts:[[1,"container","mx-auto","max-w-2xl","p-4","sm:p-6"],[1,"mb-6","flex","items-center"],[1,"text-gray-600","dark:text-gray-300","hover:text-primary","p-2","-ml-2",3,"routerLink"],["name","back",1,"w-6","h-6"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-200","ml-4"],[1,"space-y-6","bg-white","dark:bg-gray-800","p-6","rounded-lg","shadow-md",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],["for","category",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","category","formControlName","category",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200"],["disabled","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["for","name",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","name","formControlName","name",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200",3,"placeholder"],[1,"grid","grid-cols-2","gap-4"],["for","quantity",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","quantity","formControlName","quantity",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200"],["for","brand",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","brand","formControlName","brand",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200"],[3,"ngSwitch"],[4,"ngIf"],[4,"ngSwitchCase"],["for","notes",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","notes","formControlName","notes","rows","3",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200"],[1,"pt-4","border-t","border-gray-200","dark:border-gray-600","flex","justify-end"],["type","submit",1,"flex","items-center","bg-primary","text-white","hover:bg-primary-dark","font-semibold","py-2","px-4","rounded-md","disabled:opacity-50",3,"disabled"],["name","save",1,"h-6","w-6","mr-1"],[3,"value"],[1,"space-y-4","pt-4","border-t","dark:border-gray-600"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"flex","space-x-4"],["class","flex items-center",4,"ngFor","ngForOf"],["class","grid grid-cols-3 gap-4",4,"ngIf"],[1,"flex","items-center"],["type","radio","formControlName","weightType",1,"form-radio",3,"value"],[1,"text-gray-700","dark:text-gray-300","ml-2"],["for","weight",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","weight","formControlName","weight",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200"],[1,"grid","grid-cols-3","gap-4"],["for","minweight",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","minweight","formControlName","minweight",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200"],["for","maxweight",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","maxweight","formControlName","maxweight",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200"],["for","increment",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","increment","formControlName","increment",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-x-4","gap-y-6","pt-4","border-t","dark:border-gray-600"],[1,"flex","items-center","justify-between","sm:mt-7"],["for","isOlympic",1,"text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"toggle-switch"],["type","checkbox","id","isOlympic","formControlName","isOlympic"],[1,"slider","round"],["for","color",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["class","text-xs text-gray-500",4,"ngIf"],[1,"flex","items-center","space-x-2","mt-1"],["type","color","formControlName","color",1,"h-10","w-12","p-1","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","dark:bg-gray-600"],["type","text","id","color","formControlName","color",1,"block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200"],[1,"text-xs","text-gray-500"],[1,"grid","grid-cols-2","gap-4","pt-4","border-t","dark:border-gray-600"],["for","barType",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","barType","formControlName","barType",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4","pt-4","border-t","dark:border-gray-600"],["for","bandType",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","bandType","formControlName","bandType",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200"],["for","resistanceLevel",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","resistanceLevel","formControlName","resistanceLevel",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200"],["for","resistance",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","resistance","formControlName","resistance",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200"],["type","text","id","color","formControlName","color",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200"],["for","length",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","length","formControlName","length",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200"],["for","loadType",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","loadType","formControlName","loadType",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200"],["for","maxLoad",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","maxLoad","formControlName","maxLoad",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200"],["for","customCategoryName",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","customCategoryName","formControlName","customCategoryName",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg","dark:text-gray-200",3,"placeholder"],["formArrayName","properties",1,"space-y-3"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300"],["class","flex items-center space-x-2",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"text-sm","text-primary","hover:underline",3,"click"],[1,"flex","items-center","space-x-2",3,"formGroupName"],["type","text","formControlName","key",1,"input-field","flex-1",3,"placeholder"],["type","text","formControlName","value",1,"input-field","flex-1",3,"placeholder"],["type","button",1,"p-2","text-red-500","hover:bg-red-100","rounded-full",3,"click"],["name","trash",1,"w-5","h-5"]],template:function(e,i){if(e&1&&(o(0,"div",0)(1,"header",1)(2,"button",2),g(3,"app-icon",3),n(),o(4,"h1",4),l(5),n()(),o(6,"form",5),k("ngSubmit",function(){return i.onSubmit()}),o(7,"div",6)(8,"div")(9,"label",7),l(10),m(11,"translate"),n(),o(12,"select",8)(13,"option",9),l(14),m(15,"translate"),n(),x(16,dt,2,2,"option",10),n()(),o(17,"div")(18,"label",11),l(19),m(20,"translate"),n(),g(21,"input",12),m(22,"translate"),n()(),o(23,"div",13)(24,"div")(25,"label",14),l(26),m(27,"translate"),n(),g(28,"input",15),n(),o(29,"div")(30,"label",16),l(31),m(32,"translate"),n(),g(33,"input",17),n()(),I(34,18),x(35,yt,9,6,"ng-container",19)(36,vt,23,12,"ng-container",20)(37,_t,13,8,"ng-container",20)(38,kt,29,19,"ng-container",20)(39,wt,13,8,"ng-container",20)(40,Gt,16,13,"ng-container",20),F(),o(41,"div")(42,"label",21),l(43),m(44,"translate"),n(),g(45,"textarea",22),n(),o(46,"div",23)(47,"button",24),g(48,"app-icon",25),l(49),m(50,"translate"),n()()()()),e&2){let d,f;r(2),s("routerLink",de(37,pt)),r(3),u(i.pageTitle()),r(),s("formGroup",i.equipmentForm),r(4),u(p(11,21,"personalGym.form.categoryLabel")),r(3),s("ngValue",null),r(),u(p(15,23,"personalGym.form.categoryPlaceholder")),r(2),s("ngForOf",i.hydratedCategories),r(3),u(p(20,25,"personalGym.form.nameLabel")),r(2),s("placeholder",p(22,27,"personalGym.form.namePlaceholder")),r(5),u(p(27,29,"personalGym.form.quantityLabel")),r(5),u(p(32,31,"personalGym.form.brandLabel")),r(3),s("ngSwitch",(d=i.equipmentForm.get("category"))==null?null:d.value),r(),s("ngIf",ce(38,st,i.categoriesEnum.dumbbell,i.categoriesEnum.kettlebell,i.categoriesEnum.macebell,i.categoriesEnum.club).includes((f=i.equipmentForm.get("category"))==null?null:f.value)),r(),s("ngSwitchCase",i.categoriesEnum.plate),r(),s("ngSwitchCase",i.categoriesEnum.barbell),r(),s("ngSwitchCase",i.categoriesEnum.band),r(),s("ngSwitchCase",i.categoriesEnum.machine),r(),s("ngSwitchCase",i.categoriesEnum.custom),r(3),u(p(44,33,"personalGym.form.notesLabel")),r(4),s("disabled",i.equipmentForm.invalid),r(2),v(" ",p(50,35,i.isEditMode()?"personalGym.form.saveChanges":"personalGym.form.addToGym")," ")}},dependencies:[D,A,W,ue,ge,Me,Ce,Fe,qe,be,ke,ve,Ie,Ee,_e,he,we,Te,Se,Ge,$,xe,H,Y],encapsulation:2})};var vi=[{path:"",component:J,title:"My Personal Gym"},{path:"new",component:V,title:"Add New Equipment"},{path:"edit/:id",component:V,title:"Edit Equipment"}];export{vi as PERSONAL_GYM_ROUTES};
