import{c as k,d as y,f as p,g as A,h as x}from"./chunk-YAHOZYMW.js";import{$a as B,Aa as w,Fa as i,Fb as L,Ga as c,Gb as z,Ha as l,Hb as N,Ia as m,Ib as K,Ic as P,Ja as f,Jb as $,Ka as v,Ma as I,Na as C,Oa as r,P as u,Sb as F,T as h,U as M,Xa as O,Za as S,_a as V,_b as R,ba as E,da as T,ha as g,ka as H,la as a,ua as D,za as s}from"./chunk-EOMZYKKV.js";function Y(e,n){e&1&&m(0,"div",8)}function q(e,n){if(e&1&&m(0,"span",11),e&2){let t=n.ngIf,o=r(2).$implicit;i("innerHTML",t,g)("ngClass",o.iconClass||"w-5 h-5 mr-2")}}function G(e,n){if(e&1){let t=I();c(0,"button",9),C("click",function(_){h(t);let d=r().$implicit,b=r(3);return M(b.onItemClicked(_,d))}),s(1,q,1,2,"span",10),S(2),l()}if(e&2){let t=r().$implicit,o=r(3);i("ngClass",t.buttonClass||"w-full text-left px-3 py-1.5 sm:px-4 sm:py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center text-sm"),a(),i("ngIf",o.getIconHtml(t)),a(),B(" ",t.label," ")}}function J(e,n){if(e&1&&(f(0),s(1,Y,1,0,"div",6)(2,G,3,3,"button",7),v()),e&2){let t=n.$implicit;a(),i("ngIf",t.isDivider),a(),i("ngIf",!t.isDivider)}}function Q(e,n){if(e&1&&(c(0,"div",4),s(1,J,3,2,"ng-container",5),l()),e&2){let t=r(2);i("@dropdownMenu",void 0)("ngClass",t.dropdownMenuClass),a(),i("ngForOf",t.items)}}function U(e,n){if(e&1&&(c(0,"div"),s(1,Q,2,3,"div",3),l()),e&2){let t=r();a(),i("ngIf",t.isVisible)}}function W(e,n){if(e&1&&m(0,"span",11),e&2){let t=r(2).$implicit,o=r(3);O("mr-1",o.showLabelInCompact(t)),i("innerHTML",o.sanitizeSvg(t.iconSvg),g)("ngClass",t.iconClass||"w-4 h-4")}}function X(e,n){if(e&1&&m(0,"span",11),e&2){let t=n.ngIf,o=r(2).$implicit;i("innerHTML",t,g)("ngClass",o.iconClass||"w-5 h-5 mr-2")}}function Z(e,n){if(e&1&&(c(0,"span"),S(1),l()),e&2){let t=r(2).$implicit;a(),V(t.label)}}function tt(e,n){if(e&1){let t=I();c(0,"button",13),C("click",function(_){h(t);let d=r().$implicit,b=r(3);return M(b.onItemClicked(_,d))}),s(1,W,1,4,"span",14)(2,X,1,2,"span",10)(3,Z,2,1,"span",15),l()}if(e&2){let t=r().$implicit,o=r(3);i("title",t.label)("ngClass",t.buttonClass||`flex-1 text-xs min-w-[60px] flex items-center justify-center p-1.5
                rounded-md transition-colors `),a(),i("ngIf",t.iconSvg||t.iconName),a(),i("ngIf",o.getIconHtml(t)),a(),i("ngIf",o.showLabelInCompact(t))}}function et(e,n){if(e&1&&(f(0),s(1,tt,4,5,"button",12),v()),e&2){let t=n.$implicit;a(),i("ngIf",!t.isDivider)}}function nt(e,n){if(e&1&&(c(0,"div",4),s(1,et,2,1,"ng-container",5),l()),e&2){let t=r(2);i("@compactBar",void 0)("ngClass",t.compactBarClass),a(),i("ngForOf",t.items)}}function it(e,n){if(e&1&&(c(0,"div"),s(1,nt,2,3,"div",3),l()),e&2){let t=r();a(),i("ngIf",t.isVisible)}}var ot=k("dropdownMenu",[x(":enter",[p({opacity:0,transform:"scale(0.95) translateY(-10px)"}),y("100ms ease-out",p({opacity:1,transform:"scale(1) translateY(0)"}))]),x(":leave",[y("75ms ease-in",p({opacity:0,transform:"scale(0.95) translateY(-10px)"}))])]),rt=k("compactBar",[A("void",p({height:"0px",opacity:0,overflow:"hidden",paddingTop:"0",paddingBottom:"0",marginTop:"0",marginBottom:"0"})),A("*",p({height:"*",opacity:1,overflow:"hidden",paddingTop:"0.5rem",paddingBottom:"0.5rem"})),x("void <=> *",y("200ms ease-in-out"))]),j=class e{sanitizer=u(R);elRef=u(T);items=[];isVisible=!1;displayMode="dropdown";dropdownMenuClass="origin-top-right absolute right-0 top-full mt-1 sm:mt-2 w-40 sm:w-48 rounded-md shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black dark:ring-gray-600 ring-opacity-5 focus:outline-none py-1 z-[60]";compactBarClass="flex flex-wrap gap-1.5 justify-center z-20 rounded-b-lg grid-cols-3";itemClick=new w;closeMenu=new w;_boundOnEnterKey=this.handleEnterKey.bind(this);ngOnChanges(n){n.isVisible&&(n.isVisible.currentValue===!0?document.addEventListener("keydown",this._boundOnEnterKey):document.removeEventListener("keydown",this._boundOnEnterKey))}ngOnDestroy(){document.removeEventListener("keydown",this._boundOnEnterKey)}onDocumentClick(n){this.isVisible&&!this.elRef.nativeElement.contains(n.target)&&this.closeMenu.emit()}handleEnterKey(n){if(n.key!=="Enter")return;n.preventDefault();let t=this.items.find(o=>!o.isDivider);t&&this.onItemClicked({stopPropagation:()=>{}},t)}onItemClicked(n,t){n.stopPropagation(),t.isDivider||(navigator.vibrate&&navigator.vibrate(50),this.itemClick.emit({actionKey:t.actionKey??"",data:t.data}),this.displayMode==="dropdown"&&this.closeMenu.emit())}sanitizeSvg(n){return n?this.sanitizer.bypassSecurityTrustHtml(n):null}showLabelInCompact(n){return!!n.label}iconRegistry=u(P);getIconHtml(n){let t=null;return n.iconName?t=this.iconRegistry.getIconString(n.iconName):n.iconSvg&&(t=n.iconSvg),t?this.sanitizer.bypassSecurityTrustHtml(t):null}getPippo(){return"pippo"}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=D({type:e,selectors:[["app-action-menu"]],hostBindings:function(t,o){t&1&&C("click",function(d){return o.onDocumentClick(d)},H)},inputs:{items:"items",isVisible:"isVisible",displayMode:"displayMode",dropdownMenuClass:"dropdownMenuClass",compactBarClass:"compactBarClass"},outputs:{itemClick:"itemClick",closeMenu:"closeMenu"},features:[E],decls:4,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"hidden","dark:hover:text-gray-100"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngFor","ngForOf"],["class","my-0.5 sm:my-1 border-t border-gray-200 dark:border-gray-600",4,"ngIf"],["type","button","class","transition-colors duration-150 ease-in-out",3,"ngClass","click",4,"ngIf"],[1,"my-0.5","sm:my-1","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"transition-colors","duration-150","ease-in-out",3,"click","ngClass"],[3,"innerHTML","ngClass",4,"ngIf"],[3,"innerHTML","ngClass"],["type","button",3,"title","ngClass","click",4,"ngIf"],["type","button",3,"click","title","ngClass"],[3,"innerHTML","ngClass","mr-1",4,"ngIf"],[4,"ngIf"]],template:function(t,o){t&1&&(f(0,0),s(1,U,2,1,"div",1)(2,it,2,1,"div",1),v(),m(3,"div",2)),t&2&&(i("ngSwitch",o.displayMode),a(),i("ngSwitchCase","dropdown"),a(),i("ngSwitchCase","compact-bar"))},dependencies:[F,L,z,N,K,$],encapsulation:2,data:{animation:[ot,rt]},changeDetection:0})};export{j as a};
