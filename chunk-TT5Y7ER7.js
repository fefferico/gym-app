import{s as P}from"./chunk-QHNVQ6FU.js";import{K as k,xa as O}from"./chunk-MJBL7MUB.js";import{g as G}from"./chunk-GAL4ENT6.js";var S=class l{transform(n,t="dd/MM/yy HH:mm"){if(n==null||!isFinite(n))return"";try{let e=new Date(n);return P(e,t)}catch(e){return console.error(`Error formatting date from milliseconds value: ${n}`,e),"Invalid Date"}}static \u0275fac=function(t){return new(t||l)};static \u0275pipe=O({name:"millisecondsDate",type:l,pure:!0})};var D=class l{audioCtx=null;constructor(){}playSound(n){return G(this,null,function*(){if(this.initializeAudioContext(),!this.audioCtx)return;this.audioCtx.state==="suspended"&&this.audioCtx.resume();let t=this.audioCtx.currentTime,e=this.audioCtx.createOscillator(),i=this.audioCtx.createGain(),a=this.audioCtx.createGain(),r=this.audioCtx.createGain(),o=this.audioCtx.createOscillator(),s=this.audioCtx.createOscillator(),u=this.audioCtx.createOscillator(),B=this.audioCtx.createOscillator();switch(n){case"countdown":e.type="sine",e.frequency.setValueAtTime(880,t),i.gain.setValueAtTime(2,t),i.gain.exponentialRampToValueAtTime(1e-4,t+.15),e.connect(i),i.connect(this.audioCtx.destination),e.start(t),e.stop(t+.15);break;case"end":a.gain.setValueAtTime(.8,t),a.gain.exponentialRampToValueAtTime(1e-4,t+2),o.type="sine",o.frequency.setValueAtTime(110,t),s.type="sine",s.frequency.setValueAtTime(220,t),u.type="sine",u.frequency.setValueAtTime(330,t),o.connect(a),s.connect(a),u.connect(a),a.connect(this.audioCtx.destination),o.start(t),o.stop(t+2),s.start(t),s.stop(t+2),u.start(t),u.stop(t+2);break;case"error":e.type="sawtooth",e.frequency.setValueAtTime(600,t),e.frequency.linearRampToValueAtTime(300,t+.25),i.gain.setValueAtTime(.4,t),i.gain.exponentialRampToValueAtTime(1e-4,t+.25),e.connect(i),i.connect(this.audioCtx.destination),e.start(t),e.stop(t+.25);break;case"correct":i.gain.setValueAtTime(.5,t),i.gain.exponentialRampToValueAtTime(1e-4,t+.7),o.type="sine",o.frequency.setValueAtTime(784,t),s.type="sine",s.frequency.setValueAtTime(1568,t),r.gain.setValueAtTime(.5,t),o.connect(i),s.connect(r),r.connect(i),i.connect(this.audioCtx.destination),o.start(t),o.stop(t+.7),s.start(t),s.stop(t+.7);break;case"untoggle":i.gain.setValueAtTime(.3,t),i.gain.exponentialRampToValueAtTime(1e-4,t+1),e.type="triangle",e.frequency.setValueAtTime(120,t),e.connect(i),i.connect(this.audioCtx.destination),e.start(t),e.stop(t+.1);break;case"whoosh":let g=.3;i.gain.setValueAtTime(1,t),i.gain.exponentialRampToValueAtTime(1e-4,t+g);let d=this.audioCtx.createBiquadFilter();d.type="bandpass",d.Q.value=15,d.frequency.setValueAtTime(4e3,t),d.frequency.exponentialRampToValueAtTime(100,t+g);let b=this.audioCtx.sampleRate*g,w=this.audioCtx.createBuffer(1,b,this.audioCtx.sampleRate),v=w.getChannelData(0);for(let f=0;f<b;f++)v[f]=Math.random()*2-1;let y=this.audioCtx.createBufferSource();y.buffer=w,y.connect(d),d.connect(i),i.connect(this.audioCtx.destination),y.start(t),y.stop(t+g);break;case"tada":a.gain.setValueAtTime(.6,t),a.gain.exponentialRampToValueAtTime(1e-4,t+1.2),a.connect(this.audioCtx.destination),o.type="triangle",o.frequency.setValueAtTime(523.25,t),o.connect(a),o.start(t),o.stop(t+.15),s.type="triangle",s.frequency.setValueAtTime(783.99,t+.15),s.connect(a),s.start(t+.15),s.stop(t+.3),u.type="triangle",u.frequency.setValueAtTime(1046.5,t+.3),u.connect(a),u.start(t+.3),u.stop(t+5);break;case"tatatada":a.gain.setValueAtTime(.6,t),a.gain.exponentialRampToValueAtTime(1e-4,t+3.5),a.connect(this.audioCtx.destination);let N=261.63,F=392,I=523.25,z=783.99,m=.15,A=.1,c=t,V=(f,R,p)=>{if(!this.audioCtx)return;let h=this.audioCtx.createOscillator(),C=this.audioCtx.createGain();h.type="triangle",h.frequency.setValueAtTime(f,p),C.gain.setValueAtTime(0,p),C.gain.linearRampToValueAtTime(1,p+.01),C.gain.exponentialRampToValueAtTime(1e-4,p+R),h.connect(C),C.connect(a),h.start(p),h.stop(p+R)};V(N,m,c),c+=m+A,V(F,m,c),c+=m+A,V(I,m,c),c+=m+A;let q=2,T=this.audioCtx.createOscillator(),x=this.audioCtx.createGain();T.type="triangle",T.frequency.setValueAtTime(z,c),x.gain.setValueAtTime(0,c),x.gain.linearRampToValueAtTime(1,c+.05),x.gain.exponentialRampToValueAtTime(1e-4,c+q+.5),T.connect(x),x.connect(a),T.start(c),T.stop(c+q+.5);break;case"magic":{this.playMagicRestoreSound();break}case"pop":{this.playPopSound();break}}})}initializeAudioContext(){if(!this.audioCtx)try{this.audioCtx=new(window.AudioContext||window.webkitAudioContext)}catch{console.error("Web Audio API is not supported in this browser")}}playMagicRestoreSound(){if(this.initializeAudioContext(),!this.audioCtx)return;let n=this.audioCtx.currentTime,t=[622.25,783.99,932.33],e=this.audioCtx.createGain();e.gain.setValueAtTime(.3,n),e.connect(this.audioCtx.destination),t.forEach((i,a)=>{if(!this.audioCtx)return;let r=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();r.type="sine",r.frequency.setValueAtTime(i,n),r.connect(o),o.connect(e);let s=n+a*.08;o.gain.setValueAtTime(0,s),o.gain.linearRampToValueAtTime(.4,s+.05),o.gain.exponentialRampToValueAtTime(1e-4,s+1.5),r.start(s),r.stop(s+1.5)})}playPopSound(){if(this.initializeAudioContext(),!this.audioCtx)return;let n=this.audioCtx.currentTime,t=this.audioCtx.createOscillator(),e=this.audioCtx.createGain();t.type="sine";let i=880,a=150,r=.1;t.frequency.setValueAtTime(i,n),t.frequency.exponentialRampToValueAtTime(a,n+r),e.gain.setValueAtTime(.7,n),e.gain.exponentialRampToValueAtTime(1e-4,n+.2),t.connect(e),e.connect(this.audioCtx.destination),t.start(n),t.stop(n+.25)}static \u0275fac=function(t){return new(t||l)};static \u0275prov=k({token:l,factory:l.\u0275fac,providedIn:"root"})};export{S as a,D as b};
