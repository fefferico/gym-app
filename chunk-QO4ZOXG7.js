import{a as z}from"./chunk-WTRVKYMP.js";import{g as J}from"./chunk-CIJQOW3S.js";import{f as K,g as U,h as B,j as q,v as G}from"./chunk-5S4TJA32.js";import{$b as y,Aa as C,Ma as s,Mb as W,Na as c,Nb as $,Oa as u,Ob as L,Pa as v,Qa as V,R as _,Ra as A,Ta as x,Ua as l,Va as a,W as p,X as d,Zb as Y,ba as b,cb as F,ea as O,eb as g,ed as j,fb as H,ga as P,gb as N,gd as R,ka as D,la as M,ma as r,tc as S,ua as I,uc as w,wa as E,xc as f,za as h,zc as k}from"./chunk-YF27MAQD.js";function ce(t,i){let e=U(),n=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,o=K(t,i?.in),m=o.getDay(),X=(m<n?-7:0)+6-(m-n);return o.setDate(o.getDate()+X),o.setHours(23,59,59,999),o}function me(t,i,e){return z(t,-i,e)}var T=class t{elementRef=_(O);clickOutside=new C;onDocumentClick(i){let e=i.target;e instanceof Node&&!this.elementRef.nativeElement.contains(e)&&this.clickOutside.emit(i)}static \u0275fac=function(e){return new(e||t)};static \u0275dir=E({type:t,selectors:[["","appClickOutside",""]],hostBindings:function(e,n){e&1&&l("click",function(m){return n.onDocumentClick(m)},M)},outputs:{clickOutside:"clickOutside"}})};function xe(t,i,e){let[n,o]=q(e?.in,t,i);return+B(n,e)==+B(o,e)}function ee(t,i){if(t&1){let e=x();c(0,"button",3),l("shortPress",function(){p(e);let o=a();return d(o.scrollToTop())}),v(1,"app-icon",4),c(2,"span",5),g(3,"Back to Top"),u()()}t&2&&(s("@fadeAnimation",void 0),r(),F("rotate-90",!0),s("strokeWidth",2.5))}function te(t,i){if(t&1){let e=x();c(0,"button",3),l("shortPress",function(){p(e);let o=a();return d(o.scrollToBottom())}),v(1,"app-icon",6),c(2,"span",5),g(3,"Back to Bottom"),u()()}t&2&&(s("@fadeAnimation",void 0),r(),s("strokeWidth",2.5))}function ie(t,i){if(t&1){let e=x();c(0,"div",14)(1,"span",15),l("shortPress",function(){p(e);let o=a().$implicit,m=a(3);return d(m.handleAction(o.actionKey))}),g(2),u(),c(3,"button",16),l("shortPress",function(){p(e);let o=a().$implicit,m=a(3);return d(m.handleAction(o.actionKey))}),v(4,"app-icon",17),c(5,"span",5),g(6),u()()()}if(t&2){let e=a().$implicit;r(),s("ngClass",e.cssClass),r(),N(" ",e.label," "),r(),s("ngClass",e.cssClass),r(),s("name",e.iconName),r(2),H(e.label)}}function ne(t,i){if(t&1&&(V(0),h(1,ie,7,5,"div",13),A()),t&2){let e=i.$implicit,n=a(3);r(),s("ngIf",!e.isPremium||n.subscriptionService.isPremium())}}function oe(t,i){if(t&1&&(c(0,"div",11),h(1,ne,2,1,"ng-container",12),u()),t&2){let e=a(2);s("@fabSlideUp",void 0),r(),s("ngForOf",e.actions)}}function se(t,i){if(t&1){let e=x();c(0,"div",7),l("mouseenter",function(){p(e);let o=a();return d(o.handleFabMouseEnter())})("mouseleave",function(){p(e);let o=a();return d(o.handleFabMouseLeave())}),c(1,"button",8),l("click",function(){p(e);let o=a();return d(o.handleFabClick())}),v(2,"app-icon",9),c(3,"span",5),g(4,"Open creation menu"),u()(),h(5,oe,2,2,"div",10),u()}if(t&2){let e=a();r(2),F("rotate-45",e.isFabActionsOpen()),r(3),s("ngIf",e.isFabActionsOpen())}}var Q=class t{workoutService=_(J);subscriptionService=_(G);platformId=_(P);pausedSub;actions=[];checkForPausedSession=!0;actionClicked=new C;scrollToBottomDisabled=!1;scrollToTopDisabled=!1;showMainButton=!0;customBottomPositioning=void 0;isFabActionsOpen=b(!1);showBackToTopButton=b(!1);showBackToBottomButton=b(!1);isPausedSession=b(!1);ngOnInit(){this.checkForPausedSession&&(this.isPausedSession.set(this.workoutService.isPausedSession()),this.pausedSub=this.workoutService.pausedWorkoutDiscarded$.subscribe(()=>{this.isPausedSession.set(!1)}))}ngOnDestroy(){this.pausedSub?.unsubscribe()}onWindowScroll(){if(y(this.platformId)){let i=window.pageYOffset||document.documentElement.scrollTop,e=window.innerHeight,n=document.body.scrollHeight,o=100;this.showBackToTopButton.set(i>400),this.showBackToBottomButton.set(i+e<n-o)}}scrollToTop(){y(this.platformId)&&window.scrollTo({top:0,behavior:"smooth"})}scrollToBottom(){y(this.platformId)&&window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}handleFabClick(){this.isFabActionsOpen.update(i=>!i)}handleFabMouseEnter(){}handleFabMouseLeave(){}handleAction(i){this.actionClicked.emit(i),this.isFabActionsOpen.set(!1)}handleClose(){this.isFabActionsOpen()&&this.isFabActionsOpen.set(!1)}checkClassForPositioning(){return this.customBottomPositioning?`bottom-${this.customBottomPositioning}`:this.isPausedSession()?"bottom-36":"bottom-20"}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=I({type:t,selectors:[["app-fab-menu"]],hostBindings:function(e,n){e&1&&l("scroll",function(){return n.onWindowScroll()},D)},inputs:{actions:"actions",checkForPausedSession:"checkForPausedSession",scrollToBottomDisabled:"scrollToBottomDisabled",scrollToTopDisabled:"scrollToTopDisabled",showMainButton:"showMainButton",customBottomPositioning:"customBottomPositioning"},outputs:{actionClicked:"actionClicked"},decls:4,vars:4,consts:[["appClickOutside","",1,"fixed","right-4","sm:right-10","z-40","flex","flex-col","items-center","gap-4","transition-all","duration-300",3,"clickOutside","ngClass"],["appPress","","type","button","class","bg-primary dark:bg-primary text-white rounded-full p-3 shadow-lg hover:bg-primary-dark dark:hover:bg-primary-light focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-focus dark:focus:ring-offset-gray-900 transition-opacity flex items-center",3,"shortPress",4,"ngIf"],["class","flex flex-col-reverse items-center gap-4",3,"mouseenter","mouseleave",4,"ngIf"],["appPress","","type","button",1,"bg-primary","dark:bg-primary","text-white","rounded-full","p-3","shadow-lg","hover:bg-primary-dark","dark:hover:bg-primary-light","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-focus","dark:focus:ring-offset-gray-900","transition-opacity","flex","items-center",3,"shortPress"],["name","back",1,"w-6","h-6",3,"strokeWidth"],[1,"sr-only"],["name","chevron-down",1,"w-6","h-6",3,"strokeWidth"],[1,"flex","flex-col-reverse","items-center","gap-4",3,"mouseenter","mouseleave"],["type","button",1,"flex","h-14","w-14","items-center","justify-center","rounded-full","bg-primary","text-white","shadow-xl","transition-all","duration-300","hover:bg-primary-dark","hover:scale-105","focus:outline-none","focus:ring-2","focus:ring-primary-focus","focus:ring-offset-2","dark:ring-offset-gray-900",3,"click"],["name","plus",1,"h-8","w-8","transition-transform","duration-300"],["class","flex flex-col items-center gap-4",4,"ngIf"],[1,"flex","flex-col","items-center","gap-4"],[4,"ngFor","ngForOf"],["class","group relative flex items-center",4,"ngIf"],[1,"group","relative","flex","items-center"],["appPress","",1,"absolute","right-full","mr-4","sm:hidden","whitespace-nowrap","rounded-md","px-3","py-2","text-sm","font-semibold","text-white","group-hover:block","cursor-pointer",2,"margin-right","-10px",3,"shortPress","ngClass"],["appPress","","type","button",1,"flex","h-12","w-12","items-center","justify-center","rounded-full","text-white","shadow-lg","transition-transform","hover:scale-110","focus:outline-none","focus:ring-2","focus:ring-offset-2","dark:ring-offset-gray-900",3,"shortPress","ngClass"],[1,"h-7","w-7",3,"name"]],template:function(e,n){e&1&&(c(0,"div",0),l("clickOutside",function(){return n.handleClose()}),h(1,ee,4,4,"button",1)(2,te,4,2,"button",1)(3,se,6,3,"div",2),u()),e&2&&(s("ngClass",n.checkClassForPositioning()),r(),s("ngIf",n.showBackToTopButton()&&!n.scrollToTopDisabled),r(),s("ngIf",n.showBackToBottomButton()&&!n.scrollToBottomDisabled),r(),s("ngIf",n.showMainButton))},dependencies:[Y,W,$,L,R,j,T],styles:["[_nghost-%COMP%]{display:block}"],data:{animation:[S("fabSlideUp",[k(":enter",[f({transform:"translateY(20%)",opacity:0}),w("200ms ease-out",f({transform:"translateY(0)",opacity:1}))]),k(":leave",[w("200ms ease-in",f({transform:"translateY(20%)",opacity:0}))])]),S("fadeAnimation",[k(":enter",[f({opacity:0}),w("200ms ease-in",f({opacity:1}))]),k(":leave",[w("200ms ease-out",f({opacity:0}))])])]}})};export{ce as a,xe as b,me as c,T as d,Q as e};
