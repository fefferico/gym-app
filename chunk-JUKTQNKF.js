import{a as z}from"./chunk-JYQZLKBL.js";import{a as q}from"./chunk-BKVU43SP.js";import{G as L,I as k,Ja as v,Ka as i,La as n,Lb as B,Ma as p,O as x,Qa as A,Ra as b,Sa as c,T as u,Tb as T,U as f,Wb as V,Za as D,_,bb as r,cb as l,db as S,dd as K,eb as E,gd as O,hd as R,ic as N,id as j,ja as a,jd as F,kc as P,ra as w,rb as d,sb as g,tb as h,vb as M,wa as y}from"./chunk-SFZ46NFX.js";import{g as C}from"./chunk-GAL4ENT6.js";function J(o,e){if(o&1){let t=A();i(0,"app-action-menu",26),b("itemClick",function(m){u(t);let I=c(2);return f(I.handleActionMenuItemClick(m))})("closeMenu",function(){u(t);let m=c(2);return f(m.onCloseActionMenu())}),n()}if(o&2){let t=c().ngIf,s=c();v("items",s.getLogDropdownActionItems(t))("isVisible",s.areActionsVisible(t.id))}}function Q(o,e){if(o&1&&(i(0,"p",27),r(1),d(2,"date"),d(3,"date"),n()),o&2){let t=c().ngIf;a(),E(" ",h(2,2,t.startTime,"shortTime")," - ",h(3,5,t.endTime,"shortTime")," ")}}function U(o,e){if(o&1&&(i(0,"div",17),p(1,"app-icon",28),i(2,"div",19),r(3),d(4,"translate"),n(),i(5,"div",20),r(6),n()()),o&2){let t=c().ngIf;a(3),l(g(4,2,"activityLogDetails.location")),a(3),l(t.location)}}function W(o,e){if(o&1&&(i(0,"div",29)(1,"h3",30),r(2),d(3,"translate"),n(),i(4,"p",31),r(5),n()()),o&2){let t=c().ngIf;a(2),l(g(3,2,"activityLogDetails.notes")),a(3),l(t.notes)}}function X(o,e){if(o&1){let t=A();i(0,"div",2)(1,"header",3)(2,"button",4),b("click",function(){u(t);let m=c();return f(m.goBack())}),p(3,"app-icon",5),n(),i(4,"div",6)(5,"div",7)(6,"button",8),b("click",function(m){let I=u(t).ngIf,H=c();return f(H.toggleActions(I.id,m))}),p(7,"app-icon",9),n(),y(8,J,1,2,"app-action-menu",10),n()()(),i(9,"div",11)(10,"div",12)(11,"h1",13),r(12),n(),i(13,"p",14),r(14),d(15,"date"),n(),y(16,Q,4,8,"p",15),n(),i(17,"div",16)(18,"div",17),p(19,"app-icon",18),i(20,"div",19),r(21),d(22,"translate"),n(),i(23,"div",20),r(24),n()(),i(25,"div",17),p(26,"app-icon",21),i(27,"div",19),r(28),d(29,"translate"),n(),i(30,"div",20),r(31),n()(),y(32,U,7,4,"div",22),i(33,"div",17),p(34,"app-icon",23),i(35,"div",19),r(36),d(37,"translate"),n(),i(38,"div",20),r(39),n()(),i(40,"div",17),p(41,"app-icon",24),i(42,"div",19),r(43),d(44,"translate"),n(),i(45,"div",20),r(46),n()()(),y(47,W,6,4,"div",25),n()()}if(o&2){let t=e.ngIf,s=c();a(8),v("ngIf",s.areActionsVisible(t.id)),a(4),l(t.activityName),a(2),l(h(15,14,t.startTime,"fullDate")),a(2),v("ngIf",t.endTime),a(5),l(g(22,17,"activityLogDetails.duration")),a(3),S("",t.durationMinutes," min"),a(4),l(g(29,19,"activityLogDetails.intensity")),a(3),l(t.intensity),a(),v("ngIf",t.location),a(4),l(g(37,21,"activityLogDetails.distance")),a(3),l(t.distanceKm?t.distanceKm+" km":"N.A."),a(4),l(g(44,23,"activityLogDetails.calories")),a(3),l(t.caloriesBurned?t.caloriesBurned+" kcal":"N.A."),a(),v("ngIf",t.notes)}}function Y(o,e){o&1&&(i(0,"div",32)(1,"p",33),r(2),d(3,"translate"),n()()),o&2&&(a(2),l(g(3,1,"activityLogDetails.loading")))}var G=class o{route=x(N);router=x(P);activityService=x(z);alertService=x(F);translate=x(O);activityLog=_(null);baseActivity=_(null);activeLogIdActions=_(null);ngOnInit(){this.route.paramMap.pipe(L(e=>{let t=e.get("id");return t?this.activityService.getActivityLogById(t):[null]}),k(e=>{if(e){this.activityLog.set(e);let t=this.activityService.getActivityById(e.activityId);t&&this.baseActivity.set(t)}else this.activityLog.set(null),this.baseActivity.set(null)})).subscribe()}goBack(){this.router.navigate(["/history"])}editLog(e){this.router.navigate(["/activities/log/edit",e])}deleteLog(e){return C(this,null,function*(){let t=yield this.alertService.showConfirmationDialog(this.translate.instant("activityLogDetails.alerts.deleteTitle"),this.translate.instant("activityLogDetails.alerts.deleteMessage",{name:e.activityName}),[{text:this.translate.instant("activityLogDetails.alerts.cancel"),role:"cancel",data:!1},{text:this.translate.instant("activityLogDetails.alerts.deleteButton"),role:"confirm",data:!0,cssClass:"bg-red-500"}]);t&&t.data&&(this.activityService.deleteActivityLog(e.id),this.router.navigate(["/history"]))})}toggleActions(e,t){t.stopPropagation(),this.activeLogIdActions.update(s=>s===e?null:e)}areActionsVisible(e){return this.activeLogIdActions()===e}onCloseActionMenu(){this.activeLogIdActions.set(null)}getLogDropdownActionItems(e){return[{label:this.translate.instant("activityLogDetails.actions.edit"),actionKey:"edit",iconSvg:"asdasd",iconName:"edit",iconClass:"w-8 h-8 mr-2",buttonClass:"w-full "+"rounded text-left px-4 py-2 font-medium text-gray-600 dark:text-gray-300 hover:bg-primary flex items-center text-sm hover:text-white dark:hover:text-gray-100",data:{log:e}},{isDivider:!0},{label:this.translate.instant("activityLogDetails.actions.delete"),actionKey:"delete",iconName:"trash",iconClass:"w-8 h-8 mr-2",buttonClass:"w-full "+"rounded text-left px-4 py-2 font-medium text-gray-600 dark:text-gray-300 hover:bg-red-600 flex items-center text-sm hover:text-white",data:{log:e}}]}handleActionMenuItemClick(e){let t=e.data?.log;if(t){switch(e.actionKey){case"edit":this.editLog(t.id);break;case"delete":this.deleteLog(t);break}this.activeLogIdActions.set(null)}}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=w({type:o,selectors:[["app-activity-log-details"]],decls:3,vars:2,consts:[["loading",""],["class","container mx-auto max-w-2xl p-2 sm:p-4",4,"ngIf","ngIfElse"],[1,"container","mx-auto","max-w-2xl","p-2","sm:p-4"],[1,"flex","items-center","justify-between","p-2","mb-4"],[1,"text-gray-600","dark:text-gray-300","hover:text-primary","dark:hover:text-primary-light","p-2","rounded-full","hover:bg-gray-100","dark:hover:bg-gray-700",3,"click"],["name","back",1,"w-6","h-6"],[1,"flex","items-center","space-x-2","flex-shrink-0"],[1,"relative"],[1,"text-gray-500","dark:text-gray-400","hover:bg-gray-200","dark:hover:bg-gray-500","rounded-full","focus:outline-none","flex","items-center",3,"click"],["name","menu-action",1,"h-10","w-10"],["displayMode","dropdown",3,"items","isVisible","itemClick","closeMenu",4,"ngIf"],[1,"bg-white","dark:bg-gray-800","p-6","rounded-lg","shadow-md","space-y-4"],[1,"border-b","border-gray-200","dark:border-gray-700","pb-4"],[1,"text-3xl","font-bold","text-gray-800","dark:text-gray-200"],[1,"text-gray-500","dark:text-gray-400","mt-1"],["class","text-gray-600 dark:text-gray-300 font-semibold text-lg mt-2",4,"ngIf"],[1,"grid","grid-cols-2","sm:grid-cols-4","gap-4","text-center","pt-4"],[1,"p-4","bg-gray-50","dark:bg-gray-700/50","rounded-lg"],["name","clock",1,"w-8","h-8","mx-auto","text-primary","mb-2"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"text-2xl","font-semibold","text-black","dark:text-gray-200"],["name","flame",1,"w-8","h-8","mx-auto","text-primary","mb-2"],["class","p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",4,"ngIf"],["name","distance",1,"w-8","h-8","mx-auto","text-primary","mb-2"],["name","calories",1,"w-8","h-8","mx-auto","text-primary","mb-2"],["class","pt-4 border-t border-gray-200 dark:border-gray-700",4,"ngIf"],["displayMode","dropdown",3,"itemClick","closeMenu","items","isVisible"],[1,"text-gray-600","dark:text-gray-300","font-semibold","text-lg","mt-2"],["name","map",1,"w-8","h-8","mx-auto","text-primary","mb-2"],[1,"pt-4","border-t","border-gray-200","dark:border-gray-700"],[1,"text-lg","font-semibold","mb-2"],[1,"text-gray-700","dark:text-gray-300","whitespace-pre-wrap"],[1,"text-center","p-20"],[1,"text-xl","text-gray-600","dark:text-gray-400"]],template:function(t,s){if(t&1&&y(0,X,48,25,"div",1)(1,Y,4,3,"ng-template",null,0,M),t&2){let m=D(2);v("ngIf",s.activityLog())("ngIfElse",m)}},dependencies:[V,B,K,q,j,T,R],styles:["[_nghost-%COMP%]{display:block}"]})};export{G as ActivityLogDetailsComponent};
