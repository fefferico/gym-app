import{a as st}from"./chunk-E7APY25W.js";import{a as Ne}from"./chunk-MBYHFBIA.js";import{a as Et}from"./chunk-RITPDHBK.js";import{e as wt,f as kt}from"./chunk-XXWJJKPG.js";import{a as _t}from"./chunk-47TX2J3B.js";import{a as St}from"./chunk-MZKCKTDA.js";import{a as Ve}from"./chunk-WSAGC3MB.js";import{a as ft,b as Ue,g as te,h as Oe,j as re,k as xt}from"./chunk-UMYZ2ELG.js";import{a as O}from"./chunk-QJLX4XMQ.js";import{a as vt,n as ht,o as ee,p as yt,q as bt}from"./chunk-I523BVZL.js";import{$a as Ze,$c as Z,Ac as v,Bc as we,Cc as ke,Fb as tt,Gc as Ee,H as ue,Ha as d,Hc as Pe,Ia as n,J as ge,Ja as i,Jb as he,Ka as u,Kb as X,Lb as J,Lc as Ce,Mc as dt,N as h,Oa as je,Ob as rt,Oc as Me,Pa as $e,Pc as mt,Qc as Te,Ra as C,Rb as it,Rc as Ie,S,Sa as g,Sb as nt,Sc as ct,T as _,Ta as f,Tb as ye,Tc as pt,U as Y,Ub as ot,Uc as ut,V as z,Wb as Q,Wc as Be,Xb as le,Yc as Fe,Z as F,Zc as De,_a as D,a as Ke,ab as A,ad as U,bd as Ae,c as Xe,ca as fe,cb as o,cd as gt,db as M,eb as b,fa as L,fb as W,ga as Qe,gb as ve,gc as be,hc as at,ia as s,kb as H,l as $,mc as ze,nc as xe,ob as Ye,pb as E,qa as q,qb as et,qc as de,rc as me,sb as P,sc as Se,tb as G,ub as I,v as pe,va as y,vb as K,wb as se,y as R,yc as lt,z as Je,zb as j,zc as _e}from"./chunk-3GHTDBH5.js";import{a as N,b as V,g as w}from"./chunk-GAL4ENT6.js";var ie=class l{STORE_NAME="progress_photos";dbService=h(st);saveImage(r,e){return w(this,null,function*(){return $(this.dbService.update(this.STORE_NAME,{date:r,image:e}))})}getImage(r){return w(this,null,function*(){if(!r)return Promise.resolve(void 0);let e=yield $(this.dbService.getByKey(this.STORE_NAME,r));return e?e.image:void 0})}deleteImage(r){return w(this,null,function*(){return r?$(this.dbService.delete(this.STORE_NAME,r)):Promise.resolve()})}getAllImagesForBackup(){return w(this,null,function*(){let r=yield $(this.dbService.getAll(this.STORE_NAME)),e=[];for(let t of r)if(t.image instanceof Blob){let a=yield this.blobToBase64(t.image);e.push({date:t.date,type:t.image.type,data:a})}return e})}importImages(r){return w(this,null,function*(){if(!r||r.length===0)return Promise.resolve();let e=r.map(t=>{let a=this.base64ToBlob(t.data,t.type);return{date:t.date,image:a}});return $(this.dbService.bulkPut(this.STORE_NAME,e))})}blobToBase64(r){return new Promise((e,t)=>{let a=new FileReader;a.onloadend=()=>e(a.result),a.onerror=t,a.readAsDataURL(r)})}base64ToBlob(r,e=""){let t=atob(r.split(",")[1]),a=[];for(let m=0;m<t.length;m+=512){let p=t.slice(m,m+512),c=new Array(p.length);for(let k=0;k<p.length;k++)c[k]=p.charCodeAt(k);let x=new Uint8Array(c);a.push(x)}return new Blob(a,{type:e})}static \u0275fac=function(e){return new(e||l)};static \u0275prov=ge({token:l,factory:l.\u0275fac,providedIn:"root"})};var Le=class l{unitsService=h(O);trackingService=h(re);workoutService=h(te);userProfileService=h(ee);personalGymService=h(Ne);progressiveOverloadService=h(Ue);spinnerService=h(Ve);toastService=h(U);constructor(){}convertAllWeightData(r,e){return w(this,null,function*(){this.spinnerService.show("Converting weight data...");let t=this.trackingService.getDataForBackup();t.forEach(c=>{c.exercises.forEach(x=>{x.sets.forEach(k=>{k.weightUsed!=null&&(k.weightUsed=this.unitsService.convertWeight(k.weightUsed,r,e)),k.targetWeight!=null&&(k.targetWeight=this.unitsService.convertWeight(k.targetWeight,r,e))})})}),yield this.trackingService.replaceLogs(t);let a=this.workoutService.getDataForBackup();a.forEach(c=>{c.exercises.forEach(x=>{x.sets.forEach(k=>{k.targetWeight!=null&&(k.targetWeight=this.unitsService.convertWeight(k.targetWeight,r,e))})})}),this.workoutService.mergeData(a);let m=this.personalGymService.getDataForBackup();m.forEach(c=>{switch(c.category){case"Dumbbell":case"Kettlebell":case"Macebell":case"Club":c.weightType==="fixed"&&c.weight!=null?c.weight=this.unitsService.convertWeight(c.weight,r,e):c.weightType==="adjustable"&&(c.minweight!=null&&(c.minweight=this.unitsService.convertWeight(c.minweight,r,e)),c.maxweight!=null&&(c.maxweight=this.unitsService.convertWeight(c.maxweight,r,e)),c.increment!=null&&(c.increment=this.unitsService.convertWeight(c.increment,r,e)));break;case"Plate":case"Barbell":c.weight!=null&&(c.weight=this.unitsService.convertWeight(c.weight,r,e));break;case"Bag":c.maxweight!=null&&(c.maxweight=this.unitsService.convertWeight(c.maxweight,r,e)),c.currentWeightKg!=null&&(c.currentWeightKg=this.unitsService.convertWeight(c.currentWeightKg,r,e));break;case"Band":c.resistance!=null&&(c.resistance=this.unitsService.convertWeight(c.resistance,r,e));break;case"Machine":c.maxLoad!=null&&(c.maxLoad=this.unitsService.convertWeight(c.maxLoad,r,e));break}}),this.personalGymService.mergeData(m);let p=this.progressiveOverloadService.getDataForBackup();p.weightIncrement!=null&&(p.weightIncrement=this.unitsService.convertWeight(p.weightIncrement,r,e),this.progressiveOverloadService.replaceData(p)),this.spinnerService.hide(),this.toastService.success("All weight data converted successfully!",3e3,"Conversion Complete")})}convertAllBodyWeightData(r,e){return w(this,null,function*(){this.spinnerService.show("Converting body weight data...");let t=this.userProfileService.getDataForBackup();t&&(t.measurementHistory&&t.measurementHistory.forEach(a=>{a.weight!=null&&(a.weight=this.unitsService.convertWeight(a.weight,r,e))}),t.measurementGoals?.weight!=null&&(t.measurementGoals.weight=this.unitsService.convertWeight(t.measurementGoals.weight,r,e)),this.userProfileService.replaceData(t)),this.spinnerService.hide(),this.toastService.success("All body weight data converted successfully!",3e3,"Conversion Complete")})}convertAllBodyMeasureData(r,e){return w(this,null,function*(){this.spinnerService.show("Converting body measurement data...");let t=this.userProfileService.getDataForBackup();if(t){let a=["height","chest","neck","waist","hips","rightArm"];t.measurementHistory&&t.measurementHistory.forEach(m=>{a.forEach(p=>{m[p]!=null&&(m[p]=this.unitsService.convertMeasure(m[p],r,e))})}),t.measurementGoals&&a.forEach(m=>{let p=m;t.measurementGoals[p]!=null&&(t.measurementGoals[p]=this.unitsService.convertMeasure(t.measurementGoals[p],r,e))}),this.userProfileService.replaceData(t)}this.spinnerService.hide(),this.toastService.success("All body measurement data converted successfully!",3e3,"Conversion Complete")})}convertAllMeasureData(r,e){return w(this,null,function*(){this.spinnerService.show("Converting measurement data...");let t=this.personalGymService.getDataForBackup();t.forEach(a=>{a.category==="Band"&&a.length!=null&&(a.length=this.unitsService.convertMeasure(a.length,r,e))}),this.personalGymService.mergeData(t),this.spinnerService.hide(),this.toastService.success("All measurement data converted successfully!",3e3,"Conversion Complete")})}convertAllDistanceMeasureData(r,e){return w(this,null,function*(){this.spinnerService.show("Converting distance data...");let t=this.trackingService.getDataForBackup();t.forEach(p=>{p.exercises.forEach(c=>{c.sets.forEach(x=>{x.distanceAchieved!=null&&(x.distanceAchieved=this.unitsService.convertDistance(x.distanceAchieved,r,e)),x.targetDistance!=null&&(x.targetDistance=this.unitsService.convertDistance(x.targetDistance,r,e))})})}),yield this.trackingService.replaceLogs(t);let a=this.workoutService.getDataForBackup();a.forEach(p=>{p.exercises.forEach(c=>{c.sets.forEach(x=>{x.targetDistance!=null&&(x.targetDistance=this.unitsService.convertDistance(x.targetDistance,r,e))})})}),this.workoutService.mergeData(a);let m=this.progressiveOverloadService.getDataForBackup();m.distanceIncrement!=null&&(m.distanceIncrement=this.unitsService.convertDistance(m.distanceIncrement,r,e),this.progressiveOverloadService.replaceData(m)),this.spinnerService.hide(),this.toastService.success("All distance data converted successfully!",3e3,"Conversion Complete")})}static \u0275fac=function(e){return new(e||l)};static \u0275prov=ge({token:l,factory:l.\u0275fac,providedIn:"root"})};var ce=(l,r)=>({"left-1 right-1/2":l,"left-1/2 right-1":r}),T=(l,r)=>({"text-white":l,"text-gray-700 dark:text-gray-300":r}),Bt=(l,r,e)=>({"translate-x-1":l,"translate-x-full":r,"translate-x-[195%]":e});function Ft(l,r){if(l&1&&(n(0,"option",117),o(1),i()),l&2){let e=r.$implicit;d("value",e.value),s(),b("",e.label," ")}}function Dt(l,r){l&1&&(n(0,"span",118),u(1,"app-icon",119),o(2," PREMIUM "),i())}function At(l,r){l&1&&(n(0,"div",120),o(1," Must be a positive number (e.g., 2.5 or 5). Max 50. "),i())}function Ut(l,r){l&1&&(n(0,"div",120),o(1," Must be 1-20s. "),i())}function Ot(l,r){if(l&1){let e=C();n(0,"div",16)(1,"label",121),o(2,"Countdown From (seconds)"),i(),n(3,"input",122),g("change",function(){S(e);let a=f();return _(a.currentVibrator.vibrate(50))}),i(),y(4,Ut,2,0,"div",65),i()}if(l&2){let e,t=f();s(4),d("ngIf",((e=t.appSettingsForm.get("countdownSoundSeconds"))==null?null:e.invalid)&&((e=t.appSettingsForm.get("countdownSoundSeconds"))==null?null:e.touched))}}function Nt(l,r){l&1&&(n(0,"span",118),u(1,"app-icon",119),o(2," PREMIUM "),i())}function Vt(l,r){if(l&1){let e=C();n(0,"div",132)(1,"input",133),g("change",function(a){S(e);let m=f(2);return _(m.onStrategyChange(a))}),i(),n(2,"label",134),o(3),i()()}if(l&2){let e=r.$implicit,t=f(2);s(),d("id","strategy-"+e.value)("value",e.value)("checked",t.isStrategySelected(e.value)),s(),d("for","strategy-"+e.value),s(),b(" ",e.label," ")}}function Rt(l,r){l&1&&(n(0,"div",120),o(1," Please select at least one strategy. "),i())}function Lt(l,r){l&1&&(n(0,"div",120),o(1," Must be a positive number. "),i())}function Wt(l,r){if(l&1&&(n(0,"div")(1,"label",135),o(2),P(3,"uppercase"),i(),u(4,"input",136),y(5,Lt,2,0,"div",65),i()),l&2){let e,t=f(2);s(2),b(" Weight Increment (",G(3,2,t.unitsService.currentWeightUnit()),") "),s(3),d("ngIf",((e=t.progressiveOverloadForm.get("weightIncrement"))==null?null:e.invalid)&&((e=t.progressiveOverloadForm.get("weightIncrement"))==null?null:e.touched))}}function Ht(l,r){l&1&&(n(0,"div",120),o(1," Must be a whole number (e.g., 1, 2). "),i())}function Gt(l,r){if(l&1&&(n(0,"div")(1,"label",137),o(2," Repetitions Increment "),i(),u(3,"input",138),y(4,Ht,2,0,"div",65),i()),l&2){let e,t=f(2);s(4),d("ngIf",((e=t.progressiveOverloadForm.get("repsIncrement"))==null?null:e.invalid)&&((e=t.progressiveOverloadForm.get("repsIncrement"))==null?null:e.touched))}}function jt(l,r){l&1&&(n(0,"div",120),o(1," Must be a positive number. "),i())}function $t(l,r){if(l&1&&(n(0,"div")(1,"label",139),o(2),P(3,"uppercase"),i(),u(4,"input",140),y(5,jt,2,0,"div",65),i()),l&2){let e,t=f(2);s(2),b(" Distance Increment (",G(3,2,t.unitsService.currentDistanceMeasureUnit()),") "),s(3),d("ngIf",((e=t.progressiveOverloadForm.get("distanceIncrement"))==null?null:e.invalid)&&((e=t.progressiveOverloadForm.get("distanceIncrement"))==null?null:e.touched))}}function Yt(l,r){l&1&&(n(0,"div",120),o(1," Must be a whole number (e.g., 5, 10). "),i())}function zt(l,r){if(l&1&&(n(0,"div")(1,"label",141),o(2," Duration Increment (seconds) "),i(),u(3,"input",142),y(4,Yt,2,0,"div",65),i()),l&2){let e,t=f(2);s(4),d("ngIf",((e=t.progressiveOverloadForm.get("durationIncrement"))==null?null:e.invalid)&&((e=t.progressiveOverloadForm.get("durationIncrement"))==null?null:e.touched))}}function qt(l,r){l&1&&(n(0,"div",120),o(1," Must be at least 1 session. "),i())}function Kt(l,r){if(l&1&&(n(0,"div",123)(1,"div")(2,"label",124),o(3,"Progression Strategy"),i(),n(4,"p",125),o(5,"Choose what to increase when you meet your goals."),i(),n(6,"div",126),y(7,Vt,4,5,"div",127),i(),y(8,Rt,2,0,"div",65),i(),n(9,"div",128),y(10,Wt,6,4,"div",129)(11,Gt,5,1,"div",129)(12,$t,6,4,"div",129)(13,zt,5,1,"div",129),i(),n(14,"div")(15,"label",130),o(16,"Apply After # Successful Sessions"),i(),n(17,"p",63),o(18,"Increase after completing this many workouts for an exercise successfully."),i(),u(19,"input",131),y(20,qt,2,0,"div",65),i()()),l&2){let e,t,a=f();s(7),d("ngForOf",a.progressiveOverloadStrategies),s(),d("ngIf",((e=a.progressiveOverloadForm.get("enabled"))==null?null:e.value)&&a.strategiesFormArray.length===0&&a.progressiveOverloadForm.dirty),s(2),d("ngIf",a.isStrategySelected(a.ProgressiveOverloadStrategy.WEIGHT)),s(),d("ngIf",a.isStrategySelected(a.ProgressiveOverloadStrategy.REPS)),s(),d("ngIf",a.isStrategySelected(a.ProgressiveOverloadStrategy.DISTANCE)),s(),d("ngIf",a.isStrategySelected(a.ProgressiveOverloadStrategy.DURATION)),s(7),d("ngIf",((t=a.progressiveOverloadForm.get("sessionsToIncrement"))==null?null:t.invalid)&&((t=a.progressiveOverloadForm.get("sessionsToIncrement"))==null?null:t.touched))}}function Xt(l,r){l&1&&(n(0,"span",143),u(1,"app-icon",119),o(2," PREMIUM "),i())}function Jt(l,r){l&1&&(n(0,"span",118),u(1,"app-icon",119),o(2," PREMIUM "),i())}var We=class l{fb=h(Be);router=h(be);workoutService=h(te);trackingService=h(re);activityService=h(Et);personalGymService=h(Ne);trainingProgramService=h(xt);exerciseService=h(Oe);storageService=h(gt);unitsService=h(O);alertService=h(Ae);spinnerService=h(Ve);themeService=h(_t);userProfileService=h(ee);appSettingsService=h(vt);progressiveOverloadService=h(Ue);platformId=h(fe);toastService=h(U);imageStorageService=h(ie);dataConversionService=h(Le);subscriptionService=h(bt);cdr=h(tt);subscriptions=new Ke;PremiumFeature=yt;currentVibrator=navigator;syncHistoryTooltipString='This will scan all workout logs to update the "Last Used" date for every exercise in your library. Run this if the dates seem out of sync after an import or an update.';goalsForm;profileForm;appSettingsForm;progressiveOverloadForm;handleUpgradeClick(){this.subscriptionService.togglePremium_DEV_ONLY();let r=this.subscriptionService.isPremium()?"Premium":"Free";this.toastService.success(`You are now on the ${r} tier!`,3e3,"Status Updated"),this.subscriptionService.isPremium()&&(this.toastService.veryImportant("Thank you for supporting the app! All premium features are now unlocked.",1e4,"Thank You!"),this.workoutService.enableAllRoutines_DEV_ONLY())}handlePremiumFeatureOrNavigate(r,e,t){this.workoutService.vibrate(),this.subscriptionService.canAccess(r)?t&&this.router.navigate(t):(e.preventDefault(),e.stopPropagation(),this.subscriptionService.showUpgradeModal())}genders=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"},{label:"Prefer not to say",value:"prefer_not_to_say"}];progressiveOverloadStrategies=[{label:"Increase Weight",value:"weight"},{label:"Increase Reps",value:"reps"},{label:"Increase Distance",value:"distance"},{label:"Increase Duration",value:"duration"}];BACKUP_VERSION=6;constructor(){this.profileForm=this.fb.group({general:this.fb.group({username:[""],gender:[null],age:[null,[v.min(0),v.max(150),v.required]]}),measurements:this.fb.group({height:[null,[v.min(0),v.required]],weight:[null,[v.min(0),v.required]],chest:[null,[v.min(0)]],neck:[null,[v.min(0)]],waist:[null,[v.min(0)]],hips:[null,[v.min(0)]],rightArm:[null,[v.min(0)]]})}),this.goalsForm=this.fb.group({weight:[null,[v.min(0)]],waist:[null,[v.min(0)]]}),this.appSettingsForm=this.fb.group({enableTimerCountdownSound:[!0],playerMode:["compact"],countdownSoundSeconds:[5,[v.required,v.min(1),v.max(60)]],enablePresetTimer:[!1],presetTimerDurationSeconds:[10,[v.required,v.min(3),v.max(60)]],weightStep:[2.5,[v.required,v.min(.01),v.max(50)]]}),this.progressiveOverloadForm=this.fb.group({enabled:[!1],strategies:this.fb.array([]),weightIncrement:[null,[v.min(.1)]],repsIncrement:[null,[v.min(1),v.pattern("^[0-9]*$")]],distanceIncrement:[null,[v.min(.01)]],durationIncrement:[null,[v.min(1),v.pattern("^[0-9]*$")]],sessionsToIncrement:[1,[v.required,v.min(1)]]})}togglePlayerMode(r){this.workoutService.vibrate();let e=r.target,t=e.checked,a=t?"focus":"compact";this.workoutService.isPausedSession()?(this.alertService.showAlert("Action Disabled","It's not possible to change the player mode during a workout session. Please complete or discard your current workout first."),e.checked=!t,this.cdr.detectChanges()):(this.appSettingsForm.get("playerMode")?.setValue(a),this.appSettingsService.saveSettings({playerMode:a}))}selectWeightUnit(r){return w(this,null,function*(){let e=this.unitsService.currentWeightUnit();r!==e&&(yield this.dataConversionService.convertAllWeightData(e,r),this.unitsService.setWeightUnitPreference(r))})}selectMeasureUnit(r){return w(this,null,function*(){let e=this.unitsService.currentMeasureUnit();r!==e&&(yield this.dataConversionService.convertAllMeasureData(e,r),this.unitsService.setMeasureUnitPreference(r))})}selectDistanceMeasureUnit(r){return w(this,null,function*(){let e=this.unitsService.currentDistanceMeasureUnit();r!==e&&(yield this.dataConversionService.convertAllDistanceMeasureData(e,r),this.unitsService.setDistanceMeasureUnitPreference(r))})}selectBodyWeightUnit(r){return w(this,null,function*(){let e=this.unitsService.currentBodyWeightUnit();r!==e&&(yield this.dataConversionService.convertAllBodyWeightData(e,r),this.unitsService.setBodyWeightUnitPreference(r))})}selectBodyMeasureUnit(r){return w(this,null,function*(){let e=this.unitsService.currentBodyMeasureUnit();r!==e&&(yield this.dataConversionService.convertAllBodyMeasureData(e,r),this.unitsService.setBodyMeasureUnitPreference(r))})}ngOnInit(){le(this.platformId)&&window.scrollTo(0,0),this.loadProfileData(),this.loadProgressiveOverloadSettings(),this.loadGoalsData(),this.subscriptions.add(this.appSettingsService.appSettings$.subscribe(r=>{r&&(this.appSettingsForm.reset(r,{emitEvent:!1}),this.cdr.detectChanges())})),this.subscriptions.add(this.appSettingsForm.valueChanges.pipe(R(700),pe(()=>this.appSettingsForm.valid&&this.appSettingsForm.dirty),ue(r=>{this.appSettingsService.saveSettings(r),this.appSettingsForm.markAsPristine({onlySelf:!1}),this.toastService.info("App settings auto-saved",1500)})).subscribe()),this.listenForProgressiveOverloadChanges(),this.subscriptions.add(this.profileForm.get("general")?.valueChanges.pipe(R(700)).subscribe(()=>this.saveGeneralData())),this.subscriptions.add(this.goalsForm.valueChanges.pipe(R(700),pe(()=>this.goalsForm.valid&&this.goalsForm.dirty),ue(r=>{this.userProfileService.saveGoals(r),this.goalsForm.markAsPristine(),this.toastService.info("Goals auto-saved",1500)})).subscribe())}ngOnDestroy(){this.subscriptions.unsubscribe()}loadGoalsData(){let r=this.userProfileService.getProfile()?.measurementGoals;r&&this.goalsForm.reset(r,{emitEvent:!1})}saveMeasurements(){let r=this.profileForm?.get("measurements");if(!this.profileForm||!r||r.invalid){this.toastService.error("Please fill in all required fields correctly: at least age, height and weight should be filled.");return}let e=this.profileForm.get("measurements")?.value;this.userProfileService.addOrUpdateMeasurementEntry(e),this.profileForm.get("measurements").markAsPristine(),this.toastService.info("Measurements history updated",1500)}saveGeneralData(){let r={username:this.profileForm.get("general.username")?.value,gender:this.profileForm.get("general.gender")?.value,age:this.profileForm.get("general.age")?.value};this.userProfileService.saveProfile(r),this.toastService.info("Profile auto-saved",1500),this.profileForm.markAsPristine()}listenForProgressiveOverloadChanges(){this.subscriptions.add(this.progressiveOverloadForm.valueChanges.pipe(R(700),pe(()=>this.progressiveOverloadForm.valid&&this.progressiveOverloadForm.dirty),ue(t=>{this.progressiveOverloadService.saveSettings(t),this.progressiveOverloadForm.markAsPristine({onlySelf:!1}),this.toastService.info("Progressive Overload settings auto-saved",1500)})).subscribe());let r=this.progressiveOverloadForm.get("enabled"),e=t=>{let a=this.progressiveOverloadForm.get("weightIncrement"),m=this.progressiveOverloadForm.get("repsIncrement"),p=this.progressiveOverloadForm.get("distanceIncrement"),c=this.progressiveOverloadForm.get("durationIncrement"),x=(k,B,ne)=>{B?k?.setValidators(ne):(k?.clearValidators(),k?.setValue(null,{emitEvent:!1})),k?.updateValueAndValidity()};x(a,t.includes("weight"),[v.required,v.min(.1)]),x(m,t.includes("reps"),[v.required,v.min(1),v.pattern("^[0-9]*$")]),x(p,t.includes("distance"),[v.required,v.min(.01)]),x(c,t.includes("duration"),[v.required,v.min(1),v.pattern("^[0-9]*$")])};this.subscriptions.add(this.strategiesFormArray.valueChanges.subscribe(t=>{e(t)})),this.subscriptions.add(r?.valueChanges.subscribe(t=>{e(t?this.strategiesFormArray.value:[])}))}loadProfileData(){let r=this.userProfileService.getProfile();if(r){let e=this.userProfileService.getMeasurements();this.profileForm.reset({general:{username:r.username||"",gender:r.gender||null,age:r.age||null},measurements:e||{}},{emitEvent:!1})}else this.profileForm.reset({general:{username:null,gender:null,age:null},measurements:{height:null,weight:null,age:null,chest:null,waist:null,hips:null,rightArm:null}},{emitEvent:!1})}loadProgressiveOverloadSettings(){let r=this.progressiveOverloadService.getSettings();this.strategiesFormArray.clear(),r.strategies&&r.strategies.length>0&&r.strategies.forEach(e=>{this.strategiesFormArray.push(this.fb.control(e),{emitEvent:!1})}),this.progressiveOverloadForm.reset(V(N({},r),{strategies:this.strategiesFormArray.value}),{emitEvent:!1})}exportData(){return w(this,null,function*(){this.spinnerService.show("Exporting data...");let r=yield this.imageStorageService.getAllImagesForBackup(),e={version:this.BACKUP_VERSION,timestamp:new Date().toISOString(),profile:this.userProfileService.getDataForBackup(),progressPhotos:r,appSettings:this.appSettingsService.getDataForBackup(),progressiveOverload:this.progressiveOverloadService.getDataForBackup(),routines:this.workoutService.getDataForBackup(),programs:this.trainingProgramService.getDataForBackup(),exercises:this.exerciseService.getDataForBackup(),workoutLogs:this.trackingService.getDataForBackup(),activityLogs:this.activityService.getLogsForBackup(),personalBests:this.trackingService.getPBsForBackup(),personalGym:this.personalGymService.getDataForBackup()},t=JSON.stringify(e,null,2),a=new Blob([t],{type:"application/json"}),m=URL.createObjectURL(a),p=document.createElement("a"),c=ht(new Date,"yyyyMMdd_HHmmss");p.download=`FitTrackPro_backup_v${this.BACKUP_VERSION}_${c}.json`,p.href=m,p.click(),URL.revokeObjectURL(m),this.spinnerService.hide(),this.toastService.success("Data export initiated",3e3)})}importData(r){let e=r.target,t=e.files?.[0];if(!t)return;if(t.type!=="application/json"){this.alertService.showAlert("Error","Invalid file type. Please select a JSON file."),e.value="";return}let a=new FileReader;a.onload=m=>{try{let p=m.target?.result,c=JSON.parse(p);if(typeof c!="object"||c===null){this.alertService.showAlert("Error","Invalid backup file format. Expected an object."),e.value="";return}let x=c.version;if(x>this.BACKUP_VERSION){this.alertService.showAlert("Error",`Backup version ${x} is newer than the app's supported version ${this.BACKUP_VERSION}. Please update the app.`),e.value="";return}this.alertService.showConfirm("WARNING","Importing data will try to MERGE your current data with the IMPORTED one. Are you sure?").then(k=>w(this,null,function*(){if(k&&k.data){if(this.spinnerService.show("Importing data..."),x>=6&&c.progressPhotos&&(yield this.imageStorageService.importImages(c.progressPhotos)),x>=5?this.userProfileService.mergeData(c.profile):x>=2?this.userProfileService.replaceData(c.profile):this.userProfileService.replaceData(null),this.subscriptionService.isPremium())this.workoutService.mergeData(c.routines);else{let ne=this.workoutService.getCurrentRoutines().filter(ae=>!ae.isDisabled),oe=Array.isArray(c.routines)?c.routines:[],qe=oe.filter(ae=>!ae.isDisabled);ne.length+qe.length>4&&(oe.forEach((ae,Tt)=>ae.isDisabled=Tt>3),this.toastService.veryImportant(`Import detected ${qe.length} enabled routines. Free users can only have 4 enabled routines. All imported routines have been disabled. You can enable them after upgrading to Premium.`,1e4,"Routines Disabled"),this.workoutService.mergeData(oe))}c.workoutLogs&&(this.trackingService.replaceLogs(c.workoutLogs||[]),this.trackingService.replacePBs(c.personalBests||{}));let B=c.activityLogs||c.activitiyLogs;Array.isArray(B)&&this.activityService.mergeData(B),c.personalGym&&this.personalGymService.mergeData(c.personalGym),x>=4&&this.progressiveOverloadService.replaceData(c.progressiveOverload),x>=3&&(this.exerciseService.mergeData(c.exercises),this.trainingProgramService.mergeData(c.programs)),x>=2&&this.appSettingsService.replaceData(c.appSettings),this.loadProfileData(),this.loadProgressiveOverloadSettings(),this.loadGoalsData(),this.spinnerService.hide(),this.toastService.success("Data imported successfully!",5e3,"Import Complete")}else this.toastService.info("Data import cancelled",2e3)}))}catch(p){console.error("Error processing imported file:",p),this.alertService.showAlert("Error","Error processing backup file. Ensure it is valid JSON.")}finally{e.value=""}},a.onerror=()=>{this.alertService.showAlert("Error","Error reading file."),e.value=""},a.readAsText(t)}clearAllAppData(){return w(this,null,function*(){let r=yield this.alertService.showConfirmationDialog("WARNING","This will delete ALL your workout data, profile, and settings. This cannot be undone. Are you sure?",[{text:"Cancel",role:"cancel",data:!1,icon:"cancel"},{text:"Clear all data",role:"confirm",data:!0,cssClass:"bg-red-600",icon:"trash"}]);if(r&&r.data){let e=yield this.alertService.showPromptDialog("Confirm Data Deletion",'To confirm, please type "DELETE" in the input below. This will delete ALL your workout data, profile, and settings. This cannot be undone.',[{name:"confirmDialogInput",type:"text",placeholder:"Type DELETE to confirm",value:"",autofocus:!0}],"CLEAR ALL DATA"),t=e&&typeof e.confirmDialogInput=="string"?e.confirmDialogInput:null;if(!t||t.toUpperCase()!=="DELETE"){this.alertService.showAlert("Cancelled","Data clearing cancelled. No changes made.");return}this.trackingService.clearAllWorkoutLogs_DEV_ONLY&&(yield this.trackingService.clearAllWorkoutLogs_DEV_ONLY()),this.trackingService.clearAllPersonalBests_DEV_ONLY&&(yield this.trackingService.clearAllPersonalBests_DEV_ONLY()),this.workoutService.clearAllRoutines_DEV_ONLY&&(yield this.workoutService.clearAllRoutines_DEV_ONLY()),this.userProfileService.clearUserProfile_DEV_ONLY&&this.userProfileService.clearUserProfile_DEV_ONLY(),this.appSettingsService.clearAppSettings_DEV_ONLY&&this.appSettingsService.clearAppSettings_DEV_ONLY(),this.progressiveOverloadService.clearSettings_DEV_ONLY&&this.progressiveOverloadService.clearSettings_DEV_ONLY(),this.trainingProgramService.deactivateAllPrograms&&this.trainingProgramService.deactivateAllPrograms(),this.loadProfileData(),this.loadProgressiveOverloadSettings(),yield this.alertService.showAlert("Info","All application data has been cleared")}})}selectUnit(r){this.unitsService.setWeightUnitPreference(r)}toggleWipDisclaimer(){let r=this.userProfileService.getHideWipDisclaimer();this.userProfileService.updateHideWipDisclaimer(!r)}navigateToExerciseLibrary(){this.router.navigate(["/library"])}navigateToPersonalGym(r){if(this.workoutService.vibrate(),!this.subscriptionService.canAccess("personal_gym")){this.subscriptionService.showUpgradeModal();return}this.router.navigate(["/personal-gym"])}navigateToPersonalBests(){this.router.navigate(["/profile/personal-bests"])}navigateToBodyMeasurements(){this.router.navigate(["/profile/measurements"])}showSyncHistoryTooltip(){if(this.platformId==="browser"&&window.innerWidth<=768){this.workoutService.vibrate(),this.alertService.showAlert("Sync Exercise History",this.syncHistoryTooltipString);return}}selectMenuMode(r){if(this.workoutService.vibrate(),!this.subscriptionService.canAccess("menu_mode")){this.subscriptionService.showUpgradeModal();return}this.appSettingsService.setMenuMode(r)}onSyncHistoryClick(){return w(this,null,function*(){let r=yield this.alertService.showConfirm("Sync Full History",'This will scan all workout logs to update the "Last Used" date for all exercises AND the "Last Performed" date for all routines. This may take a moment. Proceed?');r&&r.data&&(yield this.trackingService.syncAllHistory())})}get strategiesFormArray(){return this.progressiveOverloadForm.get("strategies")}onStrategyChange(r){let e=r.target,t=e.value;if(e.checked)this.strategiesFormArray.push(this.fb.control(t));else{let a=this.strategiesFormArray.controls.findIndex(m=>m.value===t);a!==-1&&this.strategiesFormArray.removeAt(a)}this.progressiveOverloadForm.markAsDirty()}isStrategySelected(r){return this.strategiesFormArray.value.includes(r)}ProgressiveOverloadStrategy=ft;static \u0275fac=function(e){return new(e||l)};static \u0275cmp=q({type:l,selectors:[["app-profile-settings"]],decls:297,vars:140,consts:[[1,"container","mx-auto","p-2","sm:p-4"],[1,"flex","justify-between","items-center","pb-2"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-200"],[1,"space-y-6","sm:space-y-8"],[1,"bg-gradient-to-r","from-primary","to-indigo-600","dark:from-primary-dark","dark:to-indigo-700","p-4","sm:p-6","rounded-md","shadow-lg","text-white"],[1,"text-xl","font-semibold","mb-2"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-bold"],[1,"text-sm","opacity-90"],["appPress","",1,"px-4","py-2","bg-white","text-primary-dark","font-semibold","rounded-md","shadow-md","hover:bg-gray-200","transition-colors",3,"shortPress"],[1,"bg-white","dark:bg-gray-700","p-4","sm:p-6","rounded-md","shadow-md"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-300","mb-4"],[1,"space-y-4","dark:text-gray-300",3,"formGroup"],["formGroupName","general",1,"space-y-4","pt-4","border-t","border-gray-200","dark:border-gray-600"],["for","username",1,"block","text-md","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","username","formControlName","username","placeholder","Your display name",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg",3,"change"],[1,"dark:text-gray-300"],["for","gender",1,"block","text-md","font-medium","text-gray-700","dark:text-gray-300"],["id","gender","formControlName","gender",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg",3,"change"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["for","saveAppSettings",1,"block","text-md","font-medium","text-gray-700","dark:text-gray-300"],["type","number","min","0","id","age","formControlName","age","placeholder","Years","required","",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg"],["formGroupName","measurements",1,"space-y-4","pt-4","border-t","border-gray-200","dark:border-gray-600"],[1,"text-lg","font-medium","text-gray-700","dark:text-gray-300"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],["for","height",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],[1,"text-red-500"],["type","number","min","0","id","height","formControlName","height",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","weight",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","weight","formControlName","weight",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","chest",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","chest","formControlName","chest",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","neck",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","neck","formControlName","neck",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","waist",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","waist","formControlName","waist",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","hips",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","hips","formControlName","hips",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","rightArm",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","rightArm","formControlName","rightArm",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],[1,"flex","flex-col","sm:flex-row","justify-center","items-center","space-y-4","sm:space-y-0","sm:space-x-4","pt-4"],["type","button",1,"flex","justify-center","items-center","w-full","sm:w-auto","px-6","py-3","bg-green-500","hover:bg-green-600","text-white","font-semibold","rounded-md","shadow-sm","text-lg","disabled:opacity-50","disabled:cursor-not-allowed",3,"click"],["name","save",1,"w-8","h-8","mr-1"],["type","button",1,"flex","justify-center","items-center","w-full","sm:w-auto","px-6","py-3","bg-blue-500","hover:bg-blue-600","text-white","font-semibold","rounded-md","shadow-sm","text-lg","disabled:opacity-50","disabled:cursor-not-allowed",3,"click"],["name","chart2",1,"w-8","h-8","mr-1"],[1,"space-y-4",3,"formGroup"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","gap-4"],["for","goalweight",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","goalweight","formControlName","weight",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","goalwaist",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","goalwaist","formControlName","waist",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],[1,"flex","items-center","justify-between","py-2","rounded-md","transition-colors",3,"click"],[1,"text-md","font-medium","text-gray-700","dark:text-gray-300","flex","items-center"],["class","ml-2 px-2 py-0.5 text-xs font-semibold rounded-full bg-yellow-400 text-yellow-900 flex items-center justify-center ",4,"ngIf"],[1,"text-sm","text-gray-500","dark:text-gray-400","mr-1"],[1,"inline-flex","items-center"],[1,"sr-only"],["type","checkbox",1,"sr-only","peer",3,"change","checked","disabled"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-600","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-primary","dark:peer-checked:bg-primary-dark","peer-disabled:opacity-50"],[1,"ms-3","text-sm","font-medium","text-gray-900","dark:text-gray-300"],[1,"border-b","border-gray-200","dark:border-gray-600","pb-4"],["for","weightStep",1,"block","text-md","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-sm","text-gray-500","dark:text-gray-400","mb-1"],["type","number","id","weightStep","formControlName","weightStep","min","0.01","step","any",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"change"],["class","text-red-500 dark:text-red-400 text-xs mt-1",4,"ngIf"],[1,"flex","items-center","justify-between","pt-4"],[1,"text-md","font-medium","text-gray-700","dark:text-gray-300"],["for","countdown-sound-toggle",1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","id","countdown-sound-toggle","formControlName","enableTimerCountdownSound",1,"sr-only","peer",3,"change"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-600","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-primary","dark:peer-checked:bg-primary-dark"],["class"," dark:text-gray-300",4,"ngIf"],[1,"text-xl","font-medium","text-gray-700","dark:text-gray-300","flex","items-center"],["for","po-enabled-toggle",1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","id","po-enabled-toggle","formControlName","enabled",1,"sr-only","peer",3,"change"],["class","space-y-4 pt-4",4,"ngIf"],[1,"divide-y","divide-gray-200","dark:divide-gray-600"],[1,"py-3","flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-xs","text-gray-500","dark:text-gray-400"],["appPress","",1,"mt-2","sm:mt-0","flex-shrink-0","flex","items-center","justify-center","px-4","py-2","bg-blue-500","hover:bg-blue-600","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","text-sm",3,"shortPress"],["name","export",1,"w-5","h-5","mr-2"],["type","file","accept","application/json",1,"mt-2","sm:mt-0","inline-block","w-auto","text-sm","text-gray-700","dark:text-gray-300","file:mr-4","file:py-2","file:px-4","file:rounded-md","file:border-0","file:text-sm","file:font-semibold","file:bg-gray-200","file:text-gray-700","hover:file:bg-gray-300","dark:file:bg-gray-600","dark:file:text-gray-200","dark:hover:file:bg-gray-700",3,"change"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300","flex","items-center"],["name","info",1,"ml-1","h-4","w-4","text-gray-400","dark:text-gray-300","cursor-help",3,"click","appTooltip"],["appPress","",1,"mt-2","sm:mt-0","flex-shrink-0","flex","items-center","justify-center","px-4","py-2","bg-indigo-500","hover:bg-indigo-600","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","text-sm",3,"shortPress"],["name","change",1,"w-5","h-5","mr-2"],[1,"text-sm","font-medium","text-red-600","dark:text-red-400"],["appPress","",1,"mt-2","sm:mt-0","flex-shrink-0","flex","items-center","justify-center","px-4","py-2","bg-red-500","hover:bg-red-600","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","text-sm",3,"shortPress"],["name","trash",1,"w-5","h-5","mr-2"],[1,"grid","grid-cols-2","gap-2"],["class","ml-2 px-2 py-0.5 text-xs font-semibold rounded-full bg-yellow-400 text-yellow-900 flex items-center justify-center w-fit",4,"ngIf"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["appPress","",1,"px-4","py-2","bg-indigo-500","hover:bg-indigo-700","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","inline-flex","items-center","text-sm","text-left",3,"shortPress"],["name","dumbbell",1,"w-6","h-6","mr-1"],["appPress","",1,"px-4","py-2","bg-primary","hover:bg-primary-dark","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","inline-flex","items-center","text-sm",3,"shortPress"],["name","exercise-list",1,"w-6","h-6","mr-1"],["name","pb",1,"w-6","h-6","mr-1"],[1,"space-y-5"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-x-8","gap-y-4"],[1,"relative","w-28","flex","rounded-lg","bg-gray-200","dark:bg-gray-600","p-1"],[1,"absolute","top-1","bottom-1","bg-primary","rounded-md","shadow","transition-all","duration-300","ease-in-out",3,"ngClass"],["type","button","appPress","",1,"relative","z-10","flex-1","px-4","py-2","text-sm","font-bold","text-center","transition-colors","duration-300",3,"shortPress","ngClass"],[1,"space-y-4","pt-4","border-t","border-gray-200","dark:border-gray-600"],[1,"grid","grid-cols-2","items-center"],["for","theme-toggle",1,"inline-flex","items-center","cursor-pointer","justify-self-end"],["type","checkbox","id","theme-toggle",1,"sr-only","peer",3,"change","checked"],[1,"relative","w-11","h-6","bg-gray-200","rounded-full","peer","dark:bg-gray-600","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-500","peer-checked:bg-primary","dark:peer-checked:bg-primary-dark"],["for","show-wip-message",1,"inline-flex","items-center","cursor-pointer","justify-self-end"],["type","checkbox","id","show-wip-message",1,"sr-only","peer",3,"change","checked"],[1,"pt-4","border-t","border-gray-200","dark:border-gray-600"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","justify-between"],[1,"mb-2","sm:mb-0"],["class","ml-2 px-2 py-0.5 text-xs font-semibold rounded-full bg-yellow-400 text-yellow-900 flex items-center justify-center",4,"ngIf"],[1,"relative","grid","grid-cols-3","w-full","sm:w-auto","rounded-lg","bg-gray-200","dark:bg-gray-600","p-1"],[1,"absolute","top-1","bottom-1","w-1/3","bg-primary","rounded-md","shadow","transition-transform","duration-300","ease-in-out",3,"ngClass"],["appPress","",1,"relative","z-10","px-3","py-1.5","text-xs","font-semibold","transition-colors","duration-300",3,"shortPress","ngClass"],[3,"value"],[1,"ml-2","px-2","py-0.5","text-xs","font-semibold","rounded-full","bg-yellow-400","text-yellow-900","flex","items-center","justify-center"],["name","crown",1,"h-5","w-5","mr-1"],[1,"text-red-500","dark:text-red-400","text-xs","mt-1"],["for","countdownSeconds",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","countdownSeconds","formControlName","countdownSoundSeconds","min","1","max","20",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg",3,"change"],[1,"space-y-4","pt-4"],[1,"block","text-md","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-sm","text-gray-500","dark:text-gray-400","mb-2"],[1,"grid","grid-cols-2","gap-x-8","gap-y-2"],["class","flex items-center",4,"ngFor","ngForOf"],[1,"mt-4","grid","grid-cols-1","sm:grid-cols-2","gap-x-8","gap-y-4"],[4,"ngIf"],["for","sessionsToIncrement",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","sessionsToIncrement","formControlName","sessionsToIncrement","min","1","step","1",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg"],[1,"flex","items-center"],["type","checkbox",1,"focus:ring-primary","h-4","w-4","text-primary","border-gray-300","rounded","dark:border-gray-600","dark:bg-gray-700",3,"change","id","value","checked"],[1,"ml-3","block","text-sm","font-medium","text-gray-700","dark:text-gray-300",3,"for"],["for","weightIncrement",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","weightIncrement","formControlName","weightIncrement","min","0.1","step","any","placeholder","e.g., 2.5",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg"],["for","repsIncrement",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","repsIncrement","formControlName","repsIncrement","min","1","step","1","placeholder","e.g., 1",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg"],["for","distanceIncrement",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","distanceIncrement","formControlName","distanceIncrement","min","0.01","step","any","placeholder","e.g., 0.25",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg"],["for","durationIncrement",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","durationIncrement","formControlName","durationIncrement","min","1","step","1","placeholder","e.g., 5",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg"],[1,"ml-2","px-2","py-0.5","text-xs","font-semibold","rounded-full","bg-yellow-400","text-yellow-900","flex","items-center","justify-center","w-fit"]],template:function(e,t){if(e&1&&(n(0,"div",0)(1,"header",1)(2,"h1",2),o(3,"Profile & Settings"),i()(),n(4,"div",3)(5,"section",4)(6,"h2",5),o(7,"Subscription Status"),i(),n(8,"div",6)(9,"div")(10,"p",7),o(11),i(),n(12,"p",8),o(13),i()(),n(14,"button",9),g("shortPress",function(){return t.handleUpgradeClick()}),o(15),i()()(),n(16,"section",10)(17,"h2",11),o(18,"User Profile"),i(),n(19,"form",12)(20,"div",13)(21,"div")(22,"label",14),o(23,"Username"),i(),n(24,"input",15),g("change",function(){return t.currentVibrator.vibrate(50)}),i()(),n(25,"div",16)(26,"label",17),o(27,"Gender"),i(),n(28,"select",18),g("change",function(){return t.currentVibrator.vibrate(50)}),n(29,"option",19),o(30,"Select Gender..."),i(),y(31,Ft,2,2,"option",20),i()(),n(32,"div",16)(33,"label",21),o(34,"Age"),i(),u(35,"input",22),i()(),n(36,"div",23)(37,"h3",24),o(38,"Measurements"),i(),n(39,"div",25)(40,"div")(41,"label",26),o(42),n(43,"span",27),o(44,"*"),i()(),u(45,"input",28),i(),n(46,"div")(47,"label",29),o(48),n(49,"span",27),o(50,"*"),i()(),u(51,"input",30),i(),n(52,"div")(53,"label",31),o(54),i(),u(55,"input",32),i(),n(56,"div")(57,"label",33),o(58),i(),u(59,"input",34),i(),n(60,"div")(61,"label",35),o(62),i(),u(63,"input",36),i(),n(64,"div")(65,"label",37),o(66),i(),u(67,"input",38),i(),n(68,"div")(69,"label",39),o(70),i(),u(71,"input",40),i()(),n(72,"div",41)(73,"button",42),g("click",function(){return t.saveMeasurements()}),u(74,"app-icon",43),n(75,"span"),o(76,"SAVE MEASUREMENTS"),i()(),n(77,"button",44),g("click",function(){return t.navigateToBodyMeasurements()}),u(78,"app-icon",45),n(79,"span"),o(80,"MEASUREMENTS HISTORY"),i()()()()()(),n(81,"section",10)(82,"h2",11),o(83,"Measurement Goals"),i(),n(84,"form",46)(85,"div",47)(86,"div")(87,"label",48),o(88),i(),u(89,"input",49),i(),n(90,"div")(91,"label",50),o(92),i(),u(93,"input",51),i()()()(),n(94,"section",10)(95,"h2",11),o(96,"Workout Player Settings"),i(),n(97,"form",46)(98,"div",52),g("click",function(m){return t.handlePremiumFeatureOrNavigate(t.PremiumFeature.FOCUS_PLAYER,m)}),n(99,"div")(100,"h3",53),o(101," Player Mode "),y(102,Dt,3,0,"span",54),i(),n(103,"p",55),o(104,"Choose between Compact and Focus player "),i()(),n(105,"label",56)(106,"span",57),o(107,"Toggle Player Mode"),i(),n(108,"input",58),g("change",function(m){return t.togglePlayerMode(m)}),i(),u(109,"div",59),n(110,"span",60),o(111),i()()(),n(112,"div",61)(113,"label",62),o(114,"Weight Increment Step"),i(),n(115,"p",63),o(116),P(117,"uppercase"),i(),n(118,"input",64),g("change",function(){return t.currentVibrator.vibrate(50)}),i(),y(119,At,2,0,"div",65),i(),n(120,"div",66)(121,"div")(122,"h3",67),o(123,"Timed Set Countdown Sound"),i(),n(124,"p",55),o(125,"Play sound X seconds before a timed set ends"),i()(),n(126,"label",68)(127,"input",69),g("change",function(){return t.currentVibrator.vibrate(50)}),i(),u(128,"div",70),n(129,"span",60),o(130),i()()(),y(131,Ot,5,1,"div",71),i()(),n(132,"section",10)(133,"div")(134,"h2",72),o(135," Progressive Overload "),y(136,Nt,3,0,"span",54),i()(),u(137,"h2",11),n(138,"form",46)(139,"div",52),g("click",function(m){return t.handlePremiumFeatureOrNavigate(t.PremiumFeature.PROGRESSIVE_OVERLOAD,m)}),n(140,"div")(141,"h3",67),o(142,"Enable Automatic Progression "),i(),n(143,"p",55),o(144,"Automatically increase weight or reps based on performance."),i()(),n(145,"label",73)(146,"input",74),g("change",function(){return t.currentVibrator.vibrate(50)}),i(),u(147,"div",70),n(148,"span",60),o(149),i()()(),y(150,Kt,21,7,"div",75),i()(),n(151,"section",10)(152,"h2",11),o(153,"Data Management"),i(),n(154,"div",76)(155,"div",77)(156,"div")(157,"p",78),o(158,"Backup your data"),i(),n(159,"p",79),o(160,"Save all your data to a JSON file."),i()(),n(161,"button",80),g("shortPress",function(){return t.exportData()}),u(162,"app-icon",81),o(163," EXPORT DATA "),i()(),n(164,"div",77)(165,"div")(166,"p",78),o(167,"Restore your data"),i(),n(168,"p",79),o(169,"Import from a JSON backup file."),i()(),n(170,"input",82),g("change",function(m){return t.importData(m),t.currentVibrator.vibrate(50)}),i()(),n(171,"div",77)(172,"div")(173,"p",83),o(174," Data and History "),n(175,"app-icon",84),g("click",function(){return t.showSyncHistoryTooltip()}),i()(),n(176,"p",79),o(177,"Recalculate stats and achievements."),i()(),n(178,"button",85),g("shortPress",function(){return t.onSyncHistoryClick()}),u(179,"app-icon",86),o(180," SYNC HISTORY "),i()(),n(181,"div",77)(182,"div")(183,"p",87),o(184,"Reset All Data"),i(),n(185,"p",79),o(186,"This action cannot be undone."),i()(),n(187,"button",88),g("shortPress",function(){return t.clearAllAppData()}),u(188,"app-icon",89),o(189," CLEAR ALL DATA "),i()()()(),n(190,"div",90)(191,"section",10)(192,"div")(193,"h2",11),o(194," Personal Gym "),y(195,Xt,3,0,"span",91),i()(),n(196,"div")(197,"p",92),o(198,"View your own equipment"),i(),n(199,"button",93),g("shortPress",function(m){return t.handlePremiumFeatureOrNavigate(t.PremiumFeature.PERSONAL_GYM,m,["/personal-gym"])}),u(200,"app-icon",94),o(201," PERSONAL GYM "),i()()(),n(202,"section",10)(203,"h2",11),o(204,"Exercise library"),i(),n(205,"div")(206,"p",92),o(207,"View all the available exercise and add your own ones"),i(),n(208,"button",95),g("shortPress",function(){return t.navigateToExerciseLibrary()}),u(209,"app-icon",96),o(210," EXERCISES "),i()()()(),n(211,"section",10)(212,"h2",11),o(213,"Your Achievements"),i(),n(214,"div")(215,"p",92),o(216,"View all your tracked Personal Bests"),i(),n(217,"button",95),g("shortPress",function(){return t.navigateToPersonalBests()}),u(218,"app-icon",97),o(219," VIEW PBs "),i()()(),n(220,"section",10)(221,"h2",11),o(222,"General & Appearance"),i(),n(223,"div",98)(224,"div",99)(225,"div",6)(226,"p",78),o(227,"Weight Units"),i(),n(228,"div",100),u(229,"div",101),n(230,"button",102),g("shortPress",function(){return t.selectWeightUnit("kg")}),o(231,"kg"),i(),n(232,"button",102),g("shortPress",function(){return t.selectWeightUnit("lbs")}),o(233,"lbs"),i()()(),n(234,"div",6)(235,"p",78),o(236,"Measure Units"),i(),n(237,"div",100),u(238,"div",101),n(239,"button",102),g("shortPress",function(){return t.selectMeasureUnit("cm")}),o(240,"cm"),i(),n(241,"button",102),g("shortPress",function(){return t.selectMeasureUnit("in")}),o(242,"in"),i()()(),n(243,"div",6)(244,"p",78),o(245,"Distance Units"),i(),n(246,"div",100),u(247,"div",101),n(248,"button",102),g("shortPress",function(){return t.selectDistanceMeasureUnit("km")}),o(249,"km"),i(),n(250,"button",102),g("shortPress",function(){return t.selectDistanceMeasureUnit("mi")}),o(251,"mi"),i()()(),n(252,"div",6)(253,"p",78),o(254,"Body Weight"),i(),n(255,"div",100),u(256,"div",101),n(257,"button",102),g("shortPress",function(){return t.selectBodyWeightUnit("kg")}),o(258,"kg"),i(),n(259,"button",102),g("shortPress",function(){return t.selectBodyWeightUnit("lbs")}),o(260,"lbs"),i()()(),n(261,"div",6)(262,"p",78),o(263,"Body Measure"),i(),n(264,"div",100),u(265,"div",101),n(266,"button",102),g("shortPress",function(){return t.selectBodyMeasureUnit("cm")}),o(267,"cm"),i(),n(268,"button",102),g("shortPress",function(){return t.selectBodyMeasureUnit("in")}),o(269,"in"),i()()()(),n(270,"div",103)(271,"div",104)(272,"h3",78),o(273,"Dark Mode"),i(),n(274,"label",105)(275,"input",106),g("change",function(){return t.themeService.toggleTheme()}),i(),u(276,"div",107),i()(),n(277,"div",104)(278,"h3",78),o(279,"WIP Message"),i(),n(280,"label",108)(281,"input",109),g("change",function(){return t.toggleWipDisclaimer()}),i(),u(282,"div",107),i()()(),n(283,"div",110)(284,"div",111)(285,"div",112)(286,"h3",53),o(287," Menu Mode "),y(288,Jt,3,0,"span",113),i()(),n(289,"div",114),u(290,"div",115),n(291,"button",116),g("shortPress",function(){return t.selectMenuMode("dropdown")}),o(292,"Dropdown"),i(),n(293,"button",116),g("shortPress",function(){return t.selectMenuMode("compact")}),o(294,"Compact"),i(),n(295,"button",116),g("shortPress",function(){return t.selectMenuMode("modal")}),o(296,"Modal"),i()()()()()()()()),e&2){let a,m,p,c,x,k,B;s(11),b(" ",t.subscriptionService.isPremium()?"Premium Member":"Free Tier"," "),s(2),b(" ",t.subscriptionService.isPremium()?"All features unlocked!":"Upgrade to unlock all features."," "),s(2),b(" ",t.subscriptionService.isPremium()?"Manage":"Upgrade"," "),s(4),d("formGroup",t.profileForm),s(10),d("ngValue",null),s(2),d("ngForOf",t.genders),s(11),b(" Height (",t.unitsService.getBodyMeasureUnitSuffix(),")"),s(3),d("placeholder",t.unitsService.getBodyMeasureUnitSuffix()),s(3),b(" Weight (",t.unitsService.getBodyWeightUnitSuffix(),")"),s(3),d("placeholder",t.unitsService.getBodyWeightUnitSuffix()),s(3),b("Chest (",t.unitsService.getBodyMeasureUnitSuffix(),")"),s(),d("placeholder",t.unitsService.getBodyMeasureUnitSuffix()),s(3),b("Neck (",t.unitsService.getBodyMeasureUnitSuffix(),")"),s(),d("placeholder",t.unitsService.getBodyMeasureUnitSuffix()),s(3),b("Waist (",t.unitsService.getBodyMeasureUnitSuffix(),")"),s(),d("placeholder",t.unitsService.getBodyMeasureUnitSuffix()),s(3),b("Hips (",t.unitsService.getBodyMeasureUnitSuffix(),")"),s(),d("placeholder",t.unitsService.getBodyMeasureUnitSuffix()),s(3),b("Right Arm (",t.unitsService.getBodyMeasureUnitSuffix(),")"),s(),d("placeholder",t.unitsService.getBodyMeasureUnitSuffix()),s(13),d("formGroup",t.goalsForm),s(4),b("Target Weight (",t.unitsService.getBodyWeightUnitSuffix(),")"),s(),d("placeholder",t.unitsService.getBodyWeightUnitSuffix()),s(3),b("Target Waist (",t.unitsService.getBodyMeasureUnitSuffix(),")"),s(),d("placeholder",t.unitsService.getBodyMeasureUnitSuffix()),s(4),d("formGroup",t.appSettingsForm),s(),A("hover:bg-gray-100",t.subscriptionService.isPremium())("dark:hover:bg-gray-600/50",t.subscriptionService.isPremium())("cursor-pointer",t.subscriptionService.isPremium())("cursor-not-allowed",!t.subscriptionService.isPremium()),s(4),d("ngIf",!t.subscriptionService.isPremium()),s(3),A("cursor-not-allowed",!t.subscriptionService.isPremium()),s(3),d("checked",((a=t.appSettingsForm.get("playerMode"))==null?null:a.value)==="focus")("disabled",!t.subscriptionService.isPremium()),s(3),b(" ",((m=t.appSettingsForm.get("playerMode"))==null?null:m.value)==="focus"?"Focus":"Compact"," "),s(5),b("Default step for +/- weight buttons in player (in ",G(117,80,t.unitsService.currentWeightUnit()),")"),s(3),d("ngIf",((p=t.appSettingsForm.get("weightStep"))==null?null:p.invalid)&&((p=t.appSettingsForm.get("weightStep"))==null?null:p.touched)),s(11),b(" ",(c=t.appSettingsForm.get("enableTimerCountdownSound"))!=null&&c.value?"On":"Off"," "),s(),d("ngIf",(x=t.appSettingsForm.get("enableTimerCountdownSound"))==null?null:x.value),s(5),d("ngIf",!t.subscriptionService.isPremium()),s(2),d("formGroup",t.progressiveOverloadForm),s(),A("hover:bg-gray-100",t.subscriptionService.isPremium())("dark:hover:bg-gray-600/50",t.subscriptionService.isPremium())("cursor-pointer",t.subscriptionService.isPremium())("cursor-not-allowed",!t.subscriptionService.isPremium()),s(10),b(" ",(k=t.progressiveOverloadForm.get("enabled"))!=null&&k.value?"On":"Off"," "),s(),d("ngIf",(B=t.progressiveOverloadForm.get("enabled"))==null?null:B.value),s(25),d("appTooltip",t.syncHistoryTooltipString),s(20),d("ngIf",!t.subscriptionService.isPremium()),s(34),d("ngClass",E(82,ce,t.unitsService.currentWeightUnit()==="kg",t.unitsService.currentWeightUnit()==="lbs")),s(),d("ngClass",E(85,T,t.unitsService.currentWeightUnit()==="kg",t.unitsService.currentWeightUnit()!=="kg")),s(2),d("ngClass",E(88,T,t.unitsService.currentWeightUnit()==="lbs",t.unitsService.currentWeightUnit()!=="lbs")),s(6),d("ngClass",E(91,ce,t.unitsService.currentMeasureUnit()==="cm",t.unitsService.currentMeasureUnit()==="in")),s(),d("ngClass",E(94,T,t.unitsService.currentMeasureUnit()==="cm",t.unitsService.currentMeasureUnit()!=="cm")),s(2),d("ngClass",E(97,T,t.unitsService.currentMeasureUnit()==="in",t.unitsService.currentMeasureUnit()!=="in")),s(6),d("ngClass",E(100,ce,t.unitsService.currentDistanceMeasureUnit()==="km",t.unitsService.currentDistanceMeasureUnit()==="mi")),s(),d("ngClass",E(103,T,t.unitsService.currentDistanceMeasureUnit()==="km",t.unitsService.currentDistanceMeasureUnit()!=="km")),s(2),d("ngClass",E(106,T,t.unitsService.currentDistanceMeasureUnit()==="mi",t.unitsService.currentDistanceMeasureUnit()!=="mi")),s(6),d("ngClass",E(109,ce,t.unitsService.currentBodyWeightUnit()==="kg",t.unitsService.currentBodyWeightUnit()==="lbs")),s(),d("ngClass",E(112,T,t.unitsService.currentBodyWeightUnit()==="kg",t.unitsService.currentBodyWeightUnit()!=="kg")),s(2),d("ngClass",E(115,T,t.unitsService.currentBodyWeightUnit()==="lbs",t.unitsService.currentBodyWeightUnit()!=="lbs")),s(6),d("ngClass",E(118,ce,t.unitsService.currentBodyMeasureUnit()==="cm",t.unitsService.currentBodyMeasureUnit()==="in")),s(),d("ngClass",E(121,T,t.unitsService.currentBodyMeasureUnit()==="cm",t.unitsService.currentBodyMeasureUnit()!=="cm")),s(2),d("ngClass",E(124,T,t.unitsService.currentBodyMeasureUnit()==="in",t.unitsService.currentBodyMeasureUnit()!=="in")),s(7),d("checked",t.themeService.isDarkTheme()),s(6),d("checked",!t.userProfileService.getHideWipDisclaimer()),s(7),d("ngIf",!t.subscriptionService.isPremium()),s(2),d("ngClass",et(127,Bt,t.appSettingsService.menuMode()==="dropdown",t.appSettingsService.menuMode()==="compact",t.appSettingsService.menuMode()==="modal")),s(),d("ngClass",E(131,T,t.appSettingsService.menuMode()==="dropdown",t.appSettingsService.menuMode()!=="dropdown")),s(2),d("ngClass",E(134,T,t.appSettingsService.menuMode()==="compact",t.appSettingsService.menuMode()!=="compact")),s(2),d("ngClass",E(137,T,t.appSettingsService.menuMode()==="modal",t.appSettingsService.menuMode()!=="modal"))}},dependencies:[Q,he,X,J,Fe,Ee,Te,Ie,_e,Pe,lt,mt,we,ke,ut,pt,ct,Ce,Me,dt,De,Z,St,nt],encapsulation:2})};var Mt=["bodyweight/calisthenics","dumbbells","kettlebells","barbells","machines","cables","bands","cardio","stretching","plyometrics","strongman","custom","other"];function Qt(l,r){if(l&1&&(n(0,"option",37),o(1),i()),l&2){let e=r.$implicit;d("value",e),s(),b(" ",e," ")}}function Zt(l,r){if(l&1&&(n(0,"option",37),o(1),P(2,"titlecase"),i()),l&2){let e=r.$implicit;d("value",e),s(),b(" ",G(2,2,e)," ")}}function er(l,r){if(l&1&&(n(0,"span"),o(1," of "),n(2,"strong",39),o(3),i()()),l&2){let e=f(2);s(3),M(e.combinedPersonalBests().length)}}function tr(l,r){if(l&1&&(n(0,"div",38),o(1," Showing "),n(2,"strong",39),o(3),i(),y(4,er,4,1,"span",40),o(5," PBs "),i()),l&2){let e=f();s(3),M(e.displayPersonalBests().length),s(),d("ngIf",e.exerciseNameFilter()||e.exerciseCategoryFilter()||e.pbTypeFilter())}}function rr(l,r){if(l&1&&(n(0,"span"),o(1),P(2,"date"),P(3,"date"),i()),l&2){let e=r.$implicit,t=r.last,a=f(2).$implicit,m=f(2);s(),ve(" ",m.formatPbValue(e,a.pbType)," (",K(3,6,I(2,3,e.timestamp,"shortDate"),"dd-MM-yy","UTC"),")",t?"":", "," ")}}function ir(l,r){l&1&&(n(0,"span"),o(1," ..."),i())}function nr(l,r){if(l&1&&(n(0,"div",54)(1,"span",55),o(2,"Prev:"),i(),y(3,rr,4,10,"span",56)(4,ir,2,0,"span",40),i()),l&2){let e=f().$implicit;s(3),d("ngForOf",e.history.slice(0,1)),s(),d("ngIf",e.history.length>1)}}function or(l,r){if(l&1&&(n(0,"div",57)(1,"p",58),o(2),i()()),l&2){let e=f().$implicit;A("mt-2",e.history&&e.history.length>0)("mt-1",!(e.history&&e.history.length>0)),s(),d("title",e.notes),s(),b(" ",e.notes," ")}}function ar(l,r){if(l&1){let e=C();n(0,"div",59)(1,"button",60),g("click",function(a){S(e);let m=f().$implicit,p=f(2);return _(p.navigateToLogDetail(m.workoutLogId,a))}),u(2,"app-icon",61),n(3,"span"),o(4,"VIEW LOG"),i()(),n(5,"button",62),g("click",function(){S(e);let a=f().$implicit,m=f(2);return _(m.showPbTrend(a.exerciseId,a.pbType))}),u(6,"app-icon",63),n(7,"span"),o(8,"TREND"),i()()()}}function sr(l,r){if(l&1&&(n(0,"div",43)(1,"div",44)(2,"div",45)(3,"div")(4,"h2",46),o(5),i(),n(6,"p",47),o(7),P(8,"titlecase"),i()()(),n(9,"div",48)(10,"span",49),o(11),i()(),n(12,"div",50)(13,"span"),o(14),i(),n(15,"span"),o(16),P(17,"date"),P(18,"date"),i()(),y(19,nr,5,2,"div",51)(20,or,3,6,"div",52),i(),y(21,ar,9,0,"div",53),i()),l&2){let e=r.$implicit,t=f(2);s(4),d("title",e.exerciseName),s(),b(" ",e.exerciseName," "),s(2),b(" (",G(8,9,e.primaryMuscleGroup),") "),s(4),M(t.formatPbValue(e)),s(3),M(e.pbType),s(2),M(K(18,14,I(17,11,e.timestamp,"shortDate"),"dd-MM-yy","UTC")),s(3),d("ngIf",e.history&&e.history.length>0),s(),d("ngIf",e.notes),s(),d("ngIf",e.pbType!=="1RM (Estimated)"&&e.workoutLogId)}}function lr(l,r){if(l&1&&(n(0,"div")(1,"div",41),y(2,sr,22,18,"div",42),i()()),l&2){let e=f();s(2),d("ngForOf",e.displayPersonalBests())}}function dr(l,r){l&1&&(n(0,"span"),o(1,"No Personal Bests Match Your Filters"),i())}function mr(l,r){l&1&&o(0,"No Personal Bests Yet!")}function cr(l,r){if(l&1){let e=C();n(0,"span"),o(1,"Try adjusting your filter criteria or "),n(2,"button",69),g("shortPress",function(){S(e);let a=f(2);return _(a.resetFiltersAndShow())}),o(3,"reset all filters"),i()()}}function pr(l,r){l&1&&(n(0,"span"),o(1,"Keep logging your workouts to track your progress and achievements here"),i())}function ur(l,r){if(l&1){let e=C();n(0,"span"),o(1," Try clearing filters, or perhaps "),n(2,"button",69),g("shortPress",function(){S(e);let a=f(2);return _(a.triggerRecalculatePBs())}),o(3,"recalculate PBs"),i(),o(4," if you've recently imported data. "),i()}}function gr(l,r){if(l&1&&(n(0,"div",64),Y(),n(1,"svg",65),u(2,"path",66),i(),z(),n(3,"h2",67),y(4,dr,2,0,"span",35)(5,mr,1,0,"ng-template",null,4,se),i(),n(7,"p",68),y(8,cr,4,0,"span",40)(9,pr,2,0,"span",40)(10,ur,5,0,"span",40),i()()),l&2){let e=D(6),t=f();s(4),d("ngIf",t.hasActiveFilters())("ngIfElse",e),s(4),d("ngIf",t.hasActiveFilters()),s(),d("ngIf",!t.hasActiveFilters()&&t.allPersonalBestsSignalEmpty()),s(),d("ngIf",!t.allPersonalBestsSignalEmpty()&&t.displayPersonalBests().length===0&&!t.hasActiveFilters())}}function fr(l,r){if(l&1){let e=C();n(0,"button",70),g("shortPress",function(){S(e);let a=f();return _(a.scrollToTop())}),Y(),n(1,"svg",71),u(2,"path",72),i(),z(),n(3,"span",14),o(4,"Back to Top"),i()()}}var He=class l{trackingService=h(re);exerciseService=h(Oe);unitsService=h(O);router=h(be);toastService=h(U);platformId=h(fe);workoutService=h(te);allPersonalBestsRaw=F({});allExercisesRaw=F([]);filtersVisible=F(!1);exerciseNameFilter=F("");pbTypeFilter=F("");exerciseCategoryFilter=F("");decimalPipe=new ot("en-US");availableCategories=j(()=>[...Mt].sort());availablePbTypes=j(()=>{let r=this.allPersonalBestsRaw(),e=new Set;return Object.values(r).forEach(t=>{t.forEach(a=>{a.pbType&&e.add(a.pbType)})}),Array.from(e).sort()});combinedPersonalBests=j(()=>{let r=this.allPersonalBestsRaw(),e=this.allExercisesRaw();if(Object.keys(r).length===0||e.length===0)return[];let t=new Map(e.map(m=>[m.id,m])),a=[];for(let m in r)if(r.hasOwnProperty(m)){let p=t.get(m),c=r[m];p&&c.forEach(x=>{a.push(V(N({},x),{exerciseName:p.name,exerciseCategory:p.category,primaryMuscleGroup:p.primaryMuscleGroup}))})}return a});displayPersonalBests=j(()=>{let r=this.combinedPersonalBests(),e=this.exerciseNameFilter().toLowerCase().trim(),t=this.exerciseCategoryFilter(),a=this.pbTypeFilter();if(!e&&!t&&!a)return this.sortPBs(r);let m=r.filter(p=>!(e&&!p.exerciseName.toLowerCase().includes(e)||t&&p.exerciseCategory!==t||a&&p.pbType!==a));return this.sortPBs(m)});hasActiveFilters=j(()=>this.exerciseNameFilter().trim()!==""||this.exerciseCategoryFilter()!==""||this.pbTypeFilter().trim()!=="");allPersonalBestsSignalEmpty=j(()=>Object.keys(this.allPersonalBestsRaw()).length===0);constructor(){}ngOnInit(){le(this.platformId)&&window.scrollTo(0,0),this.trackingService.personalBests$.subscribe(r=>{this.allPersonalBestsRaw.set(r)}),this.exerciseService.getExercises().pipe(Je(1)).subscribe(r=>{this.allExercisesRaw.set(r)})}toggleFiltersVisibility(){this.filtersVisible.update(r=>!r)}resetFilters(){this.exerciseNameFilter.set(""),this.exerciseCategoryFilter.set("")}resetFiltersAndShow(){this.resetFilters(),this.filtersVisible.set(!0)}getPbTypeSortOrder(r){return r.includes("1RM (Actual)")?0:r.includes("1RM (Estimated)")?1:r.includes("3RM (Actual)")?2:r.includes("5RM (Actual)")?3:r.includes("Heaviest Lifted")?4:r.includes("Max Reps (Bodyweight)")?5:r.includes("Max Duration")?6:100}sortPBs(r){return[...r].sort((e,t)=>{let a=e.exerciseName.localeCompare(t.exerciseName);if(a!==0)return a;let m=this.getPbTypeSortOrder(e.pbType),p=this.getPbTypeSortOrder(t.pbType);return m!==p?m-p:e.weightUsed!==void 0&&t.weightUsed!==void 0?(t.weightUsed??0)-(e.weightUsed??0):e.repsAchieved!==void 0&&t.repsAchieved!==void 0&&e.pbType.includes("Max Reps")?(t.repsAchieved??0)-(e.repsAchieved??0):e.durationPerformed!==void 0&&t.durationPerformed!==void 0&&e.pbType.includes("Max Duration")?(t.durationPerformed??0)-(e.durationPerformed??0):new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()})}formatPbValue(r,e){let t="",a=r.pbType||e;if(r.weightUsed!==void 0&&r.weightUsed!==null){if(t+=`${this.decimalPipe.transform(r.weightUsed,"1.0-2")}${this.unitsService.getWeightUnitSuffix()}`,r.repsAchieved>0){let m=!0;if(a&&a.includes("RM (Actual)")){let p=a.split("RM")[0],c=parseInt(p,10);!isNaN(c)&&r.repsAchieved===c&&(m=!1)}m&&(t+=` x ${r.repsAchieved}`)}}else r.repsAchieved>0&&a?.includes("Max Reps")?t=`${r.repsAchieved} reps`:r.durationPerformed&&r.durationPerformed>0&&a?.includes("Max Duration")?t=`${r.durationPerformed}s`:r.repsAchieved>0?t=`${r.repsAchieved} reps`:r.durationPerformed&&r.durationPerformed>0&&(t=`${r.durationPerformed}s`);return t||"N/A"}navigateToLogDetail(r,e){e?.stopPropagation(),r?(this.workoutService.vibrate(),this.router.navigate(["/history/log",r])):(this.toastService.error("Could not find the associated workout log for this personal best. It's possible that the related workout session has been removed.",0,"Navigation Error"),console.warn("Attempted to navigate to log detail, but workoutLogId is undefined for PB:",e))}triggerRecalculatePBs(){return w(this,null,function*(){try{yield this.trackingService.recalculateAllPersonalBests(),this.filtersVisible.set(!1)}catch(r){console.error("Error initiating PB recalculation:",r),this.toastService.error("An error occurred while trying to recalculate personal bests.")}})}resetPBs(){return w(this,null,function*(){try{yield this.trackingService.clearAllPersonalBests_DEV_ONLY()}catch(r){console.error("Error clearAllPersonalBests_DEV_ONLY:",r),this.toastService.error("An error occurred while trying to reset personal bests.")}})}showPbTrend(r,e){if(!r||!e){this.toastService.error("Cannot show trend: Missing exercise ID or PB type.",0,"Error");return}let t=encodeURIComponent(e);this.workoutService.vibrate(),this.router.navigate(["/profile/pb-trend",r,t]),console.log(`Requesting trend for Exercise ID: ${r}, PB Type: ${e}`)}showBackToTopButton=F(!1);onWindowScroll(){let r=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;this.showBackToTopButton.set(r>400)}scrollToTop(){le(this.platformId)&&window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=q({type:l,selectors:[["app-personal-bests"]],hostBindings:function(e,t){e&1&&g("scroll",function(){return t.onWindowScroll()},Qe)},decls:55,vars:15,consts:[["nameFilterInput",""],["pbTypeFilterInput",""],["categoryFilterInput",""],["noPBsOrFilters",""],["noPBsMessage",""],[1,"container","mx-auto","p-2","sm:p-4"],[1,"mb-6","flex","items-center"],["routerLink","/profile",1,"text-gray-600","dark:text-gray-300","hover:text-primary","dark:hover:text-primary-light","p-2","-ml-2","rounded-full","focus:outline-none","focus:ring-2","focus:ring-primary-focus"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"flex","flex-grow","justify-between","items-center","pb-2"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-200"],["type","button",1,"rounded-md","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-primary","dark:focus:ring-primary-light","transition-all","duration-300","ease-in-out",3,"click"],["name","filter",1,"w-10","h-10","transition-transform","duration-300"],[1,"sr-only"],[1,"overflow-hidden","transition-all","duration-500","ease-in-out"],[1,"p-4","bg-white","dark:bg-gray-700","rounded-md","shadow-md","border","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-300","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],["for","exerciseNameFilter",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","exerciseNameFilter","placeholder","e.g., Bench Press",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-800","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm","text-gray-900","dark:text-gray-100","placeholder-gray-400","dark:placeholder-gray-500",3,"input","value"],["for","pbTypeFilter",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","pbTypeFilter",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-800","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm","text-gray-900","dark:text-gray-100",3,"change","value"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","categoryFilter",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","categoryFilter",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-800","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm","text-gray-900","dark:text-gray-100",3,"change","value"],[1,"mt-4","flex","justify-between","items-center"],["appPress","",1,"flex","px-4","py-2","bg-yellow-200","dark:bg-yellow-700","text-gray-700","dark:text-gray-200","rounded-md","hover:bg-yellow-300","dark:hover:bg-yellow-500","text-sm","items-center",3,"shortPress"],["name","trash"],["appPress","","title","Recalculate all Personal Bests from your workout history",1,"ml-2","p-2","text-sm","text-gray-500","dark:text-gray-400","hover:text-primary","dark:hover:text-primary-light","rounded-md","border","border-gray-300","dark:border-gray-600","hover:bg-gray-100","dark:hover:bg-gray-700","transition-colors","flex","items-center",3,"shortPress"],["name","change"],[1,"hidden","sm:inline-block","ml-1"],["appPress","","title","Reset all PBs",1,"ml-2","p-2","text-sm","text-gray-500","dark:text-gray-400","hover:text-red-600","dark:hover:text-red-500","rounded-md","border","border-gray-300","dark:border-gray-600","hover:bg-red-100","dark:hover:bg-red-900/50","transition-colors","flex","items-center",3,"shortPress"],["class","text-sm text-gray-600 dark:text-gray-400",4,"ngIf"],[4,"ngIf","ngIfElse"],["appPress","","type","button","class","fixed bottom-20 right-4 z-40 bg-primary dark:bg-primary text-white rounded-full p-3 shadow-lg hover:bg-primary-dark dark:hover:bg-primary-light focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-focus dark:focus:ring-offset-gray-900 transition-opacity animate-fade-in",3,"shortPress",4,"ngIf"],[3,"value"],[1,"text-sm","text-gray-600","dark:text-gray-400"],[1,"text-gray-800","dark:text-gray-200"],[4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-4"],["class","flex flex-col border dark:border-none bg-white dark:bg-gray-700 rounded-md shadow-md hover:shadow-lg transition-shadow duration-200 relative group transform hover:-translate-y-1",4,"ngFor","ngForOf"],[1,"flex","flex-col","border","dark:border-none","bg-white","dark:bg-gray-700","rounded-md","shadow-md","hover:shadow-lg","transition-shadow","duration-200","relative","group","transform","hover:-translate-y-1"],[1,"p-3","flex-grow"],[1,"flex","justify-between","items-start","mb-1"],[1,"text-md","font-semibold","text-primary","dark:text-primary-light","truncate",3,"title"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"mb-2"],[1,"text-xl","font-bold","text-gray-900","dark:text-white"],[1,"flex","justify-between","items-center","text-xs","text-gray-500","dark:text-gray-400","mb-2"],["class","mt-2 pt-1 border-t border-gray-200 dark:border-gray-600 text-xs text-gray-500 dark:text-gray-400",4,"ngIf"],["class","pt-1 border-t border-gray-200 dark:border-gray-600",3,"mt-2","mt-1",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 gap-4 pt-4 bg-gray-50 dark:bg-gray-800 border-gray-200 rounded-b dark:border-gray-600 p-2",4,"ngIf"],[1,"mt-2","pt-1","border-t","border-gray-200","dark:border-gray-600","text-xs","text-gray-500","dark:text-gray-400"],[1,"font-medium"],[4,"ngFor","ngForOf"],[1,"pt-1","border-t","border-gray-200","dark:border-gray-600"],[1,"text-xs","text-gray-600","dark:text-gray-400","italic","max-h-16","overflow-y-auto","custom-scrollbar","pr-1",3,"title"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4","pt-4","bg-gray-50","dark:bg-gray-800","border-gray-200","rounded-b","dark:border-gray-600","p-2"],[1,"flex","justify-center","items-center","px-6","py-3","bg-indigo-500","hover:bg-indigo-600","text-white","font-semibold","rounded-md","shadow-sm","text-lg","disabled:opacity-50","disabled:cursor-not-allowed",3,"click"],["name","eye",1,"w-8","h-8","mr-1"],["title","Show Trend for this PB",1,"flex","justify-center","items-center","px-6","py-3","bg-primary","hover:bg-primary-light","text-white","font-semibold","rounded-md","shadow-sm","text-lg","disabled:opacity-50","disabled:cursor-not-allowed",3,"click"],["name","trend",1,"w-8","h-8","mr-1"],[1,"text-center","py-10","bg-white","dark:bg-gray-700","rounded-xl","shadow-lg"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-16","h-16","mx-auto","text-gray-400","dark:text-gray-500","mb-4"],["stroke-linecap","round","stroke-linejoin","round","d","M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM13.5 10.5h-6"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-300","mb-2"],[1,"text-gray-500","dark:text-gray-400","px-4"],["appPress","",1,"text-primary","dark:text-primary-light","hover:underline",3,"shortPress"],["appPress","","type","button",1,"fixed","bottom-20","right-4","z-40","bg-primary","dark:bg-primary","text-white","rounded-full","p-3","shadow-lg","hover:bg-primary-dark","dark:hover:bg-primary-light","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-focus","dark:focus:ring-offset-gray-900","transition-opacity","animate-fade-in",3,"shortPress"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M4.5 15.75l7.5-7.5 7.5 7.5"]],template:function(e,t){if(e&1){let a=C();n(0,"div",5)(1,"div",6)(2,"button",7),Y(),n(3,"svg",8),u(4,"path",9),i()(),z(),n(5,"header",10)(6,"h1",11),o(7,"Personal Bests"),i(),n(8,"button",12),g("click",function(){return S(a),_(t.toggleFiltersVisibility())}),u(9,"app-icon",13),n(10,"span",14),o(11,"Toggle Filters"),i()()()(),n(12,"div",15)(13,"div",16)(14,"h2",17),o(15,"Filter PBs"),i(),n(16,"div",18)(17,"div")(18,"label",19),o(19," Filter by Exercise Name "),i(),n(20,"input",20,0),g("input",function(){S(a);let p=D(21);return _(t.exerciseNameFilter.set(p.value))}),i()(),n(22,"div")(23,"label",21),o(24," Filter by PB Type "),i(),n(25,"select",22,1),g("change",function(){S(a);let p=D(26);return _(t.pbTypeFilter.set(p.value))}),n(27,"option",23),o(28,"All PB Types"),i(),y(29,Qt,2,2,"option",24),i()(),n(30,"div")(31,"label",25),o(32," Filter by Category "),i(),n(33,"select",26,2),g("change",function(){S(a);let p=D(34);return _(t.exerciseCategoryFilter.set(p.value))}),n(35,"option",23),o(36,"All Categories"),i(),y(37,Zt,3,4,"option",24),i()()(),n(38,"div",27)(39,"button",28),g("shortPress",function(){return S(a),_(t.resetFilters())}),u(40,"app-icon",29),o(41," CLEAR FILTERS "),i(),n(42,"button",30),g("shortPress",function(){return S(a),_(t.triggerRecalculatePBs())}),u(43,"app-icon",31),n(44,"span",32),o(45,"RECALCULATE"),i()(),n(46,"button",33),g("shortPress",function(){return S(a),_(t.resetPBs())}),u(47,"app-icon",29),n(48,"span",32),o(49,"RESET PBs"),i()(),y(50,tr,6,2,"div",34),i()()(),y(51,lr,3,1,"div",35)(52,gr,11,5,"ng-template",null,3,se)(54,fr,5,0,"button",36),i()}if(e&2){let a=D(53);s(9),A("rotate-180",t.filtersVisible()===!0),s(3),Ze("max-height",t.filtersVisible()?"1000px":"0px"),A("mb-6",t.filtersVisible()),s(8),d("value",t.exerciseNameFilter()),s(5),d("value",t.pbTypeFilter()),s(4),d("ngForOf",t.availablePbTypes()),s(4),d("value",t.exerciseCategoryFilter()),s(4),d("ngForOf",t.availableCategories()),s(13),d("ngIf",t.combinedPersonalBests().length>0),s(),d("ngIf",t.displayPersonalBests().length>0)("ngIfElse",a),s(3),d("ngIf",t.showBackToTopButton())}},dependencies:[Q,X,J,at,De,Z,it,ye],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#9ca3af;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}.dark[_ngcontent-%COMP%]   .custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4b5563}.dark[_ngcontent-%COMP%]   .custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}"],data:{animation:[ze("slideInOutActions",[me("void",de({height:"0px",opacity:0,overflow:"hidden",paddingTop:"0",paddingBottom:"0",marginTop:"0",marginBottom:"0"})),me("*",de({height:"*",opacity:1,overflow:"hidden",paddingTop:"0.5rem",paddingBottom:"0.5rem"})),Se("void <=> *",xe("200ms ease-in-out"))]),ze("dropdownMenu",[me("void",de({opacity:0,transform:"scale(0.75) translateY(-10px)",transformOrigin:"top right"})),me("*",de({opacity:1,transform:"scale(1) translateY(0)",transformOrigin:"top right"})),Se("void => *",[xe("150ms cubic-bezier(0.25, 0.8, 0.25, 1)")]),Se("* => void",[xe("100ms cubic-bezier(0.25, 0.8, 0.25, 1)")])])]}})};var vr=l=>({"clip-path":l}),hr=l=>({left:l}),yr=(l,r)=>({"text-yellow-500":l,"text-gray-500":r});function br(l,r){if(l&1&&(n(0,"option",18),o(1),P(2,"date"),i()),l&2){let e=r.$implicit;d("value",e.date),s(),b("",I(2,2,e.date,"mediumDate")," ")}}function xr(l,r){if(l&1&&(n(0,"option",18),o(1),P(2,"date"),i()),l&2){let e=r.$implicit;d("value",e.date),s(),b("",I(2,2,e.date,"mediumDate")," ")}}function Sr(l,r){if(l&1&&(n(0,"option",18),o(1),i()),l&2){let e=r.$implicit;d("value",e.key),s(),M(e.label)}}function _r(l,r){if(l&1){let e=C();n(0,"img",41),g("click",function(){S(e);let a=f().$implicit,m=f(2);return _(m.openFullScreenImage(a.photoUrl))}),i()}if(l&2){let e=f().$implicit;d("src",e.photoUrl,L)}}function wr(l,r){if(l&1){let e=C();n(0,"div",27)(1,"div",28)(2,"div",29)(3,"p",30),o(4),P(5,"date"),i(),y(6,_r,1,1,"img",31),n(7,"label",32),o(8),n(9,"input",33),g("change",function(a){let m=S(e).$implicit,p=f(2);return _(p.uploadPhoto(a,m.date))}),i()(),n(10,"div")(11,"button",34),g("click",function(){let a=S(e).$implicit,m=f(2);return _(m.confirmDeleteEntry(a.date))}),u(12,"app-icon",35),i(),n(13,"button",36),g("click",function(){let a=S(e).$implicit,m=f(2);return _(m.editEntry(a.date))}),u(14,"app-icon",37),i()()(),n(15,"div",38)(16,"p")(17,"strong"),o(18,"Weight:"),i(),o(19),i(),n(20,"p")(21,"strong"),o(22,"Chest:"),i(),o(23),i(),n(24,"p")(25,"strong"),o(26,"Waist:"),i(),o(27),i(),n(28,"p")(29,"strong"),o(30,"Hips:"),i(),o(31),i(),n(32,"p")(33,"strong"),o(34,"Neck:"),i(),o(35),i(),n(36,"p")(37,"strong"),o(38,"R. Arm:"),i(),o(39),i()(),n(40,"div")(41,"label",39),o(42,"Notes:"),i(),n(43,"textarea",40),g("input",function(a){let m=S(e).$implicit,p=f(2);return _(p.updateNotes(m.date,a))}),i()()()()}if(l&2){let e=r.$implicit,t=f(2);s(4),M(I(5,16,e.date,"fullDate")),s(2),d("ngIf",e.photoUrl),s(2),b(" ",e.photoUrl?"Change Photo":"Add Photo"," "),s(11),W(" ",e.weight||"N/A"," ",t.unitsService.getBodyWeightUnitSuffix()),s(4),W(" ",e.chest||"N/A"," ",t.unitsService.getBodyMeasureUnitSuffix()),s(4),W(" ",e.waist||"N/A"," ",t.unitsService.getBodyMeasureUnitSuffix()),s(4),W(" ",e.hips||"N/A"," ",t.unitsService.getBodyMeasureUnitSuffix()),s(4),W(" ",e.neck||"N/A"," ",t.unitsService.getBodyMeasureUnitSuffix()),s(4),W(" ",e.rightArm||"N/A"," ",t.unitsService.getBodyMeasureUnitSuffix()),s(4),d("value",e.notes||"")}}function kr(l,r){if(l&1){let e=C();n(0,"div")(1,"section",19)(2,"h2",20),o(3,"Progress Chart"),i(),n(4,"div",21)(5,"select",22),g("change",function(a){S(e);let m=f();return _(m.updateChart(a))}),y(6,Sr,2,2,"option",11),i()(),n(7,"div",23),u(8,"ngx-charts-line-chart",24),i()(),n(9,"section",25)(10,"h2",20),o(11,"Log History"),i(),y(12,wr,44,19,"div",26),i()()}if(l&2){let e=f();s(6),d("ngForOf",e.availableMetrics),s(2),d("results",e.chartData)("scheme",e.colorScheme)("xAxis",!0)("yAxis",!0)("legend",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("xAxisLabel","Date")("yAxisLabel",e.yAxisLabel)("autoScale",!0)("referenceLines",e.referenceLines),s(4),d("ngForOf",e.measurementHistory)}}function Er(l,r){l&1&&(n(0,"div",42)(1,"p",43),o(2,"No measurement history found."),i(),n(3,"p",44),o(4,"Go to your profile settings to add your first entry!"),i()())}function Pr(l,r){if(l&1){let e=C();n(0,"div",45),g("click",function(){S(e);let a=f();return _(a.closeFullScreenImage())}),u(1,"img",46),i()}if(l&2){let e=f();s(),d("src",e.fullScreenImageUrl,L)}}function Cr(l,r){if(l&1){let e=C();n(0,"div",47)(1,"div",48)(2,"h2",49),o(3,"Add Measurement Entry"),i(),n(4,"form",50),g("ngSubmit",function(){S(e);let a=f();return _(a.saveEntry())}),n(5,"label",51),o(6,"Date"),i(),u(7,"input",52),n(8,"div",53)(9,"div")(10,"label",54),o(11),i(),u(12,"input",55),i(),n(13,"div")(14,"label",56),o(15),i(),u(16,"input",57),i(),n(17,"div")(18,"label",58),o(19),i(),u(20,"input",59),i(),n(21,"div")(22,"label",60),o(23),i(),u(24,"input",61),i(),n(25,"div")(26,"label",62),o(27),i(),u(28,"input",63),i(),n(29,"div")(30,"label",64),o(31),i(),u(32,"input",65),i()(),u(33,"textarea",66),n(34,"div",67)(35,"button",68),g("click",function(){S(e);let a=f();return _(a.isAddEntryModalOpen=!1)}),u(36,"app-icon",69),o(37," CANCEL"),i(),n(38,"button",70),u(39,"app-icon",71),o(40,"SAVE"),i()()()()()}if(l&2){let e=f();s(4),d("formGroup",e.entryForm),s(7),b("Target Weight (",e.unitsService.getBodyWeightUnitSuffix(),")"),s(),d("placeholder",H("Weight "+e.unitsService.getBodyWeightUnitSuffix())),s(3),b("Chest (",e.unitsService.getBodyMeasureUnitSuffix(),")"),s(),d("placeholder",H("Chest "+e.unitsService.getBodyMeasureUnitSuffix())),s(3),b("Waist (",e.unitsService.getBodyMeasureUnitSuffix(),")"),s(),d("placeholder",H("Waist "+e.unitsService.getBodyMeasureUnitSuffix())),s(3),b("Hips (",e.unitsService.getBodyMeasureUnitSuffix(),")"),s(),d("placeholder",H("Hips "+e.unitsService.getBodyMeasureUnitSuffix())),s(3),b("Neck (",e.unitsService.getBodyMeasureUnitSuffix(),")"),s(),d("placeholder",H("Neck "+e.unitsService.getBodyMeasureUnitSuffix())),s(3),b("Right Arm (",e.unitsService.getBodyMeasureUnitSuffix(),")"),s(),d("placeholder",H("Right Arm "+e.unitsService.getBodyMeasureUnitSuffix())),s(6),d("disabled",e.entryForm.invalid)}}function Mr(l,r){l&1&&(n(0,"span"),o(1,"Side-by-Side View"),i())}function Tr(l,r){l&1&&(n(0,"span"),o(1,"Slider View"),i())}function Ir(l,r){if(l&1&&(n(0,"div",95)(1,"div",96),u(2,"img",97),n(3,"p",98),o(4),P(5,"date"),i()(),n(6,"div",96),u(7,"img",99),n(8,"p",98),o(9),P(10,"date"),i()()()),l&2){let e=f(2);s(2),d("src",e.comparisonData.from.photoUrl||"./assets/images/no_data.png",L),s(2),M(I(5,4,e.comparisonData.from.date,"fullDate")),s(3),d("src",e.comparisonData.to.photoUrl||"./assets/images/no_data.png",L),s(2),M(I(10,7,e.comparisonData.to.date,"fullDate"))}}function Br(l,r){if(l&1){let e=C();n(0,"div",100)(1,"h3",101),o(2,"Image Comparison Slider"),i(),n(3,"div",102)(4,"div",103),u(5,"img",104),n(6,"span",105),o(7),P(8,"date"),i()(),n(9,"div",106),u(10,"img",107),n(11,"span",108),o(12),P(13,"date"),i()(),n(14,"div",109)(15,"div",110),Y(),n(16,"svg",111),u(17,"path",112),i()()(),z(),n(18,"input",113),g("input",function(a){S(e);let m=f(2);return _(m.onSliderChange(a))}),i()()()}if(l&2){let e=f(2);s(5),d("src",e.comparisonData.from.photoUrl||"./assets/images/no_data.png",L),s(2),b(" BEFORE: ",K(8,7,e.comparisonData.from.date,"dd-MM-yy","UTC")," "),s(2),d("ngStyle",Ye(15,vr,"inset(0 "+(100-e.comparisonSliderValue)+"% 0 0)")),s(),d("src",e.comparisonData.to.photoUrl||"./assets/images/no_data.png",L),s(2),b(" AFTER: ",K(13,11,e.comparisonData.to.date,"dd-MM-yy","UTC")," "),s(2),d("ngStyle",Ye(17,hr,"calc("+e.comparisonSliderValue+"% - 1px)")),s(4),d("value",e.comparisonSliderValue)}}function Fr(l,r){if(l&1&&(n(0,"span"),o(1),i()),l&2){let e=f().$implicit;s(),M(e.unit)}}function Dr(l,r){if(l&1&&(n(0,"span"),o(1),i()),l&2){let e=f().$implicit;s(),M(e.unit)}}function Ar(l,r){if(l&1&&(je(0),o(1),$e()),l&2){let e=f().$implicit;s(),ve(" ",e.difference>0?"+":"","",e.difference," ",e.unit," ")}}function Ur(l,r){l&1&&(je(0),o(1,"N/A"),$e())}function Or(l,r){if(l&1&&(n(0,"tr",114)(1,"th",115),o(2),i(),n(3,"td",116),o(4),y(5,Fr,2,1,"span",82),i(),n(6,"td",116),o(7),y(8,Dr,2,1,"span",82),i(),n(9,"td",117),y(10,Ar,2,3,"ng-container",82)(11,Ur,2,0,"ng-container",82),i()()),l&2){let e=r.$implicit;s(2),M(e.metricLabel),s(2),b("",e.fromValue," "),s(),d("ngIf",e.fromValue!=="N/A"),s(2),b("",e.toValue," "),s(),d("ngIf",e.toValue!=="N/A"),s(),d("ngClass",E(8,yr,e.difference!==null&&e.difference!==null,e.difference===0||e.difference===null)),s(),d("ngIf",e.difference!==null),s(),d("ngIf",e.difference===null)}}function Nr(l,r){if(l&1){let e=C();n(0,"div",72)(1,"div",73)(2,"div",74)(3,"div",75)(4,"h2",76),o(5,"Side-by-Side Comparison"),i(),n(6,"button",77),g("click",function(){S(e);let a=f();return _(a.comparisonData=null)}),u(7,"app-icon",78),i()(),n(8,"div",79)(9,"button",80),g("click",function(){S(e);let a=f();return _(a.toggleComparisonMode())}),u(10,"app-icon",81),y(11,Mr,2,0,"span",82)(12,Tr,2,0,"span",82),i()()(),y(13,Ir,11,10,"div",83)(14,Br,19,19,"div",84),n(15,"div",85)(16,"table",86)(17,"thead",87)(18,"tr")(19,"th",88),o(20,"Metric"),i(),n(21,"th",89),o(22),P(23,"date"),i(),n(24,"th",89),o(25),P(26,"date"),i(),n(27,"th",90),o(28,"Change"),i()()(),n(29,"tbody"),y(30,Or,12,11,"tr",91),i()()(),n(31,"div",92)(32,"button",93),g("click",function(){S(e);let a=f();return _(a.comparisonData=null)}),u(33,"app-icon",94),o(34," CLOSE"),i()()()()}if(l&2){let e=f();s(11),d("ngIf",e.comparisonMode==="slider"),s(),d("ngIf",e.comparisonMode==="side-by-side"),s(),d("ngIf",e.comparisonMode==="side-by-side"),s(),d("ngIf",e.comparisonMode==="slider"),s(8),b("",I(23,7,e.comparisonData.from.date,"shortDate")," "),s(3),b("",I(26,10,e.comparisonData.to.date,"shortDate")," "),s(5),d("ngForOf",e.comparisonData.rows)}}var Ge=class l{userProfileService=h(ee);imageStorageService=h(ie);toastService=h(U);fb=h(Be);alertService=h(Ae);unitsService=h(O);compareFromDate="";compareToDate="";userProfile=null;measurementHistory=[];fullScreenImageUrl=null;isAddEntryModalOpen=!1;comparisonData=null;entryForm;chartData=[];yAxisLabel="Value";referenceLines=[];colorScheme="vivid";availableMetrics=[];notesUpdate$=new Xe;ngOnInit(){this.userProfile=this.userProfileService.getProfile(),this.setupAvailableMetrics(),this.loadHistory(),this.initEntryForm(),this.notesUpdate$.pipe(R(1e3)).subscribe(r=>this.saveNotes(r.date,r.notes))}setupAvailableMetrics(){this.availableMetrics=[{key:"weight",label:`Weight (${this.unitsService.getBodyWeightUnitSuffix()})`},{key:"bmi",label:"Body Mass Index (BMI)"},{key:"bodyFat",label:"Body Fat % (Navy)"},{key:"chest",label:`Chest (${this.unitsService.getBodyMeasureUnitSuffix()})`},{key:"waist",label:`Waist (${this.unitsService.getBodyMeasureUnitSuffix()})`},{key:"hips",label:`Hips (${this.unitsService.getBodyMeasureUnitSuffix()})`},{key:"neck",label:`Neck (${this.unitsService.getBodyMeasureUnitSuffix()})`},{key:"rightArm",label:`Right Arm (${this.unitsService.getBodyMeasureUnitSuffix()})`}]}loadHistory(){return w(this,null,function*(){this.userProfile=this.userProfileService.getProfile();let r=this.userProfile?.measurementHistory?.slice().sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())||[];if(this.measurementHistory=yield Promise.all(r.map(e=>w(this,null,function*(){if(!e.date)return null;let t=yield this.imageStorageService.getImage(e.date),a=t?URL.createObjectURL(t):void 0;return V(N({},e),{photoUrl:a})}))).then(e=>e.filter(Boolean)),this.measurementHistory.length>0){let e=document.getElementById("metric-select");this.prepareChartData(e?.value||"weight")}else this.chartData=[]})}prepareChartData(r){let e=this.availableMetrics.find(m=>m.key===r);this.yAxisLabel=e?e.label:"Value";let a=this.measurementHistory.slice().reverse().map(m=>{let p=null;if(r==="bmi")m.weight&&this.userProfile?.height&&this.userProfile.height>0&&(p=this.userProfileService.calculateBMI(m.weight,this.userProfile.height));else if(r==="bodyFat"){let{gender:c,height:x}=this.userProfile||{},{waist:k,neck:B,hips:ne}=m;if(c&&x&&k&&B){let oe={waist:k,neck:B,height:x,hips:ne??void 0};p=this.userProfileService.calculateBodyFatNavy(c,oe)}}else{let c=m[r];typeof c=="number"&&(p=c)}return{name:m.date,value:p}}).filter(m=>m.value!==null&&m.value!==void 0&&!isNaN(m.value));this.chartData=[{name:this.yAxisLabel,series:a}],this.updateReferenceLine(r)}updateReferenceLine(r){let e=this.userProfile?.measurementGoals?.[r];typeof e=="number"?this.referenceLines=[{name:"Goal",value:e}]:this.referenceLines=[]}updateChart(r){let e=r.target;this.prepareChartData(e.value)}initEntryForm(){this.entryForm=this.fb.group({date:["",v.required],weight:[null,[v.min(0)]],waist:[null,[v.min(0)]],neck:[null,[v.min(0)]],chest:[null,[v.min(0)]],hips:[null,[v.min(0)]],rightArm:[null,[v.min(0)]],notes:[""]})}openAddEntryModal(){this.entryForm.reset({date:new Date().toISOString().split("T")[0]}),this.isAddEntryModalOpen=!0}saveEntry(){this.entryForm.invalid||(this.userProfileService.addOrUpdateMeasurementEntry(this.entryForm.value),this.isAddEntryModalOpen=!1,this.loadHistory(),this.toastService.success("Entry Saved!"))}updateNotes(r,e){let t=e.target.value;this.notesUpdate$.next({date:r,notes:t})}saveNotes(r,e){let t=this.measurementHistory.find(a=>a.date===r);if(t){let a=V(N({},t),{notes:e});delete a.photoUrl,this.userProfileService.addOrUpdateMeasurementEntry(a),this.toastService.info("Notes auto-saved.",1500)}}uploadPhoto(r,e){return w(this,null,function*(){let t=r.target;if(!t.files||t.files.length===0)return;let a=t.files[0];try{yield this.imageStorageService.saveImage(e,a);let m=this.measurementHistory.find(p=>p.date===e);m&&(m.photoUrl&&URL.revokeObjectURL(m.photoUrl),m.photoUrl=URL.createObjectURL(a)),this.toastService.success("Photo saved!")}catch(m){console.error("Failed to save photo:",m),this.toastService.error("Could not save photo.")}finally{t.value=""}})}openFullScreenImage(r){this.fullScreenImageUrl=r}closeFullScreenImage(){this.fullScreenImageUrl=null}onCompareFromChange(r){let e=r.target;this.compareFromDate=e.value}onCompareToChange(r){let e=r.target;this.compareToDate=e.value}closeCompareModal(){this.comparisonData=null,this.compareFromDate="",this.compareToDate=""}openCompareModal(r,e){if(this.comparisonMode="slider",this.comparisonSliderValue=50,!r||!e){this.toastService.error("Please select two dates to compare.");return}let t=this.measurementHistory.find(p=>p.date===r),a=this.measurementHistory.find(p=>p.date===e);if(!t||!a){this.toastService.error("Could not find the selected entries.");return}new Date(t.date)>new Date(a.date)&&([t,a]=[a,t]);let m=this.calculateComparisonRows(t,a);this.comparisonData={from:t,to:a,rows:m}}calculateComparisonRows(r,e){return[{key:"weight",label:"Weight",unit:this.unitsService.getBodyWeightUnitSuffix()},{key:"chest",label:"Chest",unit:this.unitsService.getBodyMeasureUnitSuffix()},{key:"waist",label:"Waist",unit:this.unitsService.getBodyMeasureUnitSuffix()},{key:"hips",label:"Hips",unit:this.unitsService.getBodyMeasureUnitSuffix()},{key:"neck",label:"Neck",unit:this.unitsService.getBodyMeasureUnitSuffix()},{key:"rightArm",label:"Right Arm",unit:this.unitsService.getBodyMeasureUnitSuffix()}].map(a=>{let m=r[a.key],p=e[a.key],c=null;return typeof m=="number"&&typeof p=="number"&&(c=parseFloat((p-m).toFixed(2))),{metricLabel:a.label,unit:a.unit,fromValue:m??"N/A",toValue:p??"N/A",difference:c}})}editEntry(r){let e=this.measurementHistory.find(t=>t.date===r);if(!e){this.toastService.error("Entry not found.");return}this.entryForm.setValue({date:e.date,weight:e.weight??null,waist:e.waist??null,neck:e.neck??null,chest:e.chest??null,hips:e.hips??null,rightArm:e.rightArm??null,notes:e.notes??""}),this.isAddEntryModalOpen=!0}confirmDeleteEntry(r){return w(this,null,function*(){let e=yield this.alertService.showConfirm("Delete Entry",`Are you sure you want to permanently delete all data for ${r}? This includes any associated photo and cannot be undone.`);if(e&&e.data)try{this.userProfileService.deleteMeasurementEntry(r),yield this.imageStorageService.deleteImage(r),this.toastService.success("Entry deleted successfully."),yield this.loadHistory()}catch(t){console.error("Failed to delete entry:",t),this.toastService.error("Could not delete the entry.")}})}comparisonSliderValue=50;comparisonMode="slider";onSliderChange(r){let e=r.target.value;this.comparisonSliderValue=Number(e)}toggleComparisonMode(){this.comparisonMode=this.comparisonMode==="slider"?"side-by-side":"slider"}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=q({type:l,selectors:[["app-measurement-history"]],decls:28,vars:9,consts:[["noData",""],[1,"container","mx-auto","text-gray-800","dark:text-gray-200"],[1,"flex","justify-between","items-center","pb-4","border-b","border-gray-200","dark:border-gray-700","mb-4"],[1,"text-2xl","font-bold"],[1,"px-4","py-2","bg-primary","hover:bg-primary-dark","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","inline-flex","items-center","text-sm",3,"click"],["name","plus-circle"],[1,"bg-white","dark:bg-gray-800","p-4","rounded-md","shadow-md","mb-6"],[1,"font-semibold","mb-2"],[1,"flex","flex-col","sm:flex-row","gap-4","items-center"],[1,"flex-1","p-2","border","dark:border-gray-600","rounded-md","dark:bg-gray-700",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"px-4","py-2","bg-indigo-500","hover:bg-indigo-600","text-white","rounded-md","disabled:opacity-50","flex","items-center",3,"click","disabled"],["name","magnifier",1,"h-6","w-6","mr-1",3,"strokeWidth"],[4,"ngIf","ngIfElse"],["class","fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",3,"click",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 text-gray-800 dark:text-gray-200 backdrop-blur-sm animate-fade-in",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4 animate-fade-in text-gray-800 dark:text-gray-200",4,"ngIf"],[3,"value"],[1,"bg-white","dark:bg-gray-800","p-4","sm:p-6","rounded-md","shadow-md","mb-6"],[1,"text-xl","font-semibold","mb-4"],[1,"mb-4"],[1,"p-2","border","dark:border-gray-600","rounded-md","dark:bg-gray-700",3,"change"],[1,"w-full","h-[300px]"],[3,"results","scheme","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","autoScale","referenceLines"],[1,"bg-white","dark:bg-gray-800","p-4","sm:p-6","rounded-md","shadow-md"],["class","border-b dark:border-gray-700 py-4 last:border-b-0",4,"ngFor","ngForOf"],[1,"border-b","dark:border-gray-700","py-4","last:border-b-0"],[1,"grid","grid-cols-1","sm:grid-cols-3","gap-4","items-start"],[1,"flex","flex-col","items-center"],[1,"font-medium","text-lg","mb-2"],["alt","Progress photo","class","w-24 h-24 object-cover rounded-md shadow-lg cursor-pointer hover:opacity-80 transition-opacity",3,"src","click",4,"ngIf"],[1,"cursor-pointer","text-sm","text-primary","dark:text-primary-dark","hover:underline","mt-2"],["type","file","accept","image/*",1,"hidden",3,"change"],["title","Delete Entry",1,"p-1","rounded-full","text-gray-400","hover:bg-red-100","hover:text-red-500","dark:hover:bg-red-900/50","transition-colors",3,"click"],["name","trash",1,"w-4","h-4"],["title","Edit Entry",1,"p-1","rounded-full","text-gray-400","hover:bg-red-100","hover:text-red-500","dark:hover:bg-red-900/50","transition-colors",3,"click"],["name","edit",1,"w-4","h-4"],[1,"text-sm","grid","grid-cols-2","gap-x-4","gap-y-1"],[1,"font-semibold","text-sm"],["placeholder","Add notes...",1,"w-full","p-2","mt-1","border","rounded-md","dark:bg-gray-700","dark:border-gray-600","h-24",3,"input","value"],["alt","Progress photo",1,"w-24","h-24","object-cover","rounded-md","shadow-lg","cursor-pointer","hover:opacity-80","transition-opacity",3,"click","src"],[1,"text-center","bg-white","dark:bg-gray-800","p-10","rounded-md","shadow-md"],[1,"text-lg"],[1,"text-gray-500","dark:text-gray-400","mt-2"],[1,"fixed","inset-0","bg-black","bg-opacity-80","flex","items-center","justify-center","z-50","p-4",3,"click"],[1,"max-w-full","max-h-full","object-contain",3,"src"],[1,"fixed","inset-0","bg-black","bg-opacity-60","flex","items-center","justify-center","z-50","p-4","text-gray-800","dark:text-gray-200","backdrop-blur-sm","animate-fade-in"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","p-6","w-full","max-w-md"],[1,"text-xl","font-bold","mb-4"],[3,"ngSubmit","formGroup"],["for","date",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","date","formControlName","date","id","date",1,"w-full","p-2","border","rounded","mb-4","dark:bg-gray-700","dark:border-gray-600"],[1,"grid","grid-cols-2","gap-4","mb-4"],["for","weight",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","formControlName","weight","id","weight",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","chest",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","formControlName","chest","id","chest",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","waist",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","formControlName","waist","id","waist",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","hips",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","formControlName","hips","id","hips",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","neck",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","formControlName","neck","id","neck",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","rightArm",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","formControlName","rightArm","id","rightArm",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["formControlName","notes","placeholder","Notes...",1,"w-full","p-2","border","rounded","mb-4","h-24","dark:bg-gray-700","dark:border-gray-600"],[1,"flex","justify-end","gap-4","text-white"],["type","button",1,"px-4","py-2","rounded","flex","items-center",3,"click"],["name","cancel",1,"h-6","w-6","text-white"],["type","submit",1,"px-4","py-2","bg-primary","text-white","rounded","disabled:opacity-50","flex","items-center",3,"disabled"],["name","save",1,"h-7","w-7","mr-1"],[1,"fixed","inset-0","bg-black","bg-opacity-70","flex","items-center","justify-center","z-50","p-4","animate-fade-in","text-gray-800","dark:text-gray-200"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","p-4","sm:p-6","w-full","max-w-3xl","max-h-[90vh]","overflow-y-auto"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","mb-4"],[1,"flex","items-center","justify-between","w-full","sm:w-auto","mb-2","sm:mb-0"],[1,"text-xl","sm:text-2xl","font-bold","mb-2","sm:mb-0"],[1,"text-gray-500","hover:text-gray-800","dark:hover:text-gray-200",3,"click"],["name","cancel",1,"h-6","w-6"],[1,"flex","items-center","gap-4"],[1,"px-3","py-1.5","text-xs","font-medium","text-gray-600","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","rounded-md","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors","flex","items-center",3,"click"],["name","change",1,"w-4","h-4","mr-1"],[4,"ngIf"],["class","grid grid-cols-2 gap-4 mb-6",4,"ngIf"],["class","mb-6",4,"ngIf"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400","rounded-lg"],["scope","col",1,"px-2","py-3","rounded-l-lg"],["scope","col",1,"px-2","py-3","text-center"],["scope","col",1,"px-2","py-3","text-center","rounded-r-lg"],["class","border-b dark:border-gray-700",4,"ngFor","ngForOf"],[1,"flex","justify-end","mt-6"],[1,"px-5","py-2.5","rounded-lg","bg-gray-200","hover:bg-gray-300","dark:bg-gray-600","dark:hover:bg-gray-700","text-sm","font-medium","flex","items-center",3,"click"],["name","cancel"],[1,"grid","grid-cols-2","gap-4","mb-6"],[1,"text-center"],["alt","Start photo",1,"w-full","h-48","sm:h-64","object-cover","rounded-md","bg-gray-200","dark:bg-gray-700",3,"src"],[1,"mt-2","font-semibold","text-sm"],["alt","End photo",1,"w-full","h-48","sm:h-64","object-cover","rounded-md","bg-gray-200","dark:bg-gray-700",3,"src"],[1,"mb-6"],[1,"font-semibold","text-center","mb-2"],[1,"relative","w-full","aspect-[4/3]","rounded-md","overflow-hidden","select-none","bg-gray-200","dark:bg-gray-700"],[1,"absolute","inset-0","z-10"],["alt","Start photo",1,"w-full","h-full","object-cover","max-w-none",3,"src"],[1,"absolute","top-2","left-2","bg-black/50","text-white","text-xs","font-bold","py-1","px-2","rounded-full","z-10"],[1,"absolute","inset-0","z-20",3,"ngStyle"],["alt","End photo",1,"w-full","h-full","object-cover","max-w-none",3,"src"],[1,"absolute","top-2","right-2","bg-black/50","text-white","text-xs","font-bold","py-1","px-2","rounded-full","z-10"],[1,"absolute","top-0","bottom-0","bg-white","w-1","pointer-events-none","z-30",3,"ngStyle"],[1,"absolute","top-1/2","-translate-y-1/2","-translate-x-1/2","bg-white","border-2","border-primary","rounded-full","h-8","w-8","flex","items-center","justify-center","shadow-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-primary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M8 9l4-4 4 4m0 6l-4 4-4-4"],["type","range","min","0","max","100",1,"absolute","inset-0","w-full","h-full","cursor-ew-resize","appearance-none","bg-transparent","z-40",2,"--thumb-color","transparent",3,"input","value"],[1,"border-b","dark:border-gray-700"],["scope","row",1,"px-2","py-4","font-medium","whitespace-nowrap"],[1,"px-2","py-4","text-center"],[1,"px-2","py-4","text-center","font-bold",3,"ngClass"]],template:function(e,t){if(e&1){let a=C();n(0,"div",1)(1,"header",2)(2,"h1",3),o(3,"Measurement History"),i(),n(4,"button",4),g("click",function(){return S(a),_(t.openAddEntryModal())}),u(5,"app-icon",5),o(6," ADD PAST ENTRY "),i()(),n(7,"section",6)(8,"h3",7),o(9,"Side-by-Side Comparison"),i(),n(10,"div",8)(11,"select",9),g("change",function(p){return S(a),_(t.onCompareFromChange(p))}),n(12,"option",10),o(13,"-- Select Start Date --"),i(),y(14,br,3,5,"option",11),i(),n(15,"select",9),g("change",function(p){return S(a),_(t.onCompareToChange(p))}),n(16,"option",10),o(17,"-- Select End Date --"),i(),y(18,xr,3,5,"option",11),i(),n(19,"button",12),g("click",function(){return S(a),_(t.openCompareModal(t.compareFromDate,t.compareToDate))}),u(20,"app-icon",13),o(21," COMPARE "),i()()(),y(22,kr,13,13,"div",14)(23,Er,5,0,"ng-template",null,0,se),i(),y(25,Pr,2,1,"div",15)(26,Cr,41,20,"div",16)(27,Nr,35,13,"div",17)}if(e&2){let a=D(24);s(14),d("ngForOf",t.measurementHistory),s(4),d("ngForOf",t.measurementHistory),s(),d("disabled",!t.compareFromDate||!t.compareToDate),s(),d("strokeWidth",2),s(2),d("ngIf",t.measurementHistory.length>0)("ngIfElse",a),s(3),d("ngIf",t.fullScreenImageUrl),s(),d("ngIf",t.isAddEntryModalOpen),s(),d("ngIf",t.comparisonData)}},dependencies:[Q,he,X,J,rt,kt,wt,Fe,Ee,Te,Ie,_e,Pe,we,ke,Ce,Me,Z,ye],encapsulation:2})};var Hn=[{path:"",component:We,title:"Profile & Settings"},{path:"personal-bests",component:He,title:"Personal Bests"},{path:"measurements",component:Ge,title:"Body Measurements"}];export{Hn as PROFILE_SETTINGS_ROUTES};
