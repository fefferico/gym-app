import{a as Be}from"./chunk-56VEGMHV.js";import{a as Ne}from"./chunk-ZXZSZ6UV.js";import{a as G}from"./chunk-UJ6UUGHW.js";import{h as Fe}from"./chunk-JQ77DG3E.js";import{a as Ie}from"./chunk-3X2TKLL6.js";import{b as U,c as De}from"./chunk-BVKQSXKY.js";import{a as Te}from"./chunk-QSVAJ4WA.js";import{A as H,Ab as oe,Ac as Ae,Bb as ae,Cb as le,Da as T,Ea as x,Eb as O,Fa as b,Fb as V,G as K,M as g,Ma as A,O as k,Oa as re,P as _,Q as y,Qa as n,Qb as se,R as F,Ra as w,Rb as R,Sa as h,V as E,Wb as me,Xb as de,Yb as f,Zb as pe,_ as I,_b as ce,a as Z,b as z,bb as J,bc as ge,cc as ue,da as l,dc as fe,ec as ve,f as Q,gb as C,gc as xe,hb as B,hc as be,ib as ie,ic as he,jc as ye,kb as q,kc as Se,la as D,lc as ke,mb as P,nc as _e,pc as we,q as ee,qa as v,qc as Ee,rc as Ce,sc as Pe,tb as ne,tc as L,ub as N,va as te,vb as M,w as Y,wa as m,xa as t,ya as e,z as $,za as c}from"./chunk-SASBCNRE.js";var Me=(a,i)=>({"bg-primary hover:bg-primary-dark text-white border-primary dark:border-primary":a,"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700":i});function Ue(a,i){if(a&1&&(t(0,"option",70),n(1),e()),a&2){let r=i.$implicit;m("value",r.value),l(),h("",r.label," ")}}function Ge(a,i){a&1&&(t(0,"div",71),n(1," Must be a positive number (e.g., 2.5 or 5). Max 50. "),e())}function je(a,i){a&1&&(t(0,"div",71),n(1," Must be 1-20s. "),e())}function We(a,i){if(a&1&&(t(0,"div",9)(1,"label",72),n(2,"Countdown From (seconds)"),e(),c(3,"input",73),v(4,je,2,0,"div",37),e()),a&2){let r,o=b();l(4),m("ngIf",((r=o.appSettingsForm.get("countdownSoundSeconds"))==null?null:r.invalid)&&((r=o.appSettingsForm.get("countdownSoundSeconds"))==null?null:r.touched))}}function Ye(a,i){a&1&&(t(0,"div",71),n(1," Must be 3-60s. "),e())}function $e(a,i){if(a&1&&(t(0,"div")(1,"label",74),n(2,"Pre-Set Timer Duration (seconds)"),e(),c(3,"input",75),v(4,Ye,2,0,"div",37),e()),a&2){let r,o=b();l(4),m("ngIf",((r=o.appSettingsForm.get("presetTimerDurationSeconds"))==null?null:r.invalid)&&((r=o.appSettingsForm.get("presetTimerDurationSeconds"))==null?null:r.touched))}}function He(a,i){if(a&1&&(t(0,"div")(1,"div",47)(2,"div")(3,"h3",39),n(4,"Pre-Set Timer after Rest "),e(),t(5,"p",40),n(6,"Show countdown after each rest ends."),e()(),t(7,"label",76)(8,"span",49),n(9,"Toggle Pre-Set Timer after rest"),e(),c(10,"input",77)(11,"div",43),t(12,"span",44),n(13),e()()()()),a&2){let r,o=b();l(13),h(" ",(r=o.appSettingsForm.get("enablePresetTimerAfterRest"))!=null&&r.value?"On":"Off"," ")}}var j=class a{fb=g(_e);workoutService=g(Pe);trackingService=g(U);trainingProgramService=g(Te);storageService=g(Ce);unitsService=g(G);alertService=g(Ee);spinnerService=g(Ae);themeService=g(De);userProfileService=g(Be);appSettingsService=g(Ne);platformId=g(I);toastService=g(L);profileForm;appSettingsForm;currentUnit=this.unitsService.currentUnit;genders=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"},{label:"Prefer not to say",value:"prefer_not_to_say"}];BACKUP_VERSION=2;constructor(){this.profileForm=this.fb.group({username:[""],gender:[null],measurements:this.fb.group({heightCm:[null,[f.min(0)]],weightKg:[null,[f.min(0)]],age:[null,[f.min(0),f.max(150)]],chestCm:[null,[f.min(0)]],waistCm:[null,[f.min(0)]],hipsCm:[null,[f.min(0)]],rightArmCm:[null,[f.min(0)]]})}),this.appSettingsForm=this.fb.group({enableTimerCountdownSound:[!0],countdownSoundSeconds:[5,[f.required,f.min(1),f.max(60)]],enablePresetTimer:[!1],enablePresetTimerAfterRest:[!1],presetTimerDurationSeconds:[10,[f.required,f.min(3),f.max(60)]],weightStep:[2.5,[f.required,f.min(.01),f.max(50)]]})}ngOnInit(){V(this.platformId)&&window.scrollTo(0,0),this.loadProfileData(),this.loadAppSettingsData(),this.profileForm.valueChanges.pipe($(700),Y(()=>this.profileForm.valid&&this.profileForm.dirty),K(i=>{this.userProfileService.saveProfile(i),this.profileForm.markAsPristine({onlySelf:!1}),this.toastService.info("Profile auto-saved",1500)})).subscribe(),this.appSettingsForm.valueChanges.pipe($(700),Y(()=>this.appSettingsForm.valid&&this.appSettingsForm.dirty),K(i=>{this.appSettingsService.saveSettings(i),this.appSettingsForm.markAsPristine({onlySelf:!1}),this.toastService.info("App settings auto-saved",1500)})).subscribe()}loadProfileData(){let i=this.userProfileService.getProfile();i?this.profileForm.reset(i,{emitEvent:!1}):this.profileForm.reset({username:"",gender:null,measurements:{heightCm:null,weightKg:null,age:null,chestCm:null,waistCm:null,hipsCm:null,rightArmCm:null}},{emitEvent:!1})}loadAppSettingsData(){let i=this.appSettingsService.getSettings();this.appSettingsForm.reset(i,{emitEvent:!1})}saveProfileSettings(){if(this.profileForm.invalid){this.toastService.error("Please correct errors in the profile form.",3e3,"Validation Error"),this.profileForm.markAllAsTouched();return}this.userProfileService.saveProfile(this.profileForm.value),this.profileForm.markAsPristine(),this.toastService.success("Profile saved successfully!",2e3)}saveAppSettings(){if(this.appSettingsForm.invalid){this.toastService.error("Please correct errors in the app settings form.",3e3,"Validation Error"),this.appSettingsForm.markAllAsTouched();return}this.appSettingsService.saveSettings(this.appSettingsForm.value),this.appSettingsForm.markAsPristine(),this.toastService.success("App settings saved successfully!",2e3)}selectUnit(i){this.unitsService.setUnitPreference(i)}exportData(){this.spinnerService.show("Exporting data...");let i={version:this.BACKUP_VERSION,timestamp:new Date().toISOString(),profile:this.userProfileService.getDataForBackup(),appSettings:this.appSettingsService.getDataForBackup(),routines:this.workoutService.getDataForBackup(),workoutLogs:this.trackingService.getLogsForBackup(),personalBests:this.trackingService.getPBsForBackup()},r=JSON.stringify(i,null,2),o=new Blob([r],{type:"application/json"}),s=URL.createObjectURL(o),d=document.createElement("a"),u=Fe(new Date,"yyyyMMdd_HHmmss");d.download=`FitTrackPro_backup_v${this.BACKUP_VERSION}_${u}.json`,d.href=s,d.click(),URL.revokeObjectURL(s),this.spinnerService.hide(),this.toastService.success("Data export initiated.",3e3)}importData(i){let r=i.target,o=r.files?.[0];if(!o)return;if(o.type!=="application/json"){this.alertService.showAlert("Error","Invalid file type. Please select a JSON file."),r.value="";return}let s=new FileReader;s.onload=d=>{try{let u=d.target?.result,p=JSON.parse(u);if(typeof p!="object"||p===null){this.alertService.showAlert("Error","Invalid backup file format. Expected an object."),r.value="";return}if(p.version===2){if(!p.routines||!p.workoutLogs||!p.personalBests||p.profile===void 0||p.appSettings===void 0){this.alertService.showAlert("Error","Invalid V2 backup file content. Missing essential data sections."),r.value="";return}}else if(p.version===1){if(!p.routines||!p.workoutLogs||!p.personalBests){this.alertService.showAlert("Error","Invalid V1 backup file content. Missing essential data sections."),r.value="";return}}else{this.alertService.showAlert("Error",`Unsupported backup file version. Expected 1 or 2, got ${p.version}.`),r.value="";return}this.alertService.showConfirm("WARNING","Importing data will OVERWRITE your current data. Are you sure?").then(S=>{S&&S.data?(this.spinnerService.show("Importing data..."),this.workoutService.replaceData(p.routines),this.trackingService.replaceLogs(p.workoutLogs),this.trackingService.replacePBs(p.personalBests),p.version===2?(this.userProfileService.replaceData(p.profile),this.appSettingsService.replaceData(p.appSettings)):(this.userProfileService.replaceData(null),this.appSettingsService.replaceData(null)),this.loadProfileData(),this.loadAppSettingsData(),this.spinnerService.hide(),this.toastService.success("Data imported successfully!",5e3,"Import Complete")):this.toastService.info("Data import cancelled.",2e3)})}catch(u){console.error("Error processing imported file:",u),this.alertService.showAlert("Error","Error processing backup file. Ensure it is valid JSON.")}finally{r.value=""}},s.onerror=()=>{this.alertService.showAlert("Error","Error reading file."),r.value=""},s.readAsText(o)}clearAllAppData(){return Q(this,null,function*(){let i=yield this.alertService.showConfirmationDialog("WARNING","This will delete ALL your workout data, profile, and settings. This cannot be undone. Are you sure?");i&&i.data&&(this.trackingService.clearAllWorkoutLogs_DEV_ONLY&&(yield this.trackingService.clearAllWorkoutLogs_DEV_ONLY()),this.trackingService.clearAllPersonalBests_DEV_ONLY&&(yield this.trackingService.clearAllPersonalBests_DEV_ONLY()),this.workoutService.clearAllRoutines_DEV_ONLY&&(yield this.workoutService.clearAllRoutines_DEV_ONLY()),this.userProfileService.clearUserProfile_DEV_ONLY&&this.userProfileService.clearUserProfile_DEV_ONLY(),this.appSettingsService.clearAppSettings_DEV_ONLY&&this.appSettingsService.clearAppSettings_DEV_ONLY(),this.trainingProgramService.deactivateAllPrograms&&this.trainingProgramService.deactivateAllPrograms(),this.loadProfileData(),this.loadAppSettingsData(),yield this.alertService.showAlert("Info","All application data has been cleared."))})}get measForm(){return this.profileForm.get("measurements")}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=D({type:a,selectors:[["app-profile-settings"]],decls:169,vars:27,consts:[[1,"container","mx-auto","p-1","sm:p-4"],[1,"flex","justify-between","items-center","mb-2","pb-2","border-b","border-gray-200","dark:border-gray-700"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-200"],[1,"space-y-6","sm:space-y-8"],[1,"bg-white","dark:bg-gray-700","p-4","sm:p-6","rounded-lg","shadow-md"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-300","mb-4"],[1,"space-y-4",3,"formGroup"],["for","username",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","username","formControlName","username","placeholder","Your display name",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600"],[1,"dark:text-gray-300"],["for","gender",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","gender","formControlName","gender",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","measurements",1,"space-y-4","pt-4","border-t","border-gray-200","dark:border-gray-600"],[1,"text-lg","font-medium","text-gray-700","dark:text-gray-300"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","gap-4"],["for","age",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","age","formControlName","age","placeholder","Years",1,"mt-1","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-600","rounded-md","dark:bg-gray-600"],["for","heightCm",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","heightCm","formControlName","heightCm","placeholder","cm",1,"mt-1","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-600","rounded-md","dark:bg-gray-600"],["for","weightKg",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","weightKg","formControlName","weightKg","placeholder","kg",1,"mt-1","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-600","rounded-md","dark:bg-gray-600"],["for","chestCm",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","chestCm","formControlName","chestCm","placeholder","cm",1,"mt-1","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-600","rounded-md","dark:bg-gray-600"],["for","waistCm",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","waistCm","formControlName","waistCm","placeholder","cm",1,"mt-1","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-600","rounded-md","dark:bg-gray-600"],["for","hipsCm",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","hipsCm","formControlName","hipsCm","placeholder","cm",1,"mt-1","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-600","rounded-md","dark:bg-gray-600"],["for","rightArmCm",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","rightArmCm","formControlName","rightArmCm","placeholder","cm",1,"mt-1","w-full","p-1.5","text-sm","border-gray-300","dark:border-gray-600","rounded-md","dark:bg-gray-600"],[1,"pt-3","text-right"],["type","button",1,"px-4","py-2","bg-green-500","hover:bg-green-600","text-white","font-semibold","rounded-md","shadow-sm","text-sm","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"border-b","border-gray-200","dark:border-gray-600","pb-4"],["for","weightStep",1,"block","text-md","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-sm","text-gray-500","dark:text-gray-400","mb-1"],["type","number","id","weightStep","formControlName","weightStep","min","0.01","step","any",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600"],["class","text-red-500 dark:text-red-400 text-xs mt-1",4,"ngIf"],[1,"flex","items-center","justify-between","pt-4"],[1,"text-md","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-sm","text-gray-500","dark:text-gray-400","mr-1"],["for","countdown-sound-toggle",1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","id","countdown-sound-toggle","formControlName","enableTimerCountdownSound",1,"sr-only","peer"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-600","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-primary","dark:peer-checked:bg-primary-dark"],[1,"ms-3","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["class"," dark:text-gray-300",4,"ngIf"],[1,"pt-4","border-t","border-gray-200","dark:border-gray-600"],[1,"flex","items-center","justify-between"],["for","preset-timer-toggle",1,"inline-flex","items-center","cursor-pointer"],[1,"sr-only"],["type","checkbox","id","preset-timer-toggle","formControlName","enablePresetTimer",1,"sr-only","peer"],[4,"ngIf"],[1,"space-y-4"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],[1,"px-4","py-2","bg-blue-500","hover:bg-blue-600","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","text-sm",3,"click"],["type","file","accept","application/json",1,"block","w-full","text-sm","text-gray-700","dark:text-gray-300","file:mr-4","file:py-2","file:px-4","file:rounded-md","file:border-0","file:text-sm","file:font-semibold","file:bg-gray-200","file:text-gray-700","hover:file:bg-gray-300","dark:file:bg-gray-600","dark:file:text-gray-200","dark:hover:file:bg-gray-700",3,"change"],[1,"pt-4","border-t","border-gray-200","dark:border-gray-700"],[1,"text-lg","font-semibold","text-gray-700","dark:text-gray-300","mb-2"],[1,"text-sm","font-medium","text-red-600","dark:text-red-400","mb-2"],[1,"px-4","py-2","bg-red-500","hover:bg-red-600","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","text-sm",3,"click"],["routerLink","/profile/personal-bests",1,"px-4","py-2","bg-primary","hover:bg-primary-dark","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","inline-flex","items-center","text-sm"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-4","h-4","ml-2"],["fill-rule","evenodd","d","M8.22 5.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 010-1.06Z","clip-rule","evenodd"],[1,"flex","space-x-4"],[1,"px-4","py-2","border","rounded-md","transition-colors","text-sm",3,"click","ngClass"],["for","theme-toggle",1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","id","theme-toggle",1,"sr-only","peer",3,"change","checked"],[1,"flex","items-center","justify-between","mt-5"],["for","menu-mode-toggle",1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","id","menu-mode-toggle",1,"sr-only","peer",3,"change","checked"],[3,"value"],[1,"text-red-500","dark:text-red-400","text-xs","mt-1"],["for","countdownSeconds",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","countdownSeconds","formControlName","countdownSoundSeconds","min","1","max","20",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600"],["for","presetTimerDurationSeconds",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","presetTimerDurationSeconds","formControlName","presetTimerDurationSeconds","min","3","max","60",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600"],["for","preset-timer-toggle-after-rest",1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","id","preset-timer-toggle-after-rest","formControlName","enablePresetTimerAfterRest",1,"sr-only","peer"]],template:function(r,o){if(r&1&&(t(0,"div",0)(1,"header",1)(2,"h1",2),n(3,"Profile & Settings"),e()(),t(4,"div",3)(5,"section",4)(6,"h2",5),n(7,"User Profile"),e(),t(8,"form",6)(9,"div")(10,"label",7),n(11,"Username"),e(),c(12,"input",8),e(),t(13,"div",9)(14,"label",10),n(15,"Gender"),e(),t(16,"select",11)(17,"option",12),n(18,"Select Gender..."),e(),v(19,Ue,2,2,"option",13),e()(),t(20,"div",14)(21,"h3",15),n(22,"Measurements"),e(),t(23,"div",16)(24,"div")(25,"label",17),n(26,"Age"),e(),c(27,"input",18),e(),t(28,"div")(29,"label",19),n(30,"Height (cm)"),e(),c(31,"input",20),e(),t(32,"div")(33,"label",21),n(34,"Weight (kg)"),e(),c(35,"input",22),e(),t(36,"div")(37,"label",23),n(38,"Chest (cm)"),e(),c(39,"input",24),e(),t(40,"div")(41,"label",25),n(42,"Waist (cm)"),e(),c(43,"input",26),e(),t(44,"div")(45,"label",27),n(46,"Hips (cm)"),e(),c(47,"input",28),e(),t(48,"div")(49,"label",29),n(50,"Right Arm (cm)"),e(),c(51,"input",30),e()()(),t(52,"div",31)(53,"button",32),x("click",function(){return o.saveProfileSettings()}),n(54," Save Profile "),e()()()(),t(55,"section",4)(56,"h2",5),n(57,"Workout Player Settings"),e(),t(58,"form",6)(59,"div",33)(60,"label",34),n(61,"Weight Increment Step"),e(),t(62,"p",35),n(63),C(64,"uppercase"),e(),c(65,"input",36),v(66,Ge,2,0,"div",37),e(),t(67,"div",38)(68,"div")(69,"h3",39),n(70,"Timed Set Countdown Sound"),e(),t(71,"p",40),n(72,"Play sound X seconds before a timed set ends."),e()(),t(73,"label",41),c(74,"input",42)(75,"div",43),t(76,"span",44),n(77),e()()(),v(78,We,5,1,"div",45),c(79,"div",46),t(80,"div",47)(81,"div")(82,"h3",39),n(83,"Pre-Set Timer"),e(),t(84,"p",40),n(85,"Show a countdown before each set starts."),e()(),t(86,"label",48)(87,"span",49),n(88,"Toggle Pre-Set Timer"),e(),c(89,"input",50)(90,"div",43),t(91,"span",44),n(92),e()()(),v(93,$e,5,1,"div",51)(94,He,14,1,"div",51),t(95,"div",31)(96,"button",32),x("click",function(){return o.saveAppSettings()}),n(97," Save Player Settings "),e()()()(),t(98,"section",4)(99,"h2",5),n(100,"Data Management"),e(),t(101,"div",52)(102,"div")(103,"p",53),n(104,"Backup your data to a JSON file."),e(),t(105,"button",54),x("click",function(){return o.exportData()}),n(106,"Export Data"),e()(),t(107,"div")(108,"p",53),n(109,"Restore your data from a JSON backup file."),e(),t(110,"input",55),x("change",function(d){return o.importData(d)}),e()(),t(111,"div",56)(112,"h3",57),n(113,"Reset / Clear Data"),e(),t(114,"p",58),n(115,"WARNING: This action will delete ALL your saved data."),e(),t(116,"button",59),x("click",function(){return o.clearAllAppData()}),n(117,"Clear All Data"),e()()()(),t(118,"section",4)(119,"h2",5),n(120,"Your Achievements"),e(),t(121,"div")(122,"p",53),n(123,"View all your tracked Personal Bests."),e(),t(124,"a",60),n(125," View Personal Bests "),y(),t(126,"svg",61),c(127,"path",62),e()()()(),F(),t(128,"section",4)(129,"h2",5),n(130,"General Settings"),e(),t(131,"div",52)(132,"div")(133,"p",53),n(134,"Weight Units"),e(),t(135,"div",63)(136,"button",64),x("click",function(){return o.selectUnit("kg")}),n(137,"kg"),e(),t(138,"button",64),x("click",function(){return o.selectUnit("lbs")}),n(139,"lbs"),e()()()()(),t(140,"section",4)(141,"h2",5),n(142,"Appearance"),e(),t(143,"div",47)(144,"div")(145,"h3",39),n(146,"Dark Mode"),e(),t(147,"p",40),n(148,"Toggle between light and dark themes."),e()(),t(149,"label",65)(150,"span",49),n(151,"Toggle Dark Mode"),e(),t(152,"input",66),x("change",function(){return o.themeService.toggleTheme()}),e(),c(153,"div",43),t(154,"span",44),n(155),e()()(),t(156,"div",67)(157,"div")(158,"h3",39),n(159,"Compact menu mode"),e(),t(160,"p",40),n(161,"Toggle between window and compact mode."),e()(),t(162,"label",68)(163,"span",49),n(164,"Toggle Compact Mode"),e(),t(165,"input",69),x("change",function(){return o.themeService.toggleMenuMode()}),e(),c(166,"div",43),t(167,"span",44),n(168),e()()()()()()),r&2){let s,d,u,p,S,X;l(8),m("formGroup",o.profileForm),l(9),m("ngValue",null),l(2),m("ngForOf",o.genders),l(34),m("disabled",o.profileForm.pristine||o.profileForm.invalid),l(5),m("formGroup",o.appSettingsForm),l(5),h("Default step for +/- weight buttons in player (in ",B(64,19,o.unitsService.currentUnit()),")."),l(3),m("ngIf",((s=o.appSettingsForm.get("weightStep"))==null?null:s.invalid)&&((s=o.appSettingsForm.get("weightStep"))==null?null:s.touched)),l(11),h(" ",(d=o.appSettingsForm.get("enableTimerCountdownSound"))!=null&&d.value?"On":"Off"," "),l(),m("ngIf",(u=o.appSettingsForm.get("enableTimerCountdownSound"))==null?null:u.value),l(14),h(" ",(p=o.appSettingsForm.get("enablePresetTimer"))!=null&&p.value?"On":"Off"," "),l(),m("ngIf",(S=o.appSettingsForm.get("enablePresetTimer"))==null?null:S.value),l(),m("ngIf",(X=o.appSettingsForm.get("enablePresetTimer"))==null?null:X.value),l(2),m("disabled",o.appSettingsForm.pristine||o.appSettingsForm.invalid),l(40),m("ngClass",J(21,Me,o.currentUnit()==="kg",o.currentUnit()!=="kg")),l(2),m("ngClass",J(24,Me,o.currentUnit()==="lbs",o.currentUnit()!=="lbs")),l(14),m("checked",o.themeService.isDarkTheme()),l(3),w(o.themeService.isDarkTheme()?"On":"Off"),l(10),m("checked",o.themeService.isMenuModeCompact()),l(3),w(o.themeService.isMenuModeCompact()?"On":"Off")}},dependencies:[O,ne,N,M,ae,R,we,ge,he,ye,de,ue,me,be,pe,ce,ke,Se,fe,xe,ve],encapsulation:2})};var Oe=["bodyweight","dumbbells","kettlebells","barbells","machines","cables","bands","cardio","stretching","plyometrics","strongman","custom","other"];function Ke(a,i){a&1&&(y(),t(0,"svg",18),c(1,"polyline",19),e())}function Je(a,i){a&1&&(y(),t(0,"svg",18),c(1,"polyline",20),e())}function qe(a,i){if(a&1&&(t(0,"option",31),n(1),C(2,"titlecase"),e()),a&2){let r=i.$implicit;m("value",r),l(),h(" ",B(2,2,r)," ")}}function Xe(a,i){if(a&1){let r=T();t(0,"div",21)(1,"div",22)(2,"div")(3,"label",23),n(4," Filter by Exercise Name "),e(),t(5,"input",24,1),x("input",function(){k(r);let s=A(6),d=b();return _(d.exerciseNameFilter.set(s.value))}),e()(),t(7,"div")(8,"label",25),n(9," Filter by Category "),e(),t(10,"select",26,2),x("change",function(){k(r);let s=A(11),d=b();return _(d.exerciseCategoryFilter.set(s.value))}),t(12,"option",27),n(13,"All Categories"),e(),v(14,qe,3,4,"option",28),e()()(),t(15,"div",29)(16,"button",30),x("click",function(){k(r);let s=b();return _(s.resetFilters())}),n(17," Reset Filters "),e()()()}if(a&2){let r=b();l(5),m("value",r.exerciseNameFilter()),l(5),m("value",r.exerciseCategoryFilter()),l(4),m("ngForOf",r.availableCategories())}}function Ze(a,i){if(a&1&&(t(0,"div",38)(1,"span",39),n(2,"Notes:"),e(),t(3,"p",45),n(4),e()()),a&2){let r=b().$implicit;l(3),m("title",r.notes),l(),h(" ",r.notes," ")}}function ze(a,i){if(a&1){let r=T();t(0,"div",46)(1,"button",47),x("click",function(s){k(r);let d=b().$implicit,u=b(2);return _(u.navigateToLogDetail(d.workoutLogId,s))}),y(),t(2,"svg",48),c(3,"path",49)(4,"path",50),e(),n(5," VIEW LOG "),e()()}}function Qe(a,i){if(a&1&&(t(0,"div",34)(1,"div",35)(2,"h2",36),n(3),e(),t(4,"p",37),n(5),C(6,"titlecase"),e(),t(7,"div",38)(8,"span",39),n(9,"Type:"),e(),t(10,"p",40),n(11),e()(),t(12,"div",38)(13,"span",39),n(14,"Best:"),e(),t(15,"p",41),n(16),e()(),t(17,"div",38)(18,"span",39),n(19,"Date:"),e(),t(20,"p",42),n(21),C(22,"date"),e()(),v(23,Ze,5,2,"div",43),e(),v(24,ze,6,0,"div",44),e()),a&2){let r=i.$implicit,o=b(2);l(2),m("title",r.exerciseName),l(),h(" ",r.exerciseName," "),l(2),h(" (",B(6,8,r.primaryMuscleGroup),") "),l(6),w(r.pbType),l(5),w(o.formatPbValue(r)),l(5),w(ie(22,10,r.timestamp,"mediumDate")),l(2),m("ngIf",r.notes),l(),m("ngIf",r.pbType!=="1RM (Estimated)")}}function et(a,i){if(a&1&&(t(0,"div")(1,"div",32),v(2,Qe,25,13,"div",33),e()()),a&2){let r=b();l(2),m("ngForOf",r.displayPersonalBests())}}function tt(a,i){a&1&&(t(0,"span"),n(1,"No Personal Bests Match Your Filters"),e())}function rt(a,i){a&1&&n(0,"No Personal Bests Yet!")}function it(a,i){if(a&1){let r=T();t(0,"span"),n(1,"Try adjusting your filter criteria or "),t(2,"button",57),x("click",function(){k(r);let s=b(2);return _(s.resetFiltersAndShow())}),n(3,"reset all filters"),e(),n(4,"."),e()}}function nt(a,i){a&1&&(t(0,"span"),n(1,"Keep logging your workouts to track your progress and achievements here."),e())}function ot(a,i){if(a&1&&(t(0,"div",51),y(),t(1,"svg",52),c(2,"path",53),e(),F(),t(3,"h2",54),v(4,tt,2,0,"span",17)(5,rt,1,0,"ng-template",null,3,q),e(),t(7,"p",55),v(8,it,5,0,"span",56)(9,nt,2,0,"span",56),e()()),a&2){let r=A(6),o=b();l(4),m("ngIf",o.hasActiveFilters())("ngIfElse",r),l(4),m("ngIf",o.hasActiveFilters()),l(),m("ngIf",!o.hasActiveFilters()&&o.allPersonalBestsSignalEmpty())}}var W=class a{trackingService=g(U);exerciseService=g(Ie);unitsService=g(G);router=g(se);toastService=g(L);allPersonalBestsRaw=E({});allExercisesRaw=E([]);filtersVisible=E(!1);exerciseNameFilter=E("");exerciseCategoryFilter=E("");availableCategories=P(()=>[...Oe].sort());combinedPersonalBests=P(()=>{let i=this.allPersonalBestsRaw(),r=this.allExercisesRaw();if(Object.keys(i).length===0||r.length===0)return[];let o=new Map(r.map(d=>[d.id,d])),s=[];for(let d in i)if(i.hasOwnProperty(d)){let u=o.get(d),p=i[d];u&&p.forEach(S=>{s.push(z(Z({},S),{exerciseName:u.name,exerciseCategory:u.category,primaryMuscleGroup:u.primaryMuscleGroup}))})}return s});displayPersonalBests=P(()=>{let i=this.combinedPersonalBests(),r=this.exerciseNameFilter().toLowerCase().trim(),o=this.exerciseCategoryFilter();if(!r&&!o)return this.sortPBs(i);let s=i.filter(d=>{let u=r?d.exerciseName.toLowerCase().includes(r):!0,p=o?d.exerciseCategory===o:!0;return u&&p});return this.sortPBs(s)});hasActiveFilters=P(()=>this.exerciseNameFilter().trim()!==""||this.exerciseCategoryFilter()!=="");allPersonalBestsSignalEmpty=P(()=>Object.keys(this.allPersonalBestsRaw()).length===0);constructor(){}platformId=g(I);ngOnInit(){V(this.platformId)&&window.scrollTo(0,0),ee([this.trackingService.personalBests$.pipe(H(1)),this.exerciseService.getExercises().pipe(H(1))]).subscribe(([i,r])=>{this.allPersonalBestsRaw.set(i),this.allExercisesRaw.set(r)})}toggleFiltersVisibility(){this.filtersVisible.update(i=>!i)}resetFilters(){this.exerciseNameFilter.set(""),this.exerciseCategoryFilter.set("")}resetFiltersAndShow(){this.resetFilters(),this.filtersVisible.set(!0)}getPbTypeSortOrder(i){return i.includes("1RM (Actual)")?0:i.includes("1RM (Estimated)")?1:i.includes("3RM (Actual)")?2:i.includes("5RM (Actual)")?3:i.includes("Heaviest Lifted")?4:i.includes("Max Reps (Bodyweight)")?5:i.includes("Max Duration")?6:100}sortPBs(i){return[...i].sort((r,o)=>{let s=r.exerciseName.localeCompare(o.exerciseName);if(s!==0)return s;let d=this.getPbTypeSortOrder(r.pbType),u=this.getPbTypeSortOrder(o.pbType);return d!==u?d-u:r.weightUsed!==void 0&&o.weightUsed!==void 0?(o.weightUsed??0)-(r.weightUsed??0):r.repsAchieved!==void 0&&o.repsAchieved!==void 0&&r.pbType.includes("Max Reps")?(o.repsAchieved??0)-(r.repsAchieved??0):r.durationPerformed!==void 0&&o.durationPerformed!==void 0&&r.pbType.includes("Max Duration")?(o.durationPerformed??0)-(r.durationPerformed??0):r.pbType.localeCompare(o.pbType)})}formatPbValue(i){let r="";return i.weightUsed!==void 0&&i.weightUsed!==null?(r+=`${i.weightUsed}${this.unitsService.getUnitSuffix()}`,i.repsAchieved>0&&!(i.pbType.includes("RM (Actual)")&&i.repsAchieved===parseInt(i.pbType,10))&&(r+=` x ${i.repsAchieved}`)):i.repsAchieved>0&&i.pbType.includes("Max Reps")?r=`${i.repsAchieved} reps`:i.durationPerformed&&i.durationPerformed>0&&i.pbType.includes("Max Duration")&&(r=`${i.durationPerformed}s`),r||"N/A"}navigateToLogDetail(i,r){r?.stopPropagation(),i?this.router.navigate(["/workout/summary",i]):(this.toastService.error("Could not find the associated workout log for this personal best. It's possible that the related workout session has been removed.",0,"Navigation Error"),console.warn("Attempted to navigate to log detail, but workoutLogId is undefined for PB:",r))}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=D({type:a,selectors:[["app-personal-bests"]],decls:19,vars:8,consts:[["noPBsOrFilters",""],["nameFilterInput",""],["categoryFilterInput",""],["noPBsMessage",""],[1,"container","mx-auto","p-1","sm:p-4"],[1,"mb-6","flex","items-center"],["routerLink","/profile",1,"text-gray-600","dark:text-gray-300","hover:text-primary","dark:hover:text-primary-light","p-2","-ml-2","rounded-full","focus:outline-none","focus:ring-2","focus:ring-primary-focus"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-200","ml-2"],[1,"mb-8","bg-white","dark:bg-gray-700","rounded-lg","shadow-md"],["aria-controls","filters-content",1,"w-full","flex","justify-between","items-center","p-4","text-left","focus:outline-none","focus-visible:ring-2","focus-visible:ring-primary","focus-visible:ring-opacity-75","rounded-t-lg",3,"click"],[1,"text-lg","font-semibold","text-gray-700","dark:text-gray-300"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5","inline-block","mr-2","align-text-bottom"],["stroke-linecap","round","stroke-linejoin","round","d","M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.572a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round","class","text-gray-500 dark:text-gray-400 transform transition-transform duration-200",4,"ngIf"],["id","filters-content","class","p-4 border-t border-gray-200 dark:border-gray-700",4,"ngIf"],[4,"ngIf","ngIfElse"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round",1,"text-gray-500","dark:text-gray-400","transform","transition-transform","duration-200"],["points","18 15 12 9 6 15"],["points","6 9 12 15 18 9"],["id","filters-content",1,"p-4","border-t","border-gray-200","dark:border-gray-700"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],["for","exerciseNameFilter",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","exerciseNameFilter","placeholder","e.g., Bench Press",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm","text-gray-900","dark:text-gray-100","placeholder-gray-400","dark:placeholder-gray-500",3,"input","value"],["for","categoryFilter",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","categoryFilter",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm","text-gray-900","dark:text-gray-100",3,"change","value"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-end"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","hover:bg-gray-200","dark:hover:bg-gray-700","rounded-md","shadow-sm","border","border-gray-300","dark:border-gray-500","transition-colors",3,"click"],[3,"value"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6"],["class","bg-white dark:bg-gray-700 rounded-xl shadow-lg overflow-hidden flex flex-col transition-all hover:shadow-xl",4,"ngFor","ngForOf"],[1,"bg-white","dark:bg-gray-700","rounded-xl","shadow-lg","overflow-hidden","flex","flex-col","transition-all","hover:shadow-xl"],[1,"p-5","flex-grow"],[1,"text-xl","font-semibold","text-primary","dark:text-primary-light","mb-1","truncate",3,"title"],[1,"text-xs","text-gray-500","dark:text-gray-400","mb-3"],[1,"mb-4"],[1,"text-sm","font-medium","text-gray-600","dark:text-gray-300"],[1,"text-md","text-gray-800","dark:text-gray-100"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-700","dark:text-gray-200"],["class","mb-4",4,"ngIf"],["class","px-5 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",4,"ngIf"],[1,"text-sm","text-gray-700","dark:text-gray-200","italic","max-h-24","overflow-y-auto","custom-scrollbar","pr-1",3,"title"],[1,"px-5","py-4","bg-gray-50","dark:bg-gray-700","border-t","border-gray-200","dark:border-gray-600"],["title","View Workout Log",1,"w-full","flex","items-center","justify-center","px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","dark:bg-indigo-500","dark:hover:bg-indigo-600","dark:focus:ring-offset-gray-800","transition-colors","duration-150",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-5","h-5","mr-2"],["d","M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"],["fill-rule","evenodd","d","M.664 10.59a1.651 1.651 0 0 1 0-1.186A10.004 10.004 0 0 1 10 3c4.257 0 7.893 2.66 9.336 6.41.147.381.146.804 0 1.186A10.004 10.004 0 0 1 10 17c-4.257 0-7.893-2.66-9.336-6.41ZM14 10a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z","clip-rule","evenodd"],[1,"text-center","py-10","bg-white","dark:bg-gray-700","rounded-xl","shadow-lg"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-16","h-16","mx-auto","text-gray-400","dark:text-gray-500","mb-4"],["stroke-linecap","round","stroke-linejoin","round","d","M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM13.5 10.5h-6"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-300","mb-2"],[1,"text-gray-500","dark:text-gray-400","px-4"],[4,"ngIf"],[1,"text-primary","dark:text-primary-light","hover:underline",3,"click"]],template:function(r,o){if(r&1){let s=T();t(0,"div",4)(1,"div",5)(2,"button",6),y(),t(3,"svg",7),c(4,"path",8),e()(),F(),t(5,"h1",9),n(6,"Personal Bests"),e()(),t(7,"div",10)(8,"button",11),x("click",function(){return k(s),_(o.toggleFiltersVisibility())}),t(9,"h2",12),y(),t(10,"svg",13),c(11,"path",14),e(),n(12," Filters "),e(),v(13,Ke,2,0,"svg",15)(14,Je,2,0,"svg",15),e(),v(15,Xe,18,3,"div",16),e(),v(16,et,3,1,"div",17)(17,ot,10,4,"ng-template",null,0,q),e()}if(r&2){let s=A(18);l(8),re("rounded-b-lg",!o.filtersVisible()),te("aria-expanded",o.filtersVisible()),l(5),m("ngIf",o.filtersVisible()),l(),m("ngIf",!o.filtersVisible()),l(),m("ngIf",o.filtersVisible()),l(),m("ngIf",o.displayPersonalBests().length>0)("ngIfElse",s)}},dependencies:[O,N,M,oe,le,R],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#9ca3af;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}.dark[_ngcontent-%COMP%]   .custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4b5563}.dark[_ngcontent-%COMP%]   .custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}"]})};var ir=[{path:"",component:j,title:"Profile & Settings"},{path:"personal-bests",component:W,title:"Personal Bests"}];export{ir as PROFILE_SETTINGS_ROUTES};
