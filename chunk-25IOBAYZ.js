import{Y as z}from"./chunk-TOYFSRB3.js";import{L as O,xa as S}from"./chunk-4G4FKAW4.js";import{g as v}from"./chunk-GAL4ENT6.js";var N=class l{transform(e,t="dd/MM/yy HH:mm"){if(e==null||!isFinite(e))return"";try{let i=new Date(e);return z(i,t)}catch(i){return console.error(`Error formatting date from milliseconds value: ${e}`,i),"Invalid Date"}}static \u0275fac=function(t){return new(t||l)};static \u0275pipe=S({name:"millisecondsDate",type:l,pure:!0})};var D=class l{_lastTickTime=0;audioCtx=null;_userInteracted=!1;constructor(){window.addEventListener("pointerdown",this._unlockAudioContext,{once:!0}),window.addEventListener("keydown",this._unlockAudioContext,{once:!0})}_unlockAudioContext=()=>{this.initializeAudioContext(),this.audioCtx&&this.audioCtx.state==="suspended"&&this.audioCtx.resume(),this._userInteracted=!0};playSound(e){return v(this,null,function*(){if(this.initializeAudioContext(),!this.audioCtx)return;if(this._userInteracted||(this._userInteracted=!0),this.audioCtx.state==="suspended")try{yield this.audioCtx.resume()}catch{return}let t=this.audioCtx.currentTime,i=this.audioCtx.createOscillator(),a=this.audioCtx.createGain(),n=this.audioCtx.createGain(),r=this.audioCtx.createGain(),o=this.audioCtx.createOscillator(),s=this.audioCtx.createOscillator(),h=this.audioCtx.createOscillator(),B=this.audioCtx.createOscillator();switch(e){case"countdown":this.playCountdownSound();break;case"end":this.playEndSound();break;case"error":this.playErrorSound();break;case"correct":this.playCorrectSound();break;case"untoggle":a.gain.setValueAtTime(.3,t),a.gain.exponentialRampToValueAtTime(1e-4,t+1),i.type="triangle",i.frequency.setValueAtTime(120,t),i.connect(a),a.connect(this.audioCtx.destination),i.start(t),i.stop(t+.1);break;case"whoosh":let x=.3;a.gain.setValueAtTime(1,t),a.gain.exponentialRampToValueAtTime(1e-4,t+x);let d=this.audioCtx.createBiquadFilter();d.type="bandpass",d.Q.value=15,d.frequency.setValueAtTime(4e3,t),d.frequency.exponentialRampToValueAtTime(100,t+x);let q=this.audioCtx.sampleRate*x,b=this.audioCtx.createBuffer(1,q,this.audioCtx.sampleRate),I=b.getChannelData(0);for(let f=0;f<q;f++)I[f]=Math.random()*2-1;let g=this.audioCtx.createBufferSource();g.buffer=b,g.connect(d),d.connect(a),a.connect(this.audioCtx.destination),g.start(t),g.stop(t+x);break;case"tada":n.gain.setValueAtTime(.6,t),n.gain.exponentialRampToValueAtTime(1e-4,t+1.2),n.connect(this.audioCtx.destination),o.type="triangle",o.frequency.setValueAtTime(523.25,t),o.connect(n),o.start(t),o.stop(t+.15),s.type="triangle",s.frequency.setValueAtTime(783.99,t+.15),s.connect(n),s.start(t+.15),s.stop(t+.3),h.type="triangle",h.frequency.setValueAtTime(1046.5,t+.3),h.connect(n),h.start(t+.3),h.stop(t+5);break;case"tatatada":n.gain.setValueAtTime(.6,t),n.gain.exponentialRampToValueAtTime(1e-4,t+3.5),n.connect(this.audioCtx.destination);let E=261.63,P=392,F=523.25,M=783.99,m=.15,w=.1,c=t,R=(f,G,p)=>{if(!this.audioCtx)return;let y=this.audioCtx.createOscillator(),A=this.audioCtx.createGain();y.type="triangle",y.frequency.setValueAtTime(f,p),A.gain.setValueAtTime(0,p),A.gain.linearRampToValueAtTime(1,p+.01),A.gain.exponentialRampToValueAtTime(1e-4,p+G),y.connect(A),A.connect(n),y.start(p),y.stop(p+G)};R(E,m,c),c+=m+w,R(P,m,c),c+=m+w,R(F,m,c),c+=m+w;let k=2,T=this.audioCtx.createOscillator(),C=this.audioCtx.createGain();T.type="triangle",T.frequency.setValueAtTime(M,c),C.gain.setValueAtTime(0,c),C.gain.linearRampToValueAtTime(1,c+.05),C.gain.exponentialRampToValueAtTime(1e-4,c+k+.5),T.connect(C),C.connect(n),T.start(c),T.stop(c+k+.5);break;case"magic":{this.playMagicRestoreSound();break}case"pop":{this.playPopSound();break}case"referee":let V=.4,u=this.audioCtx.createGain();u.gain.setValueAtTime(0,t),u.gain.linearRampToValueAtTime(.8,t+.05),u.gain.setValueAtTime(.8,t+V-.05),u.gain.linearRampToValueAtTime(1e-4,t+V),u.connect(this.audioCtx.destination),o.type="triangle",o.frequency.setValueAtTime(3e3,t),o.connect(u),s.type="triangle",s.frequency.setValueAtTime(3080,t),s.connect(u),o.start(t),o.stop(t+V),s.start(t),s.stop(t+V);break;case"tick":{this.playTickSound();break}}})}initializeAudioContext(){if(!this.audioCtx)try{this.audioCtx=new(window.AudioContext||window.webkitAudioContext)}catch{console.error("Web Audio API is not supported in this browser")}}playMagicRestoreSound(){if(this.initializeAudioContext(),!this.audioCtx)return;let e=this.audioCtx.currentTime,t=[622.25,783.99,932.33],i=this.audioCtx.createGain();i.gain.setValueAtTime(.3,e),i.connect(this.audioCtx.destination),t.forEach((a,n)=>{if(!this.audioCtx)return;let r=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();r.type="sine",r.frequency.setValueAtTime(a,e),r.connect(o),o.connect(i);let s=e+n*.08;o.gain.setValueAtTime(0,s),o.gain.linearRampToValueAtTime(.4,s+.05),o.gain.exponentialRampToValueAtTime(1e-4,s+1.5),r.start(s),r.stop(s+1.5)})}playPopSound(){if(this.initializeAudioContext(),!this.audioCtx)return;let e=this.audioCtx.currentTime,t=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();t.type="sine";let a=880,n=150,r=.1;t.frequency.setValueAtTime(a,e),t.frequency.exponentialRampToValueAtTime(n,e+r),i.gain.setValueAtTime(.8,e),i.gain.exponentialRampToValueAtTime(1e-4,e+.2),t.connect(i),i.connect(this.audioCtx.destination),t.start(e),t.stop(e+.25)}playTickSound(){if(this.initializeAudioContext(),!this.audioCtx)return;let e=this.audioCtx.currentTime,t=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();t.type="square";let a=.018;t.frequency.setValueAtTime(3500,e),t.frequency.exponentialRampToValueAtTime(800,e+a),i.gain.setValueAtTime(0,e),i.gain.linearRampToValueAtTime(1,e+.001),i.gain.exponentialRampToValueAtTime(1e-4,e+a),t.connect(i),i.connect(this.audioCtx.destination),t.start(e),t.stop(e+a)}playCountdownSound(){if(this.initializeAudioContext(),!this.audioCtx)return;let e=this.audioCtx.currentTime,t=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();t.type="sine",t.frequency.setValueAtTime(880,e),i.gain.setValueAtTime(0,e),i.gain.linearRampToValueAtTime(1,e+.001),i.gain.exponentialRampToValueAtTime(1e-4,e+.15),t.connect(i),i.connect(this.audioCtx.destination),t.start(e),t.stop(e+.15)}playEndSound(){if(this.initializeAudioContext(),!this.audioCtx)return;let e=this.audioCtx.currentTime,t=this.audioCtx.createGain();t.gain.setValueAtTime(.8,e),t.gain.exponentialRampToValueAtTime(1e-4,e+2);let i=this.audioCtx.createOscillator(),a=this.audioCtx.createOscillator(),n=this.audioCtx.createOscillator();i.type="sine",i.frequency.setValueAtTime(110,e),a.type="sine",a.frequency.setValueAtTime(220,e),n.type="sine",n.frequency.setValueAtTime(330,e),i.connect(t),a.connect(t),n.connect(t),t.connect(this.audioCtx.destination),i.start(e),i.stop(e+2),a.start(e),a.stop(e+2),n.start(e),n.stop(e+2)}playErrorSound(){if(this.initializeAudioContext(),!this.audioCtx)return;let e=this.audioCtx.currentTime,t=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();t.type="sawtooth",t.frequency.setValueAtTime(600,e),t.frequency.linearRampToValueAtTime(300,e+.25),i.gain.setValueAtTime(.4,e),i.gain.exponentialRampToValueAtTime(1e-4,e+.25),t.connect(i),i.connect(this.audioCtx.destination),t.start(e),t.stop(e+.25)}playCorrectSound(){if(this.initializeAudioContext(),!this.audioCtx)return;let e=this.audioCtx.currentTime,t=this.audioCtx.createOscillator(),i=this.audioCtx.createOscillator(),a=this.audioCtx.createGain(),n=this.audioCtx.createGain();a.gain.setValueAtTime(.5,e),a.gain.exponentialRampToValueAtTime(1e-4,e+.7),t.type="sine",t.frequency.setValueAtTime(784,e),i.type="sine",i.frequency.setValueAtTime(1568,e),n.gain.setValueAtTime(.5,e),t.connect(a),i.connect(n),n.connect(a),a.connect(this.audioCtx.destination),t.start(e),t.stop(e+.7),i.start(e),i.stop(e+.7)}static \u0275fac=function(t){return new(t||l)};static \u0275prov=O({token:l,factory:l.\u0275fac,providedIn:"root"})};export{N as a,D as b};
