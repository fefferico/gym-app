import{a as lt,c as Ft}from"./chunk-Q4NT2BSF.js";import{a as Le}from"./chunk-BVQFHPRY.js";import{a as Tt}from"./chunk-BXMXKDGW.js";import{b as Et,c as Pt,d as Ct}from"./chunk-LKJXIS4Z.js";import{e as It,f as Mt}from"./chunk-V6ZKBJ6W.js";import{a as Bt}from"./chunk-HRNVR3G3.js";import{a as kt}from"./chunk-7TULIPZG.js";import{a as Re}from"./chunk-5MEM5HSM.js";import{a as yt,b as Ne,g as re,h as Ve,j as ne,k as wt}from"./chunk-HB4E4SX6.js";import{a as L}from"./chunk-MUTD54QT.js";import{a as bt,n as xt,o as ie,p as St,q as _t}from"./chunk-M2SNQENU.js";import{$a as et,$c as Ae,Bc as dt,C as H,Cc as ke,D as Qe,Dc as S,Ec as Ee,Fb as it,Fc as Pe,Hc as pt,Jb as be,Jc as Ce,Ka as d,Kb as Q,Kc as Be,L as ve,La as a,Lb as Z,Ma as r,N as fe,Na as v,Nc as ct,Oa as Ye,Ob as rt,Oc as Ie,Pa as ze,Pc as mt,R as x,Ra as M,Rb as nt,Rc as Me,Sa as f,Sb as at,Sc as ut,Ta as b,Tb as xe,Tc as Te,Ub as st,Uc as Fe,Vc as gt,W as k,Wb as ee,Wc as vt,X as E,Xb as pe,Xc as ft,Y as q,Z as K,Zc as De,_a as U,a as Xe,ab as N,ad as Oe,ba as O,c as Je,cb as s,cd as te,db as h,dd as V,eb as y,ed as Ue,fb as j,fd as ht,ga as he,gb as ye,ja as G,jc as Se,ka as Ze,kb as $,kc as ot,m as z,ma as n,ob as T,pb as I,pc as qe,qb as tt,qc as _e,sb as p,tb as m,tc as ce,ua as X,ub as B,uc as me,vb as J,vc as we,wb as de,y as ge,za as _,zb as Y}from"./chunk-BZUOG3X2.js";import{a as R,b as W,g as P}from"./chunk-GAL4ENT6.js";var ae=class l{STORE_NAME="progress_photos";dbService=x(lt);saveImage(i,e){return P(this,null,function*(){return z(this.dbService.update(this.STORE_NAME,{date:i,image:e}))})}getImage(i){return P(this,null,function*(){if(!i)return Promise.resolve(void 0);let e=yield z(this.dbService.getByKey(this.STORE_NAME,i));return e?e.image:void 0})}deleteImage(i){return P(this,null,function*(){return i?z(this.dbService.delete(this.STORE_NAME,i)):Promise.resolve()})}getAllImagesForBackup(){return P(this,null,function*(){let i=yield z(this.dbService.getAll(this.STORE_NAME)),e=[];for(let t of i)if(t.image instanceof Blob){let o=yield this.blobToBase64(t.image);e.push({date:t.date,type:t.image.type,data:o})}return e})}importImages(i){return P(this,null,function*(){if(!i||i.length===0)return Promise.resolve();let e=i.map(t=>{let o=this.base64ToBlob(t.data,t.type);return{date:t.date,image:o}});return z(this.dbService.bulkPut(this.STORE_NAME,e))})}blobToBase64(i){return new Promise((e,t)=>{let o=new FileReader;o.onloadend=()=>e(o.result),o.onerror=t,o.readAsDataURL(i)})}base64ToBlob(i,e=""){let t=atob(i.split(",")[1]),o=[];for(let c=0;c<t.length;c+=512){let g=t.slice(c,c+512),u=new Array(g.length);for(let C=0;C<g.length;C++)u[C]=g.charCodeAt(C);let w=new Uint8Array(u);o.push(w)}return new Blob(o,{type:e})}static \u0275fac=function(e){return new(e||l)};static \u0275prov=fe({token:l,factory:l.\u0275fac,providedIn:"root"})};var He=class l{unitsService=x(L);trackingService=x(ne);workoutService=x(re);userProfileService=x(ie);personalGymService=x(Le);progressiveOverloadService=x(Ne);spinnerService=x(Re);toastService=x(V);constructor(){}convertAllWeightData(i,e){return P(this,null,function*(){this.spinnerService.show("Converting weight data...");let t=this.trackingService.getDataForBackup();t.forEach(u=>{u.exercises.forEach(w=>{w.sets.forEach(C=>{C.weightUsed!=null&&(C.weightUsed=this.unitsService.convertWeight(C.weightUsed,i,e)),C.targetWeight!=null&&(C.targetWeight=this.unitsService.convertWeight(C.targetWeight,i,e))})})}),yield this.trackingService.replaceLogs(t);let o=this.workoutService.getDataForBackup();o.forEach(u=>{u.exercises.forEach(w=>{w.sets.forEach(C=>{C.targetWeight!=null&&(C.targetWeight=this.unitsService.convertWeight(C.targetWeight,i,e))})})}),this.workoutService.mergeData(o);let c=this.personalGymService.getDataForBackup();c.forEach(u=>{switch(u.category){case"Dumbbell":case"Kettlebell":case"Macebell":case"Club":u.weightType==="fixed"&&u.weight!=null?u.weight=this.unitsService.convertWeight(u.weight,i,e):u.weightType==="adjustable"&&(u.minweight!=null&&(u.minweight=this.unitsService.convertWeight(u.minweight,i,e)),u.maxweight!=null&&(u.maxweight=this.unitsService.convertWeight(u.maxweight,i,e)),u.increment!=null&&(u.increment=this.unitsService.convertWeight(u.increment,i,e)));break;case"Plate":case"Barbell":u.weight!=null&&(u.weight=this.unitsService.convertWeight(u.weight,i,e));break;case"Bag":u.maxweight!=null&&(u.maxweight=this.unitsService.convertWeight(u.maxweight,i,e)),u.currentWeightKg!=null&&(u.currentWeightKg=this.unitsService.convertWeight(u.currentWeightKg,i,e));break;case"Band":u.resistance!=null&&(u.resistance=this.unitsService.convertWeight(u.resistance,i,e));break;case"Machine":u.maxLoad!=null&&(u.maxLoad=this.unitsService.convertWeight(u.maxLoad,i,e));break}}),this.personalGymService.mergeData(c);let g=this.progressiveOverloadService.getDataForBackup();g.weightIncrement!=null&&(g.weightIncrement=this.unitsService.convertWeight(g.weightIncrement,i,e),this.progressiveOverloadService.replaceData(g)),this.spinnerService.hide(),this.toastService.success("All weight data converted successfully!",3e3,"Conversion Complete")})}convertAllBodyWeightData(i,e){return P(this,null,function*(){this.spinnerService.show("Converting body weight data...");let t=this.userProfileService.getDataForBackup();t&&(t.measurementHistory&&t.measurementHistory.forEach(o=>{o.weight!=null&&(o.weight=this.unitsService.convertWeight(o.weight,i,e))}),t.measurementGoals?.weight!=null&&(t.measurementGoals.weight=this.unitsService.convertWeight(t.measurementGoals.weight,i,e)),this.userProfileService.replaceData(t)),this.spinnerService.hide(),this.toastService.success("All body weight data converted successfully!",3e3,"Conversion Complete")})}convertAllBodyMeasureData(i,e){return P(this,null,function*(){this.spinnerService.show("Converting body measurement data...");let t=this.userProfileService.getDataForBackup();if(t){let o=["height","chest","neck","waist","hips","rightArm"];t.measurementHistory&&t.measurementHistory.forEach(c=>{o.forEach(g=>{c[g]!=null&&(c[g]=this.unitsService.convertMeasure(c[g],i,e))})}),t.measurementGoals&&o.forEach(c=>{let g=c;t.measurementGoals[g]!=null&&(t.measurementGoals[g]=this.unitsService.convertMeasure(t.measurementGoals[g],i,e))}),this.userProfileService.replaceData(t)}this.spinnerService.hide(),this.toastService.success("All body measurement data converted successfully!",3e3,"Conversion Complete")})}convertAllMeasureData(i,e){return P(this,null,function*(){this.spinnerService.show("Converting measurement data...");let t=this.personalGymService.getDataForBackup();t.forEach(o=>{o.category==="Band"&&o.length!=null&&(o.length=this.unitsService.convertMeasure(o.length,i,e))}),this.personalGymService.mergeData(t),this.spinnerService.hide(),this.toastService.success("All measurement data converted successfully!",3e3,"Conversion Complete")})}convertAllDistanceMeasureData(i,e){return P(this,null,function*(){this.spinnerService.show("Converting distance data...");let t=this.trackingService.getDataForBackup();t.forEach(g=>{g.exercises.forEach(u=>{u.sets.forEach(w=>{w.distanceAchieved!=null&&(w.distanceAchieved=this.unitsService.convertDistance(w.distanceAchieved,i,e)),w.targetDistance!=null&&(w.targetDistance=this.unitsService.convertDistance(w.targetDistance,i,e))})})}),yield this.trackingService.replaceLogs(t);let o=this.workoutService.getDataForBackup();o.forEach(g=>{g.exercises.forEach(u=>{u.sets.forEach(w=>{w.targetDistance!=null&&(w.targetDistance=this.unitsService.convertDistance(w.targetDistance,i,e))})})}),this.workoutService.mergeData(o);let c=this.progressiveOverloadService.getDataForBackup();c.distanceIncrement!=null&&(c.distanceIncrement=this.unitsService.convertDistance(c.distanceIncrement,i,e),this.progressiveOverloadService.replaceData(c)),this.spinnerService.hide(),this.toastService.success("All distance data converted successfully!",3e3,"Conversion Complete")})}static \u0275fac=function(e){return new(e||l)};static \u0275prov=fe({token:l,factory:l.\u0275fac,providedIn:"root"})};var D=l=>({unit:l}),ue=(l,i)=>({"left-1 right-1/2":l,"left-1/2 right-1":i}),F=(l,i)=>({"text-white":l,"text-gray-700 dark:text-gray-300":i}),Vt=(l,i,e)=>({"translate-x-1":l,"translate-x-full":i,"translate-x-[195%]":e});function Lt(l,i){if(l&1&&(a(0,"option",119),s(1),p(2,"translate"),r()),l&2){let e=i.$implicit;d("value",e.value),n(),y("",m(2,2,e.label)," ")}}function Rt(l,i){l&1&&(a(0,"span",120),v(1,"app-icon",121),s(2),p(3,"translate"),r()),l&2&&(n(2),y(" ",m(3,1,"common.premium")," "))}function Wt(l,i){l&1&&(a(0,"div",122),s(1),p(2,"translate"),r()),l&2&&(n(),y(" ",m(2,1,"settings.player.weightIncrementError")," "))}function Ht(l,i){l&1&&(a(0,"div",122),s(1),p(2,"translate"),r()),l&2&&(n(),y(" ",m(2,1,"settings.player.countdownSoundError")," "))}function Gt(l,i){if(l&1){let e=M();a(0,"div",16)(1,"label",123),s(2),p(3,"translate"),r(),a(4,"input",124),f("change",function(){k(e);let o=b();return E(o.currentVibrator.vibrate(50))}),r(),_(5,Ht,3,3,"div",65),r()}if(l&2){let e,t=b();n(2),h(m(3,2,"settings.player.countdownSoundSecondsLabel")),n(3),d("ngIf",((e=t.appSettingsForm.get("countdownSoundSeconds"))==null?null:e.invalid)&&((e=t.appSettingsForm.get("countdownSoundSeconds"))==null?null:e.touched))}}function jt(l,i){l&1&&(a(0,"span",120),v(1,"app-icon",121),s(2),p(3,"translate"),r()),l&2&&(n(2),y(" ",m(3,1,"common.premium")," "))}function $t(l,i){if(l&1){let e=M();a(0,"div",134)(1,"input",135),f("change",function(o){k(e);let c=b(2);return E(c.onStrategyChange(o))}),r(),a(2,"label",136),s(3),p(4,"translate"),r()()}if(l&2){let e=i.$implicit,t=b(2);n(),d("id","strategy-"+e.value)("value",e.value)("checked",t.isStrategySelected(e.value)),n(),d("for","strategy-"+e.value),n(),y(" ",m(4,5,e.label)," ")}}function Yt(l,i){l&1&&(a(0,"div",122),s(1),p(2,"translate"),r()),l&2&&(n(),y(" ",m(2,1,"settings.progressiveOverload.strategyError")," "))}function zt(l,i){l&1&&(a(0,"div",122),s(1),p(2,"translate"),r()),l&2&&(n(),y(" ",m(2,1,"settings.progressiveOverload.weightIncrementError")," "))}function qt(l,i){if(l&1&&(a(0,"div")(1,"label",137),s(2),p(3,"uppercase"),p(4,"translate"),r(),v(5,"input",138),p(6,"translate"),_(7,zt,3,3,"div",65),r()),l&2){let e,t=b(2);n(2),y(" ",B(4,5,"settings.progressiveOverload.weightIncrementLabel",T(10,D,m(3,3,t.unitsService.currentWeightUnit())))," "),n(3),d("placeholder",m(6,8,"settings.progressiveOverload.weightIncrementPlaceholder")),n(2),d("ngIf",((e=t.progressiveOverloadForm.get("weightIncrement"))==null?null:e.invalid)&&((e=t.progressiveOverloadForm.get("weightIncrement"))==null?null:e.touched))}}function Kt(l,i){l&1&&(a(0,"div",122),s(1),p(2,"translate"),r()),l&2&&(n(),y(" ",m(2,1,"settings.progressiveOverload.repsIncrementError")," "))}function Xt(l,i){if(l&1&&(a(0,"div")(1,"label",139),s(2),p(3,"translate"),r(),v(4,"input",140),p(5,"translate"),_(6,Kt,3,3,"div",65),r()),l&2){let e,t=b(2);n(2),y(" ",m(3,3,"settings.progressiveOverload.repsIncrementLabel")," "),n(2),d("placeholder",m(5,5,"settings.progressiveOverload.repsIncrementPlaceholder")),n(2),d("ngIf",((e=t.progressiveOverloadForm.get("repsIncrement"))==null?null:e.invalid)&&((e=t.progressiveOverloadForm.get("repsIncrement"))==null?null:e.touched))}}function Jt(l,i){l&1&&(a(0,"div",122),s(1),p(2,"translate"),r()),l&2&&(n(),y(" ",m(2,1,"settings.progressiveOverload.distanceIncrementError")," "))}function Qt(l,i){if(l&1&&(a(0,"div")(1,"label",141),s(2),p(3,"uppercase"),p(4,"translate"),r(),v(5,"input",142),p(6,"translate"),_(7,Jt,3,3,"div",65),r()),l&2){let e,t=b(2);n(2),y(" ",B(4,5,"settings.progressiveOverload.distanceIncrementLabel",T(10,D,m(3,3,t.unitsService.currentDistanceMeasureUnit())))," "),n(3),d("placeholder",m(6,8,"settings.progressiveOverload.distanceIncrementPlaceholder")),n(2),d("ngIf",((e=t.progressiveOverloadForm.get("distanceIncrement"))==null?null:e.invalid)&&((e=t.progressiveOverloadForm.get("distanceIncrement"))==null?null:e.touched))}}function Zt(l,i){l&1&&(a(0,"div",122),s(1),p(2,"translate"),r()),l&2&&(n(),y(" ",m(2,1,"settings.progressiveOverload.durationIncrementError")," "))}function ei(l,i){if(l&1&&(a(0,"div")(1,"label",143),s(2),p(3,"translate"),r(),v(4,"input",144),p(5,"translate"),_(6,Zt,3,3,"div",65),r()),l&2){let e,t=b(2);n(2),y(" ",m(3,3,"settings.progressiveOverload.durationIncrementLabel")," "),n(2),d("placeholder",m(5,5,"settings.progressiveOverload.durationIncrementPlaceholder")),n(2),d("ngIf",((e=t.progressiveOverloadForm.get("durationIncrement"))==null?null:e.invalid)&&((e=t.progressiveOverloadForm.get("durationIncrement"))==null?null:e.touched))}}function ti(l,i){l&1&&(a(0,"div",122),s(1),p(2,"translate"),r()),l&2&&(n(),y(" ",m(2,1,"settings.progressiveOverload.sessionsToIncrementError")," "))}function ii(l,i){if(l&1&&(a(0,"div",125)(1,"div")(2,"label",126),s(3),p(4,"translate"),r(),a(5,"p",127),s(6),p(7,"translate"),r(),a(8,"div",128),_(9,$t,5,7,"div",129),r(),_(10,Yt,3,3,"div",65),r(),a(11,"div",130),_(12,qt,8,12,"div",131)(13,Xt,7,7,"div",131)(14,Qt,8,12,"div",131)(15,ei,7,7,"div",131),r(),a(16,"div")(17,"label",132),s(18),p(19,"translate"),r(),a(20,"p",63),s(21),p(22,"translate"),r(),v(23,"input",133),_(24,ti,3,3,"div",65),r()()),l&2){let e,t,o=b();n(3),h(m(4,11,"settings.progressiveOverload.strategyLabel")),n(3),h(m(7,13,"settings.progressiveOverload.strategyDescription")),n(3),d("ngForOf",o.progressiveOverloadStrategies),n(),d("ngIf",((e=o.progressiveOverloadForm.get("enabled"))==null?null:e.value)&&o.strategiesFormArray.length===0&&o.progressiveOverloadForm.dirty),n(2),d("ngIf",o.isStrategySelected(o.ProgressiveOverloadStrategy.WEIGHT)),n(),d("ngIf",o.isStrategySelected(o.ProgressiveOverloadStrategy.REPS)),n(),d("ngIf",o.isStrategySelected(o.ProgressiveOverloadStrategy.DISTANCE)),n(),d("ngIf",o.isStrategySelected(o.ProgressiveOverloadStrategy.DURATION)),n(3),h(m(19,15,"settings.progressiveOverload.sessionsToIncrementLabel")),n(3),h(m(22,17,"settings.progressiveOverload.sessionsToIncrementDescription")),n(3),d("ngIf",((t=o.progressiveOverloadForm.get("sessionsToIncrement"))==null?null:t.invalid)&&((t=o.progressiveOverloadForm.get("sessionsToIncrement"))==null?null:t.touched))}}function ri(l,i){l&1&&(a(0,"span",145),v(1,"app-icon",121),s(2),p(3,"translate"),r()),l&2&&(n(2),y(" ",m(3,1,"common.premium")," "))}function ni(l,i){if(l&1&&(a(0,"option",119),s(1),p(2,"translate"),r()),l&2){let e=i.$implicit,t=b();d("value",e),n(),y(" ",m(2,2,t.languageDisplayNames[e])," ")}}function ai(l,i){l&1&&(a(0,"span",120),v(1,"app-icon",121),s(2),p(3,"translate"),r()),l&2&&(n(2),y(" ",m(3,1,"common.premium")," "))}var Ge=class l{fb=x(De);router=x(Se);workoutService=x(re);trackingService=x(ne);activityService=x(Tt);personalGymService=x(Le);trainingProgramService=x(wt);exerciseService=x(Ve);storageService=x(ht);unitsService=x(L);alertService=x(Ue);spinnerService=x(Re);themeService=x(Bt);userProfileService=x(ie);appSettingsService=x(bt);progressiveOverloadService=x(Ne);platformId=x(he);toastService=x(V);imageStorageService=x(ae);dataConversionService=x(He);subscriptionService=x(_t);languageService=x(Ft);cdr=x(it);translate=x(Et);languageDisplayNames={en:"settings.languageSelector.english",es:"settings.languageSelector.spanish",it:"settings.languageSelector.italian",de:"settings.languageSelector.german",fr:"settings.languageSelector.french"};subscriptions=new Xe;PremiumFeature=St;currentVibrator=navigator;syncHistoryTooltipString=this.translate.instant("settings.dataManagement.syncTooltip");goalsForm;profileForm;appSettingsForm;progressiveOverloadForm;handleUpgradeClick(){this.subscriptionService.togglePremium_DEV_ONLY();let i=this.subscriptionService.isPremium()?this.translate.instant("settings.subscription.premiumMember"):this.translate.instant("settings.subscription.freeTier");this.toastService.success(this.translate.instant("toasts.upgradeSuccess",{status:i}),3e3,this.translate.instant("toasts.statusUpdated")),this.subscriptionService.isPremium()&&(this.toastService.veryImportant(this.translate.instant("toasts.upgradeGratitude"),1e4,this.translate.instant("toasts.thankYou")),this.workoutService.enableAllRoutines_DEV_ONLY())}handlePremiumFeatureOrNavigate(i,e,t){this.workoutService.vibrate(),this.subscriptionService.canAccess(i)?t&&this.router.navigate(t):(e.preventDefault(),e.stopPropagation(),this.subscriptionService.showUpgradeModal())}genders=[{label:"settings.userProfile.genders.male",value:"male"},{label:"settings.userProfile.genders.female",value:"female"},{label:"settings.userProfile.genders.other",value:"other"},{label:"settings.userProfile.genders.preferNotToSay",value:"prefer_not_to_say"}];progressiveOverloadStrategies=[{label:"settings.progressiveOverload.strategies.increaseWeight",value:"weight"},{label:"settings.progressiveOverload.strategies.increaseReps",value:"reps"},{label:"settings.progressiveOverload.strategies.increaseDistance",value:"distance"},{label:"settings.progressiveOverload.strategies.increaseDuration",value:"duration"}];BACKUP_VERSION=6;constructor(){this.profileForm=this.fb.group({general:this.fb.group({username:[""],gender:[null],age:[null,[S.min(0),S.max(150),S.required]]}),measurements:this.fb.group({height:[null,[S.min(0),S.required]],weight:[null,[S.min(0),S.required]],chest:[null,[S.min(0)]],neck:[null,[S.min(0)]],waist:[null,[S.min(0)]],hips:[null,[S.min(0)]],rightArm:[null,[S.min(0)]]})}),this.goalsForm=this.fb.group({weight:[null,[S.min(0)]],waist:[null,[S.min(0)]]}),this.appSettingsForm=this.fb.group({enableTimerCountdownSound:[!0],playerMode:["compact"],countdownSoundSeconds:[5,[S.required,S.min(1),S.max(60)]],enablePresetTimer:[!1],presetTimerDurationSeconds:[10,[S.required,S.min(3),S.max(60)]],weightStep:[2.5,[S.required,S.min(.01),S.max(50)]]}),this.progressiveOverloadForm=this.fb.group({enabled:[!1],strategies:this.fb.array([]),weightIncrement:[null,[S.min(.1)]],repsIncrement:[null,[S.min(1),S.pattern("^[0-9]*$")]],distanceIncrement:[null,[S.min(.01)]],durationIncrement:[null,[S.min(1),S.pattern("^[0-9]*$")]],sessionsToIncrement:[1,[S.required,S.min(1)]]})}togglePlayerMode(i){this.workoutService.vibrate();let e=i.target,t=e.checked,o=t?"focus":"compact";this.workoutService.isPausedSession()?(this.alertService.showAlert(this.translate.instant("alerts.playerModeChangeDisabledTitle"),this.translate.instant("alerts.playerModeChangeDisabledMessage")),e.checked=!t,this.cdr.detectChanges()):(this.appSettingsForm.get("playerMode")?.setValue(o),this.appSettingsService.saveSettings({playerMode:o}))}selectWeightUnit(i){return P(this,null,function*(){let e=this.unitsService.currentWeightUnit();i!==e&&(yield this.dataConversionService.convertAllWeightData(e,i),this.unitsService.setWeightUnitPreference(i))})}selectMeasureUnit(i){return P(this,null,function*(){let e=this.unitsService.currentMeasureUnit();i!==e&&(yield this.dataConversionService.convertAllMeasureData(e,i),this.unitsService.setMeasureUnitPreference(i))})}selectDistanceMeasureUnit(i){return P(this,null,function*(){let e=this.unitsService.currentDistanceMeasureUnit();i!==e&&(yield this.dataConversionService.convertAllDistanceMeasureData(e,i),this.unitsService.setDistanceMeasureUnitPreference(i))})}selectBodyWeightUnit(i){return P(this,null,function*(){let e=this.unitsService.currentBodyWeightUnit();i!==e&&(yield this.dataConversionService.convertAllBodyWeightData(e,i),this.unitsService.setBodyWeightUnitPreference(i))})}selectBodyMeasureUnit(i){return P(this,null,function*(){let e=this.unitsService.currentBodyMeasureUnit();i!==e&&(yield this.dataConversionService.convertAllBodyMeasureData(e,i),this.unitsService.setBodyMeasureUnitPreference(i))})}ngOnInit(){pe(this.platformId)&&window.scrollTo(0,0),this.loadProfileData(),this.loadProgressiveOverloadSettings(),this.loadGoalsData(),this.languageControl=new pt(this.languageService.currentLang(),{nonNullable:!0}),this.subscriptions.add(this.languageControl.valueChanges.subscribe(i=>{if(i&&i!==this.languageService.currentLang()){this.workoutService.vibrate(),this.languageService.setLanguage(i);let e=this.translate.instant(this.languageDisplayNames[i]||i);this.toastService.success(this.translate.instant("toasts.languageSet",{language:e}),2e3)}})),this.subscriptions.add(this.appSettingsService.appSettings$.subscribe(i=>{i&&(this.appSettingsForm.reset(i,{emitEvent:!1}),this.cdr.detectChanges())})),this.subscriptions.add(this.appSettingsForm.valueChanges.pipe(H(700),ge(()=>this.appSettingsForm.valid&&this.appSettingsForm.dirty),ve(i=>{this.appSettingsService.saveSettings(i),this.appSettingsForm.markAsPristine({onlySelf:!1}),this.toastService.info(this.translate.instant("toasts.appSettingsSaved"),1500)})).subscribe()),this.listenForProgressiveOverloadChanges(),this.subscriptions.add(this.profileForm.get("general")?.valueChanges.pipe(H(700)).subscribe(()=>this.saveGeneralData())),this.subscriptions.add(this.goalsForm.valueChanges.pipe(H(700),ge(()=>this.goalsForm.valid&&this.goalsForm.dirty),ve(i=>{this.userProfileService.saveGoals(i),this.goalsForm.markAsPristine(),this.toastService.info(this.translate.instant("toasts.goalsSaved"),1500)})).subscribe())}ngOnDestroy(){this.subscriptions.unsubscribe()}loadGoalsData(){let i=this.userProfileService.getProfile()?.measurementGoals;i&&this.goalsForm.reset(i,{emitEvent:!1})}saveMeasurements(){let i=this.profileForm?.get("measurements");if(!this.profileForm||!i||i.invalid){this.toastService.error(this.translate.instant("alerts.invalidFields"));return}let e=this.profileForm.get("measurements")?.value;this.userProfileService.addOrUpdateMeasurementEntry(e),this.profileForm.get("measurements").markAsPristine(),this.toastService.info(this.translate.instant("toasts.measurementsSaved"),1500)}saveGeneralData(){let i={username:this.profileForm.get("general.username")?.value,gender:this.profileForm.get("general.gender")?.value,age:this.profileForm.get("general.age")?.value};this.userProfileService.saveProfile(i),this.toastService.info(this.translate.instant("toasts.profileSaved"),1500),this.profileForm.markAsPristine()}listenForProgressiveOverloadChanges(){this.subscriptions.add(this.progressiveOverloadForm.valueChanges.pipe(H(700),ge(()=>this.progressiveOverloadForm.valid&&this.progressiveOverloadForm.dirty),ve(t=>{this.progressiveOverloadService.saveSettings(t),this.progressiveOverloadForm.markAsPristine({onlySelf:!1}),this.toastService.info(this.translate.instant("toasts.progressiveOverloadSaved"),1500)})).subscribe());let i=this.progressiveOverloadForm.get("enabled"),e=t=>{let o=this.progressiveOverloadForm.get("weightIncrement"),c=this.progressiveOverloadForm.get("repsIncrement"),g=this.progressiveOverloadForm.get("distanceIncrement"),u=this.progressiveOverloadForm.get("durationIncrement"),w=(C,A,se)=>{A?C?.setValidators(se):(C?.clearValidators(),C?.setValue(null,{emitEvent:!1})),C?.updateValueAndValidity()};w(o,t.includes("weight"),[S.required,S.min(.1)]),w(c,t.includes("reps"),[S.required,S.min(1),S.pattern("^[0-9]*$")]),w(g,t.includes("distance"),[S.required,S.min(.01)]),w(u,t.includes("duration"),[S.required,S.min(1),S.pattern("^[0-9]*$")])};this.subscriptions.add(this.strategiesFormArray.valueChanges.subscribe(t=>e(t))),this.subscriptions.add(i?.valueChanges.subscribe(t=>e(t?this.strategiesFormArray.value:[])))}loadProfileData(){let i=this.userProfileService.getProfile();if(i){let e=this.userProfileService.getMeasurements();this.profileForm.reset({general:{username:i.username||"",gender:i.gender||null,age:i.age||null},measurements:e||{}},{emitEvent:!1})}else this.profileForm.reset({general:{username:null,gender:null,age:null},measurements:{height:null,weight:null,age:null,chest:null,waist:null,hips:null,rightArm:null}},{emitEvent:!1})}loadProgressiveOverloadSettings(){let i=this.progressiveOverloadService.getSettings();this.strategiesFormArray.clear(),i.strategies&&i.strategies.length>0&&i.strategies.forEach(e=>{this.strategiesFormArray.push(this.fb.control(e),{emitEvent:!1})}),this.progressiveOverloadForm.reset(W(R({},i),{strategies:this.strategiesFormArray.value}),{emitEvent:!1})}exportData(){return P(this,null,function*(){this.spinnerService.show(this.translate.instant("spinners.exporting"));let i=yield this.imageStorageService.getAllImagesForBackup(),e={version:this.BACKUP_VERSION,timestamp:new Date().toISOString(),profile:this.userProfileService.getDataForBackup(),progressPhotos:i,appSettings:this.appSettingsService.getDataForBackup(),progressiveOverload:this.progressiveOverloadService.getDataForBackup(),routines:this.workoutService.getDataForBackup(),programs:this.trainingProgramService.getDataForBackup(),exercises:this.exerciseService.getDataForBackup(),workoutLogs:this.trackingService.getDataForBackup(),activityLogs:this.activityService.getLogsForBackup(),personalBests:this.trackingService.getPBsForBackup(),personalGym:this.personalGymService.getDataForBackup()},t=JSON.stringify(e,null,2),o=new Blob([t],{type:"application/json"}),c=URL.createObjectURL(o),g=document.createElement("a"),u=xt(new Date,"yyyyMMdd_HHmmss");g.download=`FitTrackPro_backup_v${this.BACKUP_VERSION}_${u}.json`,g.href=c,g.click(),URL.revokeObjectURL(c),this.spinnerService.hide(),this.toastService.success(this.translate.instant("toasts.exportInitiated"),3e3)})}importData(i){let e=i.target,t=e.files?.[0];if(!t)return;if(t.type!=="application/json"){this.alertService.showAlert(this.translate.instant("common.error"),this.translate.instant("alerts.invalidFileType")),e.value="";return}let o=new FileReader;o.onload=c=>{try{let g=c.target?.result,u=JSON.parse(g);if(typeof u!="object"||u===null){this.alertService.showAlert(this.translate.instant("common.error"),this.translate.instant("alerts.invalidBackupFormat")),e.value="";return}let w=u.version;if(w>this.BACKUP_VERSION){this.alertService.showAlert(this.translate.instant("common.error"),this.translate.instant("alerts.backupVersionTooNew",{version:w,appVersion:this.BACKUP_VERSION})),e.value="";return}this.alertService.showConfirm(this.translate.instant("common.warning"),this.translate.instant("alerts.importWarning")).then(C=>P(this,null,function*(){if(C&&C.data){if(this.spinnerService.show(this.translate.instant("spinners.importing")),w>=6&&u.progressPhotos&&(yield this.imageStorageService.importImages(u.progressPhotos)),w>=5?this.userProfileService.mergeData(u.profile):w>=2?this.userProfileService.replaceData(u.profile):this.userProfileService.replaceData(null),this.subscriptionService.isPremium())this.workoutService.mergeData(u.routines);else{let se=this.workoutService.getCurrentRoutines().filter(le=>!le.isDisabled),oe=Array.isArray(u.routines)?u.routines:[],Ke=oe.filter(le=>!le.isDisabled);se.length+Ke.length>4&&(oe.forEach((le,Ut)=>le.isDisabled=Ut>3),this.toastService.veryImportant(this.translate.instant("toasts.routinesDisabledOnImport",{count:Ke.length}),1e4,this.translate.instant("toasts.routinesDisabledTitle")),this.workoutService.mergeData(oe))}u.workoutLogs&&(this.trackingService.replaceLogs(u.workoutLogs||[]),this.trackingService.replacePBs(u.personalBests||{}));let A=u.activityLogs||u.activitiyLogs;Array.isArray(A)&&this.activityService.mergeData(A),u.personalGym&&this.personalGymService.mergeData(u.personalGym),w>=4&&this.progressiveOverloadService.replaceData(u.progressiveOverload),w>=3&&(this.exerciseService.mergeData(u.exercises),this.trainingProgramService.mergeData(u.programs)),w>=2&&this.appSettingsService.replaceData(u.appSettings),this.loadProfileData(),this.loadProgressiveOverloadSettings(),this.loadGoalsData(),this.spinnerService.hide(),this.toastService.success(this.translate.instant("toasts.importSuccess"),5e3,this.translate.instant("toasts.importComplete"))}else this.toastService.info(this.translate.instant("toasts.importCancelled"),2e3)}))}catch(g){console.error("Error processing imported file:",g),this.alertService.showAlert(this.translate.instant("common.error"),this.translate.instant("alerts.errorProcessingFile"))}finally{e.value=""}},o.onerror=()=>{this.alertService.showAlert(this.translate.instant("common.error"),this.translate.instant("alerts.errorReadingFile")),e.value=""},o.readAsText(t)}clearAllAppData(){return P(this,null,function*(){let i=yield this.alertService.showConfirmationDialog(this.translate.instant("alerts.clearAllDataWarningTitle"),this.translate.instant("alerts.clearAllDataWarningMessage"),[{text:this.translate.instant("common.cancel"),role:"cancel",data:!1,icon:"cancel"},{text:this.translate.instant("settings.dataManagement.resetButton"),role:"confirm",data:!0,cssClass:"bg-red-600",icon:"trash"}]);if(i&&i.data){let e=yield this.alertService.showPromptDialog(this.translate.instant("alerts.clearAllDataConfirmationTitle"),this.translate.instant("alerts.clearAllDataConfirmationMessage"),[{name:"confirmDialogInput",type:"text",placeholder:this.translate.instant("alerts.clearAllDataConfirmationPlaceholder"),value:"",autofocus:!0}],this.translate.instant("alerts.clearAllDataButton")),t=e&&typeof e.confirmDialogInput=="string"?e.confirmDialogInput:null;if(!t||t.toUpperCase()!=="DELETE"){this.alertService.showAlert(this.translate.instant("common.cancelled"),this.translate.instant("alerts.clearAllDataCancelledMessage"));return}this.trackingService.clearAllWorkoutLogs_DEV_ONLY&&(yield this.trackingService.clearAllWorkoutLogs_DEV_ONLY()),this.trackingService.clearAllPersonalBests_DEV_ONLY&&(yield this.trackingService.clearAllPersonalBests_DEV_ONLY()),this.workoutService.clearAllRoutines_DEV_ONLY&&(yield this.workoutService.clearAllRoutines_DEV_ONLY()),this.userProfileService.clearUserProfile_DEV_ONLY&&this.userProfileService.clearUserProfile_DEV_ONLY(),this.appSettingsService.clearAppSettings_DEV_ONLY&&this.appSettingsService.clearAppSettings_DEV_ONLY(),this.progressiveOverloadService.clearSettings_DEV_ONLY&&this.progressiveOverloadService.clearSettings_DEV_ONLY(),this.trainingProgramService.deactivateAllPrograms&&this.trainingProgramService.deactivateAllPrograms(),this.loadProfileData(),this.loadProgressiveOverloadSettings(),yield this.alertService.showAlert(this.translate.instant("common.info"),this.translate.instant("alerts.clearAllDataSuccessMessage"))}})}selectUnit(i){this.unitsService.setWeightUnitPreference(i)}toggleWipDisclaimer(){let i=this.userProfileService.getHideWipDisclaimer();this.userProfileService.updateHideWipDisclaimer(!i)}navigateToExerciseLibrary(){this.router.navigate(["/library"])}navigateToPersonalGym(i){if(this.workoutService.vibrate(),!this.subscriptionService.canAccess("personal_gym")){this.subscriptionService.showUpgradeModal();return}this.router.navigate(["/personal-gym"])}navigateToPersonalBests(){this.router.navigate(["/profile/personal-bests"])}navigateToBodyMeasurements(){this.router.navigate(["/profile/measurements"])}showSyncHistoryTooltip(){if(this.platformId==="browser"&&window.innerWidth<=768){this.workoutService.vibrate(),this.alertService.showAlert(this.translate.instant("alerts.syncHistoryTitle"),this.syncHistoryTooltipString);return}}selectMenuMode(i){if(this.workoutService.vibrate(),!this.subscriptionService.canAccess("menu_mode")){this.subscriptionService.showUpgradeModal();return}this.appSettingsService.setMenuMode(i)}onSyncHistoryClick(){return P(this,null,function*(){let i=yield this.alertService.showConfirm(this.translate.instant("alerts.syncFullHistoryTitle"),this.translate.instant("alerts.syncFullHistoryMessage"));i&&i.data&&(yield this.trackingService.syncAllHistory())})}get strategiesFormArray(){return this.progressiveOverloadForm.get("strategies")}onStrategyChange(i){let e=i.target,t=e.value;if(e.checked)this.strategiesFormArray.push(this.fb.control(t));else{let o=this.strategiesFormArray.controls.findIndex(c=>c.value===t);o!==-1&&this.strategiesFormArray.removeAt(o)}this.progressiveOverloadForm.markAsDirty()}isStrategySelected(i){return this.strategiesFormArray.value.includes(i)}ProgressiveOverloadStrategy=yt;onLanguageChange(i){let t=i.target.value;if(t){this.workoutService.vibrate(),this.languageService.setLanguage(t);let o=this.translate.instant(this.languageDisplayNames[t]||t);this.toastService.success(this.translate.instant("toasts.languageSet",{language:o}),2e3)}}languageControl;static \u0275fac=function(e){return new(e||l)};static \u0275cmp=X({type:l,selectors:[["app-profile-settings"]],decls:380,vars:381,consts:[[1,"container","mx-auto","p-2","sm:p-4"],[1,"flex","justify-between","items-center","pb-2"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-200"],[1,"space-y-6","sm:space-y-8"],[1,"bg-gradient-to-r","from-primary","to-indigo-600","dark:from-primary-dark","dark:to-indigo-700","p-4","sm:p-6","rounded-md","shadow-lg","text-white"],[1,"text-xl","font-semibold","mb-2"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-bold"],[1,"text-sm","opacity-90"],["appPress","",1,"px-4","py-2","bg-white","text-primary-dark","font-semibold","rounded-md","shadow-md","hover:bg-gray-200","transition-colors",3,"shortPress"],[1,"bg-white","dark:bg-gray-700","p-4","sm:p-6","rounded-md","shadow-md"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-300","mb-4"],[1,"space-y-4","dark:text-gray-300",3,"formGroup"],["formGroupName","general",1,"space-y-4","pt-4","border-t","border-gray-200","dark:border-gray-600"],["for","username",1,"block","text-md","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","username","formControlName","username",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg",3,"change","placeholder"],[1,"dark:text-gray-300"],["for","gender",1,"block","text-md","font-medium","text-gray-700","dark:text-gray-300"],["id","gender","formControlName","gender",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg",3,"change"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["for","age",1,"block","text-md","font-medium","text-gray-700","dark:text-gray-300"],["type","number","min","0","id","age","formControlName","age","required","",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["formGroupName","measurements",1,"space-y-4","pt-4","border-t","border-gray-200","dark:border-gray-600"],[1,"text-lg","font-medium","text-gray-700","dark:text-gray-300"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],["for","height",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],[1,"text-red-500"],["type","number","min","0","id","height","formControlName","height",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","weight",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","weight","formControlName","weight",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","chest",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","chest","formControlName","chest",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","neck",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","neck","formControlName","neck",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","waist",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","waist","formControlName","waist",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","hips",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","hips","formControlName","hips",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","rightArm",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","rightArm","formControlName","rightArm",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],[1,"flex","flex-col","sm:flex-row","justify-center","items-center","space-y-4","sm:space-y-0","sm:space-x-4","pt-4"],["type","button",1,"flex","justify-center","items-center","w-full","sm:w-auto","px-6","py-3","bg-green-500","hover:bg-green-600","text-white","font-semibold","rounded-md","shadow-sm","text-lg","disabled:opacity-50","disabled:cursor-not-allowed",3,"click"],["name","save",1,"w-8","h-8","mr-1"],["type","button",1,"flex","justify-center","items-center","w-full","sm:w-auto","px-6","py-3","bg-blue-500","hover:bg-blue-600","text-white","font-semibold","rounded-md","shadow-sm","text-lg","disabled:opacity-50","disabled:cursor-not-allowed",3,"click"],["name","chart2",1,"w-8","h-8","mr-1"],[1,"space-y-4",3,"formGroup"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","gap-4"],["for","goalweight",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","goalweight","formControlName","weight",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","goalwaist",1,"block","text-md","font-medium","text-gray-600","dark:text-gray-400"],["type","number","min","0","id","goalwaist","formControlName","waist",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],[1,"flex","items-center","justify-between","py-2","rounded-md","transition-colors",3,"click"],[1,"text-md","font-medium","text-gray-700","dark:text-gray-300","flex","items-center"],["class","ml-2 px-2 py-0.5 text-xs font-semibold rounded-full bg-yellow-400 text-yellow-900 flex items-center justify-center ",4,"ngIf"],[1,"text-sm","text-gray-500","dark:text-gray-400","mr-1"],[1,"inline-flex","items-center"],[1,"sr-only"],["type","checkbox",1,"sr-only","peer",3,"change","checked","disabled"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-600","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-primary","dark:peer-checked:bg-primary-dark","peer-disabled:opacity-50"],[1,"ms-3","text-sm","font-medium","text-gray-900","dark:text-gray-300"],[1,"border-b","border-gray-200","dark:border-gray-600","pb-4"],["for","weightStep",1,"block","text-md","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-sm","text-gray-500","dark:text-gray-400","mb-1"],["type","number","id","weightStep","formControlName","weightStep","min","0.01","step","any",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"change"],["class","text-red-500 dark:text-red-400 text-xs mt-1",4,"ngIf"],[1,"flex","items-center","justify-between","pt-4"],[1,"text-md","font-medium","text-gray-700","dark:text-gray-300"],["for","countdown-sound-toggle",1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","id","countdown-sound-toggle","formControlName","enableTimerCountdownSound",1,"sr-only","peer",3,"change"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-600","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-primary","dark:peer-checked:bg-primary-dark"],["class"," dark:text-gray-300",4,"ngIf"],[1,"text-xl","font-medium","text-gray-700","dark:text-gray-300","flex","items-center"],["for","po-enabled-toggle",1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","id","po-enabled-toggle","formControlName","enabled",1,"sr-only","peer",3,"change"],["class","space-y-4 pt-4",4,"ngIf"],[1,"divide-y","divide-gray-200","dark:divide-gray-600"],[1,"py-3","flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"mt-2","sm:mt-0","flex-shrink-0","flex","items-center","justify-center","px-4","py-2","bg-blue-500","hover:bg-blue-600","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","text-sm",3,"click"],["name","export",1,"w-5","h-5","mr-2"],["type","file","accept","application/json",1,"mt-2","sm:mt-0","inline-block","w-auto","text-sm","text-gray-700","dark:text-gray-300","file:mr-4","file:py-2","file:px-4","file:rounded-md","file:border-0","file:text-sm","file:font-semibold","file:bg-gray-200","file:text-gray-700","hover:file:bg-gray-300","dark:file:bg-gray-600","dark:file:text-gray-200","dark:hover:file:bg-gray-700",3,"change"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300","flex","items-center"],["name","info",1,"ml-1","h-4","w-4","text-gray-400","dark:text-gray-300","cursor-help",3,"click","appTooltip"],[1,"mt-2","sm:mt-0","flex-shrink-0","flex","items-center","justify-center","px-4","py-2","bg-indigo-500","hover:bg-indigo-600","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","text-sm",3,"click"],["name","change",1,"w-5","h-5","mr-2"],[1,"text-sm","font-medium","text-red-600","dark:text-red-400"],[1,"mt-2","sm:mt-0","flex-shrink-0","flex","items-center","justify-center","px-4","py-2","bg-red-500","hover:bg-red-600","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","text-sm",3,"click"],["name","trash",1,"w-5","h-5","mr-2"],[1,"grid","grid-cols-2","gap-2"],["class","ml-2 px-2 py-0.5 text-xs font-semibold rounded-full bg-yellow-400 text-yellow-900 flex items-center justify-center w-fit",4,"ngIf"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],[1,"px-4","py-2","bg-indigo-500","hover:bg-indigo-700","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","inline-flex","items-center","text-sm","text-left",3,"click"],["name","dumbbell",1,"w-6","h-6","mr-1"],[1,"px-4","py-2","bg-primary","hover:bg-primary-dark","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","inline-flex","items-center","text-sm",3,"click"],["name","exercise-list",1,"w-6","h-6","mr-1"],["name","pb",1,"w-6","h-6","mr-1"],[1,"space-y-5"],[1,"flex","items-center","justify-between","pb-4","border-b","border-gray-200","dark:border-gray-600"],[1,"block","w-40","p-2","border","border-gray-300","dark:border-gray-500","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-sm","dark:text-gray-200",3,"formControl"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-x-8","gap-y-4"],[1,"relative","w-28","flex","rounded-lg","bg-gray-200","dark:bg-gray-600","p-1"],[1,"absolute","top-1","bottom-1","bg-primary","rounded-md","shadow","transition-all","duration-300","ease-in-out",3,"ngClass"],["type","button","appPress","",1,"relative","z-10","flex-1","px-4","py-2","text-sm","font-bold","text-center","transition-colors","duration-300",3,"shortPress","ngClass"],[1,"space-y-4","pt-4","border-t","border-gray-200","dark:border-gray-600"],[1,"grid","grid-cols-2","items-center"],["for","theme-toggle",1,"inline-flex","items-center","cursor-pointer","justify-self-end"],["type","checkbox","id","theme-toggle",1,"sr-only","peer",3,"change","checked"],[1,"relative","w-11","h-6","bg-gray-200","rounded-full","peer","dark:bg-gray-600","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-500","peer-checked:bg-primary","dark:peer-checked:bg-primary-dark"],["for","show-wip-message",1,"inline-flex","items-center","cursor-pointer","justify-self-end"],["type","checkbox","id","show-wip-message",1,"sr-only","peer",3,"change","checked"],[1,"pt-4","border-t","border-gray-200","dark:border-gray-600"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","justify-between"],[1,"mb-2","sm:mb-0"],["class","ml-2 px-2 py-0.5 text-xs font-semibold rounded-full bg-yellow-400 text-yellow-900 flex items-center justify-center",4,"ngIf"],[1,"relative","grid","grid-cols-3","w-full","sm:w-auto","rounded-lg","bg-gray-200","dark:bg-gray-600","p-1"],[1,"absolute","top-1","bottom-1","w-1/3","bg-primary","rounded-md","shadow","transition-transform","duration-300","ease-in-out",3,"ngClass"],["appPress","",1,"relative","z-10","px-3","py-1.5","text-xs","font-semibold","transition-colors","duration-300",3,"shortPress","ngClass"],[3,"value"],[1,"ml-2","px-2","py-0.5","text-xs","font-semibold","rounded-full","bg-yellow-400","text-yellow-900","flex","items-center","justify-center"],["name","crown",1,"h-5","w-5","mr-1"],[1,"text-red-500","dark:text-red-400","text-xs","mt-1"],["for","countdownSeconds",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","countdownSeconds","formControlName","countdownSoundSeconds","min","1","max","20",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","text-lg",3,"change"],[1,"space-y-4","pt-4"],[1,"block","text-md","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-sm","text-gray-500","dark:text-gray-400","mb-2"],[1,"grid","grid-cols-2","gap-x-8","gap-y-2"],["class","flex items-center",4,"ngFor","ngForOf"],[1,"mt-4","grid","grid-cols-1","sm:grid-cols-2","gap-x-8","gap-y-4"],[4,"ngIf"],["for","sessionsToIncrement",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","sessionsToIncrement","formControlName","sessionsToIncrement","min","1","step","1",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg"],[1,"flex","items-center"],["type","checkbox",1,"focus:ring-primary","h-4","w-4","text-primary","border-gray-300","rounded","dark:border-gray-600","dark:bg-gray-700",3,"change","id","value","checked"],[1,"ml-3","block","text-sm","font-medium","text-gray-700","dark:text-gray-300",3,"for"],["for","weightIncrement",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","weightIncrement","formControlName","weightIncrement","min","0.1","step","any",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","repsIncrement",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","repsIncrement","formControlName","repsIncrement","min","1","step","1",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","distanceIncrement",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","distanceIncrement","formControlName","distanceIncrement","min","0.01","step","any",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","durationIncrement",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","durationIncrement","formControlName","durationIncrement","min","1","step","1",1,"mt-1","block","w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],[1,"ml-2","px-2","py-0.5","text-xs","font-semibold","rounded-full","bg-yellow-400","text-yellow-900","flex","items-center","justify-center","w-fit"]],template:function(e,t){if(e&1&&(a(0,"div",0)(1,"header",1)(2,"h1",2),s(3),p(4,"translate"),r()(),a(5,"div",3)(6,"section",4)(7,"h2",5),s(8),p(9,"translate"),r(),a(10,"div",6)(11,"div")(12,"p",7),s(13),p(14,"translate"),r(),a(15,"p",8),s(16),p(17,"translate"),r()(),a(18,"button",9),f("shortPress",function(){return t.handleUpgradeClick()}),s(19),p(20,"translate"),r()()(),a(21,"section",10)(22,"h2",11),s(23),p(24,"translate"),r(),a(25,"form",12)(26,"div",13)(27,"div")(28,"label",14),s(29),p(30,"translate"),r(),a(31,"input",15),p(32,"translate"),f("change",function(){return t.currentVibrator.vibrate(50)}),r()(),a(33,"div",16)(34,"label",17),s(35),p(36,"translate"),r(),a(37,"select",18),f("change",function(){return t.currentVibrator.vibrate(50)}),a(38,"option",19),s(39),p(40,"translate"),r(),_(41,Lt,3,4,"option",20),r()(),a(42,"div",16)(43,"label",21),s(44),p(45,"translate"),r(),v(46,"input",22),p(47,"translate"),r()(),a(48,"div",23)(49,"h3",24),s(50),p(51,"translate"),r(),a(52,"div",25)(53,"div")(54,"label",26),s(55),p(56,"translate"),a(57,"span",27),s(58,"*"),r()(),v(59,"input",28),r(),a(60,"div")(61,"label",29),s(62),p(63,"translate"),a(64,"span",27),s(65,"*"),r()(),v(66,"input",30),r(),a(67,"div")(68,"label",31),s(69),p(70,"translate"),r(),v(71,"input",32),r(),a(72,"div")(73,"label",33),s(74),p(75,"translate"),r(),v(76,"input",34),r(),a(77,"div")(78,"label",35),s(79),p(80,"translate"),r(),v(81,"input",36),r(),a(82,"div")(83,"label",37),s(84),p(85,"translate"),r(),v(86,"input",38),r(),a(87,"div")(88,"label",39),s(89),p(90,"translate"),r(),v(91,"input",40),r()(),a(92,"div",41)(93,"button",42),f("click",function(){return t.saveMeasurements()}),v(94,"app-icon",43),a(95,"span"),s(96),p(97,"translate"),r()(),a(98,"button",44),f("click",function(){return t.navigateToBodyMeasurements()}),v(99,"app-icon",45),a(100,"span"),s(101),p(102,"translate"),r()()()()()(),a(103,"section",10)(104,"h2",11),s(105),p(106,"translate"),r(),a(107,"form",46)(108,"div",47)(109,"div")(110,"label",48),s(111),p(112,"translate"),r(),v(113,"input",49),r(),a(114,"div")(115,"label",50),s(116),p(117,"translate"),r(),v(118,"input",51),r()()()(),a(119,"section",10)(120,"h2",11),s(121),p(122,"translate"),r(),a(123,"form",46)(124,"div",52),f("click",function(c){return t.handlePremiumFeatureOrNavigate(t.PremiumFeature.FOCUS_PLAYER,c)}),a(125,"div")(126,"h3",53),s(127),p(128,"translate"),_(129,Rt,4,3,"span",54),r(),a(130,"p",55),s(131),p(132,"translate"),r()(),a(133,"label",56)(134,"span",57),s(135,"Toggle Player Mode"),r(),a(136,"input",58),f("change",function(c){return t.togglePlayerMode(c)}),r(),v(137,"div",59),a(138,"span",60),s(139),p(140,"translate"),p(141,"translate"),r()()(),a(142,"div",61)(143,"label",62),s(144),p(145,"translate"),r(),a(146,"p",63),s(147),p(148,"uppercase"),p(149,"translate"),r(),a(150,"input",64),f("change",function(){return t.currentVibrator.vibrate(50)}),r(),_(151,Wt,3,3,"div",65),r(),a(152,"div",66)(153,"div")(154,"h3",67),s(155),p(156,"translate"),r(),a(157,"p",55),s(158),p(159,"translate"),r()(),a(160,"label",68)(161,"input",69),f("change",function(){return t.currentVibrator.vibrate(50)}),r(),v(162,"div",70),a(163,"span",60),s(164),p(165,"translate"),p(166,"translate"),r()()(),_(167,Gt,6,4,"div",71),r()(),a(168,"section",10)(169,"div")(170,"h2",72),s(171),p(172,"translate"),_(173,jt,4,3,"span",54),r()(),a(174,"form",46)(175,"div",52),f("click",function(c){return t.handlePremiumFeatureOrNavigate(t.PremiumFeature.PROGRESSIVE_OVERLOAD,c)}),a(176,"div")(177,"h3",67),s(178),p(179,"translate"),r(),a(180,"p",55),s(181),p(182,"translate"),r()(),a(183,"label",73)(184,"input",74),f("change",function(){return t.currentVibrator.vibrate(50)}),r(),v(185,"div",70),a(186,"span",60),s(187),p(188,"translate"),p(189,"translate"),r()()(),_(190,ii,25,19,"div",75),r()(),a(191,"section",10)(192,"h2",11),s(193),p(194,"translate"),r(),a(195,"div",76)(196,"div",77)(197,"div")(198,"p",78),s(199),p(200,"translate"),r(),a(201,"p",79),s(202),p(203,"translate"),r()(),a(204,"button",80),f("click",function(){return t.exportData()}),v(205,"app-icon",81),s(206),p(207,"translate"),r()(),a(208,"div",77)(209,"div")(210,"p",78),s(211),p(212,"translate"),r(),a(213,"p",79),s(214),p(215,"translate"),r()(),a(216,"input",82),f("change",function(c){return t.importData(c),t.currentVibrator.vibrate(50)}),r()(),a(217,"div",77)(218,"div")(219,"p",83),s(220),p(221,"translate"),a(222,"app-icon",84),f("click",function(){return t.showSyncHistoryTooltip()}),r()(),a(223,"p",79),s(224),p(225,"translate"),r()(),a(226,"button",85),f("click",function(){return t.onSyncHistoryClick()}),v(227,"app-icon",86),s(228),p(229,"translate"),r()(),a(230,"div",77)(231,"div")(232,"p",87),s(233),p(234,"translate"),r(),a(235,"p",79),s(236),p(237,"translate"),r()(),a(238,"button",88),f("click",function(){return t.clearAllAppData()}),v(239,"app-icon",89),s(240),p(241,"translate"),r()()()(),a(242,"div",90)(243,"section",10)(244,"div")(245,"h2",11),s(246),p(247,"translate"),_(248,ri,4,3,"span",91),r()(),a(249,"div")(250,"p",92),s(251),p(252,"translate"),r(),a(253,"button",93),f("click",function(c){return t.handlePremiumFeatureOrNavigate(t.PremiumFeature.PERSONAL_GYM,c,["/personal-gym"])}),v(254,"app-icon",94),s(255),p(256,"translate"),r()()(),a(257,"section",10)(258,"h2",11),s(259),p(260,"translate"),r(),a(261,"div")(262,"p",92),s(263),p(264,"translate"),r(),a(265,"button",95),f("click",function(){return t.navigateToExerciseLibrary()}),v(266,"app-icon",96),s(267),p(268,"translate"),r()()()(),a(269,"section",10)(270,"h2",11),s(271),p(272,"translate"),r(),a(273,"div")(274,"p",92),s(275),p(276,"translate"),r(),a(277,"button",95),f("click",function(){return t.navigateToPersonalBests()}),v(278,"app-icon",97),s(279),p(280,"translate"),r()()(),a(281,"section",10)(282,"h2",11),s(283),p(284,"translate"),r(),a(285,"div",98)(286,"div",99)(287,"div")(288,"h3",78),s(289),p(290,"translate"),r(),a(291,"p",79),s(292),p(293,"translate"),r()(),a(294,"select",100),_(295,ni,3,4,"option",20),r()(),a(296,"div",101)(297,"div",6)(298,"p",78),s(299),p(300,"translate"),r(),a(301,"div",102),v(302,"div",103),a(303,"button",104),f("shortPress",function(){return t.selectWeightUnit("kg")}),s(304,"kg"),r(),a(305,"button",104),f("shortPress",function(){return t.selectWeightUnit("lbs")}),s(306,"lbs"),r()()(),a(307,"div",6)(308,"p",78),s(309),p(310,"translate"),r(),a(311,"div",102),v(312,"div",103),a(313,"button",104),f("shortPress",function(){return t.selectMeasureUnit("cm")}),s(314,"cm"),r(),a(315,"button",104),f("shortPress",function(){return t.selectMeasureUnit("in")}),s(316,"in"),r()()(),a(317,"div",6)(318,"p",78),s(319),p(320,"translate"),r(),a(321,"div",102),v(322,"div",103),a(323,"button",104),f("shortPress",function(){return t.selectDistanceMeasureUnit("km")}),s(324,"km"),r(),a(325,"button",104),f("shortPress",function(){return t.selectDistanceMeasureUnit("mi")}),s(326,"mi"),r()()(),a(327,"div",6)(328,"p",78),s(329),p(330,"translate"),r(),a(331,"div",102),v(332,"div",103),a(333,"button",104),f("shortPress",function(){return t.selectBodyWeightUnit("kg")}),s(334,"kg"),r(),a(335,"button",104),f("shortPress",function(){return t.selectBodyWeightUnit("lbs")}),s(336,"lbs"),r()()(),a(337,"div",6)(338,"p",78),s(339),p(340,"translate"),r(),a(341,"div",102),v(342,"div",103),a(343,"button",104),f("shortPress",function(){return t.selectBodyMeasureUnit("cm")}),s(344,"cm"),r(),a(345,"button",104),f("shortPress",function(){return t.selectBodyMeasureUnit("in")}),s(346,"in"),r()()()(),a(347,"div",105)(348,"div",106)(349,"h3",78),s(350),p(351,"translate"),r(),a(352,"label",107)(353,"input",108),f("change",function(){return t.themeService.toggleTheme()}),r(),v(354,"div",109),r()(),a(355,"div",106)(356,"h3",78),s(357),p(358,"translate"),r(),a(359,"label",110)(360,"input",111),f("change",function(){return t.toggleWipDisclaimer()}),r(),v(361,"div",109),r()()(),a(362,"div",112)(363,"div",113)(364,"div",114)(365,"h3",53),s(366),p(367,"translate"),_(368,ai,4,3,"span",115),r()(),a(369,"div",116),v(370,"div",117),a(371,"button",118),f("shortPress",function(){return t.selectMenuMode("dropdown")}),s(372),p(373,"translate"),r(),a(374,"button",118),f("shortPress",function(){return t.selectMenuMode("compact")}),s(375),p(376,"translate"),r(),a(377,"button",118),f("shortPress",function(){return t.selectMenuMode("modal")}),s(378),p(379,"translate"),r()()()()()()()()),e&2){let o,c,g,u,w,C,A;n(3),h(m(4,139,"settings.title")),n(5),h(m(9,141,"settings.subscription.title")),n(5),y(" ",m(14,143,t.subscriptionService.isPremium()?"settings.subscription.premiumMember":"settings.subscription.freeTier")," "),n(3),y(" ",m(17,145,t.subscriptionService.isPremium()?"settings.subscription.allFeaturesUnlocked":"settings.subscription.upgradeMessage")," "),n(3),y(" ",m(20,147,t.subscriptionService.isPremium()?"settings.subscription.manageButton":"settings.subscription.upgradeButton")," "),n(4),h(m(24,149,"settings.userProfile.title")),n(2),d("formGroup",t.profileForm),n(4),h(m(30,151,"settings.userProfile.usernameLabel")),n(2),d("placeholder",m(32,153,"settings.userProfile.usernamePlaceholder")),n(4),h(m(36,155,"settings.userProfile.genderLabel")),n(3),d("ngValue",null),n(),h(m(40,157,"settings.userProfile.genderPlaceholder")),n(2),d("ngForOf",t.genders),n(3),h(m(45,159,"settings.userProfile.ageLabel")),n(2),d("placeholder",m(47,161,"settings.userProfile.agePlaceholder")),n(4),h(m(51,163,"settings.measurements.title")),n(5),y(" ",B(56,165,"settings.measurements.heightLabel",T(303,D,t.unitsService.getBodyMeasureUnitSuffix()))),n(4),d("placeholder",t.unitsService.getBodyMeasureUnitSuffix()),n(3),y(" ",B(63,168,"settings.measurements.weightLabel",T(305,D,t.unitsService.getBodyWeightUnitSuffix()))),n(4),d("placeholder",t.unitsService.getBodyWeightUnitSuffix()),n(3),h(B(70,171,"settings.measurements.chestLabel",T(307,D,t.unitsService.getBodyMeasureUnitSuffix()))),n(2),d("placeholder",t.unitsService.getBodyMeasureUnitSuffix()),n(3),h(B(75,174,"settings.measurements.neckLabel",T(309,D,t.unitsService.getBodyMeasureUnitSuffix()))),n(2),d("placeholder",t.unitsService.getBodyMeasureUnitSuffix()),n(3),h(B(80,177,"settings.measurements.waistLabel",T(311,D,t.unitsService.getBodyMeasureUnitSuffix()))),n(2),d("placeholder",t.unitsService.getBodyMeasureUnitSuffix()),n(3),h(B(85,180,"settings.measurements.hipsLabel",T(313,D,t.unitsService.getBodyMeasureUnitSuffix()))),n(2),d("placeholder",t.unitsService.getBodyMeasureUnitSuffix()),n(3),h(B(90,183,"settings.measurements.rightArmLabel",T(315,D,t.unitsService.getBodyMeasureUnitSuffix()))),n(2),d("placeholder",t.unitsService.getBodyMeasureUnitSuffix()),n(5),h(m(97,186,"settings.measurements.saveButton")),n(5),h(m(102,188,"settings.measurements.historyButton")),n(4),h(m(106,190,"settings.goals.title")),n(2),d("formGroup",t.goalsForm),n(4),h(B(112,192,"settings.goals.targetWeightLabel",T(317,D,t.unitsService.getBodyWeightUnitSuffix()))),n(2),d("placeholder",t.unitsService.getBodyWeightUnitSuffix()),n(3),h(B(117,195,"settings.goals.targetWaistLabel",T(319,D,t.unitsService.getBodyMeasureUnitSuffix()))),n(2),d("placeholder",t.unitsService.getBodyMeasureUnitSuffix()),n(3),h(m(122,198,"settings.player.title")),n(2),d("formGroup",t.appSettingsForm),n(),N("hover:bg-gray-100",t.subscriptionService.isPremium())("dark:hover:bg-gray-600/50",t.subscriptionService.isPremium())("cursor-pointer",t.subscriptionService.isPremium())("cursor-not-allowed",!t.subscriptionService.isPremium()),n(3),y(" ",m(128,200,"settings.player.playerModeLabel")," "),n(2),d("ngIf",!t.subscriptionService.isPremium()),n(2),y("",m(132,202,"settings.player.playerModeDescription")," "),n(2),N("cursor-not-allowed",!t.subscriptionService.isPremium()),n(3),d("checked",((o=t.appSettingsForm.get("playerMode"))==null?null:o.value)==="focus")("disabled",!t.subscriptionService.isPremium()),n(3),y(" ",((c=t.appSettingsForm.get("playerMode"))==null?null:c.value)==="focus"?m(140,204,"settings.player.playerModeFocus"):m(141,206,"settings.player.playerModeCompact")," "),n(5),h(m(145,208,"settings.player.weightIncrementLabel")),n(3),h(B(149,212,"settings.player.weightIncrementDescription",T(321,D,m(148,210,t.unitsService.currentWeightUnit())))),n(4),d("ngIf",((g=t.appSettingsForm.get("weightStep"))==null?null:g.invalid)&&((g=t.appSettingsForm.get("weightStep"))==null?null:g.touched)),n(4),h(m(156,215,"settings.player.countdownSoundLabel")),n(3),h(m(159,217,"settings.player.countdownSoundDescription")),n(6),y(" ",(u=t.appSettingsForm.get("enableTimerCountdownSound"))!=null&&u.value?m(165,219,"common.on"):m(166,221,"common.off")," "),n(3),d("ngIf",(w=t.appSettingsForm.get("enableTimerCountdownSound"))==null?null:w.value),n(4),y(" ",m(172,223,"settings.progressiveOverload.title")," "),n(2),d("ngIf",!t.subscriptionService.isPremium()),n(),d("formGroup",t.progressiveOverloadForm),n(),N("hover:bg-gray-100",t.subscriptionService.isPremium())("dark:hover:bg-gray-600/50",t.subscriptionService.isPremium())("cursor-pointer",t.subscriptionService.isPremium())("cursor-not-allowed",!t.subscriptionService.isPremium()),n(3),y("",m(179,225,"settings.progressiveOverload.enableLabel")," "),n(3),h(m(182,227,"settings.progressiveOverload.enableDescription")),n(6),y(" ",(C=t.progressiveOverloadForm.get("enabled"))!=null&&C.value?m(188,229,"common.on"):m(189,231,"common.off")," "),n(3),d("ngIf",(A=t.progressiveOverloadForm.get("enabled"))==null?null:A.value),n(3),h(m(194,233,"settings.dataManagement.title")),n(6),h(m(200,235,"settings.dataManagement.exportTitle")),n(3),h(m(203,237,"settings.dataManagement.exportDescription")),n(4),y(" ",m(207,239,"settings.dataManagement.exportButton")," "),n(5),h(m(212,241,"settings.dataManagement.importTitle")),n(3),h(m(215,243,"settings.dataManagement.importDescription")),n(6),y(" ",m(221,245,"settings.dataManagement.syncTitle")," "),n(2),d("appTooltip",t.syncHistoryTooltipString),n(2),h(m(225,247,"settings.dataManagement.syncDescription")),n(4),y(" ",m(229,249,"settings.dataManagement.syncButton")," "),n(5),h(m(234,251,"settings.dataManagement.resetTitle")),n(3),h(m(237,253,"settings.dataManagement.resetDescription")),n(4),y(" ",m(241,255,"settings.dataManagement.resetButton")," "),n(6),y(" ",m(247,257,"settings.personalGym.title")," "),n(2),d("ngIf",!t.subscriptionService.isPremium()),n(3),h(m(252,259,"settings.personalGym.description")),n(4),y(" ",m(256,261,"settings.personalGym.button")," "),n(4),h(m(260,263,"settings.exerciseLibrary.title")),n(4),h(m(264,265,"settings.exerciseLibrary.description")),n(4),y(" ",m(268,267,"settings.exerciseLibrary.button")," "),n(4),h(m(272,269,"settings.achievements.title")),n(4),h(m(276,271,"settings.achievements.description")),n(4),y(" ",m(280,273,"settings.achievements.button")," "),n(4),h(m(284,275,"settings.general.title")),n(6),y(" ",m(290,277,"settings.general.language")," "),n(3),y(" ",m(293,279,"settings.general.languageDescription")," "),n(2),d("formControl",t.languageControl),n(),d("ngForOf",t.languageService.supportedLanguages),n(4),h(m(300,281,"settings.general.weightUnits")),n(3),d("ngClass",I(323,ue,t.unitsService.currentWeightUnit()==="kg",t.unitsService.currentWeightUnit()==="lbs")),n(),d("ngClass",I(326,F,t.unitsService.currentWeightUnit()==="kg",t.unitsService.currentWeightUnit()!=="kg")),n(2),d("ngClass",I(329,F,t.unitsService.currentWeightUnit()==="lbs",t.unitsService.currentWeightUnit()!=="lbs")),n(4),h(m(310,283,"settings.general.measureUnits")),n(3),d("ngClass",I(332,ue,t.unitsService.currentMeasureUnit()==="cm",t.unitsService.currentMeasureUnit()==="in")),n(),d("ngClass",I(335,F,t.unitsService.currentMeasureUnit()==="cm",t.unitsService.currentMeasureUnit()!=="cm")),n(2),d("ngClass",I(338,F,t.unitsService.currentMeasureUnit()==="in",t.unitsService.currentMeasureUnit()!=="in")),n(4),h(m(320,285,"settings.general.distanceUnits")),n(3),d("ngClass",I(341,ue,t.unitsService.currentDistanceMeasureUnit()==="km",t.unitsService.currentDistanceMeasureUnit()==="mi")),n(),d("ngClass",I(344,F,t.unitsService.currentDistanceMeasureUnit()==="km",t.unitsService.currentDistanceMeasureUnit()!=="km")),n(2),d("ngClass",I(347,F,t.unitsService.currentDistanceMeasureUnit()==="mi",t.unitsService.currentDistanceMeasureUnit()!=="mi")),n(4),h(m(330,287,"settings.general.bodyWeightUnits")),n(3),d("ngClass",I(350,ue,t.unitsService.currentBodyWeightUnit()==="kg",t.unitsService.currentBodyWeightUnit()==="lbs")),n(),d("ngClass",I(353,F,t.unitsService.currentBodyWeightUnit()==="kg",t.unitsService.currentBodyWeightUnit()!=="kg")),n(2),d("ngClass",I(356,F,t.unitsService.currentBodyWeightUnit()==="lbs",t.unitsService.currentBodyWeightUnit()!=="lbs")),n(4),h(m(340,289,"settings.general.bodyMeasureUnits")),n(3),d("ngClass",I(359,ue,t.unitsService.currentBodyMeasureUnit()==="cm",t.unitsService.currentBodyMeasureUnit()==="in")),n(),d("ngClass",I(362,F,t.unitsService.currentBodyMeasureUnit()==="cm",t.unitsService.currentBodyMeasureUnit()!=="cm")),n(2),d("ngClass",I(365,F,t.unitsService.currentBodyMeasureUnit()==="in",t.unitsService.currentBodyMeasureUnit()!=="in")),n(5),h(m(351,291,"settings.general.darkMode")),n(3),d("checked",t.themeService.isDarkTheme()),n(4),h(m(358,293,"settings.general.wipMessage")),n(3),d("checked",!t.userProfileService.getHideWipDisclaimer()),n(6),y(" ",m(367,295,"settings.general.menuMode")," "),n(2),d("ngIf",!t.subscriptionService.isPremium()),n(2),d("ngClass",tt(368,Vt,t.appSettingsService.menuMode()==="dropdown",t.appSettingsService.menuMode()==="compact",t.appSettingsService.menuMode()==="modal")),n(),d("ngClass",I(372,F,t.appSettingsService.menuMode()==="dropdown",t.appSettingsService.menuMode()!=="dropdown")),n(),h(m(373,297,"settings.general.menuModes.dropdown")),n(2),d("ngClass",I(375,F,t.appSettingsService.menuMode()==="compact",t.appSettingsService.menuMode()!=="compact")),n(),h(m(376,299,"settings.general.menuModes.compact")),n(2),d("ngClass",I(378,F,t.appSettingsService.menuMode()==="modal",t.appSettingsService.menuMode()!=="modal")),n(),h(m(379,301,"settings.general.menuModes.modal"))}},dependencies:[ee,be,Q,Z,Ae,Ce,Te,Fe,ke,Be,dt,ut,Ee,Pe,ft,vt,gt,ct,Ie,Me,mt,Oe,te,kt,Ct,at,Pt],encapsulation:2})};var Ot=["bodyweight/calisthenics","dumbbells","kettlebells","barbells","machines","cables","bands","cardio","stretching","plyometrics","strongman","custom","other"];function si(l,i){if(l&1&&(a(0,"option",37),s(1),r()),l&2){let e=i.$implicit;d("value",e),n(),y(" ",e," ")}}function oi(l,i){if(l&1&&(a(0,"option",37),s(1),p(2,"titlecase"),r()),l&2){let e=i.$implicit;d("value",e),n(),y(" ",m(2,2,e)," ")}}function li(l,i){if(l&1&&(a(0,"span"),s(1," of "),a(2,"strong",39),s(3),r()()),l&2){let e=b(2);n(3),h(e.combinedPersonalBests().length)}}function di(l,i){if(l&1&&(a(0,"div",38),s(1," Showing "),a(2,"strong",39),s(3),r(),_(4,li,4,1,"span",40),s(5," PBs "),r()),l&2){let e=b();n(3),h(e.displayPersonalBests().length),n(),d("ngIf",e.exerciseNameFilter()||e.exerciseCategoryFilter()||e.pbTypeFilter())}}function pi(l,i){if(l&1&&(a(0,"span"),s(1),p(2,"date"),p(3,"date"),r()),l&2){let e=i.$implicit,t=i.last,o=b(2).$implicit,c=b(2);n(),ye(" ",c.formatPbValue(e,o.pbType)," (",J(3,6,B(2,3,e.timestamp,"shortDate"),"dd-MM-yy","UTC"),")",t?"":", "," ")}}function ci(l,i){l&1&&(a(0,"span"),s(1," ..."),r())}function mi(l,i){if(l&1&&(a(0,"div",54)(1,"span",55),s(2,"Prev:"),r(),_(3,pi,4,10,"span",56)(4,ci,2,0,"span",40),r()),l&2){let e=b().$implicit;n(3),d("ngForOf",e.history.slice(0,1)),n(),d("ngIf",e.history.length>1)}}function ui(l,i){if(l&1&&(a(0,"div",57)(1,"p",58),s(2),r()()),l&2){let e=b().$implicit;N("mt-2",e.history&&e.history.length>0)("mt-1",!(e.history&&e.history.length>0)),n(),d("title",e.notes),n(),y(" ",e.notes," ")}}function gi(l,i){if(l&1){let e=M();a(0,"div",59)(1,"button",60),f("click",function(o){k(e);let c=b().$implicit,g=b(2);return E(g.navigateToLogDetail(c.workoutLogId,o))}),v(2,"app-icon",61),a(3,"span"),s(4,"VIEW LOG"),r()(),a(5,"button",62),f("click",function(){k(e);let o=b().$implicit,c=b(2);return E(c.showPbTrend(o.exerciseId,o.pbType))}),v(6,"app-icon",63),a(7,"span"),s(8,"TREND"),r()()()}}function vi(l,i){if(l&1&&(a(0,"div",43)(1,"div",44)(2,"div",45)(3,"div")(4,"h2",46),s(5),r(),a(6,"p",47),s(7),p(8,"titlecase"),r()()(),a(9,"div",48)(10,"span",49),s(11),r()(),a(12,"div",50)(13,"span"),s(14),r(),a(15,"span"),s(16),p(17,"date"),p(18,"date"),r()(),_(19,mi,5,2,"div",51)(20,ui,3,6,"div",52),r(),_(21,gi,9,0,"div",53),r()),l&2){let e=i.$implicit,t=b(2);n(4),d("title",e.exerciseName),n(),y(" ",e.exerciseName," "),n(2),y(" (",m(8,9,e.primaryMuscleGroup),") "),n(4),h(t.formatPbValue(e)),n(3),h(e.pbType),n(2),h(J(18,14,B(17,11,e.timestamp,"shortDate"),"dd-MM-yy","UTC")),n(3),d("ngIf",e.history&&e.history.length>0),n(),d("ngIf",e.notes),n(),d("ngIf",e.pbType!=="1RM (Estimated)"&&e.workoutLogId)}}function fi(l,i){if(l&1&&(a(0,"div")(1,"div",41),_(2,vi,22,18,"div",42),r()()),l&2){let e=b();n(2),d("ngForOf",e.displayPersonalBests())}}function hi(l,i){l&1&&(a(0,"span"),s(1,"No Personal Bests Match Your Filters"),r())}function yi(l,i){l&1&&s(0,"No Personal Bests Yet!")}function bi(l,i){if(l&1){let e=M();a(0,"span"),s(1,"Try adjusting your filter criteria or "),a(2,"button",69),f("shortPress",function(){k(e);let o=b(2);return E(o.resetFiltersAndShow())}),s(3,"reset all filters"),r()()}}function xi(l,i){l&1&&(a(0,"span"),s(1,"Keep logging your workouts to track your progress and achievements here"),r())}function Si(l,i){if(l&1){let e=M();a(0,"span"),s(1," Try clearing filters, or perhaps "),a(2,"button",69),f("shortPress",function(){k(e);let o=b(2);return E(o.triggerRecalculatePBs())}),s(3,"recalculate PBs"),r(),s(4," if you've recently imported data. "),r()}}function _i(l,i){if(l&1&&(a(0,"div",64),q(),a(1,"svg",65),v(2,"path",66),r(),K(),a(3,"h2",67),_(4,hi,2,0,"span",35)(5,yi,1,0,"ng-template",null,4,de),r(),a(7,"p",68),_(8,bi,4,0,"span",40)(9,xi,2,0,"span",40)(10,Si,5,0,"span",40),r()()),l&2){let e=U(6),t=b();n(4),d("ngIf",t.hasActiveFilters())("ngIfElse",e),n(4),d("ngIf",t.hasActiveFilters()),n(),d("ngIf",!t.hasActiveFilters()&&t.allPersonalBestsSignalEmpty()),n(),d("ngIf",!t.allPersonalBestsSignalEmpty()&&t.displayPersonalBests().length===0&&!t.hasActiveFilters())}}function wi(l,i){if(l&1){let e=M();a(0,"button",70),f("shortPress",function(){k(e);let o=b();return E(o.scrollToTop())}),q(),a(1,"svg",71),v(2,"path",72),r(),K(),a(3,"span",14),s(4,"Back to Top"),r()()}}var je=class l{trackingService=x(ne);exerciseService=x(Ve);unitsService=x(L);router=x(Se);toastService=x(V);platformId=x(he);workoutService=x(re);allPersonalBestsRaw=O({});allExercisesRaw=O([]);filtersVisible=O(!1);exerciseNameFilter=O("");pbTypeFilter=O("");exerciseCategoryFilter=O("");decimalPipe=new st("en-US");availableCategories=Y(()=>[...Ot].sort());availablePbTypes=Y(()=>{let i=this.allPersonalBestsRaw(),e=new Set;return Object.values(i).forEach(t=>{t.forEach(o=>{o.pbType&&e.add(o.pbType)})}),Array.from(e).sort()});combinedPersonalBests=Y(()=>{let i=this.allPersonalBestsRaw(),e=this.allExercisesRaw();if(Object.keys(i).length===0||e.length===0)return[];let t=new Map(e.map(c=>[c.id,c])),o=[];for(let c in i)if(i.hasOwnProperty(c)){let g=t.get(c),u=i[c];g&&u.forEach(w=>{o.push(W(R({},w),{exerciseName:g.name,exerciseCategory:g.category,primaryMuscleGroup:g.primaryMuscleGroup}))})}return o});displayPersonalBests=Y(()=>{let i=this.combinedPersonalBests(),e=this.exerciseNameFilter().toLowerCase().trim(),t=this.exerciseCategoryFilter(),o=this.pbTypeFilter();if(!e&&!t&&!o)return this.sortPBs(i);let c=i.filter(g=>!(e&&!g.exerciseName.toLowerCase().includes(e)||t&&g.exerciseCategory!==t||o&&g.pbType!==o));return this.sortPBs(c)});hasActiveFilters=Y(()=>this.exerciseNameFilter().trim()!==""||this.exerciseCategoryFilter()!==""||this.pbTypeFilter().trim()!=="");allPersonalBestsSignalEmpty=Y(()=>Object.keys(this.allPersonalBestsRaw()).length===0);constructor(){}ngOnInit(){pe(this.platformId)&&window.scrollTo(0,0),this.trackingService.personalBests$.subscribe(i=>{this.allPersonalBestsRaw.set(i)}),this.exerciseService.getExercises().pipe(Qe(1)).subscribe(i=>{this.allExercisesRaw.set(i)})}toggleFiltersVisibility(){this.filtersVisible.update(i=>!i)}resetFilters(){this.exerciseNameFilter.set(""),this.exerciseCategoryFilter.set("")}resetFiltersAndShow(){this.resetFilters(),this.filtersVisible.set(!0)}getPbTypeSortOrder(i){return i.includes("1RM (Actual)")?0:i.includes("1RM (Estimated)")?1:i.includes("3RM (Actual)")?2:i.includes("5RM (Actual)")?3:i.includes("Heaviest Lifted")?4:i.includes("Max Reps (Bodyweight)")?5:i.includes("Max Duration")?6:100}sortPBs(i){return[...i].sort((e,t)=>{let o=e.exerciseName.localeCompare(t.exerciseName);if(o!==0)return o;let c=this.getPbTypeSortOrder(e.pbType),g=this.getPbTypeSortOrder(t.pbType);return c!==g?c-g:e.weightUsed!==void 0&&t.weightUsed!==void 0?(t.weightUsed??0)-(e.weightUsed??0):e.repsAchieved!==void 0&&t.repsAchieved!==void 0&&e.pbType.includes("Max Reps")?(t.repsAchieved??0)-(e.repsAchieved??0):e.durationPerformed!==void 0&&t.durationPerformed!==void 0&&e.pbType.includes("Max Duration")?(t.durationPerformed??0)-(e.durationPerformed??0):new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()})}formatPbValue(i,e){let t="",o=i.pbType||e;if(i.weightUsed!==void 0&&i.weightUsed!==null){if(t+=`${this.decimalPipe.transform(i.weightUsed,"1.0-2")}${this.unitsService.getWeightUnitSuffix()}`,i.repsAchieved>0){let c=!0;if(o&&o.includes("RM (Actual)")){let g=o.split("RM")[0],u=parseInt(g,10);!isNaN(u)&&i.repsAchieved===u&&(c=!1)}c&&(t+=` x ${i.repsAchieved}`)}}else i.repsAchieved>0&&o?.includes("Max Reps")?t=`${i.repsAchieved} reps`:i.durationPerformed&&i.durationPerformed>0&&o?.includes("Max Duration")?t=`${i.durationPerformed}s`:i.repsAchieved>0?t=`${i.repsAchieved} reps`:i.durationPerformed&&i.durationPerformed>0&&(t=`${i.durationPerformed}s`);return t||"N/A"}navigateToLogDetail(i,e){e?.stopPropagation(),i?(this.workoutService.vibrate(),this.router.navigate(["/history/log",i])):(this.toastService.error("Could not find the associated workout log for this personal best. It's possible that the related workout session has been removed.",0,"Navigation Error"),console.warn("Attempted to navigate to log detail, but workoutLogId is undefined for PB:",e))}triggerRecalculatePBs(){return P(this,null,function*(){try{yield this.trackingService.recalculateAllPersonalBests(),this.filtersVisible.set(!1)}catch(i){console.error("Error initiating PB recalculation:",i),this.toastService.error("An error occurred while trying to recalculate personal bests.")}})}resetPBs(){return P(this,null,function*(){try{yield this.trackingService.clearAllPersonalBests_DEV_ONLY()}catch(i){console.error("Error clearAllPersonalBests_DEV_ONLY:",i),this.toastService.error("An error occurred while trying to reset personal bests.")}})}showPbTrend(i,e){if(!i||!e){this.toastService.error("Cannot show trend: Missing exercise ID or PB type.",0,"Error");return}let t=encodeURIComponent(e);this.workoutService.vibrate(),this.router.navigate(["/profile/pb-trend",i,t]),console.log(`Requesting trend for Exercise ID: ${i}, PB Type: ${e}`)}showBackToTopButton=O(!1);onWindowScroll(){let i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;this.showBackToTopButton.set(i>400)}scrollToTop(){pe(this.platformId)&&window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=X({type:l,selectors:[["app-personal-bests"]],hostBindings:function(e,t){e&1&&f("scroll",function(){return t.onWindowScroll()},Ze)},decls:55,vars:15,consts:[["nameFilterInput",""],["pbTypeFilterInput",""],["categoryFilterInput",""],["noPBsOrFilters",""],["noPBsMessage",""],[1,"container","mx-auto","p-2","sm:p-4"],[1,"mb-6","flex","items-center"],["routerLink","/profile",1,"text-gray-600","dark:text-gray-300","hover:text-primary","dark:hover:text-primary-light","p-2","-ml-2","rounded-full","focus:outline-none","focus:ring-2","focus:ring-primary-focus"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"flex","flex-grow","justify-between","items-center","pb-2"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-200"],["type","button",1,"rounded-md","text-gray-600","dark:text-gray-300","hover:bg-gray-200","dark:hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-primary","dark:focus:ring-primary-light","transition-all","duration-300","ease-in-out",3,"click"],["name","filter",1,"w-10","h-10","transition-transform","duration-300"],[1,"sr-only"],[1,"overflow-hidden","transition-all","duration-500","ease-in-out"],[1,"p-4","bg-white","dark:bg-gray-700","rounded-md","shadow-md","border","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-300","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],["for","exerciseNameFilter",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["type","text","id","exerciseNameFilter","placeholder","e.g., Bench Press",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-800","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm","text-gray-900","dark:text-gray-100","placeholder-gray-400","dark:placeholder-gray-500",3,"input","value"],["for","pbTypeFilter",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","pbTypeFilter",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-800","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm","text-gray-900","dark:text-gray-100",3,"change","value"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","categoryFilter",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["id","categoryFilter",1,"mt-1","block","w-full","px-3","py-2","bg-white","dark:bg-gray-800","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm","text-gray-900","dark:text-gray-100",3,"change","value"],[1,"mt-4","flex","justify-between","items-center"],["appPress","",1,"flex","px-4","py-2","bg-yellow-200","dark:bg-yellow-700","text-gray-700","dark:text-gray-200","rounded-md","hover:bg-yellow-300","dark:hover:bg-yellow-500","text-sm","items-center",3,"shortPress"],["name","trash"],["appPress","","title","Recalculate all Personal Bests from your workout history",1,"ml-2","p-2","text-sm","text-gray-500","dark:text-gray-400","hover:text-primary","dark:hover:text-primary-light","rounded-md","border","border-gray-300","dark:border-gray-600","hover:bg-gray-100","dark:hover:bg-gray-700","transition-colors","flex","items-center",3,"shortPress"],["name","change"],[1,"hidden","sm:inline-block","ml-1"],["appPress","","title","Reset all PBs",1,"ml-2","p-2","text-sm","text-gray-500","dark:text-gray-400","hover:text-red-600","dark:hover:text-red-500","rounded-md","border","border-gray-300","dark:border-gray-600","hover:bg-red-100","dark:hover:bg-red-900/50","transition-colors","flex","items-center",3,"shortPress"],["class","text-sm text-gray-600 dark:text-gray-400",4,"ngIf"],[4,"ngIf","ngIfElse"],["appPress","","type","button","class","fixed bottom-20 right-4 z-40 bg-primary dark:bg-primary text-white rounded-full p-3 shadow-lg hover:bg-primary-dark dark:hover:bg-primary-light focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-focus dark:focus:ring-offset-gray-900 transition-opacity animate-fade-in",3,"shortPress",4,"ngIf"],[3,"value"],[1,"text-sm","text-gray-600","dark:text-gray-400"],[1,"text-gray-800","dark:text-gray-200"],[4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-4"],["class","flex flex-col border dark:border-none bg-white dark:bg-gray-700 rounded-md shadow-md hover:shadow-lg transition-shadow duration-200 relative group transform hover:-translate-y-1",4,"ngFor","ngForOf"],[1,"flex","flex-col","border","dark:border-none","bg-white","dark:bg-gray-700","rounded-md","shadow-md","hover:shadow-lg","transition-shadow","duration-200","relative","group","transform","hover:-translate-y-1"],[1,"p-3","flex-grow"],[1,"flex","justify-between","items-start","mb-1"],[1,"text-md","font-semibold","text-primary","dark:text-primary-light","truncate",3,"title"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"mb-2"],[1,"text-xl","font-bold","text-gray-900","dark:text-white"],[1,"flex","justify-between","items-center","text-xs","text-gray-500","dark:text-gray-400","mb-2"],["class","mt-2 pt-1 border-t border-gray-200 dark:border-gray-600 text-xs text-gray-500 dark:text-gray-400",4,"ngIf"],["class","pt-1 border-t border-gray-200 dark:border-gray-600",3,"mt-2","mt-1",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 gap-4 pt-4 bg-gray-50 dark:bg-gray-800 border-gray-200 rounded-b dark:border-gray-600 p-2",4,"ngIf"],[1,"mt-2","pt-1","border-t","border-gray-200","dark:border-gray-600","text-xs","text-gray-500","dark:text-gray-400"],[1,"font-medium"],[4,"ngFor","ngForOf"],[1,"pt-1","border-t","border-gray-200","dark:border-gray-600"],[1,"text-xs","text-gray-600","dark:text-gray-400","italic","max-h-16","overflow-y-auto","custom-scrollbar","pr-1",3,"title"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4","pt-4","bg-gray-50","dark:bg-gray-800","border-gray-200","rounded-b","dark:border-gray-600","p-2"],[1,"flex","justify-center","items-center","px-6","py-3","bg-indigo-500","hover:bg-indigo-600","text-white","font-semibold","rounded-md","shadow-sm","text-lg","disabled:opacity-50","disabled:cursor-not-allowed",3,"click"],["name","eye",1,"w-8","h-8","mr-1"],["title","Show Trend for this PB",1,"flex","justify-center","items-center","px-6","py-3","bg-primary","hover:bg-primary-light","text-white","font-semibold","rounded-md","shadow-sm","text-lg","disabled:opacity-50","disabled:cursor-not-allowed",3,"click"],["name","trend",1,"w-8","h-8","mr-1"],[1,"text-center","py-10","bg-white","dark:bg-gray-700","rounded-xl","shadow-lg"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-16","h-16","mx-auto","text-gray-400","dark:text-gray-500","mb-4"],["stroke-linecap","round","stroke-linejoin","round","d","M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM13.5 10.5h-6"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-300","mb-2"],[1,"text-gray-500","dark:text-gray-400","px-4"],["appPress","",1,"text-primary","dark:text-primary-light","hover:underline",3,"shortPress"],["appPress","","type","button",1,"fixed","bottom-20","right-4","z-40","bg-primary","dark:bg-primary","text-white","rounded-full","p-3","shadow-lg","hover:bg-primary-dark","dark:hover:bg-primary-light","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-focus","dark:focus:ring-offset-gray-900","transition-opacity","animate-fade-in",3,"shortPress"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M4.5 15.75l7.5-7.5 7.5 7.5"]],template:function(e,t){if(e&1){let o=M();a(0,"div",5)(1,"div",6)(2,"button",7),q(),a(3,"svg",8),v(4,"path",9),r()(),K(),a(5,"header",10)(6,"h1",11),s(7,"Personal Bests"),r(),a(8,"button",12),f("click",function(){return k(o),E(t.toggleFiltersVisibility())}),v(9,"app-icon",13),a(10,"span",14),s(11,"Toggle Filters"),r()()()(),a(12,"div",15)(13,"div",16)(14,"h2",17),s(15,"Filter PBs"),r(),a(16,"div",18)(17,"div")(18,"label",19),s(19," Filter by Exercise Name "),r(),a(20,"input",20,0),f("input",function(){k(o);let g=U(21);return E(t.exerciseNameFilter.set(g.value))}),r()(),a(22,"div")(23,"label",21),s(24," Filter by PB Type "),r(),a(25,"select",22,1),f("change",function(){k(o);let g=U(26);return E(t.pbTypeFilter.set(g.value))}),a(27,"option",23),s(28,"All PB Types"),r(),_(29,si,2,2,"option",24),r()(),a(30,"div")(31,"label",25),s(32," Filter by Category "),r(),a(33,"select",26,2),f("change",function(){k(o);let g=U(34);return E(t.exerciseCategoryFilter.set(g.value))}),a(35,"option",23),s(36,"All Categories"),r(),_(37,oi,3,4,"option",24),r()()(),a(38,"div",27)(39,"button",28),f("shortPress",function(){return k(o),E(t.resetFilters())}),v(40,"app-icon",29),s(41," CLEAR FILTERS "),r(),a(42,"button",30),f("shortPress",function(){return k(o),E(t.triggerRecalculatePBs())}),v(43,"app-icon",31),a(44,"span",32),s(45,"RECALCULATE"),r()(),a(46,"button",33),f("shortPress",function(){return k(o),E(t.resetPBs())}),v(47,"app-icon",29),a(48,"span",32),s(49,"RESET PBs"),r()(),_(50,di,6,2,"div",34),r()()(),_(51,fi,3,1,"div",35)(52,_i,11,5,"ng-template",null,3,de)(54,wi,5,0,"button",36),r()}if(e&2){let o=U(53);n(9),N("rotate-180",t.filtersVisible()===!0),n(3),et("max-height",t.filtersVisible()?"1000px":"0px"),N("mb-6",t.filtersVisible()),n(8),d("value",t.exerciseNameFilter()),n(5),d("value",t.pbTypeFilter()),n(4),d("ngForOf",t.availablePbTypes()),n(4),d("value",t.exerciseCategoryFilter()),n(4),d("ngForOf",t.availableCategories()),n(13),d("ngIf",t.combinedPersonalBests().length>0),n(),d("ngIf",t.displayPersonalBests().length>0)("ngIfElse",o),n(3),d("ngIf",t.showBackToTopButton())}},dependencies:[ee,Q,Z,ot,Oe,te,nt,xe],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#9ca3af;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}.dark[_ngcontent-%COMP%]   .custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4b5563}.dark[_ngcontent-%COMP%]   .custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}"],data:{animation:[qe("slideInOutActions",[me("void",ce({height:"0px",opacity:0,overflow:"hidden",paddingTop:"0",paddingBottom:"0",marginTop:"0",marginBottom:"0"})),me("*",ce({height:"*",opacity:1,overflow:"hidden",paddingTop:"0.5rem",paddingBottom:"0.5rem"})),we("void <=> *",_e("200ms ease-in-out"))]),qe("dropdownMenu",[me("void",ce({opacity:0,transform:"scale(0.75) translateY(-10px)",transformOrigin:"top right"})),me("*",ce({opacity:1,transform:"scale(1) translateY(0)",transformOrigin:"top right"})),we("void => *",[_e("150ms cubic-bezier(0.25, 0.8, 0.25, 1)")]),we("* => void",[_e("100ms cubic-bezier(0.25, 0.8, 0.25, 1)")])])]}})};var ki=l=>({"clip-path":l}),Ei=l=>({left:l}),Pi=(l,i)=>({"text-yellow-500":l,"text-gray-500":i});function Ci(l,i){if(l&1&&(a(0,"option",18),s(1),p(2,"date"),r()),l&2){let e=i.$implicit;d("value",e.date),n(),y("",B(2,2,e.date,"mediumDate")," ")}}function Bi(l,i){if(l&1&&(a(0,"option",18),s(1),p(2,"date"),r()),l&2){let e=i.$implicit;d("value",e.date),n(),y("",B(2,2,e.date,"mediumDate")," ")}}function Ii(l,i){if(l&1&&(a(0,"option",18),s(1),r()),l&2){let e=i.$implicit;d("value",e.key),n(),h(e.label)}}function Mi(l,i){if(l&1){let e=M();a(0,"img",41),f("click",function(){k(e);let o=b().$implicit,c=b(2);return E(c.openFullScreenImage(o.photoUrl))}),r()}if(l&2){let e=b().$implicit;d("src",e.photoUrl,G)}}function Ti(l,i){if(l&1){let e=M();a(0,"div",27)(1,"div",28)(2,"div",29)(3,"p",30),s(4),p(5,"date"),r(),_(6,Mi,1,1,"img",31),a(7,"label",32),s(8),a(9,"input",33),f("change",function(o){let c=k(e).$implicit,g=b(2);return E(g.uploadPhoto(o,c.date))}),r()(),a(10,"div")(11,"button",34),f("click",function(){let o=k(e).$implicit,c=b(2);return E(c.confirmDeleteEntry(o.date))}),v(12,"app-icon",35),r(),a(13,"button",36),f("click",function(){let o=k(e).$implicit,c=b(2);return E(c.editEntry(o.date))}),v(14,"app-icon",37),r()()(),a(15,"div",38)(16,"p")(17,"strong"),s(18,"Weight:"),r(),s(19),r(),a(20,"p")(21,"strong"),s(22,"Chest:"),r(),s(23),r(),a(24,"p")(25,"strong"),s(26,"Waist:"),r(),s(27),r(),a(28,"p")(29,"strong"),s(30,"Hips:"),r(),s(31),r(),a(32,"p")(33,"strong"),s(34,"Neck:"),r(),s(35),r(),a(36,"p")(37,"strong"),s(38,"R. Arm:"),r(),s(39),r()(),a(40,"div")(41,"label",39),s(42,"Notes:"),r(),a(43,"textarea",40),f("input",function(o){let c=k(e).$implicit,g=b(2);return E(g.updateNotes(c.date,o))}),r()()()()}if(l&2){let e=i.$implicit,t=b(2);n(4),h(B(5,16,e.date,"fullDate")),n(2),d("ngIf",e.photoUrl),n(2),y(" ",e.photoUrl?"Change Photo":"Add Photo"," "),n(11),j(" ",e.weight||"N/A"," ",t.unitsService.getBodyWeightUnitSuffix()),n(4),j(" ",e.chest||"N/A"," ",t.unitsService.getBodyMeasureUnitSuffix()),n(4),j(" ",e.waist||"N/A"," ",t.unitsService.getBodyMeasureUnitSuffix()),n(4),j(" ",e.hips||"N/A"," ",t.unitsService.getBodyMeasureUnitSuffix()),n(4),j(" ",e.neck||"N/A"," ",t.unitsService.getBodyMeasureUnitSuffix()),n(4),j(" ",e.rightArm||"N/A"," ",t.unitsService.getBodyMeasureUnitSuffix()),n(4),d("value",e.notes||"")}}function Fi(l,i){if(l&1){let e=M();a(0,"div")(1,"section",19)(2,"h2",20),s(3,"Progress Chart"),r(),a(4,"div",21)(5,"select",22),f("change",function(o){k(e);let c=b();return E(c.updateChart(o))}),_(6,Ii,2,2,"option",11),r()(),a(7,"div",23),v(8,"ngx-charts-line-chart",24),r()(),a(9,"section",25)(10,"h2",20),s(11,"Log History"),r(),_(12,Ti,44,19,"div",26),r()()}if(l&2){let e=b();n(6),d("ngForOf",e.availableMetrics),n(2),d("results",e.chartData)("scheme",e.colorScheme)("xAxis",!0)("yAxis",!0)("legend",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("xAxisLabel","Date")("yAxisLabel",e.yAxisLabel)("autoScale",!0)("referenceLines",e.referenceLines),n(4),d("ngForOf",e.measurementHistory)}}function Di(l,i){l&1&&(a(0,"div",42)(1,"p",43),s(2,"No measurement history found."),r(),a(3,"p",44),s(4,"Go to your profile settings to add your first entry!"),r()())}function Ai(l,i){if(l&1){let e=M();a(0,"div",45),f("click",function(){k(e);let o=b();return E(o.closeFullScreenImage())}),v(1,"img",46),r()}if(l&2){let e=b();n(),d("src",e.fullScreenImageUrl,G)}}function Oi(l,i){if(l&1){let e=M();a(0,"div",47)(1,"div",48)(2,"h2",49),s(3,"Add Measurement Entry"),r(),a(4,"form",50),f("ngSubmit",function(){k(e);let o=b();return E(o.saveEntry())}),a(5,"label",51),s(6,"Date"),r(),v(7,"input",52),a(8,"div",53)(9,"div")(10,"label",54),s(11),r(),v(12,"input",55),r(),a(13,"div")(14,"label",56),s(15),r(),v(16,"input",57),r(),a(17,"div")(18,"label",58),s(19),r(),v(20,"input",59),r(),a(21,"div")(22,"label",60),s(23),r(),v(24,"input",61),r(),a(25,"div")(26,"label",62),s(27),r(),v(28,"input",63),r(),a(29,"div")(30,"label",64),s(31),r(),v(32,"input",65),r()(),v(33,"textarea",66),a(34,"div",67)(35,"button",68),f("click",function(){k(e);let o=b();return E(o.isAddEntryModalOpen=!1)}),v(36,"app-icon",69),s(37," CANCEL"),r(),a(38,"button",70),v(39,"app-icon",71),s(40,"SAVE"),r()()()()()}if(l&2){let e=b();n(4),d("formGroup",e.entryForm),n(7),y("Target Weight (",e.unitsService.getBodyWeightUnitSuffix(),")"),n(),d("placeholder",$("Weight "+e.unitsService.getBodyWeightUnitSuffix())),n(3),y("Chest (",e.unitsService.getBodyMeasureUnitSuffix(),")"),n(),d("placeholder",$("Chest "+e.unitsService.getBodyMeasureUnitSuffix())),n(3),y("Waist (",e.unitsService.getBodyMeasureUnitSuffix(),")"),n(),d("placeholder",$("Waist "+e.unitsService.getBodyMeasureUnitSuffix())),n(3),y("Hips (",e.unitsService.getBodyMeasureUnitSuffix(),")"),n(),d("placeholder",$("Hips "+e.unitsService.getBodyMeasureUnitSuffix())),n(3),y("Neck (",e.unitsService.getBodyMeasureUnitSuffix(),")"),n(),d("placeholder",$("Neck "+e.unitsService.getBodyMeasureUnitSuffix())),n(3),y("Right Arm (",e.unitsService.getBodyMeasureUnitSuffix(),")"),n(),d("placeholder",$("Right Arm "+e.unitsService.getBodyMeasureUnitSuffix())),n(6),d("disabled",e.entryForm.invalid)}}function Ui(l,i){l&1&&(a(0,"span"),s(1,"Side-by-Side View"),r())}function Ni(l,i){l&1&&(a(0,"span"),s(1,"Slider View"),r())}function Vi(l,i){if(l&1&&(a(0,"div",95)(1,"div",96),v(2,"img",97),a(3,"p",98),s(4),p(5,"date"),r()(),a(6,"div",96),v(7,"img",99),a(8,"p",98),s(9),p(10,"date"),r()()()),l&2){let e=b(2);n(2),d("src",e.comparisonData.from.photoUrl||"./assets/images/no_data.png",G),n(2),h(B(5,4,e.comparisonData.from.date,"fullDate")),n(3),d("src",e.comparisonData.to.photoUrl||"./assets/images/no_data.png",G),n(2),h(B(10,7,e.comparisonData.to.date,"fullDate"))}}function Li(l,i){if(l&1){let e=M();a(0,"div",100)(1,"h3",101),s(2,"Image Comparison Slider"),r(),a(3,"div",102)(4,"div",103),v(5,"img",104),a(6,"span",105),s(7),p(8,"date"),r()(),a(9,"div",106),v(10,"img",107),a(11,"span",108),s(12),p(13,"date"),r()(),a(14,"div",109)(15,"div",110),q(),a(16,"svg",111),v(17,"path",112),r()()(),K(),a(18,"input",113),f("input",function(o){k(e);let c=b(2);return E(c.onSliderChange(o))}),r()()()}if(l&2){let e=b(2);n(5),d("src",e.comparisonData.from.photoUrl||"./assets/images/no_data.png",G),n(2),y(" BEFORE: ",J(8,7,e.comparisonData.from.date,"dd-MM-yy","UTC")," "),n(2),d("ngStyle",T(15,ki,"inset(0 "+(100-e.comparisonSliderValue)+"% 0 0)")),n(),d("src",e.comparisonData.to.photoUrl||"./assets/images/no_data.png",G),n(2),y(" AFTER: ",J(13,11,e.comparisonData.to.date,"dd-MM-yy","UTC")," "),n(2),d("ngStyle",T(17,Ei,"calc("+e.comparisonSliderValue+"% - 1px)")),n(4),d("value",e.comparisonSliderValue)}}function Ri(l,i){if(l&1&&(a(0,"span"),s(1),r()),l&2){let e=b().$implicit;n(),h(e.unit)}}function Wi(l,i){if(l&1&&(a(0,"span"),s(1),r()),l&2){let e=b().$implicit;n(),h(e.unit)}}function Hi(l,i){if(l&1&&(Ye(0),s(1),ze()),l&2){let e=b().$implicit;n(),ye(" ",e.difference>0?"+":"","",e.difference," ",e.unit," ")}}function Gi(l,i){l&1&&(Ye(0),s(1,"N/A"),ze())}function ji(l,i){if(l&1&&(a(0,"tr",114)(1,"th",115),s(2),r(),a(3,"td",116),s(4),_(5,Ri,2,1,"span",82),r(),a(6,"td",116),s(7),_(8,Wi,2,1,"span",82),r(),a(9,"td",117),_(10,Hi,2,3,"ng-container",82)(11,Gi,2,0,"ng-container",82),r()()),l&2){let e=i.$implicit;n(2),h(e.metricLabel),n(2),y("",e.fromValue," "),n(),d("ngIf",e.fromValue!=="N/A"),n(2),y("",e.toValue," "),n(),d("ngIf",e.toValue!=="N/A"),n(),d("ngClass",I(8,Pi,e.difference!==null&&e.difference!==null,e.difference===0||e.difference===null)),n(),d("ngIf",e.difference!==null),n(),d("ngIf",e.difference===null)}}function $i(l,i){if(l&1){let e=M();a(0,"div",72)(1,"div",73)(2,"div",74)(3,"div",75)(4,"h2",76),s(5,"Side-by-Side Comparison"),r(),a(6,"button",77),f("click",function(){k(e);let o=b();return E(o.comparisonData=null)}),v(7,"app-icon",78),r()(),a(8,"div",79)(9,"button",80),f("click",function(){k(e);let o=b();return E(o.toggleComparisonMode())}),v(10,"app-icon",81),_(11,Ui,2,0,"span",82)(12,Ni,2,0,"span",82),r()()(),_(13,Vi,11,10,"div",83)(14,Li,19,19,"div",84),a(15,"div",85)(16,"table",86)(17,"thead",87)(18,"tr")(19,"th",88),s(20,"Metric"),r(),a(21,"th",89),s(22),p(23,"date"),r(),a(24,"th",89),s(25),p(26,"date"),r(),a(27,"th",90),s(28,"Change"),r()()(),a(29,"tbody"),_(30,ji,12,11,"tr",91),r()()(),a(31,"div",92)(32,"button",93),f("click",function(){k(e);let o=b();return E(o.comparisonData=null)}),v(33,"app-icon",94),s(34," CLOSE"),r()()()()}if(l&2){let e=b();n(11),d("ngIf",e.comparisonMode==="slider"),n(),d("ngIf",e.comparisonMode==="side-by-side"),n(),d("ngIf",e.comparisonMode==="side-by-side"),n(),d("ngIf",e.comparisonMode==="slider"),n(8),y("",B(23,7,e.comparisonData.from.date,"shortDate")," "),n(3),y("",B(26,10,e.comparisonData.to.date,"shortDate")," "),n(5),d("ngForOf",e.comparisonData.rows)}}var $e=class l{userProfileService=x(ie);imageStorageService=x(ae);toastService=x(V);fb=x(De);alertService=x(Ue);unitsService=x(L);compareFromDate="";compareToDate="";userProfile=null;measurementHistory=[];fullScreenImageUrl=null;isAddEntryModalOpen=!1;comparisonData=null;entryForm;chartData=[];yAxisLabel="Value";referenceLines=[];colorScheme="vivid";availableMetrics=[];notesUpdate$=new Je;ngOnInit(){this.userProfile=this.userProfileService.getProfile(),this.setupAvailableMetrics(),this.loadHistory(),this.initEntryForm(),this.notesUpdate$.pipe(H(1e3)).subscribe(i=>this.saveNotes(i.date,i.notes))}setupAvailableMetrics(){this.availableMetrics=[{key:"weight",label:`Weight (${this.unitsService.getBodyWeightUnitSuffix()})`},{key:"bmi",label:"Body Mass Index (BMI)"},{key:"bodyFat",label:"Body Fat % (Navy)"},{key:"chest",label:`Chest (${this.unitsService.getBodyMeasureUnitSuffix()})`},{key:"waist",label:`Waist (${this.unitsService.getBodyMeasureUnitSuffix()})`},{key:"hips",label:`Hips (${this.unitsService.getBodyMeasureUnitSuffix()})`},{key:"neck",label:`Neck (${this.unitsService.getBodyMeasureUnitSuffix()})`},{key:"rightArm",label:`Right Arm (${this.unitsService.getBodyMeasureUnitSuffix()})`}]}loadHistory(){return P(this,null,function*(){this.userProfile=this.userProfileService.getProfile();let i=this.userProfile?.measurementHistory?.slice().sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())||[];if(this.measurementHistory=yield Promise.all(i.map(e=>P(this,null,function*(){if(!e.date)return null;let t=yield this.imageStorageService.getImage(e.date),o=t?URL.createObjectURL(t):void 0;return W(R({},e),{photoUrl:o})}))).then(e=>e.filter(Boolean)),this.measurementHistory.length>0){let e=document.getElementById("metric-select");this.prepareChartData(e?.value||"weight")}else this.chartData=[]})}prepareChartData(i){let e=this.availableMetrics.find(c=>c.key===i);this.yAxisLabel=e?e.label:"Value";let o=this.measurementHistory.slice().reverse().map(c=>{let g=null;if(i==="bmi")c.weight&&this.userProfile?.height&&this.userProfile.height>0&&(g=this.userProfileService.calculateBMI(c.weight,this.userProfile.height));else if(i==="bodyFat"){let{gender:u,height:w}=this.userProfile||{},{waist:C,neck:A,hips:se}=c;if(u&&w&&C&&A){let oe={waist:C,neck:A,height:w,hips:se??void 0};g=this.userProfileService.calculateBodyFatNavy(u,oe)}}else{let u=c[i];typeof u=="number"&&(g=u)}return{name:c.date,value:g}}).filter(c=>c.value!==null&&c.value!==void 0&&!isNaN(c.value));this.chartData=[{name:this.yAxisLabel,series:o}],this.updateReferenceLine(i)}updateReferenceLine(i){let e=this.userProfile?.measurementGoals?.[i];typeof e=="number"?this.referenceLines=[{name:"Goal",value:e}]:this.referenceLines=[]}updateChart(i){let e=i.target;this.prepareChartData(e.value)}initEntryForm(){this.entryForm=this.fb.group({date:["",S.required],weight:[null,[S.min(0)]],waist:[null,[S.min(0)]],neck:[null,[S.min(0)]],chest:[null,[S.min(0)]],hips:[null,[S.min(0)]],rightArm:[null,[S.min(0)]],notes:[""]})}openAddEntryModal(){this.entryForm.reset({date:new Date().toISOString().split("T")[0]}),this.isAddEntryModalOpen=!0}saveEntry(){this.entryForm.invalid||(this.userProfileService.addOrUpdateMeasurementEntry(this.entryForm.value),this.isAddEntryModalOpen=!1,this.loadHistory(),this.toastService.success("Entry Saved!"))}updateNotes(i,e){let t=e.target.value;this.notesUpdate$.next({date:i,notes:t})}saveNotes(i,e){let t=this.measurementHistory.find(o=>o.date===i);if(t){let o=W(R({},t),{notes:e});delete o.photoUrl,this.userProfileService.addOrUpdateMeasurementEntry(o),this.toastService.info("Notes auto-saved.",1500)}}uploadPhoto(i,e){return P(this,null,function*(){let t=i.target;if(!t.files||t.files.length===0)return;let o=t.files[0];try{yield this.imageStorageService.saveImage(e,o);let c=this.measurementHistory.find(g=>g.date===e);c&&(c.photoUrl&&URL.revokeObjectURL(c.photoUrl),c.photoUrl=URL.createObjectURL(o)),this.toastService.success("Photo saved!")}catch(c){console.error("Failed to save photo:",c),this.toastService.error("Could not save photo.")}finally{t.value=""}})}openFullScreenImage(i){this.fullScreenImageUrl=i}closeFullScreenImage(){this.fullScreenImageUrl=null}onCompareFromChange(i){let e=i.target;this.compareFromDate=e.value}onCompareToChange(i){let e=i.target;this.compareToDate=e.value}closeCompareModal(){this.comparisonData=null,this.compareFromDate="",this.compareToDate=""}openCompareModal(i,e){if(this.comparisonMode="slider",this.comparisonSliderValue=50,!i||!e){this.toastService.error("Please select two dates to compare.");return}let t=this.measurementHistory.find(g=>g.date===i),o=this.measurementHistory.find(g=>g.date===e);if(!t||!o){this.toastService.error("Could not find the selected entries.");return}new Date(t.date)>new Date(o.date)&&([t,o]=[o,t]);let c=this.calculateComparisonRows(t,o);this.comparisonData={from:t,to:o,rows:c}}calculateComparisonRows(i,e){return[{key:"weight",label:"Weight",unit:this.unitsService.getBodyWeightUnitSuffix()},{key:"chest",label:"Chest",unit:this.unitsService.getBodyMeasureUnitSuffix()},{key:"waist",label:"Waist",unit:this.unitsService.getBodyMeasureUnitSuffix()},{key:"hips",label:"Hips",unit:this.unitsService.getBodyMeasureUnitSuffix()},{key:"neck",label:"Neck",unit:this.unitsService.getBodyMeasureUnitSuffix()},{key:"rightArm",label:"Right Arm",unit:this.unitsService.getBodyMeasureUnitSuffix()}].map(o=>{let c=i[o.key],g=e[o.key],u=null;return typeof c=="number"&&typeof g=="number"&&(u=parseFloat((g-c).toFixed(2))),{metricLabel:o.label,unit:o.unit,fromValue:c??"N/A",toValue:g??"N/A",difference:u}})}editEntry(i){let e=this.measurementHistory.find(t=>t.date===i);if(!e){this.toastService.error("Entry not found.");return}this.entryForm.setValue({date:e.date,weight:e.weight??null,waist:e.waist??null,neck:e.neck??null,chest:e.chest??null,hips:e.hips??null,rightArm:e.rightArm??null,notes:e.notes??""}),this.isAddEntryModalOpen=!0}confirmDeleteEntry(i){return P(this,null,function*(){let e=yield this.alertService.showConfirm("Delete Entry",`Are you sure you want to permanently delete all data for ${i}? This includes any associated photo and cannot be undone.`);if(e&&e.data)try{this.userProfileService.deleteMeasurementEntry(i),yield this.imageStorageService.deleteImage(i),this.toastService.success("Entry deleted successfully."),yield this.loadHistory()}catch(t){console.error("Failed to delete entry:",t),this.toastService.error("Could not delete the entry.")}})}comparisonSliderValue=50;comparisonMode="slider";onSliderChange(i){let e=i.target.value;this.comparisonSliderValue=Number(e)}toggleComparisonMode(){this.comparisonMode=this.comparisonMode==="slider"?"side-by-side":"slider"}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=X({type:l,selectors:[["app-measurement-history"]],decls:28,vars:9,consts:[["noData",""],[1,"container","mx-auto","text-gray-800","dark:text-gray-200"],[1,"flex","justify-between","items-center","pb-4","border-b","border-gray-200","dark:border-gray-700","mb-4"],[1,"text-2xl","font-bold"],[1,"px-4","py-2","bg-primary","hover:bg-primary-dark","text-white","font-semibold","rounded-md","shadow-sm","transition-colors","inline-flex","items-center","text-sm",3,"click"],["name","plus-circle"],[1,"bg-white","dark:bg-gray-800","p-4","rounded-md","shadow-md","mb-6"],[1,"font-semibold","mb-2"],[1,"flex","flex-col","sm:flex-row","gap-4","items-center"],[1,"flex-1","p-2","border","dark:border-gray-600","rounded-md","dark:bg-gray-700",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"px-4","py-2","bg-indigo-500","hover:bg-indigo-600","text-white","rounded-md","disabled:opacity-50","flex","items-center",3,"click","disabled"],["name","magnifier",1,"h-6","w-6","mr-1",3,"strokeWidth"],[4,"ngIf","ngIfElse"],["class","fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",3,"click",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 text-gray-800 dark:text-gray-200 backdrop-blur-sm animate-fade-in",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4 animate-fade-in text-gray-800 dark:text-gray-200",4,"ngIf"],[3,"value"],[1,"bg-white","dark:bg-gray-800","p-4","sm:p-6","rounded-md","shadow-md","mb-6"],[1,"text-xl","font-semibold","mb-4"],[1,"mb-4"],[1,"p-2","border","dark:border-gray-600","rounded-md","dark:bg-gray-700",3,"change"],[1,"w-full","h-[300px]"],[3,"results","scheme","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","autoScale","referenceLines"],[1,"bg-white","dark:bg-gray-800","p-4","sm:p-6","rounded-md","shadow-md"],["class","border-b dark:border-gray-700 py-4 last:border-b-0",4,"ngFor","ngForOf"],[1,"border-b","dark:border-gray-700","py-4","last:border-b-0"],[1,"grid","grid-cols-1","sm:grid-cols-3","gap-4","items-start"],[1,"flex","flex-col","items-center"],[1,"font-medium","text-lg","mb-2"],["alt","Progress photo","class","w-24 h-24 object-cover rounded-md shadow-lg cursor-pointer hover:opacity-80 transition-opacity",3,"src","click",4,"ngIf"],[1,"cursor-pointer","text-sm","text-primary","dark:text-primary-dark","hover:underline","mt-2"],["type","file","accept","image/*",1,"hidden",3,"change"],["title","Delete Entry",1,"p-1","rounded-full","text-gray-400","hover:bg-red-100","hover:text-red-500","dark:hover:bg-red-900/50","transition-colors",3,"click"],["name","trash",1,"w-4","h-4"],["title","Edit Entry",1,"p-1","rounded-full","text-gray-400","hover:bg-red-100","hover:text-red-500","dark:hover:bg-red-900/50","transition-colors",3,"click"],["name","edit",1,"w-4","h-4"],[1,"text-sm","grid","grid-cols-2","gap-x-4","gap-y-1"],[1,"font-semibold","text-sm"],["placeholder","Add notes...",1,"w-full","p-2","mt-1","border","rounded-md","dark:bg-gray-700","dark:border-gray-600","h-24",3,"input","value"],["alt","Progress photo",1,"w-24","h-24","object-cover","rounded-md","shadow-lg","cursor-pointer","hover:opacity-80","transition-opacity",3,"click","src"],[1,"text-center","bg-white","dark:bg-gray-800","p-10","rounded-md","shadow-md"],[1,"text-lg"],[1,"text-gray-500","dark:text-gray-400","mt-2"],[1,"fixed","inset-0","bg-black","bg-opacity-80","flex","items-center","justify-center","z-50","p-4",3,"click"],[1,"max-w-full","max-h-full","object-contain",3,"src"],[1,"fixed","inset-0","bg-black","bg-opacity-60","flex","items-center","justify-center","z-50","p-4","text-gray-800","dark:text-gray-200","backdrop-blur-sm","animate-fade-in"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","p-6","w-full","max-w-md"],[1,"text-xl","font-bold","mb-4"],[3,"ngSubmit","formGroup"],["for","date",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","date","formControlName","date","id","date",1,"w-full","p-2","border","rounded","mb-4","dark:bg-gray-700","dark:border-gray-600"],[1,"grid","grid-cols-2","gap-4","mb-4"],["for","weight",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","formControlName","weight","id","weight",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","chest",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","formControlName","chest","id","chest",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","waist",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","formControlName","waist","id","waist",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","hips",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","formControlName","hips","id","hips",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","neck",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","formControlName","neck","id","neck",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["for","rightArm",1,"block","text-xs","font-medium","text-gray-600","dark:text-gray-400"],["type","number","formControlName","rightArm","id","rightArm",1,"mt-1","block","w-full","sm:w-1/3","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:text-gray-200","text-lg",3,"placeholder"],["formControlName","notes","placeholder","Notes...",1,"w-full","p-2","border","rounded","mb-4","h-24","dark:bg-gray-700","dark:border-gray-600"],[1,"flex","justify-end","gap-4","text-white"],["type","button",1,"px-4","py-2","rounded","flex","items-center",3,"click"],["name","cancel",1,"h-6","w-6","text-white"],["type","submit",1,"px-4","py-2","bg-primary","text-white","rounded","disabled:opacity-50","flex","items-center",3,"disabled"],["name","save",1,"h-7","w-7","mr-1"],[1,"fixed","inset-0","bg-black","bg-opacity-70","flex","items-center","justify-center","z-50","p-4","animate-fade-in","text-gray-800","dark:text-gray-200"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-xl","p-4","sm:p-6","w-full","max-w-3xl","max-h-[90vh]","overflow-y-auto"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","mb-4"],[1,"flex","items-center","justify-between","w-full","sm:w-auto","mb-2","sm:mb-0"],[1,"text-xl","sm:text-2xl","font-bold","mb-2","sm:mb-0"],[1,"text-gray-500","hover:text-gray-800","dark:hover:text-gray-200",3,"click"],["name","cancel",1,"h-6","w-6"],[1,"flex","items-center","gap-4"],[1,"px-3","py-1.5","text-xs","font-medium","text-gray-600","dark:text-gray-300","bg-gray-100","dark:bg-gray-700","rounded-md","hover:bg-gray-200","dark:hover:bg-gray-600","transition-colors","flex","items-center",3,"click"],["name","change",1,"w-4","h-4","mr-1"],[4,"ngIf"],["class","grid grid-cols-2 gap-4 mb-6",4,"ngIf"],["class","mb-6",4,"ngIf"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400","rounded-lg"],["scope","col",1,"px-2","py-3","rounded-l-lg"],["scope","col",1,"px-2","py-3","text-center"],["scope","col",1,"px-2","py-3","text-center","rounded-r-lg"],["class","border-b dark:border-gray-700",4,"ngFor","ngForOf"],[1,"flex","justify-end","mt-6"],[1,"px-5","py-2.5","rounded-lg","bg-gray-200","hover:bg-gray-300","dark:bg-gray-600","dark:hover:bg-gray-700","text-sm","font-medium","flex","items-center",3,"click"],["name","cancel"],[1,"grid","grid-cols-2","gap-4","mb-6"],[1,"text-center"],["alt","Start photo",1,"w-full","h-48","sm:h-64","object-cover","rounded-md","bg-gray-200","dark:bg-gray-700",3,"src"],[1,"mt-2","font-semibold","text-sm"],["alt","End photo",1,"w-full","h-48","sm:h-64","object-cover","rounded-md","bg-gray-200","dark:bg-gray-700",3,"src"],[1,"mb-6"],[1,"font-semibold","text-center","mb-2"],[1,"relative","w-full","aspect-[4/3]","rounded-md","overflow-hidden","select-none","bg-gray-200","dark:bg-gray-700"],[1,"absolute","inset-0","z-10"],["alt","Start photo",1,"w-full","h-full","object-cover","max-w-none",3,"src"],[1,"absolute","top-2","left-2","bg-black/50","text-white","text-xs","font-bold","py-1","px-2","rounded-full","z-10"],[1,"absolute","inset-0","z-20",3,"ngStyle"],["alt","End photo",1,"w-full","h-full","object-cover","max-w-none",3,"src"],[1,"absolute","top-2","right-2","bg-black/50","text-white","text-xs","font-bold","py-1","px-2","rounded-full","z-10"],[1,"absolute","top-0","bottom-0","bg-white","w-1","pointer-events-none","z-30",3,"ngStyle"],[1,"absolute","top-1/2","-translate-y-1/2","-translate-x-1/2","bg-white","border-2","border-primary","rounded-full","h-8","w-8","flex","items-center","justify-center","shadow-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-primary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M8 9l4-4 4 4m0 6l-4 4-4-4"],["type","range","min","0","max","100",1,"absolute","inset-0","w-full","h-full","cursor-ew-resize","appearance-none","bg-transparent","z-40",2,"--thumb-color","transparent",3,"input","value"],[1,"border-b","dark:border-gray-700"],["scope","row",1,"px-2","py-4","font-medium","whitespace-nowrap"],[1,"px-2","py-4","text-center"],[1,"px-2","py-4","text-center","font-bold",3,"ngClass"]],template:function(e,t){if(e&1){let o=M();a(0,"div",1)(1,"header",2)(2,"h1",3),s(3,"Measurement History"),r(),a(4,"button",4),f("click",function(){return k(o),E(t.openAddEntryModal())}),v(5,"app-icon",5),s(6," ADD PAST ENTRY "),r()(),a(7,"section",6)(8,"h3",7),s(9,"Side-by-Side Comparison"),r(),a(10,"div",8)(11,"select",9),f("change",function(g){return k(o),E(t.onCompareFromChange(g))}),a(12,"option",10),s(13,"-- Select Start Date --"),r(),_(14,Ci,3,5,"option",11),r(),a(15,"select",9),f("change",function(g){return k(o),E(t.onCompareToChange(g))}),a(16,"option",10),s(17,"-- Select End Date --"),r(),_(18,Bi,3,5,"option",11),r(),a(19,"button",12),f("click",function(){return k(o),E(t.openCompareModal(t.compareFromDate,t.compareToDate))}),v(20,"app-icon",13),s(21," COMPARE "),r()()(),_(22,Fi,13,13,"div",14)(23,Di,5,0,"ng-template",null,0,de),r(),_(25,Ai,2,1,"div",15)(26,Oi,41,20,"div",16)(27,$i,35,13,"div",17)}if(e&2){let o=U(24);n(14),d("ngForOf",t.measurementHistory),n(4),d("ngForOf",t.measurementHistory),n(),d("disabled",!t.compareFromDate||!t.compareToDate),n(),d("strokeWidth",2),n(2),d("ngIf",t.measurementHistory.length>0)("ngIfElse",o),n(3),d("ngIf",t.fullScreenImageUrl),n(),d("ngIf",t.isAddEntryModalOpen),n(),d("ngIf",t.comparisonData)}},dependencies:[ee,be,Q,Z,rt,Mt,It,Ae,Ce,Te,Fe,ke,Be,Ee,Pe,Ie,Me,te,xe],encapsulation:2})};var Zn=[{path:"",component:Ge,title:"Profile & Settings"},{path:"personal-bests",component:je,title:"Personal Bests"},{path:"measurements",component:$e,title:"Body Measurements"}];export{Zn as PROFILE_SETTINGS_ROUTES};
