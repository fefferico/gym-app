import{La as d,ca as a,na as c,oa as o,ua as u,ya as n}from"./chunk-2TJAW5PQ.js";var h=class l{constructor(e,i){this.el=e;this.renderer=i}pressDisabled=!1;shortPress=new n;longPress=new n;pressRelease=new n;timeoutId;isLongPress=!1;isScrolling=!1;startX=0;startY=0;scrollThreshold=10;onContextMenu(e){e.preventDefault()}onPressStart(e){this.pressDisabled||(e instanceof TouchEvent&&(this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY),this.isLongPress=!1,this.isScrolling=!1,this.renderer.addClass(this.el.nativeElement,"is-pressed"),this.timeoutId=setTimeout(()=>{this.isLongPress=!0,navigator.vibrate&&navigator.vibrate(50),this.longPress.emit(e)},500))}onTouchMove(e){if(this.isLongPress||this.isScrolling)return;let i=e.touches[0].clientX,t=e.touches[0].clientY,r=Math.abs(this.startX-i),s=Math.abs(this.startY-t);(r>this.scrollThreshold||s>this.scrollThreshold)&&(this.isScrolling=!0,clearTimeout(this.timeoutId),this.renderer.removeClass(this.el.nativeElement,"is-pressed"))}onPressEnd(e){if(clearTimeout(this.timeoutId),this.renderer.removeClass(this.el.nativeElement,"is-pressed"),document.querySelectorAll(".is-pressed").forEach(i=>{i.classList.remove("is-pressed")}),e.type==="mouseleave"||e.type==="touchcancel"||this.isScrolling){this.isScrolling=!1;return}this.isLongPress||(navigator.vibrate&&navigator.vibrate(50),this.shortPress.emit(e)),this.pressRelease.emit(e)}static \u0275fac=function(i){return new(i||l)(o(a),o(c))};static \u0275dir=u({type:l,selectors:[["","appPressScroll",""]],hostBindings:function(i,t){i&1&&d("contextmenu",function(s){return t.onContextMenu(s)})("mousedown",function(s){return t.onPressStart(s)})("touchstart",function(s){return t.onPressStart(s)})("touchmove",function(s){return t.onTouchMove(s)})("mouseup",function(s){return t.onPressEnd(s)})("mouseleave",function(s){return t.onPressEnd(s)})("touchend",function(s){return t.onPressEnd(s)})("touchcancel",function(s){return t.onPressEnd(s)})},inputs:{pressDisabled:"pressDisabled"},outputs:{shortPress:"shortPress",longPress:"longPress",pressRelease:"pressRelease"}})};export{h as a};
