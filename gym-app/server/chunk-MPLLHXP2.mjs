import './polyfills.server.mjs';
import{a as ke}from"./chunk-4R6637LM.mjs";import{a as we,b as Se,c as Ce,d as De,e as Pe}from"./chunk-D37BZRQW.mjs";import{a as ve,b as _e}from"./chunk-V2MHWZQU.mjs";import{E as xe,a as D,b as te,c as w,d as re,e as ie,g as ne,h as oe,i as ae,k as le,l as de,m as se,n as me,o as ce,p as ue,q as ge,r as pe,t as ye,u as fe,v as he,w as be}from"./chunk-FG43AHJK.mjs";import{$ as R,$a as E,B as L,Cb as H,Ga as d,Ha as o,I as x,Ia as r,Ja as g,M as h,N as b,Na as v,O as _,Oa as y,P as I,Pa as m,Sb as z,T as V,Tb as Z,Ub as J,_a as s,_b as K,ab as k,bb as j,bc as Q,ec as U,h as F,ib as O,j as A,ja as a,nb as N,ob as $,pb as q,ra as G,sc as X,ua as W,v as M,vc as Y,wa as u,wb as C,wc as ee,z as B}from"./chunk-AZOTOOYO.mjs";import{h as T}from"./chunk-S6KH3LOX.mjs";var P=class n{transform(e,t=!1){if(e==null)return"";let i=Number(e);return t?`Day ${i}`:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][i]||`Day ${i}`}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=W({name:"dayOfWeek",type:n,pure:!0})};var Fe=n=>({"border-red-500 dark:border-red-400":n});function Ie(n,e){if(n&1){let t=v();o(0,"button",36),y("click",function(){h(t);let l=m(2);return b(l.enableEditModeFromView())}),_(),o(1,"svg",34),g(2,"path",37),r(),s(3," Edit Program "),r()}}function Ve(n,e){if(n&1){let t=v();o(0,"div",31),u(1,Ie,4,0,"button",32),o(2,"button",33),y("click",function(){h(t);let l=m();return b(l.deleteProgram())}),_(),o(3,"svg",34),g(4,"path",35),r(),s(5," Delete Program "),r()()}if(n&2){let t=m();a(),d("ngIf",t.isViewMode)}}function Ee(n,e){n&1&&(o(0,"span"),s(1,"Program name is required."),r())}function Oe(n,e){if(n&1&&(o(0,"div",38),u(1,Ee,2,0,"span",39),r()),n&2){let t=m();a(),d("ngIf",t.f.name.errors==null?null:t.f.name.errors.required)}}function Ne(n,e){if(n&1){let t=v();o(0,"button",40),y("click",function(){h(t);let l=m();return b(l.addScheduledDay())}),s(1," + Add Day to Schedule "),r()}}function Ae(n,e){n&1&&(o(0,"div",59),_(),o(1,"svg",60),g(2,"path",61),r()())}function Be(n,e){if(n&1){let t=v();o(0,"button",62),y("click",function(){h(t);let l=m().index,f=m(2);return b(f.removeScheduledDay(l))}),_(),o(1,"svg",63),g(2,"path",64),r(),s(3," Remove Day "),r()}}function Le(n,e){if(n&1&&(o(0,"option",65),s(1),r()),n&2){let t=e.$implicit;d("value",t.value),a(),E(t.label)}}function Re(n,e){n&1&&(o(0,"div",38),s(1," Day is required. "),r())}function Ge(n,e){if(n&1){let t=v();o(0,"button",66),y("click",function(){h(t);let l=m().index,f=m(2);return b(f.openRoutineSelectionModal(l))}),s(1," Select "),r()}}function We(n,e){n&1&&(o(0,"div",38),s(1," Routine selection is required. "),r())}function je(n,e){if(n&1&&(o(0,"div",43),u(1,Ae,3,0,"div",44),o(2,"div",45)(3,"h4",46),s(4),N(5,"dayOfWeek"),r(),u(6,Be,4,0,"button",47),r(),o(7,"div",48)(8,"div")(9,"label",49),s(10),r(),o(11,"select",50),u(12,Le,2,2,"option",51),r(),u(13,Re,2,0,"div",12),r(),o(14,"div")(15,"label",49),s(16,"Routine"),r(),o(17,"div",52),g(18,"input",53),u(19,Ge,2,0,"button",54),r(),g(20,"input",55),u(21,We,2,0,"div",12),r(),o(22,"div",56)(23,"label",49),s(24,"Time (Optional)"),r(),g(25,"input",57),r(),o(26,"div",56)(27,"label",49),s(28,"Notes for this Day (Optional)"),r(),g(29,"textarea",58),r()()()),n&2){let t,i,l,f,S,c=e.index,p=m(2);d("formGroupName",c)("cdkDragDisabled",p.isViewMode),a(),d("ngIf",!p.isViewMode),a(3),k(" ",q(5,20,(t=p.getScheduleDayControl(c).get("dayOfWeek"))==null?null:t.value,p.f.cycleLength.value>0)||"Scheduled Day "+(c+1)," "),a(2),d("ngIf",!p.isViewMode),a(3),d("for","dayOfWeek-"+c),a(),k(" ",p.f.cycleLength.value>0?"Cycle Day Number":"Day of Week"," "),a(),d("id","dayOfWeek-"+c),a(),d("ngForOf",p.currentDayOptions()),a(),d("ngIf",((i=p.getScheduleDayControl(c).get("dayOfWeek"))==null?null:i.invalid)&&((i=p.getScheduleDayControl(c).get("dayOfWeek"))==null?null:i.touched)),a(2),d("for","routineName-"+c),a(3),d("id","routineName-"+c)("value",((l=p.getScheduleDayControl(c).get("routineName"))==null?null:l.value)||((l=p.getScheduleDayControl(c).get("routineId"))!=null&&l.value?"Loading routine...":"Select Routine"))("ngClass",O(23,Fe,((f=p.getScheduleDayControl(c).get("routineId"))==null?null:f.invalid)&&((f=p.getScheduleDayControl(c).get("routineId"))==null?null:f.touched))),a(),d("ngIf",!p.isViewMode),a(2),d("ngIf",((S=p.getScheduleDayControl(c).get("routineId"))==null?null:S.invalid)&&((S=p.getScheduleDayControl(c).get("routineId"))==null?null:S.touched)),a(2),d("for","timeOfDay-"+c),a(2),d("id","timeOfDay-"+c),a(2),d("for","dayNotes-"+c),a(2),d("id","dayNotes-"+c)}}function $e(n,e){if(n&1){let t=v();o(0,"div",41),y("cdkDropListDropped",function(l){h(t);let f=m();return b(f.onScheduleDrop(l))}),u(1,je,30,25,"div",42),r()}if(n&2){let t=m();d("cdkDropListData",t.scheduleFormGroups),a(),d("ngForOf",t.scheduleFormArray.controls)}}function qe(n,e){if(n&1){let t=v();o(0,"button",69),y("click",function(){h(t);let l=m(2);return b(l.addScheduledDay())}),s(1," Add the first scheduled day "),r()}}function He(n,e){if(n&1&&(o(0,"div",67)(1,"p"),s(2,"No days scheduled for this program yet."),r(),u(3,qe,2,0,"button",68),r()),n&2){let t=m();a(3),d("ngIf",!t.isViewMode)}}function ze(n,e){if(n&1&&(o(0,"div",70)(1,"a",71),s(2," Cancel "),r(),o(3,"button",72),s(4),r()()),n&2){let t=m();a(3),d("disabled",t.programForm.invalid&&(t.programForm.touched||t.programForm.dirty)),a(),k(" ",t.isNewMode?"Create Program":"Save Changes"," ")}}function Ze(n,e){if(n&1){let t=v();o(0,"li",91),y("click",function(){let l=h(t).$implicit,f=m(2);return b(f.selectRoutineForDay(l))}),o(1,"div")(2,"span",92),s(3),r(),o(4,"span",93),s(5),N(6,"titlecase"),r()(),_(),o(7,"svg",94),g(8,"path",95),r()()}if(n&2){let t=e.$implicit;a(3),E(t.name),a(2),j("",$(6,3,t.goal)," - ",t.exercises.length," exercises")}}function Je(n,e){n&1&&(o(0,"li",96),s(1,"No routines match your search."),r())}function Ke(n,e){n&1&&(o(0,"li",96),s(1,"No routines available to select. Create some routines first!"),r())}function Qe(n,e){if(n&1){let t=v();o(0,"div",73),y("click",function(){h(t);let l=m();return b(l.closeRoutineSelectionModal())}),o(1,"div",74),y("click",function(l){return h(t),b(l.stopPropagation())}),o(2,"div",75)(3,"div",76)(4,"div",77)(5,"div",78)(6,"h3",79),s(7,"Select a Routine"),r(),o(8,"button",80),y("click",function(){h(t);let l=m();return b(l.closeRoutineSelectionModal())}),_(),o(9,"svg",81),g(10,"path",82),r()()(),I(),o(11,"div",83)(12,"input",84),y("ngModelChange",function(l){h(t);let f=m();return b(f.modalSearchTerm.set(l))}),r()(),o(13,"div",85)(14,"ul",86),u(15,Ze,9,5,"li",87)(16,Je,2,0,"li",88)(17,Ke,2,0,"li",88),r()()()()(),o(18,"div",89)(19,"button",90),y("click",function(){h(t);let l=m();return b(l.closeRoutineSelectionModal())}),s(20," Cancel "),r()()()()}if(n&2){let t=m();a(12),d("ngModel",t.modalSearchTerm()),a(3),d("ngForOf",t.filteredAvailableRoutines()),a(),d("ngIf",t.filteredAvailableRoutines().length===0&&t.availableRoutines.length>0),a(),d("ngIf",t.availableRoutines.length===0)}}var Te=class n{fb=x(ye);router=x(Y);route=x(X);trainingProgramService=x(ke);workoutService=x(xe);spinnerService=x(ve);alertService=x(be);toastService=x(_e);cdr=x(H);programForm;isEditMode=!1;isNewMode=!1;isViewMode=!1;currentProgramId=null;routeSub;isRoutineModalOpen=V(!1);availableRoutines=[];modalSearchTerm=V("");targetScheduleIndexForRoutine=null;dayOfWeekOptions=[{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"},{value:0,label:"Sunday"}];cycleDayOptions=C(()=>{let e=this.programForm.get("cycleLength")?.value;return typeof e=="number"&&e>0?Array.from({length:e},(t,i)=>({value:i+1,label:`Day ${i+1}`})):[]});currentDayOptions=C(()=>this.programForm.get("cycleLength")?.value>0?this.cycleDayOptions():this.dayOfWeekOptions);filteredAvailableRoutines=C(()=>{let e=this.modalSearchTerm().toLowerCase();return e?this.availableRoutines.filter(t=>t.name.toLowerCase().includes(e)):this.availableRoutines});constructor(){this.programForm=this.fb.group({name:["",w.required],description:[""],programNotes:[""],startDate:[null],cycleLength:[null,[w.min(1)]],schedule:this.fb.array([])})}platformId=x(R);ngOnInit(){U(this.platformId)&&window.scrollTo(0,0),this.loadAvailableRoutines(),this.routeSub=this.route.data.pipe(B(e=>{let t=e.mode;return this.currentProgramId=this.route.snapshot.paramMap.get("programId"),this.isNewMode=t==="new",this.isViewMode=t==="view"&&!!this.currentProgramId,this.isEditMode=t==="edit"&&!!this.currentProgramId,this.isNewMode?(this.programForm.reset({cycleLength:null,schedule:[]}),this.updateFormEnabledState(),F(null)):this.currentProgramId?this.trainingProgramService.getProgramById(this.currentProgramId):(this.router.navigate(["/training-programs"]),F(null))}),L(e=>{e?(this.patchFormWithProgramData(e),this.updateFormEnabledState()):!this.isNewMode&&this.currentProgramId?this.router.navigate(["/training-programs"]):this.isNewMode&&this.updateFormEnabledState()})).subscribe(),this.programForm.get("cycleLength")?.valueChanges.subscribe(e=>{this.scheduleFormArray.controls.forEach(t=>{t.get("dayOfWeek")?.setValue(this.currentDayOptions()[0]?.value||1)})})}get scheduleFormArray(){return this.programForm.get("schedule")}loadAvailableRoutines(){this.workoutService.routines$.pipe(M(1)).subscribe(e=>{this.availableRoutines=e.sort((t,i)=>t.name.localeCompare(i.name))})}patchFormWithProgramData(e){this.programForm.patchValue({name:e.name,description:e.description,programNotes:e.programNotes,startDate:e.startDate?new Date(e.startDate).toISOString().split("T")[0]:null,cycleLength:e.cycleLength??null}),this.scheduleFormArray.clear(),e.schedule.forEach(t=>{this.scheduleFormArray.push(this.createScheduledDayGroup(t))}),this.updateFormEnabledState()}createScheduledDayGroup(e){let t=this.currentDayOptions()[0]?.value||1;return this.fb.group({id:[e?.id||D()],dayOfWeek:[e?.dayOfWeek??t,w.required],routineId:[e?.routineId??"",w.required],routineName:[e?.routineName??""],notes:[e?.notes??""],timeOfDay:[e?.timeOfDay??""]})}addScheduledDay(){this.isViewMode||(this.scheduleFormArray.push(this.createScheduledDayGroup()),this.cdr.detectChanges(),setTimeout(()=>{let e=document.querySelectorAll(".scheduled-day-card");e.length>0&&e[e.length-1].scrollIntoView({behavior:"smooth",block:"center"})},0))}removeScheduledDay(e){this.isViewMode||this.scheduleFormArray.removeAt(e)}get scheduleFormGroups(){return this.scheduleFormArray.controls}onScheduleDrop(e){this.isViewMode||(we(this.scheduleFormArray.controls,e.previousIndex,e.currentIndex),this.scheduleFormArray.updateValueAndValidity())}openRoutineSelectionModal(e){this.isViewMode||(this.targetScheduleIndexForRoutine=e,this.modalSearchTerm.set(""),this.isRoutineModalOpen.set(!0))}closeRoutineSelectionModal(){this.isRoutineModalOpen.set(!1),this.targetScheduleIndexForRoutine=null}selectRoutineForDay(e){this.targetScheduleIndexForRoutine!==null&&this.scheduleFormArray.at(this.targetScheduleIndexForRoutine).patchValue({routineId:e.id,routineName:e.name}),this.closeRoutineSelectionModal()}updateFormEnabledState(){this.isViewMode?this.programForm.disable():this.programForm.enable()}enableEditModeFromView(){this.isViewMode&&this.currentProgramId&&this.router.navigate(["/training-programs/edit",this.currentProgramId])}onSubmit(){return T(this,null,function*(){if(this.isViewMode)return;if(this.programForm.invalid){this.programForm.markAllAsTouched(),this.toastService.error("Please fill all required fields and ensure each scheduled day has a routine selected.",0,"Validation Error"),console.log("Form errors:",this.programForm.errors,this.scheduleFormArray.errors),this.scheduleFormArray.controls.forEach((i,l)=>{i.invalid&&console.log(`Schedule Day ${l+1} errors:`,i.errors)});return}let e=this.programForm.getRawValue(),t={id:this.currentProgramId||D(),name:e.name,description:e.description,programNotes:e.programNotes,startDate:e.startDate||null,cycleLength:e.cycleLength||null,schedule:e.schedule.map(i=>({id:i.id||D(),dayOfWeek:i.dayOfWeek,routineId:i.routineId,routineName:i.routineName,notes:i.notes,timeOfDay:i.timeOfDay})),isActive:!1};try{if(this.spinnerService.show("Saving program..."),this.isNewMode)yield this.trainingProgramService.addProgram(t);else if(this.isEditMode&&this.currentProgramId){let i=yield A(this.trainingProgramService.getProgramById(this.currentProgramId).pipe(M(1)));t.isActive=i?.isActive??!1,yield this.trainingProgramService.updateProgram(t)}this.router.navigate(["/training-programs"])}catch(i){console.error("Error saving program:",i),this.toastService.error("Failed to save program.",0,"Save Error")}finally{this.spinnerService.hide()}})}deleteProgram(){return T(this,null,function*(){if(!this.currentProgramId){this.toastService.error("No program selected for deletion.",0,"Deletion Error");return}try{this.spinnerService.show("Deleting program..."),yield this.trainingProgramService.deleteProgram(this.currentProgramId),(this.router.url.includes(`/training-programs/edit/${this.currentProgramId}`)||this.router.url.includes(`/training-programs/view/${this.currentProgramId}`))&&this.router.navigate(["/training-programs"])}catch(e){console.error("Error during program deletion process in component:",e),this.toastService.error("An unexpected error occurred while deleting the program.",0,"Deletion Error")}finally{this.spinnerService.hide()}})}ngOnDestroy(){this.routeSub&&this.routeSub.unsubscribe()}get f(){return this.programForm.controls}getScheduleDayControl(e){return this.scheduleFormArray.at(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=G({type:n,selectors:[["app-training-program-builder"]],decls:44,vars:12,consts:[[1,"container","mx-auto","p-2","sm:p-4"],[1,"mb-6","pb-4","border-b","border-gray-200","dark:border-gray-700"],[1,"flex","items-center"],["routerLink","/training-programs",1,"text-gray-600","dark:text-gray-300","hover:text-primary","dark:hover:text-primary-light","p-2","-ml-2","rounded-full","focus:outline-none","focus:ring-2","focus:ring-primary-focus"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-xl","sm:text-2xl","md:text-3xl","font-bold","text-gray-800","dark:text-gray-200","ml-2","truncate"],["class","mt-4 flex flex-wrap gap-2 justify-start",4,"ngIf"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"p-4","sm:p-6","bg-white","dark:bg-gray-800","rounded-lg","shadow-md","space-y-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","text","id","name","formControlName","name",1,"mt-1","block","w-full","p-2","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:border-gray-600",3,"ngClass"],["class","text-red-500 dark:text-red-400 text-xs mt-1",4,"ngIf"],["for","description",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","description","formControlName","description","rows","3",1,"mt-1","block","w-full","p-2","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:border-gray-600"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["for","startDate",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","date","id","startDate","formControlName","startDate",1,"mt-1","block","w-full","p-2","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:border-gray-600","dark:text-gray-300","dark:[color-scheme:dark]"],["for","cycleLength",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["type","number","id","cycleLength","formControlName","cycleLength","min","1","placeholder","e.g., 7 for weekly",1,"mt-1","block","w-full","p-2","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:border-gray-600"],[1,"text-xs","text-gray-500","dark:text-gray-400","mt-1"],["for","programNotes",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300"],["id","programNotes","formControlName","programNotes","rows","2",1,"mt-1","block","w-full","p-2","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:border-gray-600"],[1,"p-4","sm:p-6","bg-white","dark:bg-gray-800","rounded-lg","shadow-md"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-semibold","text-gray-700","dark:text-gray-300"],["type","button","class","bg-blue-500 hover:bg-blue-600 text-white text-sm font-medium py-1.5 px-3 rounded-md shadow-sm",3,"click",4,"ngIf"],["cdkDropList","","formArrayName","schedule","class","space-y-4",3,"cdkDropListData","cdkDropListDropped",4,"ngIf"],["class","text-center py-6 text-gray-500 dark:text-gray-400 border border-dashed dark:border-gray-700 rounded-md",4,"ngIf"],["class","pt-6 flex justify-end space-x-3",4,"ngIf"],["class","fixed inset-0 bg-gray-600 bg-opacity-75 transition-opacity overflow-y-auto h-full w-full z-[70] flex items-center justify-center p-4",3,"click",4,"ngIf"],[1,"mt-4","flex","flex-wrap","gap-2","justify-start"],["type","button","class","bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-3 rounded-md shadow-sm text-xs sm:text-sm flex items-center",3,"click",4,"ngIf"],["type","button",1,"bg-red-500","hover:bg-red-600","text-white","font-semibold","py-2","px-3","rounded-md","shadow-sm","text-xs","sm:text-sm","flex","items-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-4","sm:size-5","mr-1"],["stroke-linecap","round","stroke-linejoin","round","d","m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"],["type","button",1,"bg-yellow-500","hover:bg-yellow-600","text-white","font-semibold","py-2","px-3","rounded-md","shadow-sm","text-xs","sm:text-sm","flex","items-center",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"],[1,"text-red-500","dark:text-red-400","text-xs","mt-1"],[4,"ngIf"],["type","button",1,"bg-blue-500","hover:bg-blue-600","text-white","text-sm","font-medium","py-1.5","px-3","rounded-md","shadow-sm",3,"click"],["cdkDropList","","formArrayName","schedule",1,"space-y-4",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","","class","scheduled-day-card p-3 border rounded-lg shadow-sm bg-gray-50 dark:bg-gray-700/50 dark:border-gray-600 relative",3,"formGroupName","cdkDragDisabled",4,"ngFor","ngForOf"],["cdkDrag","",1,"scheduled-day-card","p-3","border","rounded-lg","shadow-sm","bg-gray-50","dark:bg-gray-700/50","dark:border-gray-600","relative",3,"formGroupName","cdkDragDisabled"],["cdkDragHandle","","class","absolute top-2 right-2 cursor-grab p-1 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300","title","Drag to reorder day",4,"ngIf"],[1,"flex","justify-between","items-center","mb-3"],[1,"text-md","font-medium","text-gray-800","dark:text-gray-100"],["type","button","class","text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 text-xs font-medium p-1 rounded hover:bg-red-100 dark:hover:bg-red-900/30",3,"click",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3"],[1,"block","text-xs","font-medium","text-gray-700","dark:text-gray-300",3,"for"],["formControlName","dayOfWeek",1,"mt-1","block","w-full","p-2","text-sm","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:border-gray-500",3,"id"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-1","flex","rounded-md","shadow-sm"],["type","text","readonly","",1,"flex-1","min-w-0","block","w-full","px-3","py-2","text-sm","rounded-none","rounded-l-md","border-gray-300","dark:border-gray-500","dark:bg-gray-600","cursor-default",3,"id","value","ngClass"],["type","button","class","inline-flex items-center px-3 py-2 border border-l-0 border-gray-300 dark:border-gray-500 rounded-r-md bg-gray-50 dark:bg-gray-500 text-gray-500 dark:text-gray-300 text-sm hover:bg-gray-100 dark:hover:bg-gray-400",3,"click",4,"ngIf"],["type","hidden","formControlName","routineId"],[1,"sm:col-span-2"],["type","text","formControlName","timeOfDay","placeholder","e.g., AM, PM, 08:00",1,"mt-1","block","w-full","p-2","text-sm","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:border-gray-500",3,"id"],["formControlName","notes","rows","2",1,"mt-1","block","w-full","p-2","text-sm","border","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-600","dark:border-gray-500",3,"id"],["cdkDragHandle","","title","Drag to reorder day",1,"absolute","top-2","right-2","cursor-grab","p-1","text-gray-400","hover:text-gray-600","dark:text-gray-500","dark:hover:text-gray-300"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-5","h-5"],["fill-rule","evenodd","d","M10 3a.75.75 0 01.75.75v12.5a.75.75 0 01-1.5 0V3.75A.75.75 0 0110 3ZM5.75 6.75a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5Zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5Z","clip-rule","evenodd"],["type","button",1,"text-red-500","hover:text-red-700","dark:text-red-400","dark:hover:text-red-300","text-xs","font-medium","p-1","rounded","hover:bg-red-100","dark:hover:bg-red-900/30",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 16 16","fill","currentColor",1,"w-4","h-4","inline-block","mr-1"],["fill-rule","evenodd","d","M5 3.25A2.25 2.25 0 002.75 5.5v5A2.25 2.25 0 005 12.75h6a2.25 2.25 0 002.25-2.25v-5A2.25 2.25 0 0011 3.25H5Zm.97 3.97a.75.75 0 011.06 0L8 8.28l.97-.97a.75.75 0 111.06 1.06L9.06 9.25l.97.97a.75.75 0 11-1.06 1.06L8 10.43l-.97.97a.75.75 0 01-1.06-1.06L6.94 9.25l-.97-.97a.75.75 0 010-1.06Z","clip-rule","evenodd"],[3,"value"],["type","button",1,"inline-flex","items-center","px-3","py-2","border","border-l-0","border-gray-300","dark:border-gray-500","rounded-r-md","bg-gray-50","dark:bg-gray-500","text-gray-500","dark:text-gray-300","text-sm","hover:bg-gray-100","dark:hover:bg-gray-400",3,"click"],[1,"text-center","py-6","text-gray-500","dark:text-gray-400","border","border-dashed","dark:border-gray-700","rounded-md"],["type","button","class","mt-2 text-sm text-primary hover:underline",3,"click",4,"ngIf"],["type","button",1,"mt-2","text-sm","text-primary","hover:underline",3,"click"],[1,"pt-6","flex","justify-end","space-x-3"],["routerLink","/training-programs",1,"px-4","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","dark:text-gray-200","hover:bg-gray-50","dark:hover:bg-gray-700"],["type","submit",1,"px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-primary","hover:bg-primary-dark","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-dark","disabled:opacity-50",3,"disabled"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-75","transition-opacity","overflow-y-auto","h-full","w-full","z-[70]","flex","items-center","justify-center","p-4",3,"click"],[1,"relative","transform","overflow-hidden","rounded-lg","bg-white","dark:bg-gray-800","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:max-w-lg",3,"click"],[1,"bg-white","dark:bg-gray-800","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start","w-full"],[1,"mt-3","text-center","sm:mt-0","sm:text-left","w-full"],[1,"flex","justify-between","items-center","pb-3"],["id","modal-title",1,"text-xl","font-semibold","leading-6","text-gray-900","dark:text-gray-100"],["type","button",1,"p-1","rounded-full","text-gray-400","hover:text-gray-600","dark:hover:text-gray-300","focus:outline-none",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"my-4"],["type","text","placeholder","Search routines...",1,"w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","shadow-sm","focus:ring-primary","focus:border-primary","dark:bg-gray-700","dark:text-gray-200",3,"ngModelChange","ngModel"],[1,"mt-2","max-h-80","overflow-y-auto","pr-2","custom-scrollbar"],[1,"space-y-1"],["class","p-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md cursor-pointer transition-colors flex justify-between items-center",3,"click",4,"ngFor","ngForOf"],["class","text-gray-500 dark:text-gray-400 text-center p-4",4,"ngIf"],[1,"bg-gray-50","dark:bg-gray-700","px-4","py-3","sm:flex","sm:flex-row-reverse","sm:px-6"],["type","button",1,"mt-3","inline-flex","w-full","justify-center","rounded-md","bg-white","dark:bg-gray-600","px-3","py-2","text-sm","font-semibold","text-gray-900","dark:text-gray-200","shadow-sm","ring-1","ring-inset","ring-gray-300","dark:ring-gray-500","hover:bg-gray-50","dark:hover:bg-gray-500","sm:mt-0","sm:w-auto",3,"click"],[1,"p-3","hover:bg-gray-100","dark:hover:bg-gray-700","rounded-md","cursor-pointer","transition-colors","flex","justify-between","items-center",3,"click"],[1,"font-medium","text-gray-800","dark:text-gray-200"],[1,"block","text-xs","text-gray-500","dark:text-gray-400"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-5","h-5","text-primary","dark:text-primary-light"],["fill-rule","evenodd","d","M8.22 5.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 010-1.06Z","clip-rule","evenodd"],[1,"text-gray-500","dark:text-gray-400","text-center","p-4"]],template:function(t,i){if(t&1&&(o(0,"div",0)(1,"header",1)(2,"div",2)(3,"button",3),_(),o(4,"svg",4),g(5,"path",5),r()(),I(),o(6,"h1",6),s(7),r()(),u(8,Ve,6,1,"div",7),r(),o(9,"form",8),y("ngSubmit",function(){return i.onSubmit()}),o(10,"section",9)(11,"div")(12,"label",10),s(13,"Program Name"),r(),g(14,"input",11),u(15,Oe,2,1,"div",12),r(),o(16,"div")(17,"label",13),s(18,"Description (Optional)"),r(),g(19,"textarea",14),r(),o(20,"div",15)(21,"div")(22,"label",16),s(23,"Start Date (Optional)"),r(),g(24,"input",17),r(),o(25,"div")(26,"label",18),s(27,"Cycle Length (Optional)"),r(),g(28,"input",19),o(29,"p",20),s(30,"Leave blank or 0 for a standard 7-day weekly cycle. Otherwise, enter number of days in the cycle (e.g., 3 for a 3-day split)."),r()()(),o(31,"div")(32,"label",21),s(33,"General Program Notes (Optional)"),r(),g(34,"textarea",22),r()(),o(35,"section",23)(36,"div",24)(37,"h2",25),s(38,"Schedule"),r(),u(39,Ne,2,0,"button",26),r(),u(40,$e,2,2,"div",27)(41,He,4,1,"div",28),r(),u(42,ze,5,2,"div",29),r(),u(43,Qe,21,4,"div",30),r()),t&2){let l;a(7),k(" ",i.isNewMode?"New Training Program":i.isViewMode?((l=i.programForm.get("name"))==null?null:l.value)||"View Program":"Edit: "+(((l=i.programForm.get("name"))==null?null:l.value)||"Program")," "),a(),d("ngIf",!i.isNewMode&&i.currentProgramId),a(),d("formGroup",i.programForm),a(5),d("ngClass",O(10,Fe,i.f.name.invalid&&i.f.name.touched)),a(),d("ngIf",i.f.name.invalid&&(i.f.name.dirty||i.f.name.touched)),a(24),d("ngIf",!i.isViewMode),a(),d("ngIf",i.scheduleFormArray.length>0),a(),d("ngIf",i.scheduleFormArray.length===0),a(),d("ngIf",!i.isViewMode),a(),d("ngIf",i.isRoutineModalOpen())}},dependencies:[Q,z,Z,J,K,he,oe,ue,ge,te,ae,ce,re,ie,pe,le,me,de,se,ee,Pe,De,Ce,Se,P,fe,ne],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:.5rem;box-shadow:0 5px 5px -3px #0000001a,0 8px 10px 1px #00000012,0 3px 14px 2px #0000000f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.2;border:2px dashed #9ca3af;background-color:#f3f4f6;transition:transform .25s cubic-bezier(0,0,.2,1);border-radius:.5rem}.dark[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{border-color:#4b5563;background-color:#374151}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.scheduled-day-card.cdk-drop-list-dragging[_ngcontent-%COMP%]   .scheduled-day-card[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#9ca3af;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}.dark[_ngcontent-%COMP%]   .custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4b5563}.dark[_ngcontent-%COMP%]   .custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}"]})};export{Te as TrainingProgramBuilderComponent};
